const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-K0KTNdjV.js","assets/lib/@mui/joy-DjFlsSMO.js","assets/lib/react-markdown-6jwEm186.js","assets/Home-B7KCIf-Z.css"])))=>i.map(i=>d[i]);
var rz=Object.defineProperty;var sz=(t,e,i)=>e in t?rz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var me=(t,e,i)=>sz(t,typeof e!="symbol"?e+"":e,i);import{a as nz,b as az,r as Ve,t as oz,j as Vr,B as wM,C as lz}from"./lib/@mui/joy-DjFlsSMO.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}})();var uz=Object.create,R1=Object.defineProperty,cz=Object.getOwnPropertyDescriptor,hz=Object.getOwnPropertyNames,dz=Object.getPrototypeOf,fz=Object.prototype.hasOwnProperty,CM=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,i)=>(typeof require<"u"?require:e)[i]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),b=(t,e)=>()=>(t&&(e=t(t=0)),e),ds=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),_n=(t,e)=>{for(var i in e)R1(t,i,{get:e[i],enumerable:!0})},pz=(t,e,i,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of hz(e))!fz.call(t,s)&&s!==i&&R1(t,s,{get:()=>e[s],enumerable:!(r=cz(e,s))||r.enumerable});return t},ho=(t,e,i)=>(i=t!=null?uz(dz(t)):{},pz(R1(i,"default",{value:t,enumerable:!0}),t)),ny=(t,e,i,r)=>{for(var s=e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(s=l(s)||s);return s},I,Uf,El,ke,$=b(()=>{I=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t.ShapeBuilder="shape-builder",t.Batcher="batcher",t))(I||{}),Uf=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},El=(t,e)=>Uf(t).priority??e,ke={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(Uf).forEach(e=>{e.type.forEach(i=>{var r,s;return(s=(r=this._removeHandlers)[i])==null?void 0:s.call(r,e)})}),this},add(...t){return t.map(Uf).forEach(e=>{e.type.forEach(i=>{var a,l;let r=this._addHandlers,s=this._queue;r[i]?(a=r[i])==null||a.call(r,e):(s[i]=s[i]||[],(l=s[i])==null||l.push(e))})}),this},handle(t,e,i){var l;let r=this._addHandlers,s=this._removeHandlers;if(r[t]||s[t])throw new Error(`Extension type ${t} already has a handler`);r[t]=e,s[t]=i;let a=this._queue;return a[t]&&((l=a[t])==null||l.forEach(c=>e(c)),delete a[t]),this},handleByMap(t,e){return this.handle(t,i=>{i.name&&(e[i.name]=i.ref)},i=>{i.name&&delete e[i.name]})},handleByNamedList(t,e,i=-1){return this.handle(t,r=>{e.findIndex(s=>s.name===r.name)>=0||(e.push({name:r.name,value:r.ref}),e.sort((s,a)=>El(a.value,i)-El(s.value,i)))},r=>{let s=e.findIndex(a=>a.name===r.name);s!==-1&&e.splice(s,1)})},handleByList(t,e,i=-1){return this.handle(t,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((s,a)=>El(a,i)-El(s,i)))},r=>{let s=e.indexOf(r.ref);s!==-1&&e.splice(s,1)})},mixin(t,...e){for(let i of e)Object.defineProperties(t.prototype,Object.getOwnPropertyDescriptors(i))}}}),mz=ds((t,e)=>{var i=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function a(f,p,g){this.fn=f,this.context=p,this.once=g||!1}function l(f,p,g,y,v){if(typeof g!="function")throw new TypeError("The listener must be a function");var x=new a(g,y||f,v),A=r?r+p:p;return f._events[A]?f._events[A].fn?f._events[A]=[f._events[A],x]:f._events[A].push(x):(f._events[A]=x,f._eventsCount++),f}function c(f,p){--f._eventsCount===0?f._events=new s:delete f._events[p]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var f=[],p,g;if(this._eventsCount===0)return f;for(g in p=this._events)i.call(p,g)&&f.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(p)):f},h.prototype.listeners=function(f){var p=r?r+f:f,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var y=0,v=g.length,x=new Array(v);y<v;y++)x[y]=g[y].fn;return x},h.prototype.listenerCount=function(f){var p=r?r+f:f,g=this._events[p];return g?g.fn?1:g.length:0},h.prototype.emit=function(f,p,g,y,v,x){var A=r?r+f:f;if(!this._events[A])return!1;var S=this._events[A],w=arguments.length,E,B;if(S.fn){switch(S.once&&this.removeListener(f,S.fn,void 0,!0),w){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,g),!0;case 4:return S.fn.call(S.context,p,g,y),!0;case 5:return S.fn.call(S.context,p,g,y,v),!0;case 6:return S.fn.call(S.context,p,g,y,v,x),!0}for(B=1,E=new Array(w-1);B<w;B++)E[B-1]=arguments[B];S.fn.apply(S.context,E)}else{var G=S.length,U;for(B=0;B<G;B++)switch(S[B].once&&this.removeListener(f,S[B].fn,void 0,!0),w){case 1:S[B].fn.call(S[B].context);break;case 2:S[B].fn.call(S[B].context,p);break;case 3:S[B].fn.call(S[B].context,p,g);break;case 4:S[B].fn.call(S[B].context,p,g,y);break;default:if(!E)for(U=1,E=new Array(w-1);U<w;U++)E[U-1]=arguments[U];S[B].fn.apply(S[B].context,E)}}return!0},h.prototype.on=function(f,p,g){return l(this,f,p,g,!1)},h.prototype.once=function(f,p,g){return l(this,f,p,g,!0)},h.prototype.removeListener=function(f,p,g,y){var v=r?r+f:f;if(!this._events[v])return this;if(!p)return c(this,v),this;var x=this._events[v];if(x.fn)x.fn===p&&(!y||x.once)&&(!g||x.context===g)&&c(this,v);else{for(var A=0,S=[],w=x.length;A<w;A++)(x[A].fn!==p||y&&!x[A].once||g&&x[A].context!==g)&&S.push(x[A]);S.length?this._events[v]=S.length===1?S[0]:S:c(this,v)}return this},h.prototype.removeAllListeners=function(f){var p;return f?(p=r?r+f:f,this._events[p]&&c(this,p)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=r,h.EventEmitter=h,typeof e<"u"&&(e.exports=h)}),RM,ui,ir=b(()=>{RM=ho(mz()),ui=RM.default}),MM,xs,mi,pr,Sb,Ab,Nf,BM,Ec,Eb,wb,Cb,Rb,Mb,yl,PM,DM,OM,FM,Hf,Bb,GM,Vf,zf,Pb,Xf,ss,Db,OO,gz=b(()=>{MM={grad:.9,turn:360,rad:360/(2*Math.PI)},xs=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},mi=function(t,e,i){return e===void 0&&(e=0),i===void 0&&(i=Math.pow(10,e)),Math.round(i*t)/i+0},pr=function(t,e,i){return e===void 0&&(e=0),i===void 0&&(i=1),t>i?i:t>e?t:e},Sb=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Ab=function(t){return{r:pr(t.r,0,255),g:pr(t.g,0,255),b:pr(t.b,0,255),a:pr(t.a)}},Nf=function(t){return{r:mi(t.r),g:mi(t.g),b:mi(t.b),a:mi(t.a,3)}},BM=/^#([0-9a-f]{3,8})$/i,Ec=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},Eb=function(t){var e=t.r,i=t.g,r=t.b,s=t.a,a=Math.max(e,i,r),l=a-Math.min(e,i,r),c=l?a===e?(i-r)/l:a===i?2+(r-e)/l:4+(e-i)/l:0;return{h:60*(c<0?c+6:c),s:a?l/a*100:0,v:a/255*100,a:s}},wb=function(t){var e=t.h,i=t.s,r=t.v,s=t.a;e=e/360*6,i/=100,r/=100;var a=Math.floor(e),l=r*(1-i),c=r*(1-(e-a)*i),h=r*(1-(1-e+a)*i),f=a%6;return{r:255*[r,c,l,l,h,r][f],g:255*[h,r,r,c,l,l][f],b:255*[l,l,h,r,r,c][f],a:s}},Cb=function(t){return{h:Sb(t.h),s:pr(t.s,0,100),l:pr(t.l,0,100),a:pr(t.a)}},Rb=function(t){return{h:mi(t.h),s:mi(t.s),l:mi(t.l),a:mi(t.a,3)}},Mb=function(t){return wb((i=(e=t).s,{h:e.h,s:(i*=((r=e.l)<50?r:100-r)/100)>0?2*i/(r+i)*100:0,v:r+i,a:e.a}));var e,i,r},yl=function(t){return{h:(e=Eb(t)).h,s:(s=(200-(i=e.s))*(r=e.v)/100)>0&&s<200?i*r/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,i,r,s},PM=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,DM=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,OM=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,FM=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Hf={string:[[function(t){var e=BM.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?mi(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?mi(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=OM.exec(t)||FM.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Ab({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=PM.exec(t)||DM.exec(t);if(!e)return null;var i,r,s=Cb({h:(i=e[1],r=e[2],r===void 0&&(r="deg"),Number(i)*(MM[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Mb(s)},"hsl"]],object:[[function(t){var e=t.r,i=t.g,r=t.b,s=t.a,a=s===void 0?1:s;return xs(e)&&xs(i)&&xs(r)?Ab({r:Number(e),g:Number(i),b:Number(r),a:Number(a)}):null},"rgb"],[function(t){var e=t.h,i=t.s,r=t.l,s=t.a,a=s===void 0?1:s;if(!xs(e)||!xs(i)||!xs(r))return null;var l=Cb({h:Number(e),s:Number(i),l:Number(r),a:Number(a)});return Mb(l)},"hsl"],[function(t){var e=t.h,i=t.s,r=t.v,s=t.a,a=s===void 0?1:s;if(!xs(e)||!xs(i)||!xs(r))return null;var l=function(c){return{h:Sb(c.h),s:pr(c.s,0,100),v:pr(c.v,0,100),a:pr(c.a)}}({h:Number(e),s:Number(i),v:Number(r),a:Number(a)});return wb(l)},"hsv"]]},Bb=function(t,e){for(var i=0;i<e.length;i++){var r=e[i][0](t);if(r)return[r,e[i][1]]}return[null,void 0]},GM=function(t){return typeof t=="string"?Bb(t.trim(),Hf.string):typeof t=="object"&&t!==null?Bb(t,Hf.object):[null,void 0]},Vf=function(t,e){var i=yl(t);return{h:i.h,s:pr(i.s+100*e,0,100),l:i.l,a:i.a}},zf=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Pb=function(t,e){var i=yl(t);return{h:i.h,s:i.s,l:pr(i.l+100*e,0,100),a:i.a}},Xf=function(){function t(e){this.parsed=GM(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return mi(zf(this.rgba),2)},t.prototype.isDark=function(){return zf(this.rgba)<.5},t.prototype.isLight=function(){return zf(this.rgba)>=.5},t.prototype.toHex=function(){return e=Nf(this.rgba),i=e.r,r=e.g,s=e.b,l=(a=e.a)<1?Ec(mi(255*a)):"","#"+Ec(i)+Ec(r)+Ec(s)+l;var e,i,r,s,a,l},t.prototype.toRgb=function(){return Nf(this.rgba)},t.prototype.toRgbString=function(){return e=Nf(this.rgba),i=e.r,r=e.g,s=e.b,(a=e.a)<1?"rgba("+i+", "+r+", "+s+", "+a+")":"rgb("+i+", "+r+", "+s+")";var e,i,r,s,a},t.prototype.toHsl=function(){return Rb(yl(this.rgba))},t.prototype.toHslString=function(){return e=Rb(yl(this.rgba)),i=e.h,r=e.s,s=e.l,(a=e.a)<1?"hsla("+i+", "+r+"%, "+s+"%, "+a+")":"hsl("+i+", "+r+"%, "+s+"%)";var e,i,r,s,a},t.prototype.toHsv=function(){return e=Eb(this.rgba),{h:mi(e.h),s:mi(e.s),v:mi(e.v),a:mi(e.a,3)};var e},t.prototype.invert=function(){return ss({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),ss(Vf(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),ss(Vf(this.rgba,-e))},t.prototype.grayscale=function(){return ss(Vf(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),ss(Pb(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),ss(Pb(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?ss({r:(i=this.rgba).r,g:i.g,b:i.b,a:e}):mi(this.rgba.a,3);var i},t.prototype.hue=function(e){var i=yl(this.rgba);return typeof e=="number"?ss({h:e,s:i.s,l:i.l,a:i.a}):mi(i.h)},t.prototype.isEqual=function(e){return this.toHex()===ss(e).toHex()},t}(),ss=function(t){return t instanceof Xf?t:new Xf(t)},Db=[],OO=function(t){t.forEach(function(e){Db.indexOf(e)<0&&(e(Xf,Hf),Db.push(e))})}});function yz(t,e){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var s in i)r[i[s]]=s;var a={};t.prototype.toName=function(l){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,h,f=r[this.toHex()];if(f)return f;if(l!=null&&l.closest){var p=this.toRgb(),g=1/0,y="black";if(!a.length)for(var v in i)a[v]=new t(i[v]).toRgb();for(var x in i){var A=(c=p,h=a[x],Math.pow(c.r-h.r,2)+Math.pow(c.g-h.g,2)+Math.pow(c.b-h.b,2));A<g&&(g=A,y=x)}return y}},e.string.push([function(l){var c=l.toLowerCase(),h=c==="transparent"?"#0000":i[c];return h?new t(h).toRgb():null},"name"])}var _z=b(()=>{}),Va,ct,_i=b(()=>{gz(),_z(),OO([yz]),Va=class Xc{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Xc)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,i){let r=typeof e;if(r!==typeof i)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===i;if(Array.isArray(e)&&Array.isArray(i)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(i))return e.length!==i.length?!1:e.every((s,a)=>s===i[a]);if(e!==null&&i!==null){let s=Object.keys(e),a=Object.keys(i);return s.length!==a.length?!1:s.every(l=>e[l]===i[l])}return e===i}toRgba(){let[e,i,r,s]=this._components;return{r:e,g:i,b:r,a:s}}toRgb(){let[e,i,r]=this._components;return{r:e,g:i,b:r}}toRgbaString(){let[e,i,r]=this.toUint8RgbArray();return`rgba(${e},${i},${r},${this.alpha})`}toUint8RgbArray(e){let[i,r,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(i*255),e[1]=Math.round(r*255),e[2]=Math.round(s*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);let[i,r,s,a]=this._components;return e[0]=i,e[1]=r,e[2]=s,e[3]=a,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);let[i,r,s]=this._components;return e[0]=i,e[1]=r,e[2]=s,e}toNumber(){return this._int}toBgrNumber(){let[e,i,r]=this.toUint8RgbArray();return(r<<16)+(i<<8)+e}toLittleEndianNumber(){let e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){let[i,r,s,a]=Xc._temp.setValue(e)._components;return this._components[0]*=i,this._components[1]*=r,this._components[2]*=s,this._components[3]*=a,this._refreshInt(),this._value=null,this}premultiply(e,i=!0){return i&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,i=!0){if(e===1)return(255<<24)+this._int;if(e===0)return i?0:this._int;let r=this._int>>16&255,s=this._int>>8&255,a=this._int&255;return i&&(r=r*e+.5|0,s=s*e+.5|0,a=a*e+.5|0),(e*255<<24)+(r<<16)+(s<<8)+a}toHex(){let e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){let e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let i,r,s,a;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){let l=e;i=(l>>16&255)/255,r=(l>>8&255)/255,s=(l&255)/255,a=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[i,r,s,a=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[i,r,s,a=255]=e,i/=255,r/=255,s/=255,a/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){let c=Xc.HEX_PATTERN.exec(e);c&&(e=`#${c[2]}`)}let l=ss(e);l.isValid()&&({r:i,g:r,b:s,a}=l.rgba,i/=255,r/=255,s/=255)}if(i!==void 0)this._components[0]=i,this._components[1]=r,this._components[2]=s,this._components[3]=a,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);let[e,i,r]=this._components;this._int=(e*255<<16)+(i*255<<8)+(r*255|0)}_clamp(e,i=0,r=1){return typeof e=="number"?Math.min(Math.max(e,i),r):(e.forEach((s,a)=>{e[a]=Math.min(Math.max(s,i),r)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Xc||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}},Va.shared=new Va,Va._temp=new Va,Va.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i,ct=Va}),M1,FO=b(()=>{M1={cullArea:null,cullable:!1,cullableChildren:!0}}),B1,P1,D1,O1=b(()=>{B1=Math.PI*2,P1=180/Math.PI,D1=Math.PI/180}),Et,Yf,vr=b(()=>{Et=class GO{constructor(e=0,i=0){this.x=0,this.y=0,this.x=e,this.y=i}clone(){return new GO(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,i=e){return this.x=e,this.y=i,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Yf.x=0,Yf.y=0,Yf}},Yf=new Et}),De,LM,kM,nt=b(()=>{O1(),vr(),De=class LO{constructor(e=1,i=0,r=0,s=1,a=0,l=0){this.array=null,this.a=e,this.b=i,this.c=r,this.d=s,this.tx=a,this.ty=l}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,i,r,s,a,l){return this.a=e,this.b=i,this.c=r,this.d=s,this.tx=a,this.ty=l,this}toArray(e,i){this.array||(this.array=new Float32Array(9));let r=i||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,i){i=i||new Et;let r=e.x,s=e.y;return i.x=this.a*r+this.c*s+this.tx,i.y=this.b*r+this.d*s+this.ty,i}applyInverse(e,i){i=i||new Et;let r=this.a,s=this.b,a=this.c,l=this.d,c=this.tx,h=this.ty,f=1/(r*l+a*-s),p=e.x,g=e.y;return i.x=l*f*p+-a*f*g+(h*a-c*l)*f,i.y=r*f*g+-s*f*p+(-h*r+c*s)*f,i}translate(e,i){return this.tx+=e,this.ty+=i,this}scale(e,i){return this.a*=e,this.d*=i,this.c*=e,this.b*=i,this.tx*=e,this.ty*=i,this}rotate(e){let i=Math.cos(e),r=Math.sin(e),s=this.a,a=this.c,l=this.tx;return this.a=s*i-this.b*r,this.b=s*r+this.b*i,this.c=a*i-this.d*r,this.d=a*r+this.d*i,this.tx=l*i-this.ty*r,this.ty=l*r+this.ty*i,this}append(e){let i=this.a,r=this.b,s=this.c,a=this.d;return this.a=e.a*i+e.b*s,this.b=e.a*r+e.b*a,this.c=e.c*i+e.d*s,this.d=e.c*r+e.d*a,this.tx=e.tx*i+e.ty*s+this.tx,this.ty=e.tx*r+e.ty*a+this.ty,this}appendFrom(e,i){let r=e.a,s=e.b,a=e.c,l=e.d,c=e.tx,h=e.ty,f=i.a,p=i.b,g=i.c,y=i.d;return this.a=r*f+s*g,this.b=r*p+s*y,this.c=a*f+l*g,this.d=a*p+l*y,this.tx=c*f+h*g+i.tx,this.ty=c*p+h*y+i.ty,this}setTransform(e,i,r,s,a,l,c,h,f){return this.a=Math.cos(c+f)*a,this.b=Math.sin(c+f)*a,this.c=-Math.sin(c-h)*l,this.d=Math.cos(c-h)*l,this.tx=e-(r*this.a+s*this.c),this.ty=i-(r*this.b+s*this.d),this}prepend(e){let i=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){let r=this.a,s=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=i*e.a+this.ty*e.c+e.tx,this.ty=i*e.b+this.ty*e.d+e.ty,this}decompose(e){let i=this.a,r=this.b,s=this.c,a=this.d,l=e.pivot,c=-Math.atan2(-s,a),h=Math.atan2(r,i),f=Math.abs(c+h);return f<1e-5||Math.abs(B1-f)<1e-5?(e.rotation=h,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=c,e.skew.y=h),e.scale.x=Math.sqrt(i*i+r*r),e.scale.y=Math.sqrt(s*s+a*a),e.position.x=this.tx+(l.x*i+l.y*s),e.position.y=this.ty+(l.x*r+l.y*a),e}invert(){let e=this.a,i=this.b,r=this.c,s=this.d,a=this.tx,l=e*s-i*r;return this.a=s/l,this.b=-i/l,this.c=-r/l,this.d=e/l,this.tx=(r*this.ty-s*a)/l,this.ty=-(e*this.ty-i*a)/l,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let e=new LO;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return kM.identity()}static get shared(){return LM.identity()}},LM=new De,kM=new De}),oi,fo=b(()=>{oi=class kO{constructor(e,i,r){this._x=i||0,this._y=r||0,this._observer=e}clone(e){return new kO(e??this._observer,this._x,this._y)}set(e=0,i=e){return(this._x!==e||this._y!==i)&&(this._x=e,this._y=i,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}});function Gt(t="default"){return Gl[t]===void 0&&(Gl[t]=-1),++Gl[t]}function vz(){for(let t in Gl)delete Gl[t]}var Gl,Gi=b(()=>{Gl={default:-1}});function Pe(t,e,i=3){if(sx[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(r=r.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(r))),sx[e]=!0}var sx,Xe,F1,gt=b(()=>{sx={},Xe="8.0.0",F1="8.3.4"}),gh,G1=b(()=>{gh=class{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var i;let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,(i=e.init)==null||i.call(e,t),e}return(t){var e;(e=t.reset)==null||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}}),nx,st,rr=b(()=>{G1(),nx=class{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new gh(t)),this._poolsByClass.get(t)}stats(){let t={};return this._poolsByClass.forEach(e=>{let i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}},st=new nx}),L1,IO=b(()=>{gt(),L1={get isCachedAsTexture(){var t;return!!((t=this.renderGroup)!=null&&t.isCachedAsTexture)},cacheAsTexture(t){typeof t=="boolean"&&t===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(t===!0?{}:t))},updateCacheTexture(){var t;(t=this.renderGroup)==null||t.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(t){Pe("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(t)}}});function k1(t,e,i){let r=t.length,s;if(e>=r||i===0)return;i=e+i>r?r-e:i;let a=r-i;for(s=e;s<a;++s)t[s]=t[s+i];t.length=a}var I1=b(()=>{}),U1,UO=b(()=>{I1(),gt(),U1={allowChildren:!0,removeChildren(t=0,e){let i=e??this.children.length,r=i-t,s=[];if(r>0&&r<=i){for(let l=i-1;l>=t;l--){let c=this.children[l];c&&(s.push(c),c.parent=null)}k1(this.children,t,i);let a=this.renderGroup||this.parentRenderGroup;a&&a.removeChildren(s);for(let l=0;l<s.length;++l)this.emit("childRemoved",s[l],this,l),s[l].emit("removed",this);return s.length>0&&this._didViewChangeTick++,s}else if(r===0&&this.children.length===0)return s;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){let e=this.getChildAt(t);return this.removeChild(e)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){let e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(t,e){this.allowChildren||Pe(Xe,"addChildAt: Only Containers will be allowed to add children in v8.0.0");let{children:i}=this;if(e<0||e>i.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${i.length}`);if(t.parent){let s=t.parent.children.indexOf(t);if(t.parent===this&&s===e)return t;s!==-1&&t.parent.children.splice(s,1)}e===i.length?i.push(t):i.splice(e,0,t),t.parent=this,t.didChange=!0,t._updateFlags=15;let r=this.renderGroup||this.parentRenderGroup;return r&&r.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){if(t===e)return;let i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t;let s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)},reparentChild(...t){return t.length===1?this.reparentChildAt(t[0],this.children.length):(t.forEach(e=>this.reparentChildAt(e,this.children.length)),t[0])},reparentChildAt(t,e){if(t.parent===this)return this.setChildIndex(t,e),t;let i=t.worldTransform.clone();t.removeFromParent(),this.addChildAt(t,e);let r=this.worldTransform.clone();return r.invert(),i.prepend(r),t.setFromMatrix(i),t}}}),N1,NO=b(()=>{N1={collectRenderables(t,e,i){this.parentRenderLayer&&this.parentRenderLayer!==i||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(t,e,i):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,t):this.collectRenderablesWithEffects(t,e,i))},collectRenderablesSimple(t,e,i){let r=this.children,s=r.length;for(let a=0;a<s;a++)r[a].collectRenderables(t,e,i)},collectRenderablesWithEffects(t,e,i){let{renderPipes:r}=e;for(let s=0;s<this.effects.length;s++){let a=this.effects[s];r[a.pipe].push(a,this,t)}this.collectRenderablesSimple(t,e,i);for(let s=this.effects.length-1;s>=0;s--){let a=this.effects[s];r[a.pipe].pop(a,this,t)}}}}),Vl,ay=b(()=>{Vl=class{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}}),ax,yh,HO=b(()=>{$(),rr(),ax=class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){let i=this._tests[e];if(i.test(t))return st.get(i.maskClass,t)}return t}returnMaskEffect(t){st.return(t)}},yh=new ax,ke.handleByList(I.MaskEffect,yh._effectClasses)}),H1,VO=b(()=>{ay(),HO(),H1={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){let t=this.renderGroup||this.parentRenderGroup;t&&(t.structureDidChange=!0)},addEffect(t){this.effects.indexOf(t)===-1&&(this.effects.push(t),this.effects.sort((e,i)=>e.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(t){let e=this.effects.indexOf(t);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(t){let e=this._maskEffect;(e==null?void 0:e.mask)!==t&&(e&&(this.removeEffect(e),yh.returnMaskEffect(e),this._maskEffect=null),t!=null&&(this._maskEffect=yh.getMaskEffect(t),this.addEffect(this._maskEffect)))},setMask(t){this._maskOptions={...this._maskOptions,...t},t.mask&&(this.mask=t.mask),this._markStructureAsChanged()},get mask(){var t;return(t=this._maskEffect)==null?void 0:t.mask},set filters(t){var a;!Array.isArray(t)&&t&&(t=[t]);let e=this._filterEffect||(this._filterEffect=new Vl);t=t;let i=(t==null?void 0:t.length)>0,r=((a=e.filters)==null?void 0:a.length)>0,s=i!==r;t=Array.isArray(t)?t.slice(0):t,e.filters=Object.freeze(t),s&&(i?this.addEffect(e):(this.removeEffect(e),e.filters=t??null))},get filters(){var t;return(t=this._filterEffect)==null?void 0:t.filters},set filterArea(t){this._filterEffect||(this._filterEffect=new Vl),this._filterEffect.filterArea=t},get filterArea(){var t;return(t=this._filterEffect)==null?void 0:t.filterArea}}}),V1,zO=b(()=>{gt(),V1={label:null,get name(){return Pe(Xe,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){Pe(Xe,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t,e=!1){return this.getChildByLabel(t,e)},getChildByLabel(t,e=!1){let i=this.children;for(let r=0;r<i.length;r++){let s=i[r];if(s.label===t||t instanceof RegExp&&t.test(s.label))return s}if(e)for(let r=0;r<i.length;r++){let s=i[r].getChildByLabel(t,!0);if(s)return s}return null},getChildrenByLabel(t,e=!1,i=[]){let r=this.children;for(let s=0;s<r.length;s++){let a=r[s];(a.label===t||t instanceof RegExp&&t.test(a.label))&&i.push(a)}if(e)for(let s=0;s<r.length;s++)r[s].getChildrenByLabel(t,!0,i);return i}}}),wc,wt,ci=b(()=>{vr(),wc=[new Et,new Et,new Et,new Et],wt=class Fp{constructor(e=0,i=0,r=0,s=0){this.type="rectangle",this.x=Number(e),this.y=Number(i),this.width=Number(r),this.height=Number(s)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Fp(0,0,0,0)}clone(){return new Fp(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,i){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height}strokeContains(e,i,r,s=.5){let{width:a,height:l}=this;if(a<=0||l<=0)return!1;let c=this.x,h=this.y,f=r*(1-s),p=r-f,g=c-f,y=c+a+f,v=h-f,x=h+l+f,A=c+p,S=c+a-p,w=h+p,E=h+l-p;return e>=g&&e<=y&&i>=v&&i<=x&&!(e>A&&e<S&&i>w&&i<E)}intersects(e,i){if(!i){let Z=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=Z)return!1;let q=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>q}let r=this.left,s=this.right,a=this.top,l=this.bottom;if(s<=r||l<=a)return!1;let c=wc[0].set(e.left,e.top),h=wc[1].set(e.left,e.bottom),f=wc[2].set(e.right,e.top),p=wc[3].set(e.right,e.bottom);if(f.x<=c.x||h.y<=c.y)return!1;let g=Math.sign(i.a*i.d-i.b*i.c);if(g===0||(i.apply(c,c),i.apply(h,h),i.apply(f,f),i.apply(p,p),Math.max(c.x,h.x,f.x,p.x)<=r||Math.min(c.x,h.x,f.x,p.x)>=s||Math.max(c.y,h.y,f.y,p.y)<=a||Math.min(c.y,h.y,f.y,p.y)>=l))return!1;let y=g*(h.y-c.y),v=g*(c.x-h.x),x=y*r+v*a,A=y*s+v*a,S=y*r+v*l,w=y*s+v*l;if(Math.max(x,A,S,w)<=y*c.x+v*c.y||Math.min(x,A,S,w)>=y*p.x+v*p.y)return!1;let E=g*(c.y-f.y),B=g*(f.x-c.x),G=E*r+B*a,U=E*s+B*a,H=E*r+B*l,j=E*s+B*l;return!(Math.max(G,U,H,j)<=E*c.x+B*c.y||Math.min(G,U,H,j)>=E*p.x+B*p.y)}pad(e=0,i=e){return this.x-=e,this.y-=i,this.width+=e*2,this.height+=i*2,this}fit(e){let i=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=i,this.width=Math.max(r-i,0),this.y=s,this.height=Math.max(a-s,0),this}ceil(e=1,i=.001){let r=Math.ceil((this.x+this.width-i)*e)/e,s=Math.ceil((this.y+this.height-i)*e)/e;return this.x=Math.floor((this.x+i)*e)/e,this.y=Math.floor((this.y+i)*e)/e,this.width=r-this.x,this.height=s-this.y,this}enlarge(e){let i=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=i,this.width=r-i,this.y=s,this.height=a-s,this}getBounds(e){return e||(e=new Fp),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;let i=e.x,r=e.y,s=e.x+e.width,a=e.y+e.height;return i>=this.x&&i<this.x+this.width&&r>=this.y&&r<this.y+this.height&&s>=this.x&&s<this.x+this.width&&a>=this.y&&a<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}}),Ob,Ci,qi=b(()=>{nt(),ci(),Ob=new De,Ci=class XO{constructor(e=1/0,i=1/0,r=-1/0,s=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Ob,this.minX=e,this.minY=i,this.maxX=r,this.maxY=s}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new wt);let e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Ob,this}set(e,i,r,s){this.minX=e,this.minY=i,this.maxX=r,this.maxY=s}addFrame(e,i,r,s,a){a||(a=this.matrix);let l=a.a,c=a.b,h=a.c,f=a.d,p=a.tx,g=a.ty,y=this.minX,v=this.minY,x=this.maxX,A=this.maxY,S=l*e+h*i+p,w=c*e+f*i+g;S<y&&(y=S),w<v&&(v=w),S>x&&(x=S),w>A&&(A=w),S=l*r+h*i+p,w=c*r+f*i+g,S<y&&(y=S),w<v&&(v=w),S>x&&(x=S),w>A&&(A=w),S=l*e+h*s+p,w=c*e+f*s+g,S<y&&(y=S),w<v&&(v=w),S>x&&(x=S),w>A&&(A=w),S=l*r+h*s+p,w=c*r+f*s+g,S<y&&(y=S),w<v&&(v=w),S>x&&(x=S),w>A&&(A=w),this.minX=y,this.minY=v,this.maxX=x,this.maxY=A}addRect(e,i){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,i)}addBounds(e,i){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,i)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){let i=this.minX,r=this.minY,s=this.maxX,a=this.maxY,{a:l,b:c,c:h,d:f,tx:p,ty:g}=e,y=l*i+h*r+p,v=c*i+f*r+g;this.minX=y,this.minY=v,this.maxX=y,this.maxY=v,y=l*s+h*r+p,v=c*s+f*r+g,this.minX=y<this.minX?y:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=y>this.maxX?y:this.maxX,this.maxY=v>this.maxY?v:this.maxY,y=l*i+h*a+p,v=c*i+f*a+g,this.minX=y<this.minX?y:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=y>this.maxX?y:this.maxX,this.maxY=v>this.maxY?v:this.maxY,y=l*s+h*a+p,v=c*s+f*a+g,this.minX=y<this.minX?y:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=y>this.maxX?y:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,i,r,s){return this.minX<e&&(this.minX=e),this.maxX>i&&(this.maxX=i),this.minY<r&&(this.minY=r),this.maxY>s&&(this.maxY=s),this}pad(e,i=e){return this.minX-=e,this.maxX+=e,this.minY-=i,this.maxY+=i,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new XO(this.minX,this.minY,this.maxX,this.maxY)}scale(e,i=e){return this.minX*=e,this.minY*=i,this.maxX*=e,this.maxY*=i,this}get x(){return this.minX}set x(e){let i=this.maxX-this.minX;this.minX=e,this.maxX=e+i}get y(){return this.minY}set y(e){let i=this.maxY-this.minY;this.minY=e,this.maxY=e+i}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,i,r,s){let a=this.minX,l=this.minY,c=this.maxX,h=this.maxY;s||(s=this.matrix);let f=s.a,p=s.b,g=s.c,y=s.d,v=s.tx,x=s.ty;for(let A=i;A<r;A+=2){let S=e[A],w=e[A+1],E=f*S+g*w+v,B=p*S+y*w+x;a=E<a?E:a,l=B<l?B:l,c=E>c?E:c,h=B>h?B:h}this.minX=a,this.minY=l,this.maxX=c,this.maxY=h}containsPoint(e,i){return this.minX<=e&&this.minY<=i&&this.maxX>=e&&this.maxY>=i}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}}),Oi,os,po=b(()=>{nt(),G1(),qi(),Oi=new gh(De),os=new gh(Ci)}),IM,z1,YO=b(()=>{nt(),qi(),po(),IM=new De,z1={getFastGlobalBounds(t,e){e||(e=new Ci),e.clear(),this._getGlobalBoundsRecursive(!!t,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);let i=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(i.worldTransform),e},_getGlobalBoundsRecursive(t,e,i){let r=e;if(t&&this.parentRenderLayer&&this.parentRenderLayer!==i||this.localDisplayStatus!==7||!this.measurable)return;let s=!!this.effects.length;if((this.renderGroup||s)&&(r=os.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){let l=this.bounds;r.addFrame(l.minX,l.minY,l.maxX,l.maxY,this.groupTransform)}let a=this.children;for(let l=0;l<a.length;l++)a[l]._getGlobalBoundsRecursive(t,r,i)}if(s){let a=!1,l=this.renderGroup||this.parentRenderGroup;for(let c=0;c<this.effects.length;c++)this.effects[c].addBounds&&(a||(a=!0,r.applyMatrix(l.worldTransform)),this.effects[c].addBounds(r,!0));a&&(r.applyMatrix(l.worldTransform.copyTo(IM).invert()),e.addBounds(r,this.relativeGroupTransform)),e.addBounds(r),os.return(r)}else this.renderGroup&&(e.addBounds(r,this.relativeGroupTransform),os.return(r))}}});function Xh(t,e,i){i.clear();let r,s;return t.parent?e?r=t.parent.worldTransform:(s=Oi.get().identity(),r=oy(t,s)):r=De.IDENTITY,X1(t,i,r,e),s&&Oi.return(s),i.isValid||i.set(0,0,0,0),i}function X1(t,e,i,r){var c,h;if(!t.visible||!t.measurable)return;let s;r?s=t.worldTransform:(t.updateLocalTransform(),s=Oi.get(),s.appendFrom(t.localTransform,i));let a=e,l=!!t.effects.length;if(l&&(e=os.get().clear()),t.boundsArea)e.addRect(t.boundsArea,s);else{t.bounds&&(e.matrix=s,e.addBounds(t.bounds));for(let f=0;f<t.children.length;f++)X1(t.children[f],e,s,r)}if(l){for(let f=0;f<t.effects.length;f++)(h=(c=t.effects[f]).addBounds)==null||h.call(c,e);a.addBounds(e,De.IDENTITY),os.return(e)}r||Oi.return(s)}function oy(t,e){let i=t.parent;return i&&(oy(i,e),i.updateLocalTransform(),e.append(i.localTransform)),e}var nu=b(()=>{nt(),po()});function Y1(t,e){if(t===16777215||!e)return e;if(e===16777215||!t)return t;let i=t>>16&255,r=t>>8&255,s=t&255,a=e>>16&255,l=e>>8&255,c=e&255,h=i*a/255|0,f=r*l/255|0,p=s*c/255|0;return(h<<16)+(f<<8)+p}var j1=b(()=>{});function _h(t,e){return t===ox?e:e===ox?t:Y1(t,e)}var ox,q1=b(()=>{j1(),ox=16777215});function Ll(t){return((t&255)<<16)+(t&65280)+(t>>16&255)}var W1,K1=b(()=>{nu(),po(),q1(),W1={getGlobalAlpha(t){if(t)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,i=this.parent;for(;i;)e*=i.alpha,i=i.parent;return e},getGlobalTransform(t,e){if(e)return t.copyFrom(this.worldTransform);this.updateLocalTransform();let i=oy(this,Oi.get().identity());return t.appendFrom(this.localTransform,i),Oi.return(i),t},getGlobalTint(t){if(t)return this.renderGroup?Ll(this.renderGroup.worldColor):this.parentRenderGroup?Ll(_h(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,i=this.parent;for(;i;)e=_h(e,i.localColor),i=i.parent;return Ll(e)}}});function Le(...t){Gp!==lx&&(Gp++,Gp===lx?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...t))}var Gp,lx,dt=b(()=>{Gp=0,lx=500});function ly(t,e,i){return e.clear(),i||(i=De.IDENTITY),jO(t,e,i,t,!0),e.isValid||e.set(0,0,0,0),e}function jO(t,e,i,r,s){var h,f;let a;if(s)a=Oi.get(),a=i.copyTo(a);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();let p=t.localTransform;a=Oi.get(),a.appendFrom(p,i)}let l=e,c=!!t.effects.length;if(c&&(e=os.get().clear()),t.boundsArea)e.addRect(t.boundsArea,a);else{t.renderPipeId&&(e.matrix=a,e.addBounds(t.bounds));let p=t.children;for(let g=0;g<p.length;g++)jO(p[g],e,a,r,!1)}if(c){for(let p=0;p<t.effects.length;p++)(f=(h=t.effects[p]).addLocalBounds)==null||f.call(h,e,r);l.addBounds(e,De.IDENTITY),os.return(e)}Oi.return(a)}function qO(t,e,i){let r=t.parent;if(!r){Le("Item is not inside the root container");return}r!==e&&(qO(r,e,i),r.updateLocalTransform(),i.append(r.localTransform))}var uy=b(()=>{nt(),dt(),po()});function $1(t,e){let i=t.children;for(let r=0;r<i.length;r++){let s=i[r],a=s.uid,l=(s._didViewChangeTick&65535)<<16|s._didContainerChangeTick&65535,c=e.index;(e.data[c]!==a||e.data[c+1]!==l)&&(e.data[e.index]=a,e.data[e.index+1]=l,e.didChange=!0),e.index=c+2,s.children.length&&$1(s,e)}return e.didChange}var WO=b(()=>{}),UM,Z1,KO=b(()=>{nt(),qi(),nu(),uy(),WO(),UM=new De,Z1={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){let i=Math.sign(this.scale.x)||1;e!==0?this.scale.x=t/e*i:this.scale.x=i},_setHeight(t,e){let i=Math.sign(this.scale.y)||1;e!==0?this.scale.y=t/e*i:this.scale.y=i},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Ci});let t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didViewChangeTick&&(t.didChange=!0,t.data[0]=this._didViewChangeTick),$1(this,t),t.didChange&&ly(this,t.localBounds,UM),t.localBounds},getBounds(t,e){return Xh(this,t,e||new Ci)}}}),Q1,$O=b(()=>{Q1={_onRender:null,set onRender(t){let e=this.renderGroup||this.parentRenderGroup;if(!t){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||(e==null||e.addOnRender(this)),this._onRender=t},get onRender(){return this._onRender}}});function bz(t,e){return t._zIndex-e._zIndex}var J1,ZO=b(()=>{J1={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(bz))}}}),eT,QO=b(()=>{vr(),po(),eT={getGlobalPosition(t=new Et,e=!1){return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e,i=!1){let r=this.getGlobalTransform(Oi.get(),i);return e=r.apply(t,e),Oi.return(r),e},toLocal(t,e,i,r){e&&(t=e.toGlobal(t,i,r));let s=this.getGlobalTransform(Oi.get(),r);return i=s.applyInverse(t,i),Oi.return(s),i}}}),cy,tT=b(()=>{Gi(),cy=class{constructor(){this.uid=Gt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}});function lo(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function ux(t){return!(t&t-1)&&!!t}function xz(t){let e=(t>65535?1:0)<<4;t>>>=e;let i=(t>255?1:0)<<3;return t>>>=i,e|=i,i=(t>15?1:0)<<2,t>>>=i,e|=i,i=(t>3?1:0)<<1,t>>>=i,e|=i,e|t>>1}var Yh=b(()=>{});function hs(t){let e={};for(let i in t)t[i]!==void 0&&(e[i]=t[i]);return e}var mo=b(()=>{});function Tz(t){let e=cx[t];return e===void 0&&(cx[t]=Gt("resource")),e}var cx,Fb,hy,iT=b(()=>{ir(),Gi(),gt(),cx=Object.create(null),Fb=class JO extends ui{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...JO.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Pe(Xe,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){let e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=Tz(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}},Fb.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"},hy=Fb}),Gb,Yt,Li=b(()=>{ir(),Yh(),mo(),Gi(),iT(),Gb=class eF extends ui{constructor(e={}){super(),this.options=e,this.uid=Gt("textureSource"),this._resourceType="textureSource",this._resourceId=Gt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...eF.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new hy(hs(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var i,r;this.style!==e&&((i=this._style)==null||i.off("change",this._onStyleChange,this),this._style=e,(r=this._style)==null||r.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){let e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Gt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){let{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){let{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,i,r){r||(r=this._resolution),e||(e=this.width),i||(i=this.height);let s=Math.round(e*r),a=Math.round(i*r);return this.width=s/r,this.height=a/r,this._resolution=r,this.pixelWidth===s&&this.pixelHeight===a?!1:(this._refreshPOT(),this.pixelWidth=s,this.pixelHeight=a,this.emit("resize",this),this._resourceId=Gt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=ux(this.pixelWidth)&&ux(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}},Gb.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1},Yt=Gb});function Sz(){for(let t=0;t<16;t++){let e=[];Lp.push(e);for(let i=0;i<16;i++){let r=Yc(Zn[t]*Zn[i]+Jn[t]*Qn[i]),s=Yc(Qn[t]*Zn[i]+ea[t]*Qn[i]),a=Yc(Zn[t]*Jn[i]+Jn[t]*ea[i]),l=Yc(Qn[t]*Jn[i]+ea[t]*ea[i]);for(let c=0;c<16;c++)if(Zn[c]===r&&Qn[c]===s&&Jn[c]===a&&ea[c]===l){e.push(c);break}}}for(let t=0;t<16;t++){let e=new De;e.set(Zn[t],Qn[t],Jn[t],ea[t],0,0),hx.push(e)}}var Zn,Qn,Jn,ea,Lp,hx,Yc,Qe,rT=b(()=>{nt(),Zn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Qn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Jn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ea=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Lp=[],hx=[],Yc=Math.sign,Sz(),Qe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Zn[t],uY:t=>Qn[t],vX:t=>Jn[t],vY:t=>ea[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>Lp[t][e],sub:(t,e)=>Lp[t][Qe.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?Qe.S:Qe.N:Math.abs(e)*2<=Math.abs(t)?t>0?Qe.E:Qe.W:e>0?t>0?Qe.SE:Qe.SW:t>0?Qe.NE:Qe.NW,matrixAppendRotationInv:(t,e,i=0,r=0)=>{let s=hx[Qe.inv(e)];s.tx=i,s.ty=r,t.append(s)}}}),sm,tF=b(()=>{sm=()=>{}}),vh,sT=b(()=>{$(),Li(),vh=class extends Yt{constructor(t){let e=t.resource||new Float32Array(t.width*t.height*4),i=t.format;i||(e instanceof Float32Array?i="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?i="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?i="rgba16uint":i="bgra8unorm"),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}},vh.extension=I.TextureSource}),Lb,dy,nT=b(()=>{nt(),Lb=new De,dy=class{constructor(t,e){this.mapCoord=new De,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&((e=this._texture)==null||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);let i=this.mapCoord;for(let r=0;r<t.length;r+=2){let s=t[r],a=t[r+1];e[r]=s*i.a+a*i.c+i.tx,e[r+1]=s*i.b+a*i.d+i.ty}return e}update(){let t=this._texture;this._updateID++;let e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);let i=t.orig,r=t.trim;r&&(Lb.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Lb));let s=t.source,a=this.uClampFrame,l=this.clampMargin/s._resolution,c=this.clampOffset/s._resolution;return a[0]=(t.frame.x+l+c)/s.width,a[1]=(t.frame.y+l+c)/s.height,a[2]=(t.frame.x+t.frame.width-l+c)/s.width,a[3]=(t.frame.y+t.frame.height-l+c)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=t.frame.width===s.width&&t.frame.height===s.height&&t.rotate===0,!0}}}),ve,tt=b(()=>{ir(),rT(),ci(),Gi(),gt(),tF(),sT(),Li(),nT(),ve=class extends ui{constructor({source:t,label:e,frame:i,orig:r,trim:s,defaultAnchor:a,defaultBorders:l,rotate:c,dynamic:h}={}){if(super(),this.uid=Gt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new wt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=(t==null?void 0:t.source)??new Yt,this.noFrame=!i,i)this.frame.copyFrom(i);else{let{width:f,height:p}=this._source;this.frame.width=f,this.frame.height=p}this.orig=r||this.frame,this.trim=s,this.rotate=c??0,this.defaultAnchor=a,this.defaultBorders=l,this.destroyed=!1,this.dynamic=h||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new dy(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){let{uvs:t,frame:e}=this,{width:i,height:r}=this._source,s=e.x/i,a=e.y/r,l=e.width/i,c=e.height/r,h=this.rotate;if(h){let f=l/2,p=c/2,g=s+f,y=a+p;h=Qe.add(h,Qe.NW),t.x0=g+f*Qe.uX(h),t.y0=y+p*Qe.uY(h),h=Qe.add(h,2),t.x1=g+f*Qe.uX(h),t.y1=y+p*Qe.uY(h),h=Qe.add(h,2),t.x2=g+f*Qe.uX(h),t.y2=y+p*Qe.uY(h),h=Qe.add(h,2),t.x3=g+f*Qe.uX(h),t.y3=y+p*Qe.uY(h)}else t.x0=s,t.y0=a,t.x1=s+l,t.y1=a,t.x2=s+l,t.y2=a+c,t.x3=s,t.y3=a+c}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Pe(Xe,"Texture.baseTexture is now Texture.source"),this._source}},ve.EMPTY=new ve({label:"EMPTY",source:new Yt({label:"EMPTY"})}),ve.EMPTY.destroy=sm,ve.WHITE=new ve({source:new vh({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),ve.WHITE.destroy=sm}),NM,dx,Jt,Os=b(()=>{Yh(),Li(),tt(),NM=0,dx=class{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,e,i){let r=new Yt({...this.textureOptions,width:t,height:e,resolution:1,antialias:i,autoGarbageCollect:!1});return new ve({source:r,label:`texturePool_${NM++}`})}getOptimalTexture(t,e,i=1,r){let s=Math.ceil(t*i-1e-6),a=Math.ceil(e*i-1e-6);s=lo(s),a=lo(a);let l=(s<<17)+(a<<1)+(r?1:0);this._texturePool[l]||(this._texturePool[l]=[]);let c=this._texturePool[l].pop();return c||(c=this.createTexture(s,a,r)),c.source._resolution=i,c.source.width=s/i,c.source.height=a/i,c.source.pixelWidth=s,c.source.pixelHeight=a,c.frame.x=0,c.frame.y=0,c.frame.width=t,c.frame.height=e,c.updateUvs(),this._poolKeyHash[c.uid]=l,c}getSameSizeTexture(t,e=!1){let i=t.source;return this.getOptimalTexture(t.width,t.height,i._resolution,e)}returnTexture(t){let e=this._poolKeyHash[t.uid];this._texturePool[e].push(t)}clear(t){if(t=t!==!1,t)for(let e in this._texturePool){let i=this._texturePool[e];if(i)for(let r=0;r<i.length;r++)i[r].destroy(!0)}this._texturePool={}}},Jt=new dx}),aT,iF=b(()=>{nt(),tT(),Os(),aT=class{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new De,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new cy,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;let e=t.children;for(let i=0;i<e.length;i++){let r=e[i];r._updateFlags=15,this.addChild(r)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Jt.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(let t in this.childrenToUpdate){let e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){let e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);let e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}let e=t.children;for(let i=0;i<e.length;i++)this.removeChild(e[i])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){let e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;let i=t.children;for(let r=0;r<i.length;r++)this._getChildren(i[r],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new De),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new De),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;let t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new De),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}});function nm(t,e,i={}){for(let r in e)!i[r]&&e[r]!==void 0&&(t[r]=e[r])}var oT=b(()=>{}),jf,qf,Wf,kl,bh,eo,rF,Lt,br=b(()=>{ir(),_i(),FO(),$(),nt(),O1(),fo(),Gi(),gt(),rr(),IO(),UO(),NO(),VO(),zO(),YO(),K1(),KO(),$O(),ZO(),QO(),iF(),oT(),jf=new oi(null),qf=new oi(null),Wf=new oi(null,1,1),kl=1,bh=2,eo=4,rF=8,Lt=class sF extends ui{constructor(e={}){var i,r;super(),this.uid=Gt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new De,this.relativeGroupTransform=new De,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new oi(this,0,0),this._scale=Wf,this._pivot=qf,this._skew=jf,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],nm(this,e,{children:!0,parent:!0,effects:!0}),(i=e.children)==null||i.forEach(s=>this.addChild(s)),(r=e.parent)==null||r.addChild(this)}static mixin(e){Pe("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),ke.mixin(sF,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Pe(Xe,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let s=0;s<e.length;s++)this.addChild(e[s]);return e[0]}let i=e[0],r=this.renderGroup||this.parentRenderGroup;return i.parent===this?(this.children.splice(this.children.indexOf(i),1),this.children.push(i),r&&(r.structureDidChange=!0),i):(i.parent&&i.parent.removeChild(i),this.children.push(i),this.sortableChildren&&(this.sortDirty=!0),i.parent=this,i.didChange=!0,i._updateFlags=15,r&&r.addChild(i),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this),this._didViewChangeTick++,i._zIndex!==0&&i.depthOfChildModified(),i)}removeChild(...e){if(e.length>1){for(let s=0;s<e.length;s++)this.removeChild(e[s]);return e[0]}let i=e[0],r=this.children.indexOf(i);return r>-1&&(this._didViewChangeTick++,this.children.splice(r,1),this.renderGroup?this.renderGroup.removeChild(i):this.parentRenderGroup&&this.parentRenderGroup.removeChild(i),i.parentRenderLayer&&i.parentRenderLayer.detach(i),i.parent=null,this.emit("childRemoved",i,this,r),i.emit("removed",this)),i}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;let e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=st.get(aT,this),this.groupTransform=De.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;let e=this.parentRenderGroup;e==null||e.removeChild(this),st.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new De),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*P1}set angle(e){this.rotation=e*D1}get pivot(){return this._pivot===qf&&(this._pivot=new oi(this,0,0)),this._pivot}set pivot(e){this._pivot===qf&&(this._pivot=new oi(this,0,0)),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===jf&&(this._skew=new oi(this,0,0)),this._skew}set skew(e){this._skew===jf&&(this._skew=new oi(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Wf&&(this._scale=new oi(this,1,1)),this._scale}set scale(e){this._scale===Wf&&(this._scale=new oi(this,0,0)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){let i=this.getLocalBounds().width;this._setWidth(e,i)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){let i=this.getLocalBounds().height;this._setHeight(e,i)}getSize(e){e||(e={});let i=this.getLocalBounds();return e.width=Math.abs(this.scale.x*i.width),e.height=Math.abs(this.scale.y*i.height),e}setSize(e,i){let r=this.getLocalBounds();typeof e=="object"?(i=e.height??e.width,e=e.width):i??(i=e),e!==void 0&&this._setWidth(e,r.width),i!==void 0&&this._setHeight(i,r.height)}_updateSkew(){let e=this._rotation,i=this._skew;this._cx=Math.cos(e+i._y),this._sx=Math.sin(e+i._y),this._cy=-Math.sin(e-i._x),this._sy=Math.cos(e-i._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){let e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;let i=this.localTransform,r=this._scale,s=this._pivot,a=this._position,l=r._x,c=r._y,h=s._x,f=s._y;i.a=this._cx*l,i.b=this._sx*l,i.c=this._cy*c,i.d=this._sy*c,i.tx=a._x-(h*i.a+f*i.c),i.ty=a._y-(h*i.b+f*i.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=kl,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){let i=ct.shared.setValue(e??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=kl,this._onUpdate())}get tint(){return Ll(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=bh,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){let i=e?2:0;(this.localDisplayStatus&2)!==i&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=eo,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){let i=e?0:4;(this.localDisplayStatus&4)!==i&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=eo,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){let i=e?1:0;(this.localDisplayStatus&1)!==i&&(this._updateFlags|=eo,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var r;if(this.destroyed)return;this.destroyed=!0;let i;if(this.children.length&&(i=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&i)for(let s=0;s<i.length;++s)i[s].destroy(e);(r=this.renderGroup)==null||r.destroy(),this.renderGroup=null}},ke.mixin(Lt,U1,z1,eT,Q1,Z1,H1,V1,J1,M1,L1,W1,N1)}),jh,fy=b(()=>{vr(),jh=class nF{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=nF.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Et,this.page=new Et,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,i,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,i,r,s,a){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}});function Az(t){return function(e){return e.test(t)}}function HM(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var i=e.userAgent,r=i.split("[FBAN");typeof r[1]<"u"&&(i=r[0]),r=i.split("Twitter"),typeof r[1]<"u"&&(i=r[0]);var s=Az(i),a={apple:{phone:s(kp)&&!s(Ts),ipod:s(fx),tablet:!s(kp)&&(s(px)||Sx(e))&&!s(Ts),universal:s(mx),device:(s(kp)||s(fx)||s(px)||s(mx)||Sx(e))&&!s(Ts)},amazon:{phone:s(Ka),tablet:!s(Ka)&&s(jc),device:s(Ka)||s(jc)},android:{phone:!s(Ts)&&s(Ka)||!s(Ts)&&s(Ip),tablet:!s(Ts)&&!s(Ka)&&!s(Ip)&&(s(jc)||s(gx)),device:!s(Ts)&&(s(Ka)||s(jc)||s(Ip)||s(gx))||s(/\bokhttp\b/i)},windows:{phone:s(Ts),tablet:s(yx),device:s(Ts)||s(yx)},other:{blackberry:s(_x),blackberry10:s(vx),opera:s(bx),firefox:s(Tx),chrome:s(xx),device:s(_x)||s(vx)||s(bx)||s(Tx)||s(xx)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}var kp,fx,px,mx,Ip,gx,Ka,jc,Ts,yx,_x,vx,bx,xx,Tx,Sx,VM=b(()=>{kp=/iPhone/i,fx=/iPod/i,px=/iPad/i,mx=/\biOS-universal(?:.+)Mac\b/i,Ip=/\bAndroid(?:.+)Mobile\b/i,gx=/Android/i,Ka=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,jc=/Silk/i,Ts=/Windows Phone/i,yx=/\bWindows(?:.+)ARM\b/i,_x=/BlackBerry/i,vx=/BB10/i,bx=/Opera Mini/i,xx=/\b(CriOS|Chrome)(?:.+)Mobile/i,Tx=/Mobile(?:.+)Firefox\b/i,Sx=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"}}),Ez=b(()=>{VM(),VM()}),zM,lT,aF=b(()=>{Ez(),zM=HM.default??HM,lT=zM(globalThis.navigator)}),XM,Cc,YM,jM,kb,Ib,qM,WM,KM,Kf,uT,oF=b(()=>{fy(),$(),aF(),I1(),XM=9,Cc=100,YM=0,jM=0,kb=2,Ib=1,qM=-1e3,WM=-1e3,KM=2,Kf=class lF{constructor(e,i=lT){this._mobileInfo=i,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(i.tablet||i.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){let e=document.createElement("button");e.style.width=`${Ib}px`,e.style.height=`${Ib}px`,e.style.position="absolute",e.style.top=`${qM}px`,e.style.left=`${WM}px`,e.style.zIndex=KM.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.width=`${Cc}px`,this._div.style.height=`${Cc}px`,this._div.style.position="absolute",this._div.style.top=`${YM}px`,this._div.style.left=`${jM}px`,this._div.style.zIndex=kb.toString(),this._div.style.pointerEvents="none"),this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._deactivateOnMouseMove&&(this._onMouseMove=this._onMouseMove.bind(this),globalThis.document.addEventListener("mousemove",this._onMouseMove,!0));let e=this._renderer.view.canvas;if(e.parentNode)e.parentNode.appendChild(this._div),this._initAccessibilitySetup();else{let i=new MutationObserver(()=>{e.parentNode&&(e.parentNode.appendChild(this._div),i.disconnect(),this._initAccessibilitySetup())});i.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this);for(let e of this._children)e._accessibleDiv&&e._accessibleDiv.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;this._pool.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pool=[],this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);let i=e.children;if(i)for(let r=0;r<i.length;r++)this._updateAccessibleObjects(i[r])}init(e){let i={accessibilityOptions:{...lF.defaultOptions,...(e==null?void 0:e.accessibilityOptions)||{}}};this.debug=i.accessibilityOptions.debug,this._activateOnTab=i.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=i.accessibilityOptions.deactivateOnMouseMove,i.accessibilityOptions.enabledByDefault?this._activate():this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._renderer.runners.postrender.remove(this)}postrender(){let e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount||(this._androidUpdateCount=e+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;let i=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(let r of this._children)r._renderId===this._renderId&&i.add(this._children.indexOf(r))}for(let r=this._children.length-1;r>=0;r--){let s=this._children[r];i.has(r)||(s._accessibleDiv&&s._accessibleDiv.parentNode&&(s._accessibleDiv.parentNode.removeChild(s._accessibleDiv),this._pool.push(s._accessibleDiv),s._accessibleDiv=null),s._accessibleActive=!1,k1(this._children,r,1))}if(this._renderer.renderingToScreen){let{x:r,y:s,width:a,height:l}=this._renderer.screen,c=this._div;c.style.left=`${r}px`,c.style.top=`${s}px`,c.style.width=`${a}px`,c.style.height=`${l}px`}for(let r=0;r<this._children.length;r++){let s=this._children[r];if(!s._accessibleActive||!s._accessibleDiv)continue;let a=s._accessibleDiv,l=s.hitArea||s.getBounds().rectangle;if(s.hitArea){let c=s.worldTransform,h=this._renderer.resolution,f=this._renderer.resolution;a.style.left=`${(c.tx+l.x*c.a)*h}px`,a.style.top=`${(c.ty+l.y*c.d)*f}px`,a.style.width=`${l.width*c.a*h}px`,a.style.height=`${l.height*c.d*f}px`}else{this._capHitArea(l);let c=this._renderer.resolution,h=this._renderer.resolution;a.style.left=`${l.x*c}px`,a.style.top=`${l.y*h}px`,a.style.width=`${l.width*c}px`,a.style.height=`${l.height*h}px`}}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);let{width:i,height:r}=this._renderer;e.x+e.width>i&&(e.width=i-e.x),e.y+e.height>r&&(e.height=r-e.y)}_addChild(e){let i=this._pool.pop();i||(e.accessibleType==="button"?i=document.createElement("button"):(i=document.createElement(e.accessibleType),i.style.cssText=`
                        color: transparent;
                        pointer-events: none;
                        padding: 0;
                        margin: 0;
                        border: 0;
                        outline: 0;
                        background: transparent;
                        box-sizing: border-box;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                        -ms-user-select: none;
                    `,e.accessibleText&&(i.innerText=e.accessibleText)),i.style.width=`${Cc}px`,i.style.height=`${Cc}px`,i.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",i.style.position="absolute",i.style.zIndex=kb.toString(),i.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?i.setAttribute("aria-live","off"):i.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?i.setAttribute("aria-relevant","additions"):i.setAttribute("aria-relevant","text"),i.addEventListener("click",this._onClick.bind(this)),i.addEventListener("focus",this._onFocus.bind(this)),i.addEventListener("focusout",this._onFocusOut.bind(this))),i.style.pointerEvents=e.accessiblePointerEvents,i.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?i.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(i.title=`container ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&i.setAttribute("aria-label",e.accessibleHint),this.debug&&this._updateDebugHTML(i),e._accessibleActive=!0,e._accessibleDiv=i,i.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv),e.interactive&&(e._accessibleDiv.tabIndex=e.tabIndex)}_dispatchEvent(e,i){let{container:r}=e.target,s=this._renderer.events.rootBoundary,a=Object.assign(new jh(s),{target:r});s.rootTarget=this._renderer.lastObjectRendered,i.forEach(l=>s.dispatchEvent(a,l))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode!==XM||!this._activateOnTab||this._activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._div=null,this._pool=null,this._children=null,this._renderer=null,this._activateOnTab&&globalThis.removeEventListener("keydown",this._onKeyDown)}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}},Kf.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"accessibility"},Kf.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0},uT=Kf}),cT,uF=b(()=>{cT={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_renderId:-1}}),wz=b(()=>{$(),br(),oF(),uF(),ke.add(uT),ke.mixin(Lt,cT)}),am,cF=b(()=>{$(),am=class{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{let{clientWidth:r,clientHeight:s}=this._resizeTo;e=r,i=s}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}},am.extension=I.Application}),Bs,au=b(()=>{Bs=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(Bs||{})}),th,hF=b(()=>{th=class{constructor(t,e=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=r}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));let e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let e=this.next;return this.next=t?null:e,this.previous=null,e}}}),Ub,Xt,go=b(()=>{au(),hF(),Ub=class mr{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new th(null,null,1/0),this.deltaMS=1/mr.targetFPMS,this.elapsedMS=1/mr.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,i,r=Bs.NORMAL){return this._addListener(new th(e,i,r))}addOnce(e,i,r=Bs.NORMAL){return this._addListener(new th(e,i,r,!0))}_addListener(e){let i=this._head.next,r=this._head;if(!i)e.connect(r);else{for(;i;){if(e.priority>i.priority){e.connect(r);break}r=i,i=i.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,i){let r=this._head.next;for(;r;)r.match(e,i)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,i=this._head;for(;i=i.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let i;if(e>this.lastTime){if(i=this.elapsedMS=e-this.lastTime,i>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){let a=e-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=e-a%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*mr.targetFPMS;let r=this._head,s=r.next;for(;s;)s=s.emit(this);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){let i=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,i)/1e3,mr.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{let i=Math.max(this.minFPS,e);this._minElapsedMS=1/(i/1e3)}}static get shared(){if(!mr._shared){let e=mr._shared=new mr;e.autoStart=!0,e._protected=!0}return mr._shared}static get system(){if(!mr._system){let e=mr._system=new mr;e.autoStart=!0,e._protected=!0}return mr._system}},Ub.targetFPMS=.06,Xt=Ub}),om,dF=b(()=>{$(),au(),go(),om=class{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Bs.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Xt.shared:new Xt,t.autoStart&&this.start()}static destroy(){if(this._ticker){let t=this._ticker;this.ticker=null,t.destroy()}}},om.extension=I.Application}),fF=b(()=>{$(),cF(),dF(),ke.add(am),ke.add(om)}),$M,Es,hT=b(()=>{au(),go(),$M=class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this._tickerAdded||!this.domElement||(Xt.system.add(this._tickerUpdate,this,Bs.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(Xt.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let t=this.events._rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY,pointerType:t.pointerType,pointerId:t.pointerId}))}_tickerUpdate(t){this._deltaTime+=t.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}},Es=new $M}),zl,py=b(()=>{vr(),fy(),zl=class extends jh{constructor(){super(...arguments),this.client=new Et,this.movement=new Et,this.offset=new Et,this.global=new Et,this.screen=new Et}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,r,s,a,l,c,h,f,p,g,y,v,x){throw new Error("Method not implemented.")}}}),gr,dT=b(()=>{py(),gr=class extends zl{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}}),ta,fT=b(()=>{py(),ta=class extends zl{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}},ta.DOM_DELTA_PIXEL=0,ta.DOM_DELTA_LINE=1,ta.DOM_DELTA_PAGE=2}),ZM,QM,_l,pT,pF=b(()=>{ir(),vr(),dt(),hT(),py(),dT(),fT(),ZM=2048,QM=new Et,_l=new Et,pT=class{constructor(t){this.dispatch=new ui,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,r)=>i.priority-r.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;let e=this.mappingTable[t.type];if(e)for(let i=0,r=e.length;i<r;i++)e[i].fn(t);else Le(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){Es.pauseUpdate=!0;let i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",r=this[i](this.rootTarget,this.rootTarget.eventMode,QM.set(t,e),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(t,e){if(!t.target)return;let i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let r=0,s=i.length-1;r<s;r++)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;let r=Array.isArray(e)?e:[e];for(let s=i.length-1;s>=0;s--)r.forEach(a=>{t.currentTarget=i[s],this.notifyTarget(t,a)})}propagationPath(t){let e=[t];for(let i=0;i<ZM&&t!==this.rootTarget&&t.parent;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,i,r,s,a=!1){let l=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Es.pauseUpdate=!1),t.interactiveChildren&&t.children){let f=t.children;for(let p=f.length-1;p>=0;p--){let g=f[p],y=this.hitTestMoveRecursive(g,this._isInteractive(e)?e:g.eventMode,i,r,s,a||s(t,i));if(y){if(y.length>0&&!y[y.length-1].parent)continue;let v=t.isInteractive();(y.length>0||v)&&(v&&this._allInteractiveElements.push(t),y.push(t)),this._hitElements.length===0&&(this._hitElements=y),l=!0}}}let c=this._isInteractive(e),h=t.isInteractive();return h&&h&&this._allInteractiveElements.push(t),a||this._hitElements.length>0?null:l?this._hitElements:c&&!s(t,i)&&r(t,i)?h?[t]:[]:null}hitTestRecursive(t,e,i,r,s){if(this._interactivePrune(t)||s(t,i))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Es.pauseUpdate=!1),t.interactiveChildren&&t.children){let c=t.children,h=i;for(let f=c.length-1;f>=0;f--){let p=c[f],g=this.hitTestRecursive(p,this._isInteractive(e)?e:p.eventMode,h,r,s);if(g){if(g.length>0&&!g[g.length-1].parent)continue;let y=t.isInteractive();return(g.length>0||y)&&g.push(t),g}}}let a=this._isInteractive(e),l=t.isInteractive();return a&&r(t,i)?l?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!t||!t.visible||!t.renderable||!t.measurable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren}hitPruneFn(t,e){if(t.hitArea&&(t.worldTransform.applyInverse(e,_l),!t.hitArea.contains(_l.x,_l.y)))return!0;if(t.effects&&t.effects.length)for(let i=0;i<t.effects.length;i++){let r=t.effects[i];if(r.containsPoint&&!r.containsPoint(e,this.hitTestFn))return!0}return!1}hitTestFn(t,e){return t.hitArea?!0:t!=null&&t.containsPoint?(t.worldTransform.applyInverse(e,_l),t.containsPoint(_l)):!1}notifyTarget(t,e){var s,a;if(!t.currentTarget.isInteractive())return;e??(e=t.type);let i=`on${e}`;(a=(s=t.currentTarget)[i])==null||a.call(s,t);let r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this._notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this._notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof gr)){Le("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){let r=e.button===2;this.dispatchEvent(e,r?"rightdown":"mousedown")}let i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var c,h;if(!(t instanceof gr)){Le("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;let i=e.pointerType==="mouse"||e.pointerType==="pen",r=this.trackingData(t.pointerId),s=this.findMountedTarget(r.overTargets);if(((c=r.overTargets)==null?void 0:c.length)>0&&s!==e.target){let f=t.type==="mousemove"?"mouseout":"pointerout",p=this.createPointerEvent(t,f,s);if(this.dispatchEvent(p,"pointerout"),i&&this.dispatchEvent(p,"mouseout"),!e.composedPath().includes(s)){let g=this.createPointerEvent(t,"pointerleave",s);for(g.eventPhase=g.AT_TARGET;g.target&&!e.composedPath().includes(g.target);)g.currentTarget=g.target,this.notifyTarget(g),i&&this.notifyTarget(g,"mouseleave"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(p)}if(s!==e.target){let f=t.type==="mousemove"?"mouseover":"pointerover",p=this.clonePointerEvent(e,f);this.dispatchEvent(p,"pointerover"),i&&this.dispatchEvent(p,"mouseover");let g=s==null?void 0:s.parent;for(;g&&g!==this.rootTarget.parent&&g!==e.target;)g=g.parent;if(!g||g===this.rootTarget.parent){let y=this.clonePointerEvent(e,"pointerenter");for(y.eventPhase=y.AT_TARGET;y.target&&y.target!==s&&y.target!==this.rootTarget.parent;)y.currentTarget=y.target,this.notifyTarget(y),i&&this.notifyTarget(y,"mouseenter"),y.target=y.target.parent;this.freeEvent(y)}this.freeEvent(p)}let a=[],l=this.enableGlobalMoveEvents??!0;this.moveOnAll?a.push("pointermove"):this.dispatchEvent(e,"pointermove"),l&&a.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?a.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),l&&a.push("globaltouchmove")),i&&(this.moveOnAll?a.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),l&&a.push("globalmousemove"),this.cursor=(h=e.target)==null?void 0:h.cursor),a.length>0&&this.all(e,a),this._allInteractiveElements.length=0,this._hitElements.length=0,r.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var a;if(!(t instanceof gr)){Le("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),r=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),r&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(a=i.target)==null?void 0:a.cursor);let s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(t){if(!(t instanceof gr)){Le("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.trackingData(t.pointerId);if(e.overTargets){let i=t.pointerType==="mouse"||t.pointerType==="pen",r=this.findMountedTarget(e.overTargets),s=this.createPointerEvent(t,"pointerout",r);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");let a=this.createPointerEvent(t,"pointerleave",r);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),i&&this.notifyTarget(a,"mouseleave"),a.target=a.target.parent;e.overTargets=null,this.freeEvent(s),this.freeEvent(a)}this.cursor=null}mapPointerUp(t){if(!(t instanceof gr)){Le("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let l=i.button===2;this.dispatchEvent(i,l?"rightup":"mouseup")}let r=this.trackingData(t.pointerId),s=this.findMountedTarget(r.pressTargetsByButton[t.button]),a=s;if(s&&!i.composedPath().includes(s)){let l=s;for(;l&&!i.composedPath().includes(l);){if(i.currentTarget=l,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){let c=i.button===2;this.notifyTarget(i,c?"rightupoutside":"mouseupoutside")}l=l.parent}delete r.pressTargetsByButton[t.button],a=l}if(a){let l=this.clonePointerEvent(i,"click");l.target=a,l.path=null,r.clicksByButton[t.button]||(r.clicksByButton[t.button]={clickCount:0,target:l.target,timeStamp:e});let c=r.clicksByButton[t.button];if(c.target===l.target&&e-c.timeStamp<200?++c.clickCount:c.clickCount=1,c.target=l.target,c.timeStamp=e,l.detail=c.clickCount,l.pointerType==="mouse"){let h=l.button===2;this.dispatchEvent(l,h?"rightclick":"click")}else l.pointerType==="touch"&&this.dispatchEvent(l,"tap");this.dispatchEvent(l,"pointertap"),this.freeEvent(l)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof gr)){Le("EventBoundary cannot map a non-pointer event as a pointer event");return}let e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),r=this.createPointerEvent(t);if(i){let s=i;for(;s;)r.currentTarget=s,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch"?this.notifyTarget(r,"touchendoutside"):(r.pointerType==="mouse"||r.pointerType==="pen")&&this.notifyTarget(r,r.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(r)}mapWheel(t){if(!(t instanceof ta)){Le("EventBoundary cannot map a non-wheel event as a wheel event");return}let e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){let r=this.allocateEvent(gr);return this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=i??this.hitTest(r.global.x,r.global.y)??this._hitElements[0],typeof e=="string"&&(r.type=e),r}createWheelEvent(t){let e=this.allocateEvent(ta);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){let i=this.allocateEvent(gr);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof gr&&e instanceof gr&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof zl&&e instanceof zl&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);let e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.defaultPrevented=!1,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}_notifyListeners(t,e){let i=t.currentTarget._events[e];if(i)if("fn"in i)i.once&&t.currentTarget.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let r=0,s=i.length;r<s&&!t.propagationImmediatelyStopped;r++)i[r].once&&t.currentTarget.removeListener(e,i[r].fn,void 0,!0),i[r].fn.call(i[r].context,t)}}}),JM,eB,$f,my,mT=b(()=>{$(),pF(),hT(),dT(),fT(),JM=1,eB={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},$f=class Ax{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new pT(null),Es.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new gr(null),this._rootWheelEvent=new ta(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Ax.defaultEventFeatures},{set:(i,r,s)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),i[r]=s,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){let{canvas:i,resolution:r}=this.renderer;this.setTargetElement(i),this.resolution=r,Ax._defaultEventMode=e.eventMode??"passive",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let i=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(i=!1),this._currentCursor===e)return;this._currentCursor=e;let r=this.cursorStyles[e];if(r)switch(typeof r){case"string":i&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":i&&Object.assign(this.domElement.style,r);break}else i&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let i=this._normalizeToPointerData(e);this.autoPreventDefault&&i[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,s=i.length;r<s;r++){let a=i[r],l=this._bootstrapEvent(this._rootPointerEvent,a);this.rootBoundary.mapEvent(l)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Es.pointerMoved();let i=this._normalizeToPointerData(e);for(let r=0,s=i.length;r<s;r++){let a=this._bootstrapEvent(this._rootPointerEvent,i[r]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let i=e.target;e.composedPath&&e.composedPath().length>0&&(i=e.composedPath()[0]);let r=i!==this.domElement?"outside":"",s=this._normalizeToPointerData(e);for(let a=0,l=s.length;a<l;a++){let c=this._bootstrapEvent(this._rootPointerEvent,s[a]);c.type+=r,this.rootBoundary.mapEvent(c)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let i=this._normalizeToPointerData(e);for(let r=0,s=i.length;r<s;r++){let a=this._bootstrapEvent(this._rootPointerEvent,i[r]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;let i=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(i)}setTargetElement(e){this._removeEvents(),this.domElement=e,Es.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;Es.addTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;Es.removeTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,i,r){let s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},a=1/this.resolution;e.x=(i-s.left)*(this.domElement.width/s.width)*a,e.y=(r-s.top)*(this.domElement.height/s.height)*a}_normalizeToPointerData(e){let i=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,s=e.changedTouches.length;r<s;r++){let a=e.changedTouches[r];typeof a.button>"u"&&(a.button=0),typeof a.buttons>"u"&&(a.buttons=1),typeof a.isPrimary>"u"&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,a.type=e.type,i.push(a)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){let r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=JM),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,i.push(r)}else i.push(e);return i}normalizeWheelEvent(e){let i=this._rootWheelEvent;return this._transferMouseData(i,e),i.deltaX=e.deltaX,i.deltaY=e.deltaY,i.deltaZ=e.deltaZ,i.deltaMode=e.deltaMode,this.mapPositionToPoint(i.screen,e.clientX,e.clientY),i.global.copyFrom(i.screen),i.offset.copyFrom(i.screen),i.nativeEvent=e,i.type=e.type,i}_bootstrapEvent(e,i){return e.originalEvent=null,e.nativeEvent=i,e.pointerId=i.pointerId,e.width=i.width,e.height=i.height,e.isPrimary=i.isPrimary,e.pointerType=i.pointerType,e.pressure=i.pressure,e.tangentialPressure=i.tangentialPressure,e.tiltX=i.tiltX,e.tiltY=i.tiltY,e.twist=i.twist,this._transferMouseData(e,i),this.mapPositionToPoint(e.screen,i.clientX,i.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=eB[e.type]||e.type),e}_transferMouseData(e,i){e.isTrusted=i.isTrusted,e.srcElement=i.srcElement,e.timeStamp=performance.now(),e.type=i.type,e.altKey=i.altKey,e.button=i.button,e.buttons=i.buttons,e.client.x=i.clientX,e.client.y=i.clientY,e.ctrlKey=i.ctrlKey,e.metaKey=i.metaKey,e.movement.x=i.movementX,e.movement.y=i.movementY,e.page.x=i.pageX,e.page.y=i.pageY,e.relatedTarget=null,e.shiftKey=i.shiftKey}},$f.extension={name:"events",type:[I.WebGLSystem,I.CanvasSystem,I.WebGPUSystem],priority:-1},$f.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0},my=$f}),gT,mF=b(()=>{mT(),fy(),gT={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(t){this.eventMode=t?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??my.defaultEventMode},set eventMode(t){this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,i){let r=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,s=typeof i=="object"?i.signal:void 0,a=typeof i=="object"?i.once===!0:!1,l=typeof e=="function"?void 0:e;t=r?`${t}capture`:t;let c=typeof e=="function"?e:e.handleEvent,h=this;s&&s.addEventListener("abort",()=>{h.off(t,c,l)}),a?h.once(t,c,l):h.on(t,c,l)},removeEventListener(t,e,i){let r=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,s=typeof e=="function"?void 0:e;t=r?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,s)},dispatchEvent(t){if(!(t instanceof jh))throw new Error("Container cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}}}),Cz=b(()=>{$(),br(),mT(),mF(),ke.add(my),ke.mixin(Lt,gT)}),er,Xr=b(()=>{er=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(er||{})}),yT,gF=b(()=>{yT={createCanvas:(t,e)=>{let i=document.createElement("canvas");return i.width=t,i.height=e,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")}}),Nb,et,Ct=b(()=>{gF(),Nb=yT,et={get(){return Nb},set(t){Nb=t}}});function rs(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function Rc(t){return t.split("?")[0].split("#")[0]}function Rz(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Mz(t,e,i){return t.replace(new RegExp(Rz(e),"g"),i)}function Bz(t,e){let i="",r=0,s=-1,a=0,l=-1;for(let c=0;c<=t.length;++c){if(c<t.length)l=t.charCodeAt(c);else{if(l===47)break;l=47}if(l===47){if(!(s===c-1||a===1))if(s!==c-1&&a===2){if(i.length<2||r!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){let h=i.lastIndexOf("/");if(h!==i.length-1){h===-1?(i="",r=0):(i=i.slice(0,h),r=i.length-1-i.lastIndexOf("/")),s=c,a=0;continue}}else if(i.length===2||i.length===1){i="",r=0,s=c,a=0;continue}}}else i.length>0?i+=`/${t.slice(s+1,c)}`:i=t.slice(s+1,c),r=c-s-1;s=c,a=0}else l===46&&a!==-1?++a:a=-1}return i}var gi,yo=b(()=>{Ct(),gi={toPosix(t){return Mz(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){rs(t),t=this.toPosix(t);let e=/^file:\/\/\//.exec(t);if(e)return e[0];let i=/^[^/:]+:\/{0,2}/.exec(t);return i?i[0]:""},toAbsolute(t,e,i){if(rs(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;let r=Rc(this.toPosix(e??et.get().getBaseUrl())),s=Rc(this.toPosix(i??this.rootname(r)));return t=this.toPosix(t),t.startsWith("/")?gi.join(s,t.slice(1)):this.isAbsolute(t)?t:this.join(r,t)},normalize(t){if(rs(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="",i=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));let r=t.endsWith("/");return t=Bz(t),t.length>0&&r&&(t+="/"),i?`/${t}`:e+t},isAbsolute(t){return rs(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let i=0;i<t.length;++i){let r=t[i];if(rs(r),r.length>0)if(e===void 0)e=r;else{let s=t[i-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(rs(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0),i=e===47,r=-1,s=!0,a=this.getProtocol(t),l=t;t=t.slice(a.length);for(let c=t.length-1;c>=1;--c)if(e=t.charCodeAt(c),e===47){if(!s){r=c;break}}else s=!1;return r===-1?i?"/":this.isUrl(l)?a+t:a:i&&r===1?"//":a+t.slice(0,r)},rootname(t){rs(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){let i=t.indexOf("/",e.length);i!==-1?e=t.slice(0,i):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){rs(t),e&&rs(e),t=Rc(this.toPosix(t));let i=0,r=-1,s=!0,a;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let l=e.length-1,c=-1;for(a=t.length-1;a>=0;--a){let h=t.charCodeAt(a);if(h===47){if(!s){i=a+1;break}}else c===-1&&(s=!1,c=a+1),l>=0&&(h===e.charCodeAt(l)?--l===-1&&(r=a):(l=-1,r=c))}return i===r?r=c:r===-1&&(r=t.length),t.slice(i,r)}for(a=t.length-1;a>=0;--a)if(t.charCodeAt(a)===47){if(!s){i=a+1;break}}else r===-1&&(s=!1,r=a+1);return r===-1?"":t.slice(i,r)},extname(t){rs(t),t=Rc(this.toPosix(t));let e=-1,i=0,r=-1,s=!0,a=0;for(let l=t.length-1;l>=0;--l){let c=t.charCodeAt(l);if(c===47){if(!s){i=l+1;break}continue}r===-1&&(s=!1,r=l+1),c===46?e===-1?e=l:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||r===-1||a===0||a===1&&e===r-1&&e===i+1?"":t.slice(e,r)},parse(t){rs(t);let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=Rc(this.toPosix(t));let i=t.charCodeAt(0),r=this.isAbsolute(t),s;e.root=this.rootname(t),r||this.hasProtocol(t)?s=1:s=0;let a=-1,l=0,c=-1,h=!0,f=t.length-1,p=0;for(;f>=s;--f){if(i=t.charCodeAt(f),i===47){if(!h){l=f+1;break}continue}c===-1&&(h=!1,c=f+1),i===46?a===-1?a=f:p!==1&&(p=1):a!==-1&&(p=-1)}return a===-1||c===-1||p===0||p===1&&a===c-1&&a===l+1?c!==-1&&(l===0&&r?e.base=e.name=t.slice(1,c):e.base=e.name=t.slice(l,c)):(l===0&&r?(e.name=t.slice(1,a),e.base=t.slice(1,c)):(e.name=t.slice(l,a),e.base=t.slice(l,c)),e.ext=t.slice(a,c)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]}}),yr,qh=b(()=>{yr=(t,e,i=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(r=>typeof r=="string"||i?e(r):r):t)});function yF(t,e,i,r,s){let a=e[i];for(let l=0;l<a.length;l++){let c=a[l];i<e.length-1?yF(t.replace(r[i],c),e,i+1,r,s):s.push(t.replace(r[i],c))}}function _F(t){let e=/\{(.*?)\}/g,i=t.match(e),r=[];if(i){let s=[];i.forEach(a=>{let l=a.substring(1,a.length-1).split(",");s.push(l)}),yF(t,s,0,i,r)}else r.push(t);return r}var vF=b(()=>{}),Xl,gy=b(()=>{Xl=t=>!Array.isArray(t)});function bF(t){return t.split(".").pop().split("?").shift().split("#").shift()}var fn,_o=b(()=>{dt(),yo(),qh(),vF(),gy(),fn=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{let e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){let{alias:e,src:i}=t;return yr(e||i,r=>typeof r=="string"?r:Array.isArray(r)?r.map(s=>(s==null?void 0:s.src)??s):r!=null&&r.src?r.src:r,!0)}addManifest(t){this._manifest&&Le("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){let i=[],r=e;Array.isArray(e)||(r=Object.entries(e).map(([s,a])=>typeof a=="string"||Array.isArray(a)?{alias:s,src:a}:{alias:s,...a})),r.forEach(s=>{let a=s.src,l=s.alias,c;if(typeof l=="string"){let h=this._createBundleAssetId(t,l);i.push(h),c=[l,h]}else{let h=l.map(f=>this._createBundleAssetId(t,f));i.push(...h),c=[...l,...h]}this.add({...s,alias:c,src:a})}),this._bundles[t]=i}add(t){let e=[];Array.isArray(t)?e.push(...t):e.push(t);let i;i=r=>{this.hasKey(r)&&Le(`[Resolver] already has key: ${r} overwriting`)},yr(e).forEach(r=>{let{src:s}=r,{data:a,format:l,loadParser:c}=r,h=yr(s).map(g=>typeof g=="string"?_F(g):Array.isArray(g)?g:[g]),f=this.getAlias(r);Array.isArray(f)?f.forEach(i):i(f);let p=[];h.forEach(g=>{g.forEach(y=>{let v={};if(typeof y!="object"){v.src=y;for(let x=0;x<this._parsers.length;x++){let A=this._parsers[x];if(A.test(y)){v=A.parse(y);break}}}else a=y.data??a,l=y.format??l,c=y.loadParser??c,v={...v,...y};if(!f)throw new Error(`[Resolver] alias is undefined for this asset: ${v.src}`);v=this._buildResolvedAsset(v,{aliases:f,data:a,format:l,loadParser:c}),p.push(v)})}),f.forEach(g=>{this._assetMap[g]=p})})}resolveBundle(t){let e=Xl(t);t=yr(t);let i={};return t.forEach(r=>{let s=this._bundles[r];if(s){let a=this.resolve(s),l={};for(let c in a){let h=a[c];l[this._extractAssetIdFromBundle(r,c)]=h}i[r]=l}}),e?i[t[0]]:i}resolveUrl(t){let e=this.resolve(t);if(typeof t!="string"){let i={};for(let r in e)i[r]=e[r].src;return i}return e.src}resolve(t){let e=Xl(t);t=yr(t);let i={};return t.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(c=>{let h=s.filter(f=>f[l]?f[l]===c:!1);h.length&&(s=h)})}),this._resolverHash[r]=s[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});i[r]=this._resolverHash[r]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){let i=t[e],r=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;let e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){let{aliases:i,data:r,loadParser:s,format:a}=e;return(this._basePath||this._rootPath)&&(t.src=gi.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...r||{},...t.data},t.loadParser=s??t.loadParser,t.format=a??t.format??bF(t.src),t}},fn.RETINA_PREFIX=/@([0-9\.]+)x/}),xh,_T=b(()=>{xh=(t,e)=>{let i=e.split("?")[1];return i&&(t+=`?${i}`),t}}),Hb,lm,xF=b(()=>{ci(),tt(),Hb=class qc{constructor(e,i){this.linkedSheets=[],this._texture=e instanceof ve?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=i;let r=parseFloat(i.meta.scale);r?(this.resolution=r,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=qc.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let i=e,r=qc.BATCH_SIZE;for(;i-e<r&&i<this._frameKeys.length;){let s=this._frameKeys[i],a=this._frames[s],l=a.frame;if(l){let c=null,h=null,f=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,p=new wt(0,0,Math.floor(f.w)/this.resolution,Math.floor(f.h)/this.resolution);a.rotated?c=new wt(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.h)/this.resolution,Math.floor(l.w)/this.resolution):c=new wt(Math.floor(l.x)/this.resolution,Math.floor(l.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(h=new wt(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution)),this.textures[s]=new ve({source:this.textureSource,frame:c,orig:p,trim:h,rotate:a.rotated?2:0,defaultAnchor:a.anchor,defaultBorders:a.borders,label:s.toString()})}i++}}_processAnimations(){let e=this.data.animations||{};for(let i in e){this.animations[i]=[];for(let r=0;r<e[i].length;r++){let s=e[i][r];this.animations[i].push(this.textures[s])}}}_parseComplete(){let e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*qc.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*qc.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var i;for(let r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((i=this._texture)==null||i.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}},Hb.BATCH_SIZE=1e3,lm=Hb});function TF(t,e,i){let r={};if(t.forEach(s=>{r[s]=e}),Object.keys(e.textures).forEach(s=>{r[s]=e.textures[s]}),!i){let s=gi.dirname(t[0]);e.linkedSheets.forEach((a,l)=>{let c=TF([`${s}/${e.data.meta.related_multi_packs[l]}`],a,!0);Object.assign(r,c)})}return r}var tB,vT,SF=b(()=>{Xr(),_o(),_T(),$(),tt(),yo(),xF(),tB=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"],vT={extension:I.Asset,cache:{test:t=>t instanceof lm,getCacheableAssets:(t,e)=>TF(t,e,!1)},resolver:{extension:{type:I.ResolveParser,name:"resolveSpritesheet"},test:t=>{let e=t.split("?")[0].split("."),i=e.pop(),r=e.pop();return i==="json"&&tB.includes(r)},parse:t=>{var i;let e=t.split(".");return{resolution:parseFloat(((i=fn.RETINA_PREFIX.exec(t))==null?void 0:i[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:I.LoadParser,priority:er.Normal,name:"spritesheetLoader"},async testParse(t,e){return gi.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,i){var p,g;let{texture:r,imageFilename:s,textureOptions:a}=(e==null?void 0:e.data)??{},l=gi.dirname(e.src);l&&l.lastIndexOf("/")!==l.length-1&&(l+="/");let c;if(r instanceof ve)c=r;else{let y=xh(l+(s??t.meta.image),e.src);c=(await i.load([{src:y,data:a}]))[y]}let h=new lm(c.source,t);await h.parse();let f=(p=t==null?void 0:t.meta)==null?void 0:p.related_multi_packs;if(Array.isArray(f)){let y=[];for(let x of f){if(typeof x!="string")continue;let A=l+x;(g=e.data)!=null&&g.ignoreMultiPack||(A=xh(A,e.src),y.push(i.load({src:A,data:{textureOptions:a,ignoreMultiPack:!0}})))}let v=await Promise.all(y);h.linkedSheets=v,v.forEach(x=>{x.linkedSheets=[h].concat(h.linkedSheets.filter(A=>A!==x))})}return h},async unload(t,e,i){await i.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}}}),bT=b(()=>{$(),SF(),ke.add(vT)});function xT(t,e,i){let{width:r,height:s}=i.orig,a=i.trim;if(a){let l=a.width,c=a.height;t.minX=a.x-e._x*r,t.maxX=t.minX+l,t.minY=a.y-e._y*s,t.maxY=t.minY+c}else t.minX=-e._x*r,t.maxX=t.minX+r,t.minY=-e._y*s,t.maxY=t.minY+s}var TT=b(()=>{}),Fs,vn=b(()=>{qi(),br(),Fs=class extends Lt{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new Ci(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){let e=this.bounds,{x:i,y:r}=t;return i>=e.minX&&i<=e.maxX&&r>=e.minY&&r<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;let t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}collectRenderablesSimple(t,e,i){let{renderPipes:r,renderableGC:s}=e;r.blendMode.setBlendMode(this,this.groupBlendMode,t),r[this.renderPipeId].addRenderable(this,t),s.addRenderable(this),this.didViewUpdate=!1;let a=this.children,l=a.length;for(let c=0;c<l;c++)a[c].collectRenderables(t,e,i)}}}),Yi,vo=b(()=>{fo(),tt(),TT(),gt(),vn(),Yi=class Ex extends Fs{constructor(e=ve.EMPTY){e instanceof ve&&(e={texture:e});let{texture:i=ve.EMPTY,anchor:r,roundPixels:s,width:a,height:l,...c}=e;super({label:"Sprite",...c}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new oi({_onUpdate:()=>{this.onViewUpdate()}}),r?this.anchor=r:i.defaultAnchor&&(this.anchor=i.defaultAnchor),this.texture=i,this.allowChildren=!1,this.roundPixels=s??!1,a!==void 0&&(this.width=a),l!==void 0&&(this.height=l)}static from(e,i=!1){return e instanceof ve?new Ex(e):new Ex(ve.from(e,i))}set texture(e){e||(e=ve.EMPTY);let i=this._texture;i!==e&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return xT(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Pe("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){let e=this._anchor,i=this._texture,r=this._bounds,{width:s,height:a}=i.orig;r.minX=-e._x*s,r.maxX=r.minX+s,r.minY=-e._y*a,r.maxY=r.minY+a}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){let i=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,i){typeof e=="object"?(i=e.height??e.width,e=e.width):i??(i=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),i!==void 0&&this._setHeight(i,this._texture.orig.height)}}});function yy(t,e,i){let r=AF;t.measurable=!0,Xh(t,i,r),e.addBoundsMask(r),t.measurable=!1}var AF,_y=b(()=>{qi(),nu(),AF=new Ci});function vy(t,e,i){let r=os.get();t.measurable=!0;let s=Oi.get().identity(),a=ST(t,i,s);ly(t,r,a),t.measurable=!1,e.addBoundsMask(r),Oi.return(s),os.return(r)}function ST(t,e,i){return t?(t!==e&&(ST(t.parent,e,i),t.updateLocalTransform(),i.append(t.localTransform)),i):(Le("Mask bounds, renderable is not inside the root container"),i)}var by=b(()=>{uy(),po(),dt()}),um,EF=b(()=>{$(),vo(),_y(),by(),um=class{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Yi),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||yy(this.mask,t,e)}addLocalBounds(t,e){vy(this.mask,t,e)}containsPoint(t,e){let i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Yi}},um.extension=I.MaskEffect}),cm,wF=b(()=>{$(),cm=class{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}},cm.extension=I.MaskEffect}),hm,CF=b(()=>{$(),br(),_y(),by(),hm=class{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){yy(this.mask,t,e)}addLocalBounds(t,e){vy(this.mask,t,e)}containsPoint(t,e){let i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Lt}},hm.extension=I.MaskEffect}),ls,ou=b(()=>{Ct(),$(),Li(),ls=class extends Yt{constructor(t){t.resource||(t.resource=et.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){let r=super.resize(t,e,i);return r&&this.resizeCanvas(),r}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}},ls.extension=I.TextureSource}),pn,lu=b(()=>{Ct(),$(),dt(),Li(),pn=class extends Yt{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){let e=et.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=e,Le("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}},pn.extension=I.TextureSource});async function AT(){return Vb??(Vb=(async()=>{var a;let t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";let e=await new Promise(l=>{let c=document.createElement("video");c.onloadeddata=()=>l(c),c.onerror=()=>l(null),c.autoplay=!1,c.crossOrigin="anonymous",c.preload="auto",c.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",c.load()});if(!e)return"premultiply-alpha-on-upload";let i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);let r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);let s=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,s),t.deleteFramebuffer(r),t.deleteTexture(i),(a=t.getExtension("WEBGL_lose_context"))==null||a.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Vb}var Vb,ET=b(()=>{}),Mc,Il,wT=b(()=>{$(),go(),ET(),Li(),Mc=class RF extends Yt{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...RF.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let e=Xt.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let e=this.resource,i=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(i.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await AT(),this._load=new Promise((r,s)=>{this.isValid?r(this):(this._resolve=r,this._reject=s,i.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${i.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){let e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){let e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Xt.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Xt.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Xt.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}},Mc.extension=I.TextureSource,Mc.defaultOptions={...Yt.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},Mc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},Il=Mc}),iB,At,bn=b(()=>{dt(),qh(),iB=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){let e=this._cache.get(t);return e||Le(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){let i=yr(t),r;for(let c=0;c<this.parsers.length;c++){let h=this.parsers[c];if(h.test(e)){r=h.getCacheableAssets(i,e);break}}let s=new Map(Object.entries(r||{}));r||i.forEach(c=>{s.set(c,e)});let a=[...s.keys()],l={cacheKeys:a,keys:i};i.forEach(c=>{this._cacheMap.set(c,l)}),a.forEach(c=>{let h=r?r[c]:e;this._cache.has(c)&&this._cache.get(c)!==h&&Le("[Cache] already has key:",c),this._cache.set(c,s.get(c))})}remove(t){if(!this._cacheMap.has(t)){Le(`[Assets] Asset id ${t} was not found in the Cache`);return}let e=this._cacheMap.get(t);e.cacheKeys.forEach(i=>{this._cache.delete(i)}),e.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}},At=new iB});function Pz(t={}){return CT(t)}function CT(t={}){let e=t&&t.resource,i=e?t.resource:t,r=e?t:{resource:t};for(let s=0;s<dm.length;s++){let a=dm[s];if(a.test(i))return new a(r)}throw new Error(`Could not find a source type for resource: ${r.resource}`)}function MF(t={},e=!1){let i=t&&t.resource,r=i?t.resource:t,s=i?t:{resource:t};if(!e&&At.has(r))return At.get(r);let a=new ve({source:CT(s)});return a.on("destroy",()=>{At.has(r)&&At.remove(r)}),e||At.set(r,a),a}function BF(t,e=!1){return typeof t=="string"?At.get(t):t instanceof Yt?new ve({source:t}):MF(t,e)}var dm,PF=b(()=>{bn(),$(),Li(),tt(),dm=[],ke.handleByList(I.TextureSource,dm),ve.from=BF,Yt.from=CT}),RT=b(()=>{$(),EF(),wF(),CF(),sT(),ou(),lu(),wT(),PF(),ke.add(um,cm,hm,Il,pn,ls,vh)}),us,ua=b(()=>{us=class{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(let i in t){let r=t[i];this.setResource(r,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;let t=[],e=0;for(let i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){var r,s;let i=this.resources[e];t!==i&&(i&&((r=t.off)==null||r.call(t,"change",this.onResourceChange,this)),(s=t.on)==null||s.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){let e=this.resources;for(let i in e)e[i]._touched=t}destroy(){var e,i;let t=this.resources;for(let r in t)(i=(e=t[r]).off)==null||i.call(e,"change",this.onResourceChange,this);this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){let e=this.resources;for(let i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}});function MT(){return(!vl||vl!=null&&vl.isContextLost())&&(vl=et.get().createCanvas().getContext("webgl",{})),vl}var vl,BT=b(()=>{Ct()});function Dz(t){let e="";for(let i=0;i<t;++i)i>0&&(e+=`
else `),i<t-1&&(e+=`if(test == ${i}.0){}`);return e}function DF(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let i=e.createShader(e.FRAGMENT_SHADER);try{for(;;){let r=OF.replace(/%forloop%/gi,Dz(t));if(e.shaderSource(i,r),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))t=t/2|0;else break}}finally{e.deleteShader(i)}return t}var OF,FF=b(()=>{OF=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`)});function bo(){var e;if($a)return $a;let t=MT();return $a=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),$a=DF($a,t),(e=t.getExtension("WEBGL_lose_context"))==null||e.loseContext(),$a}var $a,xo=b(()=>{BT(),FF(),$a=null});function xy(t,e){let i=2166136261;for(let r=0;r<e;r++)i^=t[r].uid,i=Math.imul(i,16777619),i>>>=0;return PT[i]||Oz(t,e,i)}function Oz(t,e,i){let r={},s=0;Up||(Up=bo());for(let l=0;l<Up;l++){let c=l<e?t[l]:ve.EMPTY.source;r[s++]=c.source,r[s++]=c.style}let a=new us(r);return PT[i]=a,a}var PT,Up,Ty=b(()=>{ua(),tt(),xo(),PT={},Up=0}),ia,DT=b(()=>{ia=class{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}});function fm(t,e){let i=t.byteLength/8|0,r=new Float64Array(t,0,i);new Float64Array(e,0,i).set(r);let s=t.byteLength-i*8;if(s>0){let a=new Uint8Array(t,i*8,s);new Uint8Array(e,i*8,s).set(a)}}var OT=b(()=>{}),FT,Ht,To=b(()=>{FT={normal:"normal-npm",add:"add-npm",screen:"screen-npm"},Ht=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",t[t.NONE=5]="NONE",t))(Ht||{})});function Yl(t,e){return e.alphaMode==="no-premultiply-alpha"&&FT[t]||t}var Wh=b(()=>{To()}),GT,GF=b(()=>{GT=class{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){let e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}});function rB(){return pm>0?kT[--pm]:new LT}function sB(t){kT[pm++]=t}var LT,kT,pm,bl,zb,IT,LF=b(()=>{Gi(),DT(),OT(),Wh(),xo(),GF(),LT=class{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new GT,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}},kT=[],pm=0,bl=0,zb=class Np{constructor(e={}){this.uid=Gt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],Np.defaultOptions.maxTextures=Np.defaultOptions.maxTextures??bo(),e={...Np.defaultOptions,...e};let{maxTextures:i,attributesInitialSize:r,indicesInitialSize:s}=e;this.attributeBuffer=new ia(r*4),this.indexBuffer=new Uint16Array(s),this.maxTextures=i}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)sB(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,i){let r=e._batch.textures.ids[i._source.uid];return!r&&r!==0?!1:(e._textureId=r,e.texture=i,!0)}updateElement(e){this.dirty=!0;let i=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,i.float32View,i.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,i.float32View,i.uint32View,e._attributeStart,e._textureId)}break(e){let i=this._elements;if(!i[this.elementStart])return;let r=rB(),s=r.textures;s.clear();let a=i[this.elementStart],l=Yl(a.blendMode,a.texture._source),c=a.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);let h=this.attributeBuffer.float32View,f=this.attributeBuffer.uint32View,p=this.indexBuffer,g=this._batchIndexSize,y=this._batchIndexStart,v="startBatch",x=this.maxTextures;for(let A=this.elementStart;A<this.elementSize;++A){let S=i[A];i[A]=null;let w=S.texture._source,E=Yl(S.blendMode,w),B=l!==E||c!==S.topology;if(w._batchTick===bl&&!B){S._textureId=w._textureBindLocation,g+=S.indexSize,S.packAsQuad?(this.packQuadAttributes(S,h,f,S._attributeStart,S._textureId),this.packQuadIndex(p,S._indexStart,S._attributeStart/this.vertexSize)):(this.packAttributes(S,h,f,S._attributeStart,S._textureId),this.packIndex(S,p,S._indexStart,S._attributeStart/this.vertexSize)),S._batch=r;continue}w._batchTick=bl,(s.count>=x||B)&&(this._finishBatch(r,y,g-y,s,l,c,e,v),v="renderBatch",y=g,l=E,c=S.topology,r=rB(),s=r.textures,s.clear(),++bl),S._textureId=w._textureBindLocation=s.count,s.ids[w.uid]=s.count,s.textures[s.count++]=w,S._batch=r,g+=S.indexSize,S.packAsQuad?(this.packQuadAttributes(S,h,f,S._attributeStart,S._textureId),this.packQuadIndex(p,S._indexStart,S._attributeStart/this.vertexSize)):(this.packAttributes(S,h,f,S._attributeStart,S._textureId),this.packIndex(S,p,S._indexStart,S._attributeStart/this.vertexSize))}s.count>0&&(this._finishBatch(r,y,g-y,s,l,c,e,v),y=g,++bl),this.elementStart=this.elementSize,this._batchIndexStart=y,this._batchIndexSize=g}_finishBatch(e,i,r,s,a,l,c,h){e.gpuBindGroup=null,e.bindGroup=null,e.action=h,e.batcher=this,e.textures=s,e.blendMode=a,e.topology=l,e.start=i,e.size=r,++bl,this.batches[this.batchIndex++]=e,c.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){let i=Math.max(e,this.attributeBuffer.size*2),r=new ia(i);fm(this.attributeBuffer.rawBinaryData,r.rawBinaryData),this.attributeBuffer=r}_resizeIndexBuffer(e){let i=this.indexBuffer,r=Math.max(e,i.length*1.5);r+=r%2;let s=r>65535?new Uint32Array(r):new Uint16Array(r);if(s.BYTES_PER_ELEMENT!==i.BYTES_PER_ELEMENT)for(let a=0;a<i.length;a++)s[a]=i[a];else fm(i.buffer,s.buffer);this.indexBuffer=s}packQuadIndex(e,i,r){e[i]=r+0,e[i+1]=r+1,e[i+2]=r+2,e[i+3]=r+0,e[i+4]=r+2,e[i+5]=r+3}packIndex(e,i,r,s){let a=e.indices,l=e.indexSize,c=e.indexOffset,h=e.attributeOffset;for(let f=0;f<l;f++)i[r++]=s+a[f+c]-h}destroy(){for(let e=0;e<this.batches.length;e++)sB(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}},zb.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6},IT=zb}),Je,Gs=b(()=>{Je=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(Je||{})}),Xi,xn=b(()=>{ir(),Gi(),Gs(),Xi=class extends ui{constructor(t){let{data:e,size:i}=t,{usage:r,label:s,shrinkToFit:a}=t;super(),this.uid=Gt("buffer"),this._resourceType="buffer",this._resourceId=Gt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i??(i=e==null?void 0:e.byteLength);let l=!!e;this.descriptor={size:i,usage:r,mappedAtCreation:l,label:s},this.shrinkToFit=a??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Je.STATIC)}set static(t){t?this.descriptor.usage|=Je.STATIC:this.descriptor.usage&=~Je.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){i&&this.emit("update",this);return}let r=this._data;if(this._data=t,this._dataInt32=null,!r||r.length!==t.length){!this.shrinkToFit&&r&&t.byteLength<r.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=Gt("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}});function UT(t,e){if(!(t instanceof Xi)){let i=e?Je.INDEX:Je.VERTEX;t instanceof Array&&(e?(t=new Uint32Array(t),i=Je.INDEX|Je.COPY_DST):(t=new Float32Array(t),i=Je.VERTEX|Je.COPY_DST)),t=new Xi({data:t,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:i})}return t}var kF=b(()=>{xn(),Gs()});function IF(t,e,i){let r=t.getAttribute(e);if(!r)return i.minX=0,i.minY=0,i.maxX=0,i.maxY=0,i;let s=r.buffer.data,a=1/0,l=1/0,c=-1/0,h=-1/0,f=s.BYTES_PER_ELEMENT,p=(r.offset||0)/f,g=(r.stride||2*4)/f;for(let y=p;y<s.length;y+=g){let v=s[y],x=s[y+1];v>c&&(c=v),x>h&&(h=x),v<a&&(a=v),x<l&&(l=x)}return i.minX=a,i.minY=l,i.maxX=c,i.maxY=h,i}var UF=b(()=>{});function Fz(t){return(t instanceof Xi||Array.isArray(t)||t.BYTES_PER_ELEMENT)&&(t={buffer:t}),t.buffer=UT(t.buffer,!1),t}var ca,So=b(()=>{ir(),qi(),Gi(),xn(),kF(),UF(),ca=class extends ui{constructor(t={}){super(),this.uid=Gt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Ci,this._boundsDirty=!0;let{attributes:e,indexBuffer:i,topology:r}=t;if(this.buffers=[],this.attributes={},e)for(let s in e)this.addAttribute(s,e[s]);this.instanceCount=t.instanceCount??1,i&&this.addIndex(i),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(let t in this.attributes){let e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){let i=Fz(e);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=i}addIndex(t){this.indexBuffer=UT(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,IF(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}}),nB,aB,NT,NF=b(()=>{xn(),Gs(),So(),nB=new Float32Array(1),aB=new Uint32Array(1),NT=class extends ca{constructor(){let t=new Xi({data:nB,label:"attribute-batch-buffer",usage:Je.VERTEX|Je.COPY_DST,shrinkToFit:!1}),e=new Xi({data:aB,label:"index-batch-buffer",usage:Je.INDEX|Je.COPY_DST,shrinkToFit:!1}),i=6*4;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:i,offset:0},aUV:{buffer:t,format:"float32x2",stride:i,offset:2*4},aColor:{buffer:t,format:"unorm8x4",stride:i,offset:4*4},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:i,offset:5*4}},indexBuffer:e})}}});function jl(t,e){let i=wx[t];return i===void 0&&(Hp[e]===void 0&&(Hp[e]=1),wx[t]=i=Hp[e]++),i}var Hp,wx,Kh=b(()=>{Hp=Object.create(null),wx=Object.create(null)});function HF(){if(!Zf){Zf="mediump";let t=MT();t&&t.getShaderPrecisionFormat&&(Zf=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?"highp":"mediump")}return Zf}var Zf,VF=b(()=>{BT()});function zF(t,e,i){return e?t:i?(t=t.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${t}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${t}
        `}var XF=b(()=>{});function YF(t,e,i){let r=i?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(t.substring(0,9)!=="precision"){let s=i?e.requestedFragmentPrecision:e.requestedVertexPrecision;return s==="highp"&&r!=="highp"&&(s="mediump"),`precision ${s} float;
${t}`}else if(r!=="highp"&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}var jF=b(()=>{});function qF(t,e){return e?`#version 300 es
${t}`:t}var WF=b(()=>{});function KF(t,{name:e="pixi-program"},i=!0){e=e.replace(/\s+/g,"-"),e+=i?"-fragment":"-vertex";let r=i?$F:ZF;return r[e]?(r[e]++,e+=`-${r[e]}`):r[e]=1,t.indexOf("#define SHADER_NAME")!==-1?t:`${`#define SHADER_NAME ${e}`}
${t}`}var $F,ZF,QF=b(()=>{$F={},ZF={}});function JF(t,e){return e?t.replace("#version 300 es",""):t}var eG=b(()=>{}),Qf,Jf,Xb,lr,xr=b(()=>{Kh(),VF(),XF(),jF(),WF(),QF(),eG(),Qf={stripVersion:JF,ensurePrecision:YF,addProgramDefines:zF,setProgramName:KF,insertVersion:qF},Jf=Object.create(null),Xb=class Cx{constructor(e){e={...Cx.defaultOptions,...e};let i=e.fragment.indexOf("#version 300 es")!==-1,r={stripVersion:i,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:HF()},setProgramName:{name:e.name},addProgramDefines:i,insertVersion:i},s=e.fragment,a=e.vertex;Object.keys(Qf).forEach(l=>{let c=r[l];s=Qf[l](s,c,!0),a=Qf[l](a,c,!1)}),this.fragment=s,this.vertex=a,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=jl(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){let i=`${e.vertex}:${e.fragment}`;return Jf[i]||(Jf[i]=new Cx(e)),Jf[i]}},Xb.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"},lr=Xb});function mn(t){return Rx[t]??Rx.float32}var Rx,Ao=b(()=>{Rx={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}}});function tG({source:t,entryPoint:e}){let i={},r=t.indexOf(`fn ${e}`);if(r!==-1){let s=t.indexOf("->",r);if(s!==-1){let a=t.substring(r,s),l=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g,c;for(;(c=l.exec(a))!==null;){let h=iG[c[3]]??"float32";i[c[2]]={location:parseInt(c[1],10),format:h,stride:mn(h).stride,offset:0,instance:!1,start:0}}}}return i}var iG,rG=b(()=>{Ao(),iG={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"}});function Vp(t){var g,y;let e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,i=/@group\((\d+)\)/,r=/@binding\((\d+)\)/,s=/var(<[^>]+>)? (\w+)/,a=/:\s*(\w+)/,l=/struct\s+(\w+)\s*{([^}]+)}/g,c=/(\w+)\s*:\s*([\w\<\>]+)/g,h=/struct\s+(\w+)/,f=(g=t.match(e))==null?void 0:g.map(v=>({group:parseInt(v.match(i)[1],10),binding:parseInt(v.match(r)[1],10),name:v.match(s)[2],isUniform:v.match(s)[1]==="<uniform>",type:v.match(a)[1]}));if(!f)return{groups:[],structs:[]};let p=((y=t.match(l))==null?void 0:y.map(v=>{let x=v.match(h)[1],A=v.match(c).reduce((S,w)=>{let[E,B]=w.split(":");return S[E.trim()]=B.trim(),S},{});return A?{name:x,members:A}:null}).filter(({name:v})=>f.some(x=>x.type===v)))??[];return{groups:f,structs:p}}var sG=b(()=>{}),to,nG=b(()=>{to=(t=>(t[t.VERTEX=1]="VERTEX",t[t.FRAGMENT=2]="FRAGMENT",t[t.COMPUTE=4]="COMPUTE",t))(to||{})});function aG({groups:t}){let e=[];for(let i=0;i<t.length;i++){let r=t[i];e[r.group]||(e[r.group]=[]),r.isUniform?e[r.group].push({binding:r.binding,visibility:to.VERTEX|to.FRAGMENT,buffer:{type:"uniform"}}):r.type==="sampler"?e[r.group].push({binding:r.binding,visibility:to.FRAGMENT,sampler:{type:"filtering"}}):r.type==="texture_2d"&&e[r.group].push({binding:r.binding,visibility:to.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}var oG=b(()=>{nG()});function lG({groups:t}){let e=[];for(let i=0;i<t.length;i++){let r=t[i];e[r.group]||(e[r.group]={}),e[r.group][r.name]=r.binding}return e}var uG=b(()=>{});function cG(t,e){let i=new Set,r=new Set,s=[...t.structs,...e.structs].filter(l=>i.has(l.name)?!1:(i.add(l.name),!0)),a=[...t.groups,...e.groups].filter(l=>{let c=`${l.name}-${l.binding}`;return r.has(c)?!1:(r.add(c),!0)});return{structs:s,groups:a}}var hG=b(()=>{}),ep,Tr,Yr=b(()=>{Kh(),rG(),sG(),oG(),uG(),hG(),ep=Object.create(null),Tr=class dG{constructor(e){var c,h;this._layoutKey=0,this._attributeLocationsKey=0;let{fragment:i,vertex:r,layout:s,gpuLayout:a,name:l}=e;if(this.name=l,this.fragment=i,this.vertex=r,i.source===r.source){let f=Vp(i.source);this.structsAndGroups=f}else{let f=Vp(r.source),p=Vp(i.source);this.structsAndGroups=cG(f,p)}this.layout=s??lG(this.structsAndGroups),this.gpuLayout=a??aG(this.structsAndGroups),this.autoAssignGlobalUniforms=((c=this.layout[0])==null?void 0:c.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((h=this.layout[1])==null?void 0:h.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){let{vertex:e,fragment:i}=this,r=e.source+i.source+e.entryPoint+i.entryPoint;this._layoutKey=jl(r,"program")}get attributeData(){return this._attributeData??(this._attributeData=tG(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(e){let i=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return ep[i]||(ep[i]=new dG(e)),ep[i]}}});function Mx(t,e,i){if(t)for(let r in t){let s=r.toLocaleLowerCase(),a=e[s];if(a){let l=t[r];r==="header"&&(l=l.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),i&&a.push(`//----${i}----//`),a.push(l)}else Le(`${r} placement hook does not exist in shader`)}}var fG=b(()=>{dt()});function Bx(t){var i;let e={};return(((i=t.match(HT))==null?void 0:i.map(r=>r.replace(/[{()}]/g,"")))??[]).forEach(r=>{e[r]=[]}),e}var HT,pG=b(()=>{HT=/\{\{(.*?)\}\}/g});function oB(t,e){let i,r=/@in\s+([^;]+);/g;for(;(i=r.exec(t))!==null;)e.push(i[1])}function Px(t,e,i=!1){let r=[];oB(e,r),t.forEach(c=>{c.header&&oB(c.header,r)});let s=r;i&&s.sort();let a=s.map((c,h)=>`       @location(${h}) ${c},`).join(`
`),l=e.replace(/@in\s+[^;]+;\s*/g,"");return l=l.replace("{{in}}",`
${a}
`),l}var mG=b(()=>{});function lB(t,e){let i,r=/@out\s+([^;]+);/g;for(;(i=r.exec(t))!==null;)e.push(i[1])}function Gz(t){let e=/\b(\w+)\s*:/g.exec(t);return e?e[1]:""}function Lz(t){let e=/@.*?\s+/g;return t.replace(e,"")}function gG(t,e){let i=[];lB(e,i),t.forEach(h=>{h.header&&lB(h.header,i)});let r=0,s=i.sort().map(h=>h.indexOf("builtin")>-1?h:`@location(${r++}) ${h}`).join(`,
`),a=i.sort().map(h=>`       var ${Lz(h)};`).join(`
`),l=`return VSOutput(
            ${i.sort().map(h=>` ${Gz(h)}`).join(`,
`)});`,c=e.replace(/@out\s+[^;]+;\s*/g,"");return c=c.replace("{{struct}}",`
${s}
`),c=c.replace("{{start}}",`
${a}
`),c=c.replace("{{return}}",`
${l}
`),c}var yG=b(()=>{});function Dx(t,e){let i=t;for(let r in e){let s=e[r];s.join(`
`).length?i=i.replace(`{{${r}}}`,`//-----${r} START-----//
${s.join(`
`)}
//----${r} FINISH----//`):i=i.replace(`{{${r}}}`,"")}return i}var _G=b(()=>{});function vG({template:t,bits:e}){let i=xG(t,e);if(ra[i])return ra[i];let{vertex:r,fragment:s}=kz(t,e);return ra[i]=TG(r,s,e),ra[i]}function bG({template:t,bits:e}){let i=xG(t,e);return ra[i]||(ra[i]=TG(t.vertex,t.fragment,e)),ra[i]}function kz(t,e){let i=e.map(l=>l.vertex).filter(l=>!!l),r=e.map(l=>l.fragment).filter(l=>!!l),s=Px(i,t.vertex,!0);s=gG(i,s);let a=Px(r,t.fragment,!0);return{vertex:s,fragment:a}}function xG(t,e){return e.map(i=>(zp.has(i)||zp.set(i,SG++),zp.get(i))).sort((i,r)=>i-r).join("-")+t.vertex+t.fragment}function TG(t,e,i){let r=Bx(t),s=Bx(e);return i.forEach(a=>{Mx(a.vertex,r,a.name),Mx(a.fragment,s,a.name)}),{vertex:Dx(t,r),fragment:Dx(e,s)}}var ra,zp,SG,AG=b(()=>{fG(),pG(),mG(),yG(),_G(),ra=Object.create(null),zp=new Map,SG=0}),VT,zT,XT,YT,EG=b(()=>{VT=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,zT=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,XT=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,YT=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`}),jT,wG,qT,CG=b(()=>{jT={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},wG={name:"global-uniforms-ubo-bit",vertex:{header:`
          uniform globalUniforms {
            mat3 uProjectionMatrix;
            mat3 uWorldTransformMatrix;
            vec4 uWorldColorAlpha;
            vec2 uResolution;
          };
        `}},qT={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}}});function uu({bits:t,name:e}){let i=vG({template:{fragment:zT,vertex:VT},bits:[jT,...t]});return Tr.from({name:e,vertex:{source:i.vertex,entryPoint:"main"},fragment:{source:i.fragment,entryPoint:"main"}})}function cu({bits:t,name:e}){return new lr({name:e,...bG({template:{vertex:XT,fragment:YT},bits:[qT,...t]})})}var ha=b(()=>{xr(),Yr(),AG(),EG(),CG()}),$h,Zh,Qh=b(()=>{$h={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},Zh={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}}});function Iz(t){let e=[];if(t===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let i=0;for(let r=0;r<t;r++)e.push(`@group(1) @binding(${i++}) var textureSource${r+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${i++}) var textureSampler${r+1}: sampler;`)}return e.join(`
`)}function Uz(t){let e=[];if(t===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let i=0;i<t;i++)i===t-1?e.push("  default:{"):e.push(`  case ${i}:{`),e.push(`      outColor = textureSampleGrad(textureSource${i+1}, textureSampler${i+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function Sy(t){return Xp[t]||(Xp[t]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${Iz(t)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${Uz(t)}
            `}}),Xp[t]}function Nz(t){let e=[];for(let i=0;i<t;i++)i>0&&e.push("else"),i<t-1&&e.push(`if(vTextureId < ${i}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${i}], vUV);`),e.push("}");return e.join(`
`)}function Ay(t){return Yp[t]||(Yp[t]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${t}];

            `,main:`

                ${Nz(t)}
            `}}),Yp[t]}var Xp,Yp,Jh=b(()=>{Xp={},Yp={}}),Eo,wo,da=b(()=>{Eo={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},wo={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}}}),mm,WT,RG=b(()=>{mm=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],WT=mm.reduce((t,e)=>(t[e]=!0,t),{})});function MG(t,e){switch(t){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var BG=b(()=>{}),Yb,ei,hi=b(()=>{Gi(),Kh(),RG(),BG(),Yb=class PG{constructor(e,i){this._touched=0,this.uid=Gt("uniform"),this._resourceType="uniformGroup",this._resourceId=Gt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,i={...PG.defaultOptions,...i},this.uniformStructures=e;let r={};for(let s in e){let a=e[s];if(a.name=s,a.size=a.size??1,!WT[a.type])throw new Error(`Uniform type ${a.type} is not supported. Supported uniform types are: ${mm.join(", ")}`);a.value??(a.value=MG(a.type,a.size)),r[s]=a.value}this.uniforms=r,this._dirtyId=1,this.ubo=i.ubo,this.isStatic=i.isStatic,this._signature=jl(Object.keys(r).map(s=>`${s}-${e[s].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}},Yb.defaultOptions={ubo:!1,isStatic:!1},ei=Yb});function Ey(t){let e=Ox[t];if(e)return e;let i=new Int32Array(t);for(let r=0;r<t;r++)i[r]=r;return e=Ox[t]=new ei({uTextures:{value:i,type:"i32",size:t}},{isStatic:!0}),e}var Ox,wy=b(()=>{hi(),Ox={}}),tr,jr=b(()=>{tr=(t=>(t[t.WEBGL=1]="WEBGL",t[t.WEBGPU=2]="WEBGPU",t[t.BOTH=3]="BOTH",t))(tr||{})}),qr,fs=b(()=>{ir(),xr(),ua(),Yr(),jr(),hi(),Gi(),qr=class DG extends ui{constructor(e){super(),this.uid=Gt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:i,glProgram:r,groups:s,resources:a,compatibleRenderers:l,groupMap:c}=e;this.gpuProgram=i,this.glProgram=r,l===void 0&&(l=0,i&&(l|=tr.WEBGPU),r&&(l|=tr.WEBGL)),this.compatibleRenderers=l;let h={};if(!a&&!s&&(a={}),a&&s)throw new Error("[Shader] Cannot have both resources and groups");if(!i&&s&&!c)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!i&&s&&c)for(let f in c)for(let p in c[f]){let g=c[f][p];h[g]={group:f,binding:p,name:g}}else if(i&&s&&!c){let f=i.structsAndGroups.groups;c={},f.forEach(p=>{c[p.group]=c[p.group]||{},c[p.group][p.binding]=p.name,h[p.name]=p})}else if(a){s={},c={},i&&i.structsAndGroups.groups.forEach(p=>{c[p.group]=c[p.group]||{},c[p.group][p.binding]=p.name,h[p.name]=p});let f=0;for(let p in a)h[p]||(s[99]||(s[99]=new us,this._ownedBindGroups.push(s[99])),h[p]={group:99,binding:f,name:p},c[99]=c[99]||{},c[99][f]=p,f++);for(let p in a){let g=p,y=a[p];!y.source&&!y._resourceType&&(y=new ei(y));let v=h[g];v&&(s[v.group]||(s[v.group]=new us,this._ownedBindGroups.push(s[v.group])),s[v.group].setResource(y,v.binding))}}this.groups=s,this._uniformBindMap=c,this.resources=this._buildResourceAccessor(s,h)}addResource(e,i,r){var s,a;(s=this._uniformBindMap)[i]||(s[i]={}),(a=this._uniformBindMap[i])[r]||(a[r]=e),this.groups[i]||(this.groups[i]=new us,this._ownedBindGroups.push(this.groups[i]))}_buildResourceAccessor(e,i){let r={};for(let s in i){let a=i[s];Object.defineProperty(r,a.name,{get(){return e[a.group].getResource(a.binding)},set(l){e[a.group].setResource(l,a.binding)}})}return r}destroy(e=!1){var i,r;this.emit("destroy",this),e&&((i=this.gpuProgram)==null||i.destroy(),(r=this.glProgram)==null||r.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(s=>{s.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){let{gpu:i,gl:r,...s}=e,a,l;return i&&(a=Tr.from(i)),r&&(l=lr.from(r)),new DG({gpuProgram:a,glProgram:l,...s})}}}),KT,OG=b(()=>{ha(),Qh(),Jh(),da(),wy(),fs(),KT=class extends qr{constructor(t){let e=cu({name:"batch",bits:[Zh,Ay(t),wo]}),i=uu({name:"batch",bits:[$h,Sy(t),Eo]});super({glProgram:e,gpuProgram:i,resources:{batchSamplers:Ey(t)}})}}}),jb,qb,Th,$T=b(()=>{$(),LF(),NF(),OG(),jb=null,qb=class FG extends IT{constructor(){super(...arguments),this.geometry=new NT,this.shader=jb||(jb=new KT(this.maxTextures)),this.name=FG.extension.name,this.vertexSize=6}packAttributes(e,i,r,s,a){let l=a<<16|e.roundPixels&65535,c=e.transform,h=c.a,f=c.b,p=c.c,g=c.d,y=c.tx,v=c.ty,{positions:x,uvs:A}=e,S=e.color,w=e.attributeOffset,E=w+e.attributeSize;for(let B=w;B<E;B++){let G=B*2,U=x[G],H=x[G+1];i[s++]=h*U+p*H+y,i[s++]=g*H+f*U+v,i[s++]=A[G],i[s++]=A[G+1],r[s++]=S,r[s++]=l}}packQuadAttributes(e,i,r,s,a){let l=e.texture,c=e.transform,h=c.a,f=c.b,p=c.c,g=c.d,y=c.tx,v=c.ty,x=e.bounds,A=x.maxX,S=x.minX,w=x.maxY,E=x.minY,B=l.uvs,G=e.color,U=a<<16|e.roundPixels&65535;i[s+0]=h*S+p*E+y,i[s+1]=g*E+f*S+v,i[s+2]=B.x0,i[s+3]=B.y0,r[s+4]=G,r[s+5]=U,i[s+6]=h*A+p*E+y,i[s+7]=g*E+f*A+v,i[s+8]=B.x1,i[s+9]=B.y1,r[s+10]=G,r[s+11]=U,i[s+12]=h*A+p*w+y,i[s+13]=g*w+f*A+v,i[s+14]=B.x2,i[s+15]=B.y2,r[s+16]=G,r[s+17]=U,i[s+18]=h*S+p*w+y,i[s+19]=g*w+f*S+v,i[s+20]=B.x3,i[s+21]=B.y3,r[s+22]=G,r[s+23]=U}},qb.extension={type:[I.Batcher],name:"default"},Th=qb});function ZT(t,e,i,r,s,a,l,c=null){let h=0;i*=e,s*=a;let f=c.a,p=c.b,g=c.c,y=c.d,v=c.tx,x=c.ty;for(;h<l;){let A=t[i],S=t[i+1];r[s]=f*A+g*S+v,r[s+1]=p*A+y*S+x,s+=a,i+=e,h++}}function QT(t,e,i,r){let s=0;for(e*=i;s<r;)t[e]=0,t[e+1]=0,e+=i,s++}var JT=b(()=>{});function Cy(t,e,i,r,s){let a=e.a,l=e.b,c=e.c,h=e.d,f=e.tx,p=e.ty;i||(i=0),r||(r=2),s||(s=t.length/r-i);let g=i*r;for(let y=0;y<s;y++){let v=t[g],x=t[g+1];t[g]=a*v+c*x+f,t[g+1]=l*v+h*x+p,g+=r}}var eS=b(()=>{}),uB,ed,tS=b(()=>{nt(),j1(),uB=new De,ed=class{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){let t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,i=this.renderable;return i?Y1(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||uB}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}}),ws,iS,rS,sS=b(()=>{$(),ws={extension:{type:I.ShapeBuilder,name:"circle"},build(t,e){let i,r,s,a,l,c;if(t.type==="circle"){let G=t;i=G.x,r=G.y,l=c=G.radius,s=a=0}else if(t.type==="ellipse"){let G=t;i=G.x,r=G.y,l=G.halfWidth,c=G.halfHeight,s=a=0}else{let G=t,U=G.width/2,H=G.height/2;i=G.x+U,r=G.y+H,l=c=Math.max(0,Math.min(G.radius,Math.min(U,H))),s=U-l,a=H-c}if(!(l>=0&&c>=0&&s>=0&&a>=0))return e;let h=Math.ceil(2.3*Math.sqrt(l+c)),f=h*8+(s?4:0)+(a?4:0);if(f===0)return e;if(h===0)return e[0]=e[6]=i+s,e[1]=e[3]=r+a,e[2]=e[4]=i-s,e[5]=e[7]=r-a,e;let p=0,g=h*4+(s?2:0)+2,y=g,v=f,x=s+l,A=a,S=i+x,w=i-x,E=r+A;if(e[p++]=S,e[p++]=E,e[--g]=E,e[--g]=w,a){let G=r-A;e[y++]=w,e[y++]=G,e[--v]=G,e[--v]=S}for(let G=1;G<h;G++){let U=Math.PI/2*(G/h),H=s+Math.cos(U)*l,j=a+Math.sin(U)*c,Z=i+H,q=i-H,L=r+j,N=r-j;e[p++]=Z,e[p++]=L,e[--g]=L,e[--g]=q,e[y++]=q,e[y++]=N,e[--v]=N,e[--v]=Z}x=s,A=a+c,S=i+x,w=i-x,E=r+A;let B=r-A;return e[p++]=S,e[p++]=E,e[--v]=B,e[--v]=S,s&&(e[p++]=w,e[p++]=E,e[--v]=B,e[--v]=w),e},triangulate(t,e,i,r,s,a){if(t.length===0)return;let l=0,c=0;for(let p=0;p<t.length;p+=2)l+=t[p],c+=t[p+1];l/=t.length/2,c/=t.length/2;let h=r;e[h*i]=l,e[h*i+1]=c;let f=h++;for(let p=0;p<t.length;p+=2)e[h*i]=t[p],e[h*i+1]=t[p+1],p>0&&(s[a++]=h,s[a++]=f,s[a++]=h-1),h++;s[a++]=f+1,s[a++]=f,s[a++]=h-1}},iS={...ws,extension:{...ws.extension,name:"ellipse"}},rS={...ws,extension:{...ws.extension,name:"roundedRectangle"}}}),GG,LG,Hz=b(()=>{GG=1e-4,LG=1e-4});function kG(t){let e=t.length;if(e<6)return 1;let i=0;for(let r=0,s=t[e-2],a=t[e-1];r<e;r+=2){let l=t[r],c=t[r+1];i+=(l-s)*(c+a),s=l,a=c}return i<0?-1:1}var IG=b(()=>{});function cB(t,e,i,r,s,a,l,c){let h=t-i*s,f=e-r*s,p=t+i*a,g=e+r*a,y,v;l?(y=r,v=-i):(y=-r,v=i);let x=h+y,A=f+v,S=p+y,w=g+v;return c.push(x,A),c.push(S,w),2}function za(t,e,i,r,s,a,l,c){let h=i-t,f=r-e,p=Math.atan2(h,f),g=Math.atan2(s-t,a-e);c&&p<g?p+=Math.PI*2:!c&&p>g&&(g+=Math.PI*2);let y=p,v=g-p,x=Math.abs(v),A=Math.sqrt(h*h+f*f),S=(15*x*Math.sqrt(A)/Math.PI>>0)+1,w=v/S;if(y+=w,c){l.push(t,e),l.push(i,r);for(let E=1,B=y;E<S;E++,B+=w)l.push(t,e),l.push(t+Math.sin(B)*A,e+Math.cos(B)*A);l.push(t,e),l.push(s,a)}else{l.push(i,r),l.push(t,e);for(let E=1,B=y;E<S;E++,B+=w)l.push(t+Math.sin(B)*A,e+Math.cos(B)*A),l.push(t,e);l.push(s,a),l.push(t,e)}return S*2}function UG(t,e,i,r,s,a){let l=1e-4;if(t.length===0)return;let c=e,h=c.alignment;if(e.alignment!==.5){let D=kG(t);i&&(D*=-1),h=(h-.5)*D+.5}let f=new Et(t[0],t[1]),p=new Et(t[t.length-2],t[t.length-1]),g=r,y=Math.abs(f.x-p.x)<l&&Math.abs(f.y-p.y)<l;if(g){t=t.slice(),y&&(t.pop(),t.pop(),p.set(t[t.length-2],t[t.length-1]));let D=(f.x+p.x)*.5,O=(p.y+f.y)*.5;t.unshift(D,O),t.push(D,O)}let v=s,x=t.length/2,A=t.length,S=v.length/2,w=c.width/2,E=w*w,B=c.miterLimit*c.miterLimit,G=t[0],U=t[1],H=t[2],j=t[3],Z=0,q=0,L=-(U-j),N=G-H,se=0,le=0,pe=Math.sqrt(L*L+N*N);L/=pe,N/=pe,L*=w,N*=w;let Ae=h,W=(1-Ae)*2,te=Ae*2;g||(c.cap==="round"?A+=za(G-L*(W-te)*.5,U-N*(W-te)*.5,G-L*W,U-N*W,G+L*te,U+N*te,v,!0)+2:c.cap==="square"&&(A+=cB(G,U,L,N,W,te,!0,v))),v.push(G-L*W,U-N*W),v.push(G+L*te,U+N*te);for(let D=1;D<x-1;++D){G=t[(D-1)*2],U=t[(D-1)*2+1],H=t[D*2],j=t[D*2+1],Z=t[(D+1)*2],q=t[(D+1)*2+1],L=-(U-j),N=G-H,pe=Math.sqrt(L*L+N*N),L/=pe,N/=pe,L*=w,N*=w,se=-(j-q),le=H-Z,pe=Math.sqrt(se*se+le*le),se/=pe,le/=pe,se*=w,le*=w;let O=H-G,Q=U-j,X=H-Z,re=q-j,ie=O*X+Q*re,he=Q*X-re*O,xe=he<0;if(Math.abs(he)<.001*Math.abs(ie)){v.push(H-L*W,j-N*W),v.push(H+L*te,j+N*te),ie>=0&&(c.join==="round"?A+=za(H,j,H-L*W,j-N*W,H-se*W,j-le*W,v,!1)+4:A+=2,v.push(H-se*te,j-le*te),v.push(H+se*W,j+le*W));continue}let we=(-L+G)*(-N+j)-(-L+H)*(-N+U),Ye=(-se+Z)*(-le+j)-(-se+H)*(-le+q),Ee=(O*Ye-X*we)/he,Te=(re*we-Q*Ye)/he,it=(Ee-H)*(Ee-H)+(Te-j)*(Te-j),Ge=H+(Ee-H)*W,at=j+(Te-j)*W,Ot=H-(Ee-H)*te,ft=j-(Te-j)*te,vi=Math.min(O*O+Q*Q,X*X+re*re),Fe=xe?W:te,qe=vi+Fe*Fe*E;it<=qe?c.join==="bevel"||it/E>B?(xe?(v.push(Ge,at),v.push(H+L*te,j+N*te),v.push(Ge,at),v.push(H+se*te,j+le*te)):(v.push(H-L*W,j-N*W),v.push(Ot,ft),v.push(H-se*W,j-le*W),v.push(Ot,ft)),A+=2):c.join==="round"?xe?(v.push(Ge,at),v.push(H+L*te,j+N*te),A+=za(H,j,H+L*te,j+N*te,H+se*te,j+le*te,v,!0)+4,v.push(Ge,at),v.push(H+se*te,j+le*te)):(v.push(H-L*W,j-N*W),v.push(Ot,ft),A+=za(H,j,H-L*W,j-N*W,H-se*W,j-le*W,v,!1)+4,v.push(H-se*W,j-le*W),v.push(Ot,ft)):(v.push(Ge,at),v.push(Ot,ft)):(v.push(H-L*W,j-N*W),v.push(H+L*te,j+N*te),c.join==="round"?xe?A+=za(H,j,H+L*te,j+N*te,H+se*te,j+le*te,v,!0)+2:A+=za(H,j,H-L*W,j-N*W,H-se*W,j-le*W,v,!1)+2:c.join==="miter"&&it/E<=B&&(xe?(v.push(Ot,ft),v.push(Ot,ft)):(v.push(Ge,at),v.push(Ge,at)),A+=2),v.push(H-se*W,j-le*W),v.push(H+se*te,j+le*te),A+=2)}G=t[(x-2)*2],U=t[(x-2)*2+1],H=t[(x-1)*2],j=t[(x-1)*2+1],L=-(U-j),N=G-H,pe=Math.sqrt(L*L+N*N),L/=pe,N/=pe,L*=w,N*=w,v.push(H-L*W,j-N*W),v.push(H+L*te,j+N*te),g||(c.cap==="round"?A+=za(H-L*(W-te)*.5,j-N*(W-te)*.5,H-L*W,j-N*W,H+L*te,j+N*te,v,!1)+2:c.cap==="square"&&(A+=cB(H,j,L,N,W,te,!1,v)));let P=1e-4*1e-4;for(let D=S;D<A+S-2;++D)G=v[D*2],U=v[D*2+1],H=v[(D+1)*2],j=v[(D+1)*2+1],Z=v[(D+2)*2],q=v[(D+2)*2+1],!(Math.abs(G*(j-q)+H*(q-U)+Z*(U-j))<P)&&a.push(D,D+1,D+2)}var NG=b(()=>{vr(),IG()});function HG(t,e,i,r){let s=1e-4;if(t.length===0)return;let a=t[0],l=t[1],c=t[t.length-2],h=t[t.length-1],f=e||Math.abs(a-c)<s&&Math.abs(l-h)<s,p=i,g=t.length/2,y=p.length/2;for(let v=0;v<g;v++)p.push(t[v*2]),p.push(t[v*2+1]);for(let v=0;v<g-1;v++)r.push(y+v,y+v+1);f&&r.push(y+g-1,y)}var VG=b(()=>{}),zG=ds((t,e)=>{e.exports=i,e.exports.default=i;function i(P,D,O){O=O||2;var Q=D&&D.length,X=Q?D[0]*O:P.length,re=r(P,0,X,O,!0),ie=[];if(!re||re.next===re.prev)return ie;var he,xe,we,Ye,Ee,Te,it;if(Q&&(re=p(P,D,re,O)),P.length>80*O){he=we=P[0],xe=Ye=P[1];for(var Ge=O;Ge<X;Ge+=O)Ee=P[Ge],Te=P[Ge+1],Ee<he&&(he=Ee),Te<xe&&(xe=Te),Ee>we&&(we=Ee),Te>Ye&&(Ye=Te);it=Math.max(we-he,Ye-xe),it=it!==0?32767/it:0}return a(re,ie,O,he,xe,it,0),ie}function r(P,D,O,Q,X){var re,ie;if(X===te(P,D,O,Q)>0)for(re=D;re<O;re+=Q)ie=pe(re,P[re],P[re+1],ie);else for(re=O-Q;re>=D;re-=Q)ie=pe(re,P[re],P[re+1],ie);return ie&&H(ie,ie.next)&&(Ae(ie),ie=ie.next),ie}function s(P,D){if(!P)return P;D||(D=P);var O=P,Q;do if(Q=!1,!O.steiner&&(H(O,O.next)||U(O.prev,O,O.next)===0)){if(Ae(O),O=D=O.prev,O===O.next)break;Q=!0}else O=O.next;while(Q||O!==D);return D}function a(P,D,O,Q,X,re,ie){if(P){!ie&&re&&A(P,Q,X,re);for(var he=P,xe,we;P.prev!==P.next;){if(xe=P.prev,we=P.next,re?c(P,Q,X,re):l(P)){D.push(xe.i/O|0),D.push(P.i/O|0),D.push(we.i/O|0),Ae(P),P=we.next,he=we.next;continue}if(P=we,P===he){ie?ie===1?(P=h(s(P),D,O),a(P,D,O,Q,X,re,2)):ie===2&&f(P,D,O,Q,X,re):a(s(P),D,O,Q,X,re,1);break}}}}function l(P){var D=P.prev,O=P,Q=P.next;if(U(D,O,Q)>=0)return!1;for(var X=D.x,re=O.x,ie=Q.x,he=D.y,xe=O.y,we=Q.y,Ye=X<re?X<ie?X:ie:re<ie?re:ie,Ee=he<xe?he<we?he:we:xe<we?xe:we,Te=X>re?X>ie?X:ie:re>ie?re:ie,it=he>xe?he>we?he:we:xe>we?xe:we,Ge=Q.next;Ge!==D;){if(Ge.x>=Ye&&Ge.x<=Te&&Ge.y>=Ee&&Ge.y<=it&&B(X,he,re,xe,ie,we,Ge.x,Ge.y)&&U(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.next}return!0}function c(P,D,O,Q){var X=P.prev,re=P,ie=P.next;if(U(X,re,ie)>=0)return!1;for(var he=X.x,xe=re.x,we=ie.x,Ye=X.y,Ee=re.y,Te=ie.y,it=he<xe?he<we?he:we:xe<we?xe:we,Ge=Ye<Ee?Ye<Te?Ye:Te:Ee<Te?Ee:Te,at=he>xe?he>we?he:we:xe>we?xe:we,Ot=Ye>Ee?Ye>Te?Ye:Te:Ee>Te?Ee:Te,ft=w(it,Ge,D,O,Q),vi=w(at,Ot,D,O,Q),Fe=P.prevZ,qe=P.nextZ;Fe&&Fe.z>=ft&&qe&&qe.z<=vi;){if(Fe.x>=it&&Fe.x<=at&&Fe.y>=Ge&&Fe.y<=Ot&&Fe!==X&&Fe!==ie&&B(he,Ye,xe,Ee,we,Te,Fe.x,Fe.y)&&U(Fe.prev,Fe,Fe.next)>=0||(Fe=Fe.prevZ,qe.x>=it&&qe.x<=at&&qe.y>=Ge&&qe.y<=Ot&&qe!==X&&qe!==ie&&B(he,Ye,xe,Ee,we,Te,qe.x,qe.y)&&U(qe.prev,qe,qe.next)>=0))return!1;qe=qe.nextZ}for(;Fe&&Fe.z>=ft;){if(Fe.x>=it&&Fe.x<=at&&Fe.y>=Ge&&Fe.y<=Ot&&Fe!==X&&Fe!==ie&&B(he,Ye,xe,Ee,we,Te,Fe.x,Fe.y)&&U(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.prevZ}for(;qe&&qe.z<=vi;){if(qe.x>=it&&qe.x<=at&&qe.y>=Ge&&qe.y<=Ot&&qe!==X&&qe!==ie&&B(he,Ye,xe,Ee,we,Te,qe.x,qe.y)&&U(qe.prev,qe,qe.next)>=0)return!1;qe=qe.nextZ}return!0}function h(P,D,O){var Q=P;do{var X=Q.prev,re=Q.next.next;!H(X,re)&&j(X,Q,Q.next,re)&&N(X,re)&&N(re,X)&&(D.push(X.i/O|0),D.push(Q.i/O|0),D.push(re.i/O|0),Ae(Q),Ae(Q.next),Q=P=re),Q=Q.next}while(Q!==P);return s(Q)}function f(P,D,O,Q,X,re){var ie=P;do{for(var he=ie.next.next;he!==ie.prev;){if(ie.i!==he.i&&G(ie,he)){var xe=le(ie,he);ie=s(ie,ie.next),xe=s(xe,xe.next),a(ie,D,O,Q,X,re,0),a(xe,D,O,Q,X,re,0);return}he=he.next}ie=ie.next}while(ie!==P)}function p(P,D,O,Q){var X=[],re,ie,he,xe,we;for(re=0,ie=D.length;re<ie;re++)he=D[re]*Q,xe=re<ie-1?D[re+1]*Q:P.length,we=r(P,he,xe,Q,!1),we===we.next&&(we.steiner=!0),X.push(E(we));for(X.sort(g),re=0;re<X.length;re++)O=y(X[re],O);return O}function g(P,D){return P.x-D.x}function y(P,D){var O=v(P,D);if(!O)return D;var Q=le(O,P);return s(Q,Q.next),s(O,O.next)}function v(P,D){var O=D,Q=P.x,X=P.y,re=-1/0,ie;do{if(X<=O.y&&X>=O.next.y&&O.next.y!==O.y){var he=O.x+(X-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(he<=Q&&he>re&&(re=he,ie=O.x<O.next.x?O:O.next,he===Q))return ie}O=O.next}while(O!==D);if(!ie)return null;var xe=ie,we=ie.x,Ye=ie.y,Ee=1/0,Te;O=ie;do Q>=O.x&&O.x>=we&&Q!==O.x&&B(X<Ye?Q:re,X,we,Ye,X<Ye?re:Q,X,O.x,O.y)&&(Te=Math.abs(X-O.y)/(Q-O.x),N(O,P)&&(Te<Ee||Te===Ee&&(O.x>ie.x||O.x===ie.x&&x(ie,O)))&&(ie=O,Ee=Te)),O=O.next;while(O!==xe);return ie}function x(P,D){return U(P.prev,P,D.prev)<0&&U(D.next,P,P.next)<0}function A(P,D,O,Q){var X=P;do X.z===0&&(X.z=w(X.x,X.y,D,O,Q)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==P);X.prevZ.nextZ=null,X.prevZ=null,S(X)}function S(P){var D,O,Q,X,re,ie,he,xe,we=1;do{for(O=P,P=null,re=null,ie=0;O;){for(ie++,Q=O,he=0,D=0;D<we&&(he++,Q=Q.nextZ,!!Q);D++);for(xe=we;he>0||xe>0&&Q;)he!==0&&(xe===0||!Q||O.z<=Q.z)?(X=O,O=O.nextZ,he--):(X=Q,Q=Q.nextZ,xe--),re?re.nextZ=X:P=X,X.prevZ=re,re=X;O=Q}re.nextZ=null,we*=2}while(ie>1);return P}function w(P,D,O,Q,X){return P=(P-O)*X|0,D=(D-Q)*X|0,P=(P|P<<8)&16711935,P=(P|P<<4)&252645135,P=(P|P<<2)&858993459,P=(P|P<<1)&1431655765,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,P|D<<1}function E(P){var D=P,O=P;do(D.x<O.x||D.x===O.x&&D.y<O.y)&&(O=D),D=D.next;while(D!==P);return O}function B(P,D,O,Q,X,re,ie,he){return(X-ie)*(D-he)>=(P-ie)*(re-he)&&(P-ie)*(Q-he)>=(O-ie)*(D-he)&&(O-ie)*(re-he)>=(X-ie)*(Q-he)}function G(P,D){return P.next.i!==D.i&&P.prev.i!==D.i&&!L(P,D)&&(N(P,D)&&N(D,P)&&se(P,D)&&(U(P.prev,P,D.prev)||U(P,D.prev,D))||H(P,D)&&U(P.prev,P,P.next)>0&&U(D.prev,D,D.next)>0)}function U(P,D,O){return(D.y-P.y)*(O.x-D.x)-(D.x-P.x)*(O.y-D.y)}function H(P,D){return P.x===D.x&&P.y===D.y}function j(P,D,O,Q){var X=q(U(P,D,O)),re=q(U(P,D,Q)),ie=q(U(O,Q,P)),he=q(U(O,Q,D));return!!(X!==re&&ie!==he||X===0&&Z(P,O,D)||re===0&&Z(P,Q,D)||ie===0&&Z(O,P,Q)||he===0&&Z(O,D,Q))}function Z(P,D,O){return D.x<=Math.max(P.x,O.x)&&D.x>=Math.min(P.x,O.x)&&D.y<=Math.max(P.y,O.y)&&D.y>=Math.min(P.y,O.y)}function q(P){return P>0?1:P<0?-1:0}function L(P,D){var O=P;do{if(O.i!==P.i&&O.next.i!==P.i&&O.i!==D.i&&O.next.i!==D.i&&j(O,O.next,P,D))return!0;O=O.next}while(O!==P);return!1}function N(P,D){return U(P.prev,P,P.next)<0?U(P,D,P.next)>=0&&U(P,P.prev,D)>=0:U(P,D,P.prev)<0||U(P,P.next,D)<0}function se(P,D){var O=P,Q=!1,X=(P.x+D.x)/2,re=(P.y+D.y)/2;do O.y>re!=O.next.y>re&&O.next.y!==O.y&&X<(O.next.x-O.x)*(re-O.y)/(O.next.y-O.y)+O.x&&(Q=!Q),O=O.next;while(O!==P);return Q}function le(P,D){var O=new W(P.i,P.x,P.y),Q=new W(D.i,D.x,D.y),X=P.next,re=D.prev;return P.next=D,D.prev=P,O.next=X,X.prev=O,Q.next=O,O.prev=Q,re.next=Q,Q.prev=re,Q}function pe(P,D,O,Q){var X=new W(P,D,O);return Q?(X.next=Q.next,X.prev=Q,Q.next.prev=X,Q.next=X):(X.prev=X,X.next=X),X}function Ae(P){P.next.prev=P.prev,P.prev.next=P.next,P.prevZ&&(P.prevZ.nextZ=P.nextZ),P.nextZ&&(P.nextZ.prevZ=P.prevZ)}function W(P,D,O){this.i=P,this.x=D,this.y=O,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}i.deviation=function(P,D,O,Q){var X=D&&D.length,re=X?D[0]*O:P.length,ie=Math.abs(te(P,0,re,O));if(X)for(var he=0,xe=D.length;he<xe;he++){var we=D[he]*O,Ye=he<xe-1?D[he+1]*O:P.length;ie-=Math.abs(te(P,we,Ye,O))}var Ee=0;for(he=0;he<Q.length;he+=3){var Te=Q[he]*O,it=Q[he+1]*O,Ge=Q[he+2]*O;Ee+=Math.abs((P[Te]-P[Ge])*(P[it+1]-P[Te+1])-(P[Te]-P[it])*(P[Ge+1]-P[Te+1]))}return ie===0&&Ee===0?0:Math.abs((Ee-ie)/ie)};function te(P,D,O,Q){for(var X=0,re=D,ie=O-Q;re<O;re+=Q)X+=(P[ie]-P[re])*(P[re+1]+P[ie+1]),ie=re;return X}i.flatten=function(P){for(var D=P[0][0].length,O={vertices:[],holes:[],dimensions:D},Q=0,X=0;X<P.length;X++){for(var re=0;re<P[X].length;re++)for(var ie=0;ie<D;ie++)O.vertices.push(P[X][re][ie]);X>0&&(Q+=P[X-1].length,O.holes.push(Q))}return O}});function nS(t,e,i,r,s,a,l){let c=(0,XG.default)(t,e,2);if(!c)return;for(let f=0;f<c.length;f+=3)a[l++]=c[f]+s,a[l++]=c[f+1]+s,a[l++]=c[f+2]+s;let h=s*r;for(let f=0;f<t.length;f+=2)i[h]=t[f],i[h+1]=t[f+1],h+=r}var XG,aS=b(()=>{XG=ho(zG())}),hB,Ry,oS=b(()=>{$(),aS(),hB=[],Ry={extension:{type:I.ShapeBuilder,name:"polygon"},build(t,e){for(let i=0;i<t.points.length;i++)e[i]=t.points[i];return e},triangulate(t,e,i,r,s,a){nS(t,hB,e,i,r,s,a)}}}),My,lS=b(()=>{$(),My={extension:{type:I.ShapeBuilder,name:"rectangle"},build(t,e){let i=t,r=i.x,s=i.y,a=i.width,l=i.height;return a>=0&&l>=0&&(e[0]=r,e[1]=s,e[2]=r+a,e[3]=s,e[4]=r+a,e[5]=s+l,e[6]=r,e[7]=s+l),e},triangulate(t,e,i,r,s,a){let l=0;r*=i,e[r+l]=t[0],e[r+l+1]=t[1],l+=i,e[r+l]=t[2],e[r+l+1]=t[3],l+=i,e[r+l]=t[6],e[r+l+1]=t[7],l+=i,e[r+l]=t[4],e[r+l+1]=t[5],l+=i;let c=r/i;s[a++]=c,s[a++]=c+1,s[a++]=c+2,s[a++]=c+1,s[a++]=c+3,s[a++]=c+2}}}),By,uS=b(()=>{$(),By={extension:{type:I.ShapeBuilder,name:"triangle"},build(t,e){return e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,e},triangulate(t,e,i,r,s,a){let l=0;r*=i,e[r+l]=t[0],e[r+l+1]=t[1],l+=i,e[r+l]=t[2],e[r+l+1]=t[3],l+=i,e[r+l]=t[4],e[r+l+1]=t[5];let c=r/i;s[a++]=c,s[a++]=c+1,s[a++]=c+2}}});function YG(t,e,i,r){let s=e.matrix?t.copyFrom(e.matrix).invert():t.identity();if(e.textureSpace==="local"){let a=i.getBounds(qG);s.translate(-a.x,-a.y),s.scale(1/a.width,1/a.height)}else{s.translate(e.texture.frame.x,e.texture.frame.y),s.scale(1/e.texture.source.width,1/e.texture.source.height);let a=e.texture.source.style;a.addressMode==="clamp-to-edge"&&(a.addressMode="repeat",a.update())}return r&&s.append(jG.copyFrom(r).invert()),s}var jG,qG,WG=b(()=>{nt(),ci(),jG=new De,qG=new wt});function KG(t,e){let{geometryData:i,batches:r}=e;r.length=0,i.indices.length=0,i.vertices.length=0,i.uvs.length=0;for(let s=0;s<t.instructions.length;s++){let a=t.instructions[s];if(a.action==="texture")Vz(a.data,r,i);else if(a.action==="fill"||a.action==="stroke"){let l=a.action==="stroke",c=a.data.path.shapePath,h=a.data.style,f=a.data.hole;l&&f&&dB(f.shapePath,h,!0,r,i),f&&(c.shapePrimitives[c.shapePrimitives.length-1].holes=f.shapePath.shapePrimitives),dB(c,h,l,r,i)}}}function Vz(t,e,i){let{vertices:r,uvs:s,indices:a}=i,l=a.length,c=r.length/2,h=[],f=ql.rectangle,p=$G,g=t.image;p.x=t.dx,p.y=t.dy,p.width=t.dw,p.height=t.dh;let y=t.transform;f.build(p,h),y&&Cy(h,y),f.triangulate(h,r,2,c,a,l);let v=g.uvs;s.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);let x=st.get(ed);x.indexOffset=l,x.indexSize=a.length-l,x.attributeOffset=c,x.attributeSize=r.length/2-c,x.baseColor=t.style,x.alpha=t.alpha,x.texture=g,x.geometryData=i,e.push(x)}function dB(t,e,i,r,s){let{vertices:a,uvs:l,indices:c}=s;t.shapePrimitives.forEach(({shape:h,transform:f,holes:p})=>{let g=c.length,y=a.length/2,v=[],x=ql[h.type],A="triangle-list";if(x.build(h,v),f&&Cy(v,f),i){let B=h.closePath??!0,G=e;G.pixelLine?(HG(v,B,a,c),A="line-list"):UG(v,G,!1,B,a,c)}else if(p){let B=[],G=v.slice();zz(p).forEach(U=>{B.push(G.length/2),G.push(...U)}),nS(G,B,a,2,y,c,g)}else x.triangulate(v,a,2,y,c,g);let S=l.length/2,w=e.texture;if(w!==ve.WHITE){let B=YG(ZG,e,h,f);ZT(a,2,y,l,S,2,a.length/2-y,B)}else QT(l,S,2,a.length/2-y);let E=st.get(ed);E.indexOffset=g,E.indexSize=c.length-g,E.attributeOffset=y,E.attributeSize=a.length/2-y,E.baseColor=e.color,E.alpha=e.alpha,E.texture=w,E.geometryData=s,E.topology=A,r.push(E)})}function zz(t){let e=[];for(let i=0;i<t.length;i++){let r=t[i].shape,s=[];ql[r.type].build(r,s),e.push(s)}return e}var ql,$G,ZG,QG=b(()=>{$(),nt(),ci(),JT(),eS(),tt(),rr(),tS(),sS(),NG(),VG(),oS(),lS(),uS(),WG(),aS(),ql={},ke.handleByMap(I.ShapeBuilder,ql),ke.add(My,Ry,By,ws,iS,rS),$G=new wt,ZG=new De}),Fx,Gx,tp,td,Py=b(()=>{$(),Ty(),$T(),tT(),gt(),rr(),QG(),Fx=class{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}},Gx=class{constructor(){this.batcher=new Th,this.instructions=new cy}init(){this.instructions.reset()}get geometry(){return Pe(F1,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}},tp=class Lx{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){Lx.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??Lx.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let i=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){i?this._cleanGraphicsContextData(e):i=this._initContext(e),KG(e,i);let r=e.batchMode;e.customShader||r==="no-batch"?i.isBatchable=!1:r==="auto"&&(i.isBatchable=i.geometryData.vertices.length<400),e.dirty=!1}return i}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){let i=st.get(Gx),{batches:r,geometryData:s}=this._gpuContextHash[e.uid],a=s.vertices.length,l=s.indices.length;for(let p=0;p<r.length;p++)r[p].applyTransform=!1;let c=i.batcher;c.ensureAttributeBuffer(a),c.ensureIndexBuffer(l),c.begin();for(let p=0;p<r.length;p++){let g=r[p];c.add(g)}c.finish(i.instructions);let h=c.geometry;h.indexBuffer.setDataWithSize(c.indexBuffer,c.indexSize,!0),h.buffers[0].setDataWithSize(c.attributeBuffer.float32View,c.attributeSize,!0);let f=c.batches;for(let p=0;p<f.length;p++){let g=f[p];g.bindGroup=xy(g.textures.textures,g.textures.count)}return this._graphicsDataContextHash[e.uid]=i,i}_initContext(e){let i=new Fx;return i.context=e,this._gpuContextHash[e.uid]=i,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){let i=this._gpuContextHash[e.uid];i.isBatchable||this._graphicsDataContextHash[e.uid]&&(st.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),i.batches&&i.batches.forEach(r=>{st.return(r)})}destroy(){for(let e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}},tp.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"graphicsContext"},tp.defaultOptions={bezierSmoothness:.5},td=tp}),fB,ip,rp,sp,np,ap,op,lp,ar,Wr=b(()=>{fB={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},ip=0,rp=1,sp=2,np=3,ap=4,op=5,lp=class JG{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<ip)}set blend(e){!!(this.data&1<<ip)!==e&&(this.data^=1<<ip)}get offsets(){return!!(this.data&1<<rp)}set offsets(e){!!(this.data&1<<rp)!==e&&(this.data^=1<<rp)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<sp)}set culling(e){!!(this.data&1<<sp)!==e&&(this.data^=1<<sp)}get depthTest(){return!!(this.data&1<<np)}set depthTest(e){!!(this.data&1<<np)!==e&&(this.data^=1<<np)}get depthMask(){return!!(this.data&1<<op)}set depthMask(e){!!(this.data&1<<op)!==e&&(this.data^=1<<op)}get clockwiseFrontFace(){return!!(this.data&1<<ap)}set clockwiseFrontFace(e){!!(this.data&1<<ap)!==e&&(this.data^=1<<ap)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=fB[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){let e=new JG;return e.depthTest=!1,e.blend=!0,e}},lp.default2d=lp.for2d(),ar=lp});function Xz(t,e,i,r){i[r++]=(t>>16&255)/255,i[r++]=(t>>8&255)/255,i[r++]=(t&255)/255,i[r++]=e}function hu(t,e,i){let r=(t>>24&255)/255;e[i++]=(t&255)/255*r,e[i++]=(t>>8&255)/255*r,e[i++]=(t>>16&255)/255*r,e[i++]=r}var du=b(()=>{}),gm,eL=b(()=>{$(),Wr(),rr(),du(),tS(),gm=class{constructor(t,e){this.state=ar.for2d(),this._graphicsBatchesHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=t,this._adaptor=e,this._adaptor.init(),this.renderer.renderableGC.addManagedHash(this,"_graphicsBatchesHash")}validateRenderable(t){let e=t.context,i=!!this._graphicsBatchesHash[t.uid],r=this.renderer.graphicsContext.updateGpuContext(e);return!!(r.isBatchable||i!==r.isBatchable)}addRenderable(t,e){let i=this.renderer.graphicsContext.updateGpuContext(t.context);t.didViewUpdate&&this._rebuild(t),i.isBatchable?this._addToBatcher(t,e):(this.renderer.renderPipes.batch.break(e),e.add(t))}updateRenderable(t){let e=this._graphicsBatchesHash[t.uid];if(e)for(let i=0;i<e.length;i++){let r=e[i];r._batcher.updateElement(r)}}destroyRenderable(t){this._graphicsBatchesHash[t.uid]&&this._removeBatchForRenderable(t.uid),t.off("destroyed",this._destroyRenderableBound)}execute(t){if(!t.isRenderable)return;let e=this.renderer,i=t.context;if(!e.graphicsContext.getGpuContext(i).batches.length)return;let r=i.customShader||this._adaptor.shader;this.state.blendMode=t.groupBlendMode;let s=r.resources.localUniforms.uniforms;s.uTransformMatrix=t.groupTransform,s.uRound=e._roundPixels|t._roundPixels,hu(t.groupColorAlpha,s.uColor,0),this._adaptor.execute(this,t)}_rebuild(t){let e=!!this._graphicsBatchesHash[t.uid],i=this.renderer.graphicsContext.updateGpuContext(t.context);e&&this._removeBatchForRenderable(t.uid),i.isBatchable&&this._initBatchesForRenderable(t),t.batched=i.isBatchable}_addToBatcher(t,e){let i=this.renderer.renderPipes.batch,r=this._getBatchesForRenderable(t);for(let s=0;s<r.length;s++){let a=r[s];i.addToBatch(a,e)}}_getBatchesForRenderable(t){return this._graphicsBatchesHash[t.uid]||this._initBatchesForRenderable(t)}_initBatchesForRenderable(t){let e=t.context,i=this.renderer.graphicsContext.getGpuContext(e),r=this.renderer._roundPixels|t._roundPixels,s=i.batches.map(a=>{let l=st.get(ed);return a.copyTo(l),l.renderable=t,l.roundPixels=r,l});return this._graphicsBatchesHash[t.uid]===void 0&&t.on("destroyed",this._destroyRenderableBound),this._graphicsBatchesHash[t.uid]=s,s}_removeBatchForRenderable(t){this._graphicsBatchesHash[t].forEach(e=>{st.return(e)}),this._graphicsBatchesHash[t]=null}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null;for(let t in this._graphicsBatchesHash)this._removeBatchForRenderable(t);this._graphicsBatchesHash=null}},gm.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"graphics"}}),tL=b(()=>{$(),Py(),eL(),ke.add(gm),ke.add(td)}),id,Dy=b(()=>{id=class{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(t){this._topology=t}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(t){this.texture!==t&&(this.texture=t,this._textureMatrixUpdateId=-1)}get uvs(){let t=this.geometry.getBuffer("aUV"),e=t.data,i=e,r=this.texture.textureMatrix;return r.isSimple||(i=this._transformedUvs,(this._textureMatrixUpdateId!==r._updateID||this._uvUpdateId!==t._updateID)&&((!i||i.length<e.length)&&(i=this._transformedUvs=new Float32Array(e.length)),this._textureMatrixUpdateId=r._updateID,this._uvUpdateId=t._updateID,r.multiplyUvs(e,i))),i}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}}),ym,iL=b(()=>{$(),nt(),ua(),hi(),Wh(),rr(),du(),Dy(),ym=class{constructor(t,e){this.localUniforms=new ei({uTransformMatrix:{value:new De,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new us({0:this.localUniforms}),this._meshDataHash=Object.create(null),this._gpuBatchableMeshHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=t,this._adaptor=e,this._adaptor.init(),t.renderableGC.addManagedHash(this,"_gpuBatchableMeshHash"),t.renderableGC.addManagedHash(this,"_meshDataHash")}validateRenderable(t){let e=this._getMeshData(t),i=e.batched,r=t.batched;if(e.batched=r,i!==r)return!0;if(r){let s=t._geometry;if(s.indices.length!==e.indexSize||s.positions.length!==e.vertexSize)return e.indexSize=s.indices.length,e.vertexSize=s.positions.length,!0;let a=this._getBatchableMesh(t);return a.texture.uid!==t._texture.uid&&(a._textureMatrixUpdateId=-1),!a._batcher.checkAndUpdateTexture(a,t._texture)}return!1}addRenderable(t,e){let i=this.renderer.renderPipes.batch,{batched:r}=this._getMeshData(t);if(r){let s=this._getBatchableMesh(t);s.setTexture(t._texture),s.geometry=t._geometry,i.addToBatch(s,e)}else i.break(e),e.add(t)}updateRenderable(t){if(t.batched){let e=this._gpuBatchableMeshHash[t.uid];e.setTexture(t._texture),e.geometry=t._geometry,e._batcher.updateElement(e)}}destroyRenderable(t){this._meshDataHash[t.uid]=null;let e=this._gpuBatchableMeshHash[t.uid];e&&(st.return(e),this._gpuBatchableMeshHash[t.uid]=null),t.off("destroyed",this._destroyRenderableBound)}execute(t){if(!t.isRenderable)return;t.state.blendMode=Yl(t.groupBlendMode,t.texture._source);let e=this.localUniforms;e.uniforms.uTransformMatrix=t.groupTransform,e.uniforms.uRound=this.renderer._roundPixels|t._roundPixels,e.update(),hu(t.groupColorAlpha,e.uniforms.uColor,0),this._adaptor.execute(this,t)}_getMeshData(t){return this._meshDataHash[t.uid]||this._initMeshData(t)}_initMeshData(t){var e,i;return this._meshDataHash[t.uid]={batched:t.batched,indexSize:(e=t._geometry.indices)==null?void 0:e.length,vertexSize:(i=t._geometry.positions)==null?void 0:i.length},t.on("destroyed",this._destroyRenderableBound),this._meshDataHash[t.uid]}_getBatchableMesh(t){return this._gpuBatchableMeshHash[t.uid]||this._initBatchableMesh(t)}_initBatchableMesh(t){let e=st.get(id);return e.renderable=t,e.setTexture(t._texture),e.transform=t.groupTransform,e.roundPixels=this.renderer._roundPixels|t._roundPixels,this._gpuBatchableMeshHash[t.uid]=e,e}destroy(){for(let t in this._gpuBatchableMeshHash)this._gpuBatchableMeshHash[t]&&st.return(this._gpuBatchableMeshHash[t]);this._gpuBatchableMeshHash=null,this._meshDataHash=null,this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}},ym.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"mesh"}}),rL=b(()=>{$(),iL(),ke.add(ym)}),cS,sL=b(()=>{cS=class{execute(t,e){let i=t.state,r=t.renderer,s=e.shader||t.defaultShader;s.resources.uTexture=e.texture._source,s.resources.uniforms=t.localUniforms;let a=r.gl,l=t.getBuffers(e);r.shader.bind(s),r.state.set(i),r.geometry.bind(l.geometry,s.glProgram);let c=l.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;a.drawElements(a.TRIANGLES,e.particleChildren.length*6,c,0)}}});function kx(t,e=null){let i=t*6;if(i>65535?e||(e=new Uint32Array(i)):e||(e=new Uint16Array(i)),e.length!==i)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${i}`);for(let r=0,s=0;r<i;r+=6,s+=4)e[r+0]=s+0,e[r+1]=s+1,e[r+2]=s+2,e[r+3]=s+0,e[r+4]=s+2,e[r+5]=s+3;return e}var nL=b(()=>{});function aL(t){return{dynamicUpdate:pB(t,!0),staticUpdate:pB(t,!1)}}function pB(t,e){let i=[];i.push(`
      
        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let r=0;for(let a in t){let l=t[a];if(e!==l.dynamic)continue;i.push(`offset = index + ${r}`),i.push(l.code);let c=mn(l.format);r+=c.stride/4}i.push(`
            index += stride * 4;
        }
    `),i.unshift(`
        var stride = ${r};
    `);let s=i.join(`
`);return new Function("ps","f32v","u32v",s)}var oL=b(()=>{Ao()});function Yz(t){let e=[];for(let i in t){let r=t[i];e.push(i,r.code,r.dynamic?"d":"s")}return e.join("_")}var hS,lL=b(()=>{xn(),Gs(),So(),Ao(),DT(),nL(),oL(),hS=class{constructor(t){this._size=0,this._generateParticleUpdateCache={};let e=this._size=t.size??1e3,i=t.properties,r=0,s=0;for(let f in i){let p=i[f],g=mn(p.format);p.dynamic?s+=g.stride:r+=g.stride}this._dynamicStride=s/4,this._staticStride=r/4,this.staticAttributeBuffer=new ia(e*4*r),this.dynamicAttributeBuffer=new ia(e*4*s),this.indexBuffer=kx(e);let a=new ca,l=0,c=0;this._staticBuffer=new Xi({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:Je.VERTEX|Je.COPY_DST}),this._dynamicBuffer=new Xi({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:Je.VERTEX|Je.COPY_DST});for(let f in i){let p=i[f],g=mn(p.format);p.dynamic?(a.addAttribute(p.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:l*4,format:p.format}),l+=g.size):(a.addAttribute(p.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:c*4,format:p.format}),c+=g.size)}a.addIndex(this.indexBuffer);let h=this.getParticleUpdate(i);this._dynamicUpload=h.dynamicUpdate,this._staticUpload=h.staticUpdate,this.geometry=a}getParticleUpdate(t){let e=Yz(t);return this._generateParticleUpdateCache[e]?this._generateParticleUpdateCache[e]:(this._generateParticleUpdateCache[e]=this.generateParticleUpdate(t),this._generateParticleUpdateCache[e])}generateParticleUpdate(t){return aL(t)}update(t,e){t.length>this._size&&(e=!0,this._size=Math.max(t.length,this._size*1.5|0),this.staticAttributeBuffer=new ia(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new ia(this._size*this._dynamicStride*4*4),this.indexBuffer=kx(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));let i=this.dynamicAttributeBuffer;if(this._dynamicUpload(t,i.float32View,i.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,t.length*this._dynamicStride*4,!0),e){let r=this.staticAttributeBuffer;this._staticUpload(t,r.float32View,r.uint32View),this._staticBuffer.setDataWithSize(r.float32View,t.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}}),dS,uL=b(()=>{dS=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`}),fS,cL=b(()=>{fS=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`}),_m,hL=b(()=>{_m=`
struct ParticleUniforms {
  uProjectionMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uResolution:vec2<f32>,
  uRoundPixels:f32,
};

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`}),pS,dL=b(()=>{_i(),nt(),xr(),Yr(),fs(),tt(),iT(),uL(),cL(),hL(),pS=class extends qr{constructor(){let t=lr.from({vertex:fS,fragment:dS}),e=Tr.from({fragment:{source:_m,entryPoint:"mainFragment"},vertex:{source:_m,entryPoint:"mainVertex"}});super({glProgram:t,gpuProgram:e,resources:{uTexture:ve.WHITE.source,uSampler:new hy({}),uniforms:{uTranslationMatrix:{value:new De,type:"mat3x3<f32>"},uColor:{value:new ct(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}}),Oy,mS=b(()=>{nt(),hi(),Wh(),Wr(),du(),lL(),dL(),Oy=class{constructor(t,e){this.state=ar.for2d(),this._gpuBufferHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.localUniforms=new ei({uTranslationMatrix:{value:new De,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=t,this.adaptor=e,this.defaultShader=new pS,this.state=ar.for2d()}validateRenderable(t){return!1}addRenderable(t,e){this.renderer.renderPipes.batch.break(e),e.add(t)}getBuffers(t){return this._gpuBufferHash[t.uid]||this._initBuffer(t)}_initBuffer(t){return this._gpuBufferHash[t.uid]=new hS({size:t.particleChildren.length,properties:t._properties}),t.on("destroyed",this._destroyRenderableBound),this._gpuBufferHash[t.uid]}updateRenderable(t){}destroyRenderable(t){this._gpuBufferHash[t.uid].destroy(),this._gpuBufferHash[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}execute(t){let e=t.particleChildren;if(e.length===0)return;let i=this.renderer,r=this.getBuffers(t);t.texture||(t.texture=e[0].texture);let s=this.state;r.update(e,t._childrenDirty),t._childrenDirty=!1,s.blendMode=Yl(t.blendMode,t.texture._source);let a=this.localUniforms.uniforms,l=a.uTranslationMatrix;t.worldTransform.copyTo(l),l.prepend(i.globalUniforms.globalUniformData.projectionMatrix),a.uResolution=i.globalUniforms.globalUniformData.resolution,a.uRound=i._roundPixels|t._roundPixels,hu(t.groupColorAlpha,a.uColor,0),this.adaptor.execute(this,t)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}}),vm,fL=b(()=>{$(),sL(),mS(),vm=class extends Oy{constructor(t){super(t,new cS)}},vm.extension={type:[I.WebGLPipes],name:"particle"}}),gS,pL=b(()=>{gS=class{execute(t,e){let i=t.renderer,r=e.shader||t.defaultShader;r.groups[0]=i.renderPipes.uniformBatch.getUniformBindGroup(t.localUniforms,!0),r.groups[1]=i.texture.getTextureBindGroup(e.texture);let s=t.state,a=t.getBuffers(e);i.encoder.draw({geometry:a.geometry,shader:e.shader||t.defaultShader,state:s,size:e.particleChildren.length*6})}}}),bm,mL=b(()=>{$(),pL(),mS(),bm=class extends Oy{constructor(t){super(t,new gS)}},bm.extension={type:[I.WebGPUPipes],name:"particle"}}),gL=b(()=>{$(),fL(),mL(),ke.add(vm),ke.add(bm)}),fu,rd=b(()=>{fu=class{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}}});function xm(t,e){let{texture:i,bounds:r}=t;xT(r,e._anchor,i);let s=e._style.padding;r.minX-=s,r.minY-=s,r.maxX-=s,r.maxY-=s}var yS=b(()=>{TT()}),Tm,yL=b(()=>{$(),rr(),rd(),yS(),Tm=class{constructor(t){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let t in this._gpuText){let e=this._gpuText[t];if(!e)continue;let i=e.batchableSprite.renderable;i._autoResolution&&(i._resolution=this._renderer.resolution,i.onViewUpdate())}}validateRenderable(t){let e=this._getGpuText(t),i=t._getKey();return e.currentKey!==i}addRenderable(t,e){let i=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){let e=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),e._batcher.updateElement(e)}destroyRenderable(t){t.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(t.uid)}_destroyRenderableById(t){let e=this._gpuText[t];this._renderer.canvasText.decreaseReferenceCount(e.currentKey),st.return(e.batchableSprite),this._gpuText[t]=null}_updateText(t){let e=t._getKey(),i=this._getGpuText(t),r=i.batchableSprite;i.currentKey!==e&&this._updateGpuText(t),t._didTextUpdate=!1,xm(r,t)}_updateGpuText(t){let e=this._getGpuText(t),i=e.batchableSprite;e.texture&&this._renderer.canvasText.decreaseReferenceCount(e.currentKey),e.texture=i.texture=this._renderer.canvasText.getManagedTexture(t),e.currentKey=t._getKey(),i.texture=e.texture}_getGpuText(t){return this._gpuText[t.uid]||this.initGpuText(t)}initGpuText(t){let e={texture:null,currentKey:"--",batchableSprite:st.get(fu)};return e.batchableSprite.renderable=t,e.batchableSprite.transform=t.groupTransform,e.batchableSprite.bounds={minX:0,maxX:1,minY:0,maxY:0},e.batchableSprite.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuText[t.uid]=e,t._resolution=t._autoResolution?this._renderer.resolution:t.resolution,this._updateText(t),t.on("destroyed",this._destroyRenderableBound),e}destroy(){for(let t in this._gpuText)this._destroyRenderableById(t);this._gpuText=null,this._renderer=null}},Tm.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"text"}}),Ix,cs,pu=b(()=>{Ct(),Yh(),Ix=class{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){let i=et.get().createCanvas();i.width=t,i.height=e;let r=i.getContext("2d");return{canvas:i,context:r}}getOptimalCanvasAndContext(t,e,i=1){t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),t=lo(t),e=lo(e);let r=(t<<17)+(e<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let s=this._canvasPool[r].pop();return s||(s=this._createCanvasAndContext(t,e)),s}returnCanvasAndContext(t){let e=t.canvas,{width:i,height:r}=e,s=(i<<17)+(r<<1);t.context.clearRect(0,0,i,r),this._canvasPool[s].push(t)}clear(){this._canvasPool={}}},cs=new Ix});function mB(t,e,i){for(let r=0,s=4*i*e;r<e;++r,s+=4)if(t[s+3]!==0)return!1;return!0}function gB(t,e,i,r,s){let a=4*e;for(let l=r,c=r*a+4*i;l<=s;++l,c+=a)if(t[c+3]!==0)return!1;return!0}function _L(t,e=1){let{width:i,height:r}=t,s=t.getContext("2d",{willReadFrequently:!0});if(s===null)throw new TypeError("Failed to get canvas 2D context");let a=s.getImageData(0,0,i,r).data,l=0,c=0,h=i-1,f=r-1;for(;c<r&&mB(a,i,c);)++c;if(c===r)return wt.EMPTY;for(;mB(a,i,f);)--f;for(;gB(a,i,l,c,f);)++l;for(;gB(a,i,h,c,f);)--h;return++h,++f,new wt(l/e,c/e,(h-l)/e,(f-c)/e)}var vL=b(()=>{ci()});function yB(t,e){for(let i=0;i<e.length;i++){let r=e[i];t.addColorStop(r.offset,r.color)}}function _B(t,e){let i=et.get().createCanvas(t,e),r=i.getContext("2d");return{canvas:i,context:r}}function jz(t){let e=t[0]??{};return(typeof e=="number"||t[1])&&(Pe("8.5.2","use options object instead"),e={type:"linear",start:{x:t[0],y:t[1]},end:{x:t[2],y:t[3]},textureSpace:t[4],textureSize:t[5]??Ps.defaultLinearOptions.textureSize}),e}var Wb,up,Ps,sd=b(()=>{_i(),Ct(),nt(),lu(),tt(),Gi(),gt(),mo(),Wb=[{offset:0,color:"white"},{offset:1,color:"black"}],up=class Ux{constructor(...e){this.uid=Gt("fillGradient"),this.type="linear",this.colorStops=[];let i=jz(e);i={...i.type==="radial"?Ux.defaultRadialOptions:Ux.defaultLinearOptions,...hs(i)},this._textureSize=i.textureSize,i.type==="radial"?(this.center=i.center,this.outerCenter=i.outerCenter??this.center,this.innerRadius=i.innerRadius,this.outerRadius=i.outerRadius,this.scale=i.scale,this.rotation=i.rotation):(this.start=i.start,this.end=i.end),this.textureSpace=i.textureSpace,this.type=i.type,i.colorStops.forEach(r=>{this.addColorStop(r.offset,r.color)})}addColorStop(e,i){return this.colorStops.push({offset:e,color:ct.shared.setValue(i).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let e=this.colorStops.length?this.colorStops:Wb,i=this._textureSize,{canvas:r,context:s}=_B(i,1),a=s.createLinearGradient(0,0,this._textureSize,0);yB(a,e),s.fillStyle=a,s.fillRect(0,0,i,1),this.texture=new ve({source:new pn({resource:r})});let{x:l,y:c}=this.start,{x:h,y:f}=this.end,p=new De,g=h-l,y=f-c,v=Math.sqrt(g*g+y*y),x=Math.atan2(y,g);p.scale(v/i,1),p.rotate(x),p.translate(l,c),this.textureSpace==="local"&&p.scale(i,i),this.transform=p}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;let e=this.colorStops.length?this.colorStops:Wb,i=this._textureSize,{canvas:r,context:s}=_B(i,i),{x:a,y:l}=this.center,{x:c,y:h}=this.outerCenter,f=this.innerRadius,p=this.outerRadius,g=c-p,y=h-p,v=i/(p*2),x=(a-g)*v,A=(l-y)*v,S=s.createRadialGradient(x,A,f*v,(c-g)*v,(h-y)*v,p*v);yB(S,e),s.fillStyle=e[e.length-1].color,s.fillRect(0,0,i,i),s.fillStyle=S,s.translate(x,A),s.rotate(this.rotation),s.scale(1,this.scale),s.translate(-x,-A),s.fillRect(0,0,i,i),this.texture=new ve({source:new pn({resource:r,addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"})});let w=new De;w.scale(1/v,1/v),w.translate(g,y),this.textureSpace==="local"&&w.scale(i,i),this.transform=w}get styleKey(){return this.uid}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null}},up.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256},up.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256},Ps=up}),Kb,mu,Fy=b(()=>{nt(),Gi(),Kb={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},mu=class{constructor(t,e){this.uid=Gt("fillPattern"),this.transform=new De,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=Kb[e].addressModeU,t.source.style.addressModeV=Kb[e].addressModeV)}setTransform(t){let e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}}),qz=ds((t,e)=>{e.exports=s;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function s(c){var h=[];return c.replace(r,function(f,p,g){var y=p.toLowerCase();for(g=l(g),y=="m"&&g.length>2&&(h.push([p].concat(g.splice(0,2))),y="l",p=p=="m"?"l":"L");;){if(g.length==i[y])return g.unshift(p),h.push(g);if(g.length<i[y])throw new Error("malformed path data");h.push([p].concat(g.splice(0,i[y])))}}),h}var a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function l(c){var h=c.match(a);return h?h.map(Number):[]}});function bL(t,e){let i=(0,xL.default)(t),r=[],s=null,a=0,l=0;for(let c=0;c<i.length;c++){let h=i[c],f=h[0],p=h;switch(f){case"M":a=p[1],l=p[2],e.moveTo(a,l);break;case"m":a+=p[1],l+=p[2],e.moveTo(a,l);break;case"H":a=p[1],e.lineTo(a,l);break;case"h":a+=p[1],e.lineTo(a,l);break;case"V":l=p[1],e.lineTo(a,l);break;case"v":l+=p[1],e.lineTo(a,l);break;case"L":a=p[1],l=p[2],e.lineTo(a,l);break;case"l":a+=p[1],l+=p[2],e.lineTo(a,l);break;case"C":a=p[5],l=p[6],e.bezierCurveTo(p[1],p[2],p[3],p[4],a,l);break;case"c":e.bezierCurveTo(a+p[1],l+p[2],a+p[3],l+p[4],a+p[5],l+p[6]),a+=p[5],l+=p[6];break;case"S":a=p[3],l=p[4],e.bezierCurveToShort(p[1],p[2],a,l);break;case"s":e.bezierCurveToShort(a+p[1],l+p[2],a+p[3],l+p[4]),a+=p[3],l+=p[4];break;case"Q":a=p[3],l=p[4],e.quadraticCurveTo(p[1],p[2],a,l);break;case"q":e.quadraticCurveTo(a+p[1],l+p[2],a+p[3],l+p[4]),a+=p[3],l+=p[4];break;case"T":a=p[1],l=p[2],e.quadraticCurveToShort(a,l);break;case"t":a+=p[1],l+=p[2],e.quadraticCurveToShort(a,l);break;case"A":a=p[6],l=p[7],e.arcToSvg(p[1],p[2],p[3],p[4],p[5],a,l);break;case"a":a+=p[6],l+=p[7],e.arcToSvg(p[1],p[2],p[3],p[4],p[5],a,l);break;case"Z":case"z":e.closePath(),r.length>0&&(s=r.pop(),s?(a=s.startX,l=s.startY):(a=0,l=0)),s=null;break;default:Le(`Unknown SVG path command: ${f}`)}f!=="Z"&&f!=="z"&&s===null&&(s={startX:a,startY:l},r.push(s))}return e}var xL,TL=b(()=>{xL=ho(qz()),dt()}),_S,SL=b(()=>{ci(),_S=class AL{constructor(e=0,i=0,r=0){this.type="circle",this.x=e,this.y=i,this.radius=r}clone(){return new AL(this.x,this.y,this.radius)}contains(e,i){if(this.radius<=0)return!1;let r=this.radius*this.radius,s=this.x-e,a=this.y-i;return s*=s,a*=a,s+a<=r}strokeContains(e,i,r,s=.5){if(this.radius===0)return!1;let a=this.x-e,l=this.y-i,c=this.radius,h=(1-s)*r,f=Math.sqrt(a*a+l*l);return f<=c+h&&f>c-(r-h)}getBounds(e){return e||(e=new wt),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}}),vS,EL=b(()=>{ci(),vS=class wL{constructor(e=0,i=0,r=0,s=0){this.type="ellipse",this.x=e,this.y=i,this.halfWidth=r,this.halfHeight=s}clone(){return new wL(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,i){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let r=(e-this.x)/this.halfWidth,s=(i-this.y)/this.halfHeight;return r*=r,s*=s,r+s<=1}strokeContains(e,i,r,s=.5){let{halfWidth:a,halfHeight:l}=this;if(a<=0||l<=0)return!1;let c=r*(1-s),h=r-c,f=a-h,p=l-h,g=a+c,y=l+c,v=e-this.x,x=i-this.y,A=v*v/(f*f)+x*x/(p*p),S=v*v/(g*g)+x*x/(y*y);return A>1&&S<=1}getBounds(e){return e||(e=new wt),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}});function ih(t,e,i,r,s,a){let l=t-i,c=e-r,h=s-i,f=a-r,p=l*h+c*f,g=h*h+f*f,y=-1;g!==0&&(y=p/g);let v,x;y<0?(v=i,x=r):y>1?(v=s,x=a):(v=i+y*h,x=r+y*f);let A=t-v,S=e-x;return A*A+S*S}var bS=b(()=>{}),Wz,Kz,rh,CL=b(()=>{bS(),ci(),rh=class RL{constructor(...e){this.type="polygon";let i=Array.isArray(e[0])?e[0]:e;if(typeof i[0]!="number"){let r=[];for(let s=0,a=i.length;s<a;s++)r.push(i[s].x,i[s].y);i=r}this.points=i,this.closePath=!0}isClockwise(){let e=0,i=this.points,r=i.length;for(let s=0;s<r;s+=2){let a=i[s],l=i[s+1],c=i[(s+2)%r],h=i[(s+3)%r];e+=(c-a)*(h+l)}return e<0}containsPolygon(e){let i=this.getBounds(Wz),r=e.getBounds(Kz);if(!i.containsRect(r))return!1;let s=e.points;for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];if(!this.contains(l,c))return!1}return!0}clone(){let e=this.points.slice(),i=new RL(e);return i.closePath=this.closePath,i}contains(e,i){let r=!1,s=this.points.length/2;for(let a=0,l=s-1;a<s;l=a++){let c=this.points[a*2],h=this.points[a*2+1],f=this.points[l*2],p=this.points[l*2+1];h>i!=p>i&&e<(f-c)*((i-h)/(p-h))+c&&(r=!r)}return r}strokeContains(e,i,r,s=.5){let a=r*r,l=a*(1-s),c=a-l,{points:h}=this,f=h.length-(this.closePath?0:2);for(let p=0;p<f;p+=2){let g=h[p],y=h[p+1],v=h[(p+2)%h.length],x=h[(p+3)%h.length],A=ih(e,i,g,y,v,x),S=Math.sign((v-g)*(i-y)-(x-y)*(e-g));if(A<=(S<0?c:l))return!0}return!1}getBounds(e){e||(e=new wt);let i=this.points,r=1/0,s=-1/0,a=1/0,l=-1/0;for(let c=0,h=i.length;c<h;c+=2){let f=i[c],p=i[c+1];r=f<r?f:r,s=f>s?f:s,a=p<a?p:a,l=p>l?p:l}return e.x=r,e.width=s-r,e.y=a,e.height=l-a,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,i)=>`${e}, ${i}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}}),Bc,xS,ML=b(()=>{ci(),Bc=(t,e,i,r,s,a,l)=>{let c=t-i,h=e-r,f=Math.sqrt(c*c+h*h);return f>=s-a&&f<=s+l},xS=class BL{constructor(e=0,i=0,r=0,s=0,a=20){this.type="roundedRectangle",this.x=e,this.y=i,this.width=r,this.height=s,this.radius=a}getBounds(e){return e||(e=new wt),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new BL(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,i){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){let r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+r&&i<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let s=e-(this.x+r),a=i-(this.y+r),l=r*r;if(s*s+a*a<=l||(s=e-(this.x+this.width-r),s*s+a*a<=l)||(a=i-(this.y+this.height-r),s*s+a*a<=l)||(s=e-(this.x+r),s*s+a*a<=l))return!0}return!1}strokeContains(e,i,r,s=.5){let{x:a,y:l,width:c,height:h,radius:f}=this,p=r*(1-s),g=r-p,y=a+f,v=l+f,x=c-f*2,A=h-f*2,S=a+c,w=l+h;return(e>=a-p&&e<=a+g||e>=S-g&&e<=S+p)&&i>=v&&i<=v+A||(i>=l-p&&i<=l+g||i>=w-g&&i<=w+p)&&e>=y&&e<=y+x?!0:e<y&&i<v&&Bc(e,i,y,v,f,g,p)||e>S-f&&i<v&&Bc(e,i,S-f,v,f,g,p)||e>S-f&&i>w-f&&Bc(e,i,S-f,w-f,f,g,p)||e<y&&i>w-f&&Bc(e,i,y,w-f,f,g,p)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}});function TS(t,e,i,r,s,a,l,c,h,f){let p=Math.min(.99,Math.max(0,f??td.defaultOptions.bezierSmoothness)),g=(DL-p)/1;return g*=g,$z(e,i,r,s,a,l,c,h,t,g),t}function $z(t,e,i,r,s,a,l,c,h,f){Nx(t,e,i,r,s,a,l,c,h,f,0),h.push(l,c)}function Nx(t,e,i,r,s,a,l,c,h,f,p){if(p>PL)return;let g=Math.PI,y=(t+i)/2,v=(e+r)/2,x=(i+s)/2,A=(r+a)/2,S=(s+l)/2,w=(a+c)/2,E=(y+x)/2,B=(v+A)/2,G=(x+S)/2,U=(A+w)/2,H=(E+G)/2,j=(B+U)/2;if(p>0){let Z=l-t,q=c-e,L=Math.abs((i-l)*q-(r-c)*Z),N=Math.abs((s-l)*q-(a-c)*Z),se,le;if(L>Wc&&N>Wc){if((L+N)*(L+N)<=f*(Z*Z+q*q)){if(Za<jp){h.push(H,j);return}let pe=Math.atan2(a-r,s-i);if(se=Math.abs(pe-Math.atan2(r-e,i-t)),le=Math.abs(Math.atan2(c-a,l-s)-pe),se>=g&&(se=2*g-se),le>=g&&(le=2*g-le),se+le<Za){h.push(H,j);return}if(Kn!==0){if(se>Kn){h.push(i,r);return}if(le>Kn){h.push(s,a);return}}}}else if(L>Wc){if(L*L<=f*(Z*Z+q*q)){if(Za<jp){h.push(H,j);return}if(se=Math.abs(Math.atan2(a-r,s-i)-Math.atan2(r-e,i-t)),se>=g&&(se=2*g-se),se<Za){h.push(i,r),h.push(s,a);return}if(Kn!==0&&se>Kn){h.push(i,r);return}}}else if(N>Wc){if(N*N<=f*(Z*Z+q*q)){if(Za<jp){h.push(H,j);return}if(se=Math.abs(Math.atan2(c-a,l-s)-Math.atan2(a-r,s-i)),se>=g&&(se=2*g-se),se<Za){h.push(i,r),h.push(s,a);return}if(Kn!==0&&se>Kn){h.push(s,a);return}}}else if(Z=H-(t+l)/2,q=j-(e+c)/2,Z*Z+q*q<=f){h.push(H,j);return}}Nx(t,e,y,v,E,B,H,j,h,f,p+1),Nx(H,j,G,U,S,w,l,c,h,f,p+1)}var PL,Wc,DL,jp,Za,Kn,SS=b(()=>{Py(),PL=8,Wc=11920929e-14,DL=1,jp=.01,Za=0,Kn=0});function OL(t,e,i,r,s,a,l,c){let h=Math.min(.99,Math.max(0,c??td.defaultOptions.bezierSmoothness)),f=(LL-h)/1;return f*=f,Zz(e,i,r,s,a,l,t,f),t}function Zz(t,e,i,r,s,a,l,c){Hx(l,t,e,i,r,s,a,c,0),l.push(s,a)}function Hx(t,e,i,r,s,a,l,c,h){if(h>FL)return;let f=Math.PI,p=(e+r)/2,g=(i+s)/2,y=(r+a)/2,v=(s+l)/2,x=(p+y)/2,A=(g+v)/2,S=a-e,w=l-i,E=Math.abs((r-a)*w-(s-l)*S);if(E>GL){if(E*E<=c*(S*S+w*w)){if(Vx<kL){t.push(x,A);return}let B=Math.abs(Math.atan2(l-s,a-r)-Math.atan2(s-i,r-e));if(B>=f&&(B=2*f-B),B<Vx){t.push(x,A);return}}}else if(S=x-(e+a)/2,w=A-(i+l)/2,S*S+w*w<=c){t.push(x,A);return}Hx(t,e,i,p,g,x,A,c,h+1),Hx(t,x,A,y,v,a,l,c,h+1)}var FL,GL,LL,kL,Vx,IL=b(()=>{Py(),FL=8,GL=11920929e-14,LL=1,kL=.01,Vx=0});function AS(t,e,i,r,s,a,l,c){let h=Math.abs(s-a);(!l&&s>a||l&&a>s)&&(h=2*Math.PI-h),c||(c=Math.max(6,Math.floor(6*Math.pow(r,1/3)*(h/Math.PI)))),c=Math.max(c,3);let f=h/c,p=s;f*=l?-1:1;for(let g=0;g<c+1;g++){let y=Math.cos(p),v=Math.sin(p),x=e+y*r,A=i+v*r;t.push(x,A),p+=f}}var ES=b(()=>{});function UL(t,e,i,r,s,a){let l=t[t.length-2],c=t[t.length-1]-i,h=l-e,f=s-i,p=r-e,g=Math.abs(c*p-h*f);if(g<1e-8||a===0){(t[t.length-2]!==e||t[t.length-1]!==i)&&t.push(e,i);return}let y=c*c+h*h,v=f*f+p*p,x=c*f+h*p,A=a*Math.sqrt(y)/g,S=a*Math.sqrt(v)/g,w=A*x/y,E=S*x/v,B=A*p+S*h,G=A*f+S*c,U=h*(S+w),H=c*(S+w),j=p*(A+E),Z=f*(A+E),q=Math.atan2(H-G,U-B),L=Math.atan2(Z-G,j-B);AS(t,B+e,G+i,a,q,L,h*f>p*c)}var NL=b(()=>{ES()});function Qz(t,e){let i=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=e===1.5707963267948966?.551915024494:i,s=Math.cos(t),a=Math.sin(t),l=Math.cos(t+e),c=Math.sin(t+e);return[{x:s-a*r,y:a+s*r},{x:l+c*r,y:c-l*r},{x:l,y:c}]}function HL(t,e,i,r,s,a,l,c=0,h=0,f=0){if(a===0||l===0)return;let p=Math.sin(c*Ul/360),g=Math.cos(c*Ul/360),y=g*(e-r)/2+p*(i-s)/2,v=-p*(e-r)/2+g*(i-s)/2;if(y===0&&v===0)return;a=Math.abs(a),l=Math.abs(l);let x=Math.pow(y,2)/Math.pow(a,2)+Math.pow(v,2)/Math.pow(l,2);x>1&&(a*=Math.sqrt(x),l*=Math.sqrt(x)),VL(e,i,r,s,a,l,h,f,p,g,y,v,qp);let{ang1:A,ang2:S}=qp,{centerX:w,centerY:E}=qp,B=Math.abs(S)/(Ul/4);Math.abs(1-B)<1e-7&&(B=1);let G=Math.max(Math.ceil(B),1);S/=G;let U=t[t.length-2],H=t[t.length-1],j={x:0,y:0};for(let Z=0;Z<G;Z++){let q=Qz(A,S),{x:L,y:N}=Wp(q[0],a,l,g,p,w,E,j),{x:se,y:le}=Wp(q[1],a,l,g,p,w,E,j),{x:pe,y:Ae}=Wp(q[2],a,l,g,p,w,E,j);TS(t,U,H,L,N,se,le,pe,Ae),U=pe,H=Ae,A+=S}}var Ul,qp,Wp,$b,VL,zL=b(()=>{SS(),Ul=Math.PI*2,qp={centerX:0,centerY:0,ang1:0,ang2:0},Wp=({x:t,y:e},i,r,s,a,l,c,h)=>{t*=i,e*=r;let f=s*t-a*e,p=a*t+s*e;return h.x=f+l,h.y=p+c,h},$b=(t,e,i,r)=>{let s=t*r-e*i<0?-1:1,a=t*i+e*r;return a>1&&(a=1),a<-1&&(a=-1),s*Math.acos(a)},VL=(t,e,i,r,s,a,l,c,h,f,p,g,y)=>{let v=Math.pow(s,2),x=Math.pow(a,2),A=Math.pow(p,2),S=Math.pow(g,2),w=v*x-v*S-x*A;w<0&&(w=0),w/=v*S+x*A,w=Math.sqrt(w)*(l===c?-1:1);let E=w*s/a*g,B=w*-a/s*p,G=f*E-h*B+(t+i)/2,U=h*E+f*B+(e+r)/2,H=(p-E)/s,j=(g-B)/a,Z=(-p-E)/s,q=(-g-B)/a,L=$b(1,0,H,j),N=$b(H,j,Z,q);c===0&&N>0&&(N-=Ul),c===1&&N<0&&(N+=Ul),y.centerX=G,y.centerY=U,y.ang1=L,y.ang2=N}});function XL(t,e,i){let r=(l,c)=>{let h=c.x-l.x,f=c.y-l.y,p=Math.sqrt(h*h+f*f),g=h/p,y=f/p;return{len:p,nx:g,ny:y}},s=(l,c)=>{l===0?t.moveTo(c.x,c.y):t.lineTo(c.x,c.y)},a=e[e.length-1];for(let l=0;l<e.length;l++){let c=e[l%e.length],h=c.radius??i;if(h<=0){s(l,c),a=c;continue}let f=e[(l+1)%e.length],p=r(c,a),g=r(c,f);if(p.len<1e-4||g.len<1e-4){s(l,c),a=c;continue}let y=Math.asin(p.nx*g.ny-p.ny*g.nx),v=1,x=!1;p.nx*g.nx-p.ny*-g.ny<0?y<0?y=Math.PI+y:(y=Math.PI-y,v=-1,x=!0):y>0&&(v=-1,x=!0);let A=y/2,S,w=Math.abs(Math.cos(A)*h/Math.sin(A));w>Math.min(p.len/2,g.len/2)?(w=Math.min(p.len/2,g.len/2),S=Math.abs(w*Math.sin(A)/Math.cos(A))):S=h;let E=c.x+g.nx*w+-g.ny*S*v,B=c.y+g.ny*w+g.nx*S*v,G=Math.atan2(p.ny,p.nx)+Math.PI/2*v,U=Math.atan2(g.ny,g.nx)-Math.PI/2*v;l===0&&t.moveTo(E+Math.cos(G)*S,B+Math.sin(G)*S),t.arc(E,B,S,G,U,x),a=c}}function YL(t,e,i,r){let s=(c,h)=>Math.sqrt((c.x-h.x)**2+(c.y-h.y)**2),a=(c,h,f)=>({x:c.x+(h.x-c.x)*f,y:c.y+(h.y-c.y)*f}),l=e.length;for(let c=0;c<l;c++){let h=e[(c+1)%l],f=h.radius??i;if(f<=0){c===0?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y);continue}let p=e[c],g=e[(c+2)%l],y=s(p,h),v;if(y<1e-4)v=h;else{let S=Math.min(y/2,f);v=a(h,p,S/y)}let x=s(g,h),A;if(x<1e-4)A=h;else{let S=Math.min(x/2,f);A=a(h,g,S/x)}c===0?t.moveTo(v.x,v.y):t.lineTo(v.x,v.y),t.quadraticCurveTo(h.x,h.y,A.x,A.y,r)}}var jL=b(()=>{}),vB,wS,qL=b(()=>{SL(),EL(),CL(),ci(),ML(),qi(),SS(),IL(),ES(),NL(),zL(),jL(),vB=new wt,wS=class{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Ci,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();let i=this._currentPoly.points,r=i[i.length-2],s=i[i.length-1];return(r!==t||s!==e)&&i.push(t,e),this}arc(t,e,i,r,s,a){this._ensurePoly(!1);let l=this._currentPoly.points;return AS(l,t,e,i,r,s,a),this}arcTo(t,e,i,r,s){this._ensurePoly();let a=this._currentPoly.points;return UL(a,t,e,i,r,s),this}arcToSvg(t,e,i,r,s,a,l){let c=this._currentPoly.points;return HL(c,this._currentPoly.lastX,this._currentPoly.lastY,a,l,t,e,i,r,s),this}bezierCurveTo(t,e,i,r,s,a,l){this._ensurePoly();let c=this._currentPoly;return TS(this._currentPoly.points,c.lastX,c.lastY,t,e,i,r,s,a,l),this}quadraticCurveTo(t,e,i,r,s){this._ensurePoly();let a=this._currentPoly;return OL(this._currentPoly.points,a.lastX,a.lastY,t,e,i,r,s),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));let i=this.shapePrimitives,r=i.length;for(let s=0;s<t.instructions.length;s++){let a=t.instructions[s];this[a.action](...a.data)}if(t.checkForHoles&&i.length-r>1){let s=null;for(let a=r;a<i.length;a++){let l=i[a];if(l.shape.type==="polygon"){let c=l.shape,h=s==null?void 0:s.shape;h&&h.containsPolygon(c)?(s.holes||(s.holes=[]),s.holes.push(l),i.copyWithin(a,a+1),i.length--,a--):s=l}}}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,r,s){return this.drawShape(new wt(t,e,i,r),s),this}circle(t,e,i,r){return this.drawShape(new _S(t,e,i),r),this}poly(t,e,i){let r=new rh(t);return r.closePath=e,this.drawShape(r,i),this}regularPoly(t,e,i,r,s=0,a){r=Math.max(r|0,3);let l=-1*Math.PI/2+s,c=Math.PI*2/r,h=[];for(let f=0;f<r;f++){let p=l-f*c;h.push(t+i*Math.cos(p),e+i*Math.sin(p))}return this.poly(h,!0,a),this}roundPoly(t,e,i,r,s,a=0,l){if(r=Math.max(r|0,3),s<=0)return this.regularPoly(t,e,i,r,a);let c=i*Math.sin(Math.PI/r)-.001;s=Math.min(s,c);let h=-1*Math.PI/2+a,f=Math.PI*2/r,p=(r-2)*Math.PI/r/2;for(let g=0;g<r;g++){let y=g*f+h,v=t+i*Math.cos(y),x=e+i*Math.sin(y),A=y+Math.PI+p,S=y-Math.PI-p,w=v+s*Math.cos(A),E=x+s*Math.sin(A),B=v+s*Math.cos(S),G=x+s*Math.sin(S);g===0?this.moveTo(w,E):this.lineTo(w,E),this.quadraticCurveTo(v,x,B,G,l)}return this.closePath()}roundShape(t,e,i=!1,r){return t.length<3?this:(i?YL(this,t,e,r):XL(this,t,e),this.closePath())}filletRect(t,e,i,r,s){if(s===0)return this.rect(t,e,i,r);let a=Math.min(i,r)/2,l=Math.min(a,Math.max(-a,s)),c=t+i,h=e+r,f=l<0?-l:0,p=Math.abs(l);return this.moveTo(t,e+p).arcTo(t+f,e+f,t+p,e,p).lineTo(c-p,e).arcTo(c-f,e+f,c,e+p,p).lineTo(c,h-p).arcTo(c-f,h-f,t+i-p,h,p).lineTo(t+p,h).arcTo(t+f,h-f,t,h-p,p).closePath()}chamferRect(t,e,i,r,s,a){if(s<=0)return this.rect(t,e,i,r);let l=Math.min(s,Math.min(i,r)/2),c=t+i,h=e+r,f=[t+l,e,c-l,e,c,e+l,c,h-l,c-l,h,t+l,h,t,h-l,t,e+l];for(let p=f.length-1;p>=2;p-=2)f[p]===f[p-2]&&f[p-1]===f[p-3]&&f.splice(p-1,2);return this.poly(f,!0,a)}ellipse(t,e,i,r,s){return this.drawShape(new vS(t,e,i,r),s),this}roundRect(t,e,i,r,s,a){return this.drawShape(new xS(t,e,i,r,s),a),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new rh,i.points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){let e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new rh,t)){let e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let i=e.shape.x,r=e.shape.y;if(e.transform&&!e.transform.isIdentity()){let s=e.transform,a=i;i=s.a*i+s.c*r+s.tx,r=s.b*a+s.d*r+s.ty}this._currentPoly.points.push(i,r)}else this._currentPoly.points.push(0,0)}}buildPath(){let t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){let i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){let t=this._bounds;t.clear();let e=this.shapePrimitives;for(let i=0;i<e.length;i++){let r=e[i],s=r.shape.getBounds(vB);r.transform?t.addRect(s,r.transform):t.addRect(s)}return t}}});function Pc(t,e){return t?t.prepend(e):e.clone()}var uo,Gy=b(()=>{vr(),Gi(),dt(),TL(),qL(),uo=class WL{constructor(e,i=!1){this.instructions=[],this.uid=Gt("graphicsPath"),this._dirty=!0,this.checkForHoles=i,typeof e=="string"?bL(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new wS(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,i){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,i]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,i,r,s,a){let l=this.instructions[this.instructions.length-1],c=this.getLastPoint(Et.shared),h=0,f=0;if(!l||l.action!=="bezierCurveTo")h=c.x,f=c.y;else{h=l.data[2],f=l.data[3];let p=c.x,g=c.y;h=p+(p-h),f=g+(g-f)}return this.instructions.push({action:"bezierCurveTo",data:[h,f,e,i,r,s,a]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,i,r){let s=this.instructions[this.instructions.length-1],a=this.getLastPoint(Et.shared),l=0,c=0;if(!s||s.action!=="quadraticCurveTo")l=a.x,c=a.y;else{l=s.data[0],c=s.data[1];let h=a.x,f=a.y;l=h+(h-l),c=f+(f-c)}return this.instructions.push({action:"quadraticCurveTo",data:[l,c,e,i,r]}),this._dirty=!0,this}rect(e,i,r,s,a){return this.instructions.push({action:"rect",data:[e,i,r,s,a]}),this._dirty=!0,this}circle(e,i,r,s){return this.instructions.push({action:"circle",data:[e,i,r,s]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,i,r,s,a,l,c){a||(a=s/2);let h=-1*Math.PI/2+l,f=r*2,p=Math.PI*2/f,g=[];for(let y=0;y<f;y++){let v=y%2?a:s,x=y*p+h;g.push(e+v*Math.cos(x),i+v*Math.sin(x))}return this.poly(g,!0,c),this}clone(e=!1){let i=new WL;if(i.checkForHoles=this.checkForHoles,!e)i.instructions=this.instructions.slice();else for(let r=0;r<this.instructions.length;r++){let s=this.instructions[r];i.instructions.push({action:s.action,data:s.data.slice()})}return i}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;let i=e.a,r=e.b,s=e.c,a=e.d,l=e.tx,c=e.ty,h=0,f=0,p=0,g=0,y=0,v=0,x=0,A=0;for(let S=0;S<this.instructions.length;S++){let w=this.instructions[S],E=w.data;switch(w.action){case"moveTo":case"lineTo":h=E[0],f=E[1],E[0]=i*h+s*f+l,E[1]=r*h+a*f+c;break;case"bezierCurveTo":p=E[0],g=E[1],y=E[2],v=E[3],h=E[4],f=E[5],E[0]=i*p+s*g+l,E[1]=r*p+a*g+c,E[2]=i*y+s*v+l,E[3]=r*y+a*v+c,E[4]=i*h+s*f+l,E[5]=r*h+a*f+c;break;case"quadraticCurveTo":p=E[0],g=E[1],h=E[2],f=E[3],E[0]=i*p+s*g+l,E[1]=r*p+a*g+c,E[2]=i*h+s*f+l,E[3]=r*h+a*f+c;break;case"arcToSvg":h=E[5],f=E[6],x=E[0],A=E[1],E[0]=i*x+s*A,E[1]=r*x+a*A,E[5]=i*h+s*f+l,E[6]=r*h+a*f+c;break;case"circle":E[4]=Pc(E[3],e);break;case"rect":E[4]=Pc(E[4],e);break;case"ellipse":E[8]=Pc(E[8],e);break;case"roundRect":E[5]=Pc(E[5],e);break;case"addPath":E[0].transform(e);break;case"poly":E[2]=Pc(E[2],e);break;default:Le("unknown transform action",w.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let i=this.instructions.length-1,r=this.instructions[i];if(!r)return e.x=0,e.y=0,e;for(;r.action==="closePath";){if(i--,i<0)return e.x=0,e.y=0,e;r=this.instructions[i]}switch(r.action){case"moveTo":case"lineTo":e.x=r.data[0],e.y=r.data[1];break;case"quadraticCurveTo":e.x=r.data[2],e.y=r.data[3];break;case"bezierCurveTo":e.x=r.data[4],e.y=r.data[5];break;case"arc":case"arcToSvg":e.x=r.data[5],e.y=r.data[6];break;case"addPath":r.data[0].getLastPoint(e);break}return e}}});function Ut(t,e,i){let r=t.getAttribute(e);return r?Number(r):i}var CS=b(()=>{});function KL(t,e){let i=t.querySelectorAll("defs");for(let r=0;r<i.length;r++){let s=i[r];for(let a=0;a<s.children.length;a++){let l=s.children[a];switch(l.nodeName.toLowerCase()){case"lineargradient":e.defs[l.id]=Jz(l);break;case"radialgradient":e.defs[l.id]=e7();break}}}}function Jz(t){let e=Ut(t,"x1",0),i=Ut(t,"y1",0),r=Ut(t,"x2",1),s=Ut(t,"y2",0),a=t.getAttribute("gradientUnits")||"objectBoundingBox",l=new Ps(e,i,r,s,a==="objectBoundingBox"?"local":"global");for(let c=0;c<t.children.length;c++){let h=t.children[c],f=Ut(h,"offset",0),p=ct.shared.setValue(h.getAttribute("stop-color")).toNumber();l.addColorStop(f,p)}return l}function e7(t){return Le("[SVG Parser] Radial gradients are not yet supported"),new Ps(0,0,1,0)}var $L=b(()=>{_i(),dt(),sd(),CS()});function zx(t){let e=t.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}var ZL=b(()=>{});function RS(t,e){let i=t.getAttribute("style"),r={},s={},a={strokeStyle:r,fillStyle:s,useFill:!1,useStroke:!1};for(let l in Sm){let c=t.getAttribute(l);c&&Xx(e,a,l,c.trim())}if(i){let l=i.split(";");for(let c=0;c<l.length;c++){let h=l[c].trim(),[f,p]=h.split(":");Sm[f]&&Xx(e,a,f,p.trim())}}return{strokeStyle:a.useStroke?r:null,fillStyle:a.useFill?s:null,useFill:a.useFill,useStroke:a.useStroke}}function Xx(t,e,i,r){switch(i){case"stroke":if(r!=="none"){if(r.startsWith("url(")){let s=zx(r);e.strokeStyle.fill=t.defs[s]}else e.strokeStyle.color=ct.shared.setValue(r).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(r);break;case"fill":if(r!=="none"){if(r.startsWith("url(")){let s=zx(r);e.fillStyle.fill=t.defs[s]}else e.fillStyle.color=ct.shared.setValue(r).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(r);break;case"stroke-opacity":e.strokeStyle.alpha=Number(r);break;case"opacity":e.fillStyle.alpha=Number(r),e.strokeStyle.alpha=Number(r);break}}var Sm,QL=b(()=>{_i(),ZL(),Sm={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}}});function JL(t,e){if(typeof t=="string"){let l=document.createElement("div");l.innerHTML=t.trim(),t=l.querySelector("svg")}let i={context:e,defs:{},path:new uo};KL(t,i);let r=t.children,{fillStyle:s,strokeStyle:a}=RS(t,i);for(let l=0;l<r.length;l++){let c=r[l];c.nodeName.toLowerCase()!=="defs"&&ek(c,i,s,a)}return e}function ek(t,e,i,r){let s=t.children,{fillStyle:a,strokeStyle:l}=RS(t,e);a&&i?i={...i,...a}:a&&(i=a),l&&r?r={...r,...l}:l&&(r=l);let c=!i&&!r;c&&(i={color:0});let h,f,p,g,y,v,x,A,S,w,E,B,G,U,H,j,Z;switch(t.nodeName.toLowerCase()){case"path":U=t.getAttribute("d"),t.getAttribute("fill-rule")==="evenodd"&&Le("SVG Evenodd fill rule not supported, your svg may render incorrectly"),H=new uo(U,!0),e.context.path(H),i&&e.context.fill(i),r&&e.context.stroke(r);break;case"circle":x=Ut(t,"cx",0),A=Ut(t,"cy",0),S=Ut(t,"r",0),e.context.ellipse(x,A,S,S),i&&e.context.fill(i),r&&e.context.stroke(r);break;case"rect":h=Ut(t,"x",0),f=Ut(t,"y",0),j=Ut(t,"width",0),Z=Ut(t,"height",0),w=Ut(t,"rx",0),E=Ut(t,"ry",0),w||E?e.context.roundRect(h,f,j,Z,w||E):e.context.rect(h,f,j,Z),i&&e.context.fill(i),r&&e.context.stroke(r);break;case"ellipse":x=Ut(t,"cx",0),A=Ut(t,"cy",0),w=Ut(t,"rx",0),E=Ut(t,"ry",0),e.context.beginPath(),e.context.ellipse(x,A,w,E),i&&e.context.fill(i),r&&e.context.stroke(r);break;case"line":p=Ut(t,"x1",0),g=Ut(t,"y1",0),y=Ut(t,"x2",0),v=Ut(t,"y2",0),e.context.beginPath(),e.context.moveTo(p,g),e.context.lineTo(y,v),r&&e.context.stroke(r);break;case"polygon":G=t.getAttribute("points"),B=G.match(/\d+/g).map(q=>parseInt(q,10)),e.context.poly(B,!0),i&&e.context.fill(i),r&&e.context.stroke(r);break;case"polyline":G=t.getAttribute("points"),B=G.match(/\d+/g).map(q=>parseInt(q,10)),e.context.poly(B,!1),r&&e.context.stroke(r);break;case"g":case"svg":break;default:{Le(`[SVG parser] <${t.nodeName}> elements unsupported`);break}}c&&(i=null);for(let q=0;q<s.length;q++)ek(s[q],e,i,r)}var tk=b(()=>{dt(),Gy(),$L(),CS(),QL()});function t7(t){return ct.isColorLike(t)}function bB(t){return t instanceof mu}function xB(t){return t instanceof Ps}function i7(t){return t instanceof ve}function r7(t,e,i){let r=ct.shared.setValue(e??0);return t.color=r.toNumber(),t.alpha=r.alpha===1?i.alpha:r.alpha,t.texture=ve.WHITE,{...i,...t}}function s7(t,e,i){return t.texture=e,{...i,...t}}function TB(t,e,i){return t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...i,...t}}function SB(t,e,i){return e.buildGradient(),t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,t.textureSpace=e.textureSpace,{...i,...t}}function n7(t,e){let i={...e,...t},r=ct.shared.setValue(i.color);return i.alpha*=r.alpha,i.color=r.toNumber(),i}function sa(t,e){if(t==null)return null;let i={},r=t;return t7(t)?r7(i,t,e):i7(t)?s7(i,t,e):bB(t)?TB(i,t,e):xB(t)?SB(i,t,e):r.fill&&bB(r.fill)?TB(r,r.fill,e):r.fill&&xB(r.fill)?SB(r,r.fill,e):n7(r,e)}function Sh(t,e){let{width:i,alignment:r,miterLimit:s,cap:a,join:l,pixelLine:c,...h}=e,f=sa(t,h);return f?{width:i,alignment:r,miterLimit:s,cap:a,join:l,pixelLine:c,...f}:null}var MS=b(()=>{_i(),tt(),sd(),Fy()}),AB,Zb,cp,Vi,gu=b(()=>{ir(),_i(),nt(),vr(),tt(),Gi(),gt(),qi(),Gy(),tk(),MS(),AB=new Et,Zb=new De,cp=class Ss extends ui{constructor(){super(...arguments),this.uid=Gt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new uo,this._transform=new De,this._fillStyle={...Ss.defaultFillStyle},this._strokeStyle={...Ss.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Ci,this._boundsDirty=!0}clone(){let e=new Ss;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=sa(e,Ss.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=Sh(e,Ss.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=sa(e,Ss.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=sa(e,Ss.defaultStrokeStyle),this}texture(e,i,r,s,a,l){return this.instructions.push({action:"texture",data:{image:e,dx:r||0,dy:s||0,dw:a||e.frame.width,dh:l||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:i?ct.shared.setValue(i).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new uo,this}fill(e,i){let r,s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="stroke"?r=s.data.path:r=this._activePath.clone(),r?(e!=null&&(i!==void 0&&typeof e=="number"&&(Pe(Xe,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:i}),this._fillStyle=sa(e,Ss.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){let{x:e,y:i}=this._activePath.getLastPoint(Et.shared);this._activePath.clear(),this._activePath.moveTo(e,i)}stroke(e){let i,r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="fill"?i=r.data.path:i=this._activePath.clone(),i?(e!=null&&(this._strokeStyle=Sh(e,Ss.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){let i=this.instructions[this.instructions.length-1-e],r=this._activePath.clone();if(i&&(i.action==="stroke"||i.action==="fill"))if(i.data.hole)i.data.hole.addPath(r);else{i.data.hole=r;break}}return this._initNextPathLocation(),this}arc(e,i,r,s,a,l){this._tick++;let c=this._transform;return this._activePath.arc(c.a*e+c.c*i+c.tx,c.b*e+c.d*i+c.ty,r,s,a,l),this}arcTo(e,i,r,s,a){this._tick++;let l=this._transform;return this._activePath.arcTo(l.a*e+l.c*i+l.tx,l.b*e+l.d*i+l.ty,l.a*r+l.c*s+l.tx,l.b*r+l.d*s+l.ty,a),this}arcToSvg(e,i,r,s,a,l,c){this._tick++;let h=this._transform;return this._activePath.arcToSvg(e,i,r,s,a,h.a*l+h.c*c+h.tx,h.b*l+h.d*c+h.ty),this}bezierCurveTo(e,i,r,s,a,l,c){this._tick++;let h=this._transform;return this._activePath.bezierCurveTo(h.a*e+h.c*i+h.tx,h.b*e+h.d*i+h.ty,h.a*r+h.c*s+h.tx,h.b*r+h.d*s+h.ty,h.a*a+h.c*l+h.tx,h.b*a+h.d*l+h.ty,c),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,i,r,s){return this._tick++,this._activePath.ellipse(e,i,r,s,this._transform.clone()),this}circle(e,i,r){return this._tick++,this._activePath.circle(e,i,r,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,i){this._tick++;let r=this._transform;return this._activePath.lineTo(r.a*e+r.c*i+r.tx,r.b*e+r.d*i+r.ty),this}moveTo(e,i){this._tick++;let r=this._transform,s=this._activePath.instructions,a=r.a*e+r.c*i+r.tx,l=r.b*e+r.d*i+r.ty;return s.length===1&&s[0].action==="moveTo"?(s[0].data[0]=a,s[0].data[1]=l,this):(this._activePath.moveTo(a,l),this)}quadraticCurveTo(e,i,r,s,a){this._tick++;let l=this._transform;return this._activePath.quadraticCurveTo(l.a*e+l.c*i+l.tx,l.b*e+l.d*i+l.ty,l.a*r+l.c*s+l.tx,l.b*r+l.d*s+l.ty,a),this}rect(e,i,r,s){return this._tick++,this._activePath.rect(e,i,r,s,this._transform.clone()),this}roundRect(e,i,r,s,a){return this._tick++,this._activePath.roundRect(e,i,r,s,a,this._transform.clone()),this}poly(e,i){return this._tick++,this._activePath.poly(e,i,this._transform.clone()),this}regularPoly(e,i,r,s,a=0,l){return this._tick++,this._activePath.regularPoly(e,i,r,s,a,l),this}roundPoly(e,i,r,s,a,l){return this._tick++,this._activePath.roundPoly(e,i,r,s,a,l),this}roundShape(e,i,r,s){return this._tick++,this._activePath.roundShape(e,i,r,s),this}filletRect(e,i,r,s,a){return this._tick++,this._activePath.filletRect(e,i,r,s,a),this}chamferRect(e,i,r,s,a,l){return this._tick++,this._activePath.chamferRect(e,i,r,s,a,l),this}star(e,i,r,s,a=0,l=0){return this._tick++,this._activePath.star(e,i,r,s,a,l,this._transform.clone()),this}svg(e){return this._tick++,JL(e,this),this}restore(){let e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,i=e){return this._transform.scale(e,i),this}setTransform(e,i,r,s,a,l){return e instanceof De?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,i,r,s,a,l),this)}transform(e,i,r,s,a,l){return e instanceof De?(this._transform.append(e),this):(Zb.set(e,i,r,s,a,l),this._transform.append(Zb),this)}translate(e,i=e){return this._transform.translate(e,i),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;let e=this._bounds;e.clear();for(let i=0;i<this.instructions.length;i++){let r=this.instructions[i],s=r.action;if(s==="fill"){let a=r.data;e.addBounds(a.path.bounds)}else if(s==="texture"){let a=r.data;e.addFrame(a.dx,a.dy,a.dx+a.dw,a.dy+a.dh,a.transform)}if(s==="stroke"){let a=r.data,l=a.style.alignment,c=a.style.width*(1-l),h=a.path.bounds;e.addFrame(h.minX-c,h.minY-c,h.maxX+c,h.maxY+c)}}return e}containsPoint(e){var s;if(!this.bounds.containsPoint(e.x,e.y))return!1;let i=this.instructions,r=!1;for(let a=0;a<i.length;a++){let l=i[a],c=l.data,h=c.path;if(!l.action||!h)continue;let f=c.style,p=h.shapePath.shapePrimitives;for(let g=0;g<p.length;g++){let y=p[g].shape;if(!f||!y)continue;let v=p[g].transform,x=v?v.applyInverse(e,AB):e;if(l.action==="fill")r=y.contains(x.x,x.y);else{let S=f;r=y.strokeContains(x.x,x.y,S.width,S.alignment)}let A=c.hole;if(A){let S=(s=A.shapePath)==null?void 0:s.shapePrimitives;if(S)for(let w=0;w<S.length;w++)S[w].shape.contains(x.x,x.y)&&(r=!1)}if(r)return!0}}return r}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){let i=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}},cp.defaultFillStyle={color:16777215,alpha:1,texture:ve.WHITE,matrix:null,fill:null,textureSpace:"local"},cp.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:ve.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1},Vi=cp});function BS(t){let e=[],i=0;for(let r=0;r<Yx.length;r++){let s=`_${Yx[r]}`;e[i++]=t[s]}return i=ik(t._fill,e,i),i=a7(t._stroke,e,i),i=o7(t.dropShadow,e,i),e.join("-")}function ik(t,e,i){var r;return t&&(e[i++]=t.color,e[i++]=t.alpha,e[i++]=(r=t.fill)==null?void 0:r.styleKey),i}function a7(t,e,i){return t&&(i=ik(t,e,i),e[i++]=t.width,e[i++]=t.alignment,e[i++]=t.cap,e[i++]=t.join,e[i++]=t.miterLimit),i}function o7(t,e,i){return t&&(e[i++]=t.alpha,e[i++]=t.angle,e[i++]=t.blur,e[i++]=t.distance,e[i++]=ct.shared.setValue(t.color).toNumber()),i}var Yx,PS=b(()=>{_i(),Yx=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"]});function l7(t){let e=t;if(typeof e.dropShadow=="boolean"&&e.dropShadow){let i=or.defaultDropShadow;t.dropShadow={alpha:e.dropShadowAlpha??i.alpha,angle:e.dropShadowAngle??i.angle,blur:e.dropShadowBlur??i.blur,color:e.dropShadowColor??i.color,distance:e.dropShadowDistance??i.distance}}if(e.strokeThickness!==void 0){Pe(Xe,"strokeThickness is now a part of stroke");let i=e.stroke,r={};if(ct.isColorLike(i))r.color=i;else if(i instanceof Ps||i instanceof mu)r.fill=i;else if(Object.hasOwnProperty.call(i,"color")||Object.hasOwnProperty.call(i,"fill"))r=i;else throw new Error("Invalid stroke value.");t.stroke={...r,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){Pe(Xe,"gradient fill is now a fill pattern: `new FillGradient(...)`");let i;t.fontSize==null?t.fontSize=or.defaultTextStyle.fontSize:typeof t.fontSize=="string"?i=parseInt(t.fontSize,10):i=t.fontSize;let r=new Ps({start:{x:0,y:0},end:{x:0,y:(i||0)*1.7}}),s=e.fillGradientStops.map(a=>ct.shared.setValue(a).toNumber());s.forEach((a,l)=>{let c=l/(s.length-1);r.addColorStop(c,a)}),t.fill={fill:r}}}var hp,or,fa=b(()=>{ir(),_i(),gt(),sd(),Fy(),gu(),MS(),PS(),hp=class wl extends ui{constructor(e={}){super(),l7(e);let i={...wl.defaultTextStyle,...e};for(let r in i){let s=r;this[s]=i[r]}this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...wl.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...wl.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...Vi.defaultFillStyle,...e},()=>{this._fill=sa({...this._originalFill},Vi.defaultFillStyle)})),this._fill=sa(e===0?"black":e,Vi.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...Vi.defaultStrokeStyle,...e},()=>{this._stroke=Sh({...this._originalStroke},Vi.defaultStrokeStyle)})),this._stroke=Sh(e,Vi.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=BS(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){let e=wl.defaultTextStyle;for(let i in e)this[i]=e[i]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new wl({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(e=!1){var i,r,s,a;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){let l=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(i=this._fill)!=null&&i.texture&&this._fill.texture.destroy(l),(r=this._originalFill)!=null&&r.texture&&this._originalFill.texture.destroy(l),(s=this._stroke)!=null&&s.texture&&this._stroke.texture.destroy(l),(a=this._originalStroke)!=null&&a.texture&&this._originalStroke.texture.destroy(l)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,i){return new Proxy(e,{set:(r,s,a)=>(r[s]=a,i==null||i(s,a),this.update(),!0)})}_isFillStyle(e){return(e??null)!==null&&!(ct.isColorLike(e)||e instanceof Ps||e instanceof mu)}},hp.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},hp.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100},or=hp});function DS(t,e,i,r){let s=rk;s.minX=0,s.minY=0,s.maxX=t.width/r|0,s.maxY=t.height/r|0;let a=Jt.getOptimalTexture(s.width,s.height,r,!1);return a.source.uploadMethodId="image",a.source.resource=t,a.source.alphaMode="premultiply-alpha-on-upload",a.frame.width=e/r,a.frame.height=i/r,a.source.emit("update",a.source),a.updateUvs(),a}var rk,OS=b(()=>{Os(),qi(),rk=new Ci});function Ah(t){let e=typeof t.fontSize=="number"?`${t.fontSize}px`:t.fontSize,i=t.fontFamily;Array.isArray(t.fontFamily)||(i=t.fontFamily.split(","));for(let r=i.length-1;r>=0;r--){let s=i[r].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!sk.includes(s)&&(s=`"${s}"`),i[r]=s}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} ${i.join(",")}`}var sk,Ly=b(()=>{sk=["serif","sans-serif","monospace","cursive","fantasy","system-ui"]}),dp,Ur,as,ky=b(()=>{Ct(),Ly(),dp={willReadFrequently:!0},Ur=class Be{static get experimentalLetterSpacingSupported(){let e=Be._experimentalLetterSpacingSupported;if(e!==void 0){let i=et.get().getCanvasRenderingContext2D().prototype;e=Be._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return e}constructor(e,i,r,s,a,l,c,h,f){this.text=e,this.style=i,this.width=r,this.height=s,this.lines=a,this.lineWidths=l,this.lineHeight=c,this.maxLineWidth=h,this.fontProperties=f}static measureText(e=" ",i,r=Be._canvas,s=i.wordWrap){var S;let a=`${e}:${i.styleKey}`;if(Be._measurementCache[a])return Be._measurementCache[a];let l=Ah(i),c=Be.measureFont(l);c.fontSize===0&&(c.fontSize=i.fontSize,c.ascent=i.fontSize);let h=Be.__context;h.font=l;let f=(s?Be._wordWrap(e,i,r):e).split(/(?:\r\n|\r|\n)/),p=new Array(f.length),g=0;for(let w=0;w<f.length;w++){let E=Be._measureText(f[w],i.letterSpacing,h);p[w]=E,g=Math.max(g,E)}let y=((S=i._stroke)==null?void 0:S.width)||0,v=g+y;i.dropShadow&&(v+=i.dropShadow.distance);let x=i.lineHeight||c.fontSize,A=Math.max(x,c.fontSize+y)+(f.length-1)*(x+i.leading);return i.dropShadow&&(A+=i.dropShadow.distance),new Be(e,i,v,A,f,p,x+i.leading,g,c)}static _measureText(e,i,r){let s=!1;Be.experimentalLetterSpacingSupported&&(Be.experimentalLetterSpacing?(r.letterSpacing=`${i}px`,r.textLetterSpacing=`${i}px`,s=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let a=r.measureText(e),l=a.width,c=-a.actualBoundingBoxLeft,h=a.actualBoundingBoxRight-c;if(l>0)if(s)l-=i,h-=i;else{let f=(Be.graphemeSegmenter(e).length-1)*i;l+=f,h+=f}return Math.max(l,h)}static _wordWrap(e,i,r=Be._canvas){let s=r.getContext("2d",dp),a=0,l="",c="",h=Object.create(null),{letterSpacing:f,whiteSpace:p}=i,g=Be._collapseSpaces(p),y=Be._collapseNewlines(p),v=!g,x=i.wordWrapWidth+f,A=Be._tokenize(e);for(let S=0;S<A.length;S++){let w=A[S];if(Be._isNewline(w)){if(!y){c+=Be._addLine(l),v=!g,l="",a=0;continue}w=" "}if(g){let B=Be.isBreakingSpace(w),G=Be.isBreakingSpace(l[l.length-1]);if(B&&G)continue}let E=Be._getFromCache(w,f,h,s);if(E>x)if(l!==""&&(c+=Be._addLine(l),l="",a=0),Be.canBreakWords(w,i.breakWords)){let B=Be.wordWrapSplit(w);for(let G=0;G<B.length;G++){let U=B[G],H=U,j=1;for(;B[G+j];){let q=B[G+j];if(!Be.canBreakChars(H,q,w,G,i.breakWords))U+=q;else break;H=q,j++}G+=j-1;let Z=Be._getFromCache(U,f,h,s);Z+a>x&&(c+=Be._addLine(l),v=!1,l="",a=0),l+=U,a+=Z}}else{l.length>0&&(c+=Be._addLine(l),l="",a=0);let B=S===A.length-1;c+=Be._addLine(w,!B),v=!1,l="",a=0}else E+a>x&&(v=!1,c+=Be._addLine(l),l="",a=0),(l.length>0||!Be.isBreakingSpace(w)||v)&&(l+=w,a+=E)}return c+=Be._addLine(l,!1),c}static _addLine(e,i=!0){return e=Be._trimRight(e),e=i?`${e}
`:e,e}static _getFromCache(e,i,r,s){let a=r[e];return typeof a!="number"&&(a=Be._measureText(e,i,s)+i,r[e]=a),a}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let i=e.length-1;i>=0;i--){let r=e[i];if(!Be.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:Be._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,i){return typeof e!="string"?!1:Be._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){let i=[],r="";if(typeof e!="string")return i;for(let s=0;s<e.length;s++){let a=e[s],l=e[s+1];if(Be.isBreakingSpace(a,l)||Be._isNewline(a)){r!==""&&(i.push(r),r=""),i.push(a);continue}r+=a}return r!==""&&i.push(r),i}static canBreakWords(e,i){return i}static canBreakChars(e,i,r,s,a){return!0}static wordWrapSplit(e){return Be.graphemeSegmenter(e)}static measureFont(e){if(Be._fonts[e])return Be._fonts[e];let i=Be._context;i.font=e;let r=i.measureText(Be.METRICS_STRING+Be.BASELINE_SYMBOL),s={ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,fontSize:r.actualBoundingBoxAscent+r.actualBoundingBoxDescent};return Be._fonts[e]=s,s}static clearMetrics(e=""){e?delete Be._fonts[e]:Be._fonts={}}static get _canvas(){var e;if(!Be.__canvas){let i;try{let r=new OffscreenCanvas(0,0);if((e=r.getContext("2d",dp))!=null&&e.measureText)return Be.__canvas=r,r;i=et.get().createCanvas()}catch{i=et.get().createCanvas()}i.width=i.height=10,Be.__canvas=i}return Be.__canvas}static get _context(){return Be.__context||(Be.__context=Be._canvas.getContext("2d",dp)),Be.__context}},Ur.METRICS_STRING="|q",Ur.BASELINE_SYMBOL="M",Ur.BASELINE_MULTIPLIER=1.4,Ur.HEIGHT_MULTIPLIER=2,Ur.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){let t=new Intl.Segmenter;return e=>[...t.segment(e)].map(i=>i.segment)}return t=>[...t]})(),Ur.experimentalLetterSpacing=!1,Ur._fonts={},Ur._newlines=[10,13],Ur._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],Ur._measurementCache={},as=Ur});function Eh(t,e,i,r=0){if(t.texture===ve.WHITE&&!t.fill)return ct.shared.setValue(t.color).setAlpha(t.alpha??1).toHexa();if(t.fill){if(t.fill instanceof mu){let s=t.fill,a=e.createPattern(s.texture.source.resource,"repeat"),l=s.transform.copyTo(De.shared);return l.scale(s.texture.frame.width,s.texture.frame.height),a.setTransform(l),a}else if(t.fill instanceof Ps){let s=t.fill,a=s.type==="linear",l=s.textureSpace==="local",c=1,h=1;l&&i&&(c=i.width+r,h=i.height+r);let f,p=!1;if(a){let{start:g,end:y}=s;f=e.createLinearGradient(g.x*c,g.y*h,y.x*c,y.y*h),p=Math.abs(y.x-g.x)<Math.abs((y.y-g.y)*.1)}else{let{center:g,innerRadius:y,outerCenter:v,outerRadius:x}=s;f=e.createRadialGradient(g.x*c,g.y*h,y*c,v.x*c,v.y*h,x*c)}if(p&&l&&i){let g=i.lineHeight/h;for(let y=0;y<i.lines.length;y++){let v=(y*i.lineHeight+r/2)/h;s.colorStops.forEach(x=>{let A=v+x.offset*g;f.addColorStop(Math.floor(A*jx)/jx,ct.shared.setValue(x.color).toHex())})}}else s.colorStops.forEach(g=>{f.addColorStop(g.offset,ct.shared.setValue(g.color).toHex())});return f}}else{let s=e.createPattern(t.texture.source.resource,"repeat"),a=t.matrix.copyTo(De.shared);return a.scale(t.texture.frame.width,t.texture.frame.height),s.setTransform(a),s}return Le("FillStyle not recognised",t),"red"}var jx,FS=b(()=>{_i(),nt(),tt(),dt(),sd(),Fy(),jx=1e5}),Am,nk=b(()=>{_i(),$(),Yh(),pu(),Os(),vL(),gt(),fa(),OS(),ky(),Ly(),FS(),Am=class{constructor(t){this._activeTextures={},this._renderer=t}getTextureSize(t,e,i){let r=as.measureText(t||" ",i),s=Math.ceil(Math.ceil(Math.max(1,r.width)+i.padding*2)*e),a=Math.ceil(Math.ceil(Math.max(1,r.height)+i.padding*2)*e);return s=Math.ceil(s-1e-6),a=Math.ceil(a-1e-6),s=lo(s),a=lo(a),{width:s,height:a}}getTexture(t,e,i,r){typeof t=="string"&&(Pe("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),t={text:t,style:i,resolution:e}),t.style instanceof or||(t.style=new or(t.style));let{texture:s,canvasAndContext:a}=this.createTextureAndCanvas(t);return this._renderer.texture.initSource(s._source),cs.returnCanvasAndContext(a),s}createTextureAndCanvas(t){let{text:e,style:i}=t,r=t.resolution??this._renderer.resolution,s=as.measureText(e||" ",i),a=Math.ceil(Math.ceil(Math.max(1,s.width)+i.padding*2)*r),l=Math.ceil(Math.ceil(Math.max(1,s.height)+i.padding*2)*r),c=cs.getOptimalCanvasAndContext(a,l),{canvas:h}=c;this.renderTextToCanvas(e,i,r,c);let f=DS(h,a,l,r);if(i.trim){let p=_L(h,r);f.frame.copyFrom(p),f.updateUvs()}return{texture:f,canvasAndContext:c}}getManagedTexture(t){t._resolution=t._autoResolution?this._renderer.resolution:t.resolution;let e=t._getKey();if(this._activeTextures[e])return this._increaseReferenceCount(e),this._activeTextures[e].texture;let{texture:i,canvasAndContext:r}=this.createTextureAndCanvas(t);return this._activeTextures[e]={canvasAndContext:r,texture:i,usageCount:1},i}_increaseReferenceCount(t){this._activeTextures[t].usageCount++}returnTexture(t){let e=t.source;e.resource=null,e.uploadMethodId="unknown",e.alphaMode="no-premultiply-alpha",Jt.returnTexture(t)}decreaseReferenceCount(t){let e=this._activeTextures[t];e.usageCount--,e.usageCount===0&&(cs.returnCanvasAndContext(e.canvasAndContext),this.returnTexture(e.texture),this._activeTextures[t]=null)}getReferenceCount(t){return this._activeTextures[t].usageCount}renderTextToCanvas(t,e,i,r){var w,E,B,G;let{canvas:s,context:a}=r,l=Ah(e),c=as.measureText(t||" ",e),h=c.lines,f=c.lineHeight,p=c.lineWidths,g=c.maxLineWidth,y=c.fontProperties,v=s.height;if(a.resetTransform(),a.scale(i,i),a.textBaseline=e.textBaseline,(w=e._stroke)==null?void 0:w.width){let U=e._stroke;a.lineWidth=U.width,a.miterLimit=U.miterLimit,a.lineJoin=U.join,a.lineCap=U.cap}a.font=l;let x,A,S=e.dropShadow?2:1;for(let U=0;U<S;++U){let H=e.dropShadow&&U===0,j=H?Math.ceil(Math.max(1,v)+e.padding*2):0,Z=j*i;if(H){a.fillStyle="black",a.strokeStyle="black";let N=e.dropShadow,se=N.color,le=N.alpha;a.shadowColor=ct.shared.setValue(se).setAlpha(le).toRgbaString();let pe=N.blur*i,Ae=N.distance*i;a.shadowBlur=pe,a.shadowOffsetX=Math.cos(N.angle)*Ae,a.shadowOffsetY=Math.sin(N.angle)*Ae+Z}else{if(a.fillStyle=e._fill?Eh(e._fill,a,c):null,(E=e._stroke)==null?void 0:E.width){let N=e._stroke.width*e._stroke.alignment;a.strokeStyle=Eh(e._stroke,a,c,N)}a.shadowColor="black"}let q=(f-y.fontSize)/2;f-y.fontSize<0&&(q=0);let L=((B=e._stroke)==null?void 0:B.width)??0;for(let N=0;N<h.length;N++)x=L/2,A=L/2+N*f+y.ascent+q,e.align==="right"?x+=g-p[N]:e.align==="center"&&(x+=(g-p[N])/2),(G=e._stroke)!=null&&G.width&&this._drawLetterSpacing(h[N],e,r,x+e.padding,A+e.padding-j,!0),e._fill!==void 0&&this._drawLetterSpacing(h[N],e,r,x+e.padding,A+e.padding-j)}}_drawLetterSpacing(t,e,i,r,s,a=!1){let{context:l}=i,c=e.letterSpacing,h=!1;if(as.experimentalLetterSpacingSupported&&(as.experimentalLetterSpacing?(l.letterSpacing=`${c}px`,l.textLetterSpacing=`${c}px`,h=!0):(l.letterSpacing="0px",l.textLetterSpacing="0px")),c===0||h){a?l.strokeText(t,r,s):l.fillText(t,r,s);return}let f=r,p=as.graphemeSegmenter(t),g=l.measureText(t).width,y=0;for(let v=0;v<p.length;++v){let x=p[v];a?l.strokeText(x,f,s):l.fillText(x,f,s);let A="";for(let S=v+1;S<p.length;++S)A+=p[S];y=l.measureText(A).width,f+=g-y+c,g=y}}destroy(){this._activeTextures=null}},Am.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"canvasText"}}),ak=b(()=>{$(),yL(),nk(),ke.add(Am),ke.add(Tm)}),Iy,GS=b(()=>{gt(),vn(),gu(),Iy=class qx extends Fs{constructor(e){e instanceof Vi&&(e={context:e});let{context:i,roundPixels:r,...s}=e||{};super({label:"Graphics",...s}),this.renderPipeId="graphics",i?this._context=i:this._context=this._ownedContext=new Vi,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=r??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,i){return this.context[e](...i),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new qx(this._context.clone()):(this._ownedContext=null,new qx(this._context))}lineStyle(e,i,r){Pe(Xe,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");let s={};return e&&(s.width=e),i&&(s.color=i),r&&(s.alpha=r),this.context.strokeStyle=s,this}beginFill(e,i){Pe(Xe,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");let r={};return e!==void 0&&(r.color=e),i!==void 0&&(r.alpha=i),this.context.fillStyle=r,this}endFill(){Pe(Xe,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();let e=this.context.strokeStyle;return(e.width!==Vi.defaultStrokeStyle.width||e.color!==Vi.defaultStrokeStyle.color||e.alpha!==Vi.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Pe(Xe,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Pe(Xe,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Pe(Xe,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Pe(Xe,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Pe(Xe,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Pe(Xe,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}}),LS,kS,ok=b(()=>{LS={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:` 
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
        `}},kS={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:` 
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}}}),IS,US,lk=b(()=>{IS={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {
                
                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));
            
                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;
             
            }
        `}},US={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {
                
                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));
               
                // SDF
                median = min(median, msdfColor.a);
            
                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
           
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);  
              
                return coverage;
            }
        `}}}),Qb,Jb,NS,uk=b(()=>{nt(),xo(),ha(),Qh(),Jh(),da(),wy(),fs(),hi(),ok(),lk(),NS=class extends qr{constructor(){let t=new ei({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new De,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}}),e=bo();Qb??(Qb=uu({name:"sdf-shader",bits:[$h,Sy(e),LS,IS,Eo]})),Jb??(Jb=cu({name:"sdf-shader",bits:[Zh,Ay(e),kS,US,wo]})),super({glProgram:Jb,gpuProgram:Qb,resources:{localUniforms:t,batchSamplers:Ey(e)}})}}}),Uy,HS=b(()=>{ir(),gt(),Uy=class extends ui{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Pe(Xe,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Pe(Xe,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Pe(Xe,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Pe(Xe,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Pe(Xe,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){var e;this.emit("destroy",this),this.removeAllListeners();for(let i in this.chars)(e=this.chars[i].texture)==null||e.destroy();this.chars=null,t&&(this.pages.forEach(i=>i.texture.destroy(!0)),this.pages=null)}}});function VS(t){if(t==="")return[];typeof t=="string"&&(t=[t]);let e=[];for(let i=0,r=t.length;i<r;i++){let s=t[i];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);if(s[0].length===0||s[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");let a=s[0].charCodeAt(0),l=s[1].charCodeAt(0);if(l<a)throw new Error("[BitmapFont]: Invalid character range.");for(let c=a,h=l;c<=h;c++)e.push(String.fromCharCode(c))}else e.push(...Array.from(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}var zS=b(()=>{}),e0,Em,ck=b(()=>{_i(),ci(),pu(),lu(),tt(),gt(),ky(),Ly(),FS(),fa(),HS(),zS(),e0=class hk extends Uy{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;let i={...hk.defaultOptions,...e};this._textureSize=i.textureSize,this._mipmap=i.mipmap;let r=i.style.clone();i.overrideFill&&(r._fill.color=16777215,r._fill.alpha=1,r._fill.texture=ve.WHITE,r._fill.fill=null),this.applyFillAsTint=i.overrideFill;let s=r.fontSize;r.fontSize=this.baseMeasurementFontSize;let a=Ah(r);i.overrideSize?r._stroke&&(r._stroke.width*=this.baseRenderedFontSize/s):r.fontSize=this.baseRenderedFontSize=s,this._style=r,this._skipKerning=i.skipKerning??!1,this.resolution=i.resolution??1,this._padding=i.padding??4,this.fontMetrics=as.measureFont(a),this.lineHeight=r.lineHeight||this.fontMetrics.fontSize||r.fontSize}ensureCharacters(e){var S,w;let i=VS(e).filter(E=>!this._currentChars.includes(E)).filter((E,B,G)=>G.indexOf(E)===B);if(!i.length)return;this._currentChars=[...this._currentChars,...i];let r;this._currentPageIndex===-1?r=this._nextPage():r=this.pages[this._currentPageIndex];let{canvas:s,context:a}=r.canvasAndContext,l=r.texture.source,c=this._style,h=this._currentX,f=this._currentY,p=this.baseRenderedFontSize/this.baseMeasurementFontSize,g=this._padding*p,y=0,v=!1,x=s.width/this.resolution,A=s.height/this.resolution;for(let E=0;E<i.length;E++){let B=i[E],G=as.measureText(B,c,s,!1);G.lineHeight=G.height;let U=G.width*p,H=Math.ceil((c.fontStyle==="italic"?2:1)*U),j=G.height*p,Z=H+g*2,q=j+g*2;if(v=!1,B!==`
`&&B!=="\r"&&B!=="	"&&B!==" "&&(v=!0,y=Math.ceil(Math.max(q,y))),h+Z>x&&(f+=y,y=q,h=0,f+y>A)){l.update();let N=this._nextPage();s=N.canvasAndContext.canvas,a=N.canvasAndContext.context,l=N.texture.source,f=0}let L=U/p-(((S=c.dropShadow)==null?void 0:S.distance)??0)-(((w=c._stroke)==null?void 0:w.width)??0);if(this.chars[B]={id:B.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:L,kerning:{}},v){this._drawGlyph(a,G,h+g,f+g,p,c);let N=l.width*p,se=l.height*p,le=new wt(h/N*l.width,f/se*l.height,Z/N*l.width,q/se*l.height);this.chars[B].texture=new ve({source:l,frame:le}),h+=Math.ceil(Z)}}l.update(),this._currentX=h,this._currentY=f,this._skipKerning&&this._applyKerning(i,a)}get pageTextures(){return Pe(Xe,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,i){let r=this._measureCache;for(let s=0;s<e.length;s++){let a=e[s];for(let l=0;l<this._currentChars.length;l++){let c=this._currentChars[l],h=r[a];h||(h=r[a]=i.measureText(a).width);let f=r[c];f||(f=r[c]=i.measureText(c).width);let p=i.measureText(a+c).width,g=p-(h+f);g&&(this.chars[a].kerning[c]=g),p=i.measureText(a+c).width,g=p-(h+f),g&&(this.chars[c].kerning[a]=g)}}}_nextPage(){this._currentPageIndex++;let e=this.resolution,i=cs.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(i.context,this._style,e);let r=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),s=new ve({source:new pn({resource:i.canvas,resolution:r,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),a={canvasAndContext:i,texture:s};return this.pages[this._currentPageIndex]=a,a}_setupContext(e,i,r){i.fontSize=this.baseRenderedFontSize,e.scale(r,r),e.font=Ah(i),i.fontSize=this.baseMeasurementFontSize,e.textBaseline=i.textBaseline;let s=i._stroke,a=(s==null?void 0:s.width)??0;if(s&&(e.lineWidth=a,e.lineJoin=s.join,e.miterLimit=s.miterLimit,e.strokeStyle=Eh(s,e)),i._fill&&(e.fillStyle=Eh(i._fill,e)),i.dropShadow){let l=i.dropShadow,c=ct.shared.setValue(l.color).toArray(),h=l.blur*r,f=l.distance*r;e.shadowColor=`rgba(${c[0]*255},${c[1]*255},${c[2]*255},${l.alpha})`,e.shadowBlur=h,e.shadowOffsetX=Math.cos(l.angle)*f,e.shadowOffsetY=Math.sin(l.angle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,i,r,s,a,l){var x;let c=i.text,h=i.fontProperties,f=(((x=l._stroke)==null?void 0:x.width)??0)*a,p=r+f/2,g=s-f/2,y=h.descent*a,v=i.lineHeight*a;l.stroke&&f&&e.strokeText(c,p,g+v-y),l._fill&&e.fillText(c,p,g+v-y)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{canvasAndContext:i,texture:r}=this.pages[e];cs.returnCanvasAndContext(i),r.destroy(!0)}this.pages=null}},e0.defaultOptions={textureSize:512,style:new or,mipmap:!0},Em=e0});function XS(t,e,i,r){let s={width:0,height:0,offsetY:0,scale:e.fontSize/i.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};s.offsetY=i.baseLineOffset;let a=s.lines[0],l=null,c=!0,h={width:0,start:0,index:0,positions:[],chars:[]},f=x=>{let A=a.width;for(let S=0;S<h.index;S++){let w=x.positions[S];a.chars.push(x.chars[S]),a.charPositions.push(w+A)}a.width+=x.width,c=!1,h.width=0,h.index=0,h.chars.length=0},p=()=>{let x=a.chars.length-1;if(r){let A=a.chars[x];for(;A===" ";)a.width-=i.chars[A].xAdvance,A=a.chars[--x]}s.width=Math.max(s.width,a.width),a={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},c=!0,s.lines.push(a),s.height+=i.lineHeight},g=i.baseMeasurementFontSize/e.fontSize,y=e.letterSpacing*g,v=e.wordWrapWidth*g;for(let x=0;x<t.length+1;x++){let A,S=x===t.length;S||(A=t[x]);let w=i.chars[A]||i.chars[" "];if(/(?:\s)/.test(A)||A==="\r"||A===`
`||S){if(!c&&e.wordWrap&&a.width+h.width-y>v?(p(),f(h),S||a.charPositions.push(0)):(h.start=a.width,f(h),S||a.charPositions.push(0)),A==="\r"||A===`
`)a.width!==0&&p();else if(!S){let E=w.xAdvance+(w.kerning[l]||0)+y;a.width+=E,a.spaceWidth=E,a.spacesIndex.push(a.charPositions.length),a.chars.push(A)}}else{let E=w.kerning[l]||0,B=w.xAdvance+E+y;h.positions[h.index++]=h.width+E,h.chars.push(A),h.width+=B}l=A}return p(),e.align==="center"?u7(s):e.align==="right"?c7(s):e.align==="justify"&&h7(s),s}function u7(t){for(let e=0;e<t.lines.length;e++){let i=t.lines[e],r=t.width/2-i.width/2;for(let s=0;s<i.charPositions.length;s++)i.charPositions[s]+=r}}function c7(t){for(let e=0;e<t.lines.length;e++){let i=t.lines[e],r=t.width-i.width;for(let s=0;s<i.charPositions.length;s++)i.charPositions[s]+=r}}function h7(t){let e=t.width;for(let i=0;i<t.lines.length;i++){let r=t.lines[i],s=0,a=r.spacesIndex[s++],l=0,c=r.spacesIndex.length,h=(e-r.width)/c;for(let f=0;f<r.charPositions.length;f++)f===a&&(a=r.spacesIndex[s++],l+=h),r.charPositions[f]+=l}}var YS=b(()=>{}),Dc,EB,Wl,Ny=b(()=>{bn(),gt(),dt(),fa(),ck(),YS(),zS(),Dc=0,EB=class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,e){var a;let i=`${e.fontFamily}-bitmap`,r=!0;if(e._fill.fill&&!e._stroke)i+=e._fill.fill.styleKey,r=!1;else if(e._stroke||e.dropShadow){let l=e.styleKey;l=l.substring(0,l.lastIndexOf("-")),i=`${l}-bitmap`,r=!1}if(!At.has(i)){let l=new Em({style:e,overrideFill:r,overrideSize:!0,...this.defaultOptions});Dc++,Dc>50&&Le("BitmapText",`You have dynamically created ${Dc} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),l.once("destroy",()=>{Dc--,At.remove(i)}),At.set(i,l)}let s=At.get(i);return(a=s.ensureCharacters)==null||a.call(s,t),s}getLayout(t,e,i=!0){let r=this.getFont(t,e);return XS([...t],e,r,i)}measureText(t,e,i=!0){return this.getLayout(t,e,i)}install(...t){var h,f,p,g;let e=t[0];typeof e=="string"&&(e={name:e,style:t[1],chars:(h=t[2])==null?void 0:h.chars,resolution:(f=t[2])==null?void 0:f.resolution,padding:(p=t[2])==null?void 0:p.padding,skipKerning:(g=t[2])==null?void 0:g.skipKerning},Pe(Xe,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));let i=e==null?void 0:e.name;if(!i)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};let r=e.style,s=r instanceof or?r:new or(r),a=s._fill.fill!==null&&s._fill.fill!==void 0,l=new Em({style:s,overrideFill:a,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1}),c=VS(e.chars);return l.ensureCharacters(c.join("")),At.set(`${i}-bitmap`,l),l.once("destroy",()=>At.remove(`${i}-bitmap`)),l}uninstall(t){let e=`${t}-bitmap`,i=At.get(e);i&&i.destroy()}},Wl=new EB});function wB(t,e){e.groupTransform=t.groupTransform,e.groupColorAlpha=t.groupColorAlpha,e.groupColor=t.groupColor,e.groupBlendMode=t.groupBlendMode,e.globalDisplayStatus=t.globalDisplayStatus,e.groupTransform=t.groupTransform,e.localDisplayStatus=t.localDisplayStatus,e.groupAlpha=t.groupAlpha,e._roundPixels=t._roundPixels}var wm,dk=b(()=>{bn(),$(),rr(),GS(),uk(),Ny(),YS(),wm=class{constructor(t){this._gpuBitmapText={},this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(t){let e=this._getGpuBitmapText(t);return t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,e)),this._renderer.renderPipes.graphics.validateRenderable(e)}addRenderable(t,e){let i=this._getGpuBitmapText(t);wB(t,i),t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,i)),this._renderer.renderPipes.graphics.addRenderable(i,e),i.context.customShader&&this._updateDistanceField(t)}destroyRenderable(t){t.off("destroyed",this._destroyRenderableBound),this._destroyRenderableByUid(t.uid)}_destroyRenderableByUid(t){let e=this._gpuBitmapText[t].context;e.customShader&&(st.return(e.customShader),e.customShader=null),st.return(this._gpuBitmapText[t]),this._gpuBitmapText[t]=null}updateRenderable(t){let e=this._getGpuBitmapText(t);wB(t,e),this._renderer.renderPipes.graphics.updateRenderable(e),e.context.customShader&&this._updateDistanceField(t)}_updateContext(t,e){let{context:i}=e,r=Wl.getFont(t.text,t._style);i.clear(),r.distanceField.type!=="none"&&(i.customShader||(i.customShader=st.get(NS)));let s=Array.from(t.text),a=t._style,l=r.baseLineOffset,c=XS(s,a,r,!0),h=0,f=a.padding,p=c.scale,g=c.width,y=c.height+c.offsetY;a._stroke&&(g+=a._stroke.width/p,y+=a._stroke.width/p),i.translate(-t._anchor._x*g-f,-t._anchor._y*y-f).scale(p,p);let v=r.applyFillAsTint?a._fill.color:16777215;for(let x=0;x<c.lines.length;x++){let A=c.lines[x];for(let S=0;S<A.charPositions.length;S++){let w=s[h++],E=r.chars[w];E!=null&&E.texture&&i.texture(E.texture,v||"black",Math.round(A.charPositions[S]+E.xOffset),Math.round(l+E.yOffset))}l+=r.lineHeight}}_getGpuBitmapText(t){return this._gpuBitmapText[t.uid]||this.initGpuText(t)}initGpuText(t){let e=st.get(Iy);return this._gpuBitmapText[t.uid]=e,this._updateContext(t,e),t.on("destroyed",this._destroyRenderableBound),this._gpuBitmapText[t.uid]}_updateDistanceField(t){let e=this._getGpuBitmapText(t).context,i=t._style.fontFamily,r=At.get(`${i}-bitmap`),{a:s,b:a,c:l,d:c}=t.groupTransform,h=Math.sqrt(s*s+a*a),f=Math.sqrt(l*l+c*c),p=(Math.abs(h)+Math.abs(f))/2,g=r.baseRenderedFontSize/t._style.fontSize,y=p*r.distanceField.range*(1/g);e.customShader.resources.localUniforms.uniforms.uDistance=y}destroy(){for(let t in this._gpuBitmapText)this._destroyRenderableByUid(t);this._gpuBitmapText=null,this._renderer=null}},wm.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"bitmapText"}}),fk=b(()=>{$(),dk(),ke.add(wm)}),Cm,pk=b(()=>{$(),tt(),rr(),rd(),yS(),Cm=class{constructor(t){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(let t in this._gpuText){let e=this._gpuText[t];if(!e)continue;let i=e.batchableSprite.renderable;i._autoResolution&&(i._resolution=this._renderer.resolution,i.onViewUpdate())}}validateRenderable(t){let e=this._getGpuText(t),i=t._getKey();return e.textureNeedsUploading?(e.textureNeedsUploading=!1,!0):e.currentKey!==i}addRenderable(t,e){let i=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){let e=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),e._batcher.updateElement(e)}destroyRenderable(t){t.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(t.uid)}_destroyRenderableById(t){let e=this._gpuText[t];this._renderer.htmlText.decreaseReferenceCount(e.currentKey),st.return(e.batchableSprite),this._gpuText[t]=null}_updateText(t){let e=t._getKey(),i=this._getGpuText(t),r=i.batchableSprite;i.currentKey!==e&&this._updateGpuText(t).catch(s=>{console.error(s)}),t._didTextUpdate=!1,xm(r,t)}async _updateGpuText(t){t._didTextUpdate=!1;let e=this._getGpuText(t);if(e.generatingTexture)return;let i=t._getKey();this._renderer.htmlText.decreaseReferenceCount(e.currentKey),e.generatingTexture=!0,e.currentKey=i;let r=t.resolution??this._renderer.resolution,s=await this._renderer.htmlText.getManagedTexture(t.text,r,t._style,t._getKey()),a=e.batchableSprite;a.texture=e.texture=s,e.generatingTexture=!1,e.textureNeedsUploading=!0,t.onViewUpdate(),xm(a,t)}_getGpuText(t){return this._gpuText[t.uid]||this.initGpuText(t)}initGpuText(t){let e={texture:ve.EMPTY,currentKey:"--",batchableSprite:st.get(fu),textureNeedsUploading:!1,generatingTexture:!1},i=e.batchableSprite;return i.renderable=t,i.transform=t.groupTransform,i.texture=ve.EMPTY,i.bounds={minX:0,maxX:1,minY:0,maxY:0},i.roundPixels=this._renderer._roundPixels|t._roundPixels,t._resolution=t._autoResolution?this._renderer.resolution:t.resolution,this._gpuText[t.uid]=e,t.on("destroyed",this._destroyRenderableBound),e}destroy(){for(let t in this._gpuText)this._destroyRenderableById(t);this._gpuText=null,this._renderer=null}},Cm.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"htmlText"}});function mk(){let{userAgent:t}=et.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}var gk=b(()=>{Ct()}),Kp,$p,Hy,jS=b(()=>{Kp="http://www.w3.org/2000/svg",$p="http://www.w3.org/1999/xhtml",Hy=class{constructor(){this.svgRoot=document.createElementNS(Kp,"svg"),this.foreignObject=document.createElementNS(Kp,"foreignObject"),this.domElement=document.createElementNS($p,"div"),this.styleElement=document.createElementNS($p,"style"),this.image=new Image;let{foreignObject:t,svgRoot:e,styleElement:i,domElement:r}=this;t.setAttribute("width","10000"),t.setAttribute("height","10000"),t.style.overflow="hidden",e.appendChild(t),t.appendChild(i),t.appendChild(r)}}});function yk(t){let e=t._stroke,i=t._fill,r=[`div { ${[`color: ${ct.shared.setValue(i.color).toHex()}`,`font-size: ${t.fontSize}px`,`font-family: ${t.fontFamily}`,`font-weight: ${t.fontWeight}`,`font-style: ${t.fontStyle}`,`font-variant: ${t.fontVariant}`,`letter-spacing: ${t.letterSpacing}px`,`text-align: ${t.align}`,`padding: ${t.padding}px`,`white-space: ${t.whiteSpace==="pre"&&t.wordWrap?"pre-wrap":t.whiteSpace}`,...t.lineHeight?[`line-height: ${t.lineHeight}px`]:[],...t.wordWrap?[`word-wrap: ${t.breakWords?"break-all":"break-word"}`,`max-width: ${t.wordWrapWidth}px`]:[],...e?[vk(e)]:[],...t.dropShadow?[_k(t.dropShadow)]:[],...t.cssOverrides].join(";")} }`];return d7(t.tagStyles,r),r.join(" ")}function _k(t){let e=ct.shared.setValue(t.color).setAlpha(t.alpha).toHexa(),i=Math.round(Math.cos(t.angle)*t.distance),r=Math.round(Math.sin(t.angle)*t.distance),s=`${i}px ${r}px`;return t.blur>0?`text-shadow: ${s} ${t.blur}px ${e}`:`text-shadow: ${s} ${e}`}function vk(t){return[`-webkit-text-stroke-width: ${t.width}px`,`-webkit-text-stroke-color: ${ct.shared.setValue(t.color).toHex()}`,`text-stroke-width: ${t.width}px`,`text-stroke-color: ${ct.shared.setValue(t.color).toHex()}`,"paint-order: stroke"].join(";")}function d7(t,e){for(let i in t){let r=t[i],s=[];for(let a in r)Kx[a]?s.push(Kx[a](r[a])):Wx[a]&&s.push(Wx[a].replace("{{VALUE}}",r[a]));e.push(`${i} { ${s.join(";")} }`)}}var Wx,Kx,bk=b(()=>{_i(),Wx={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},Kx={fill:t=>`color: ${ct.shared.setValue(t).toHex()}`,breakWords:t=>`word-wrap: ${t?"break-all":"break-word"}`,stroke:vk,dropShadow:_k}}),Kl,Vy=b(()=>{dt(),fa(),PS(),bk(),Kl=class xk extends or{constructor(e={}){super(e),this._cssOverrides=[],this.cssOverrides??(this.cssOverrides=e.cssOverrides),this.tagStyles=e.tagStyles??{}}set cssOverrides(e){this._cssOverrides=e instanceof Array?e:[e],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=BS(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new xk({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=yk(this)),this._cssStyle}addOverride(...e){let i=e.filter(r=>!this.cssOverrides.includes(r));i.length>0&&(this.cssOverrides.push(...i),this.update())}removeOverride(...e){let i=e.filter(r=>this.cssOverrides.includes(r));i.length>0&&(this.cssOverrides=this.cssOverrides.filter(r=>!i.includes(r)),this.update())}set fill(e){typeof e!="string"&&typeof e!="number"&&Le("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=e}set stroke(e){e&&typeof e!="string"&&typeof e!="number"&&Le("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=e}}});function Tk(t,e){let i=e.fontFamily,r=[],s={},a=/font-family:([^;"\s]+)/g,l=t.match(a);function c(h){s[h]||(r.push(h),s[h]=!0)}if(Array.isArray(i))for(let h=0;h<i.length;h++)c(i[h]);else c(i);l&&l.forEach(h=>{let f=h.split(":")[1].trim();c(f)});for(let h in e.tagStyles){let f=e.tagStyles[h].fontFamily;c(f)}return r}var Sk=b(()=>{});async function Ak(t){let e=await(await et.get().fetch(t)).blob(),i=new FileReader;return await new Promise((r,s)=>{i.onloadend=()=>r(i.result),i.onerror=s,i.readAsDataURL(e)})}var Ek=b(()=>{Ct()});async function $x(t,e){let i=await Ak(e);return`@font-face {
        font-family: "${t.fontFamily}";
        src: url('${i}');
        font-weight: ${t.fontWeight};
        font-style: ${t.fontStyle};
    }`}var wk=b(()=>{Ek()});async function Ck(t,e,i){let r=t.filter(s=>At.has(`${s}-and-url`)).map((s,a)=>{if(!Rl.has(s)){let{url:l}=At.get(`${s}-and-url`);a===0?Rl.set(s,$x({fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:s},l)):Rl.set(s,$x({fontWeight:i.fontWeight,fontStyle:i.fontStyle,fontFamily:s},l))}return Rl.get(s)});return(await Promise.all(r)).join(`
`)}var Rl,Rk=b(()=>{bn(),wk(),Rl=new Map});function Mk(t,e,i,r,s){let{domElement:a,styleElement:l,svgRoot:c}=s;a.innerHTML=`<style>${e.cssStyle}</style><div style='padding:0;'>${t}</div>`,a.setAttribute("style",`transform: scale(${i});transform-origin: top left; display: inline-block`),l.textContent=r;let{width:h,height:f}=s.image;return c.setAttribute("width",h.toString()),c.setAttribute("height",f.toString()),new XMLSerializer().serializeToString(c)}var Bk=b(()=>{});function Pk(t,e){let i=cs.getOptimalCanvasAndContext(t.width,t.height,e),{context:r}=i;return r.clearRect(0,0,t.width,t.height),r.drawImage(t,0,0),i}var Dk=b(()=>{pu()});function Ok(t,e,i){return new Promise(async r=>{i&&await new Promise(s=>setTimeout(s,100)),t.onload=()=>{r()},t.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,t.crossOrigin="anonymous"})}var Fk=b(()=>{});function qS(t,e,i,r){r||(r=CB||(CB=new Hy));let{domElement:s,styleElement:a,svgRoot:l}=r;s.innerHTML=`<style>${e.cssStyle};</style><div style='padding:0'>${t}</div>`,s.setAttribute("style","transform-origin: top left; display: inline-block"),i&&(a.textContent=i),document.body.appendChild(l);let c=s.getBoundingClientRect();l.remove();let h=e.padding*2;return{width:c.width-h,height:c.height-h}}var CB,WS=b(()=>{jS()}),sh,Gk=b(()=>{$(),pu(),Os(),jr(),gk(),dt(),rr(),OS(),jS(),Vy(),Sk(),Rk(),Bk(),Dk(),Fk(),WS(),sh=class{constructor(t){this._activeTextures={},this._renderer=t,this._createCanvas=t.type===tr.WEBGPU}getTexture(t){return this._buildTexturePromise(t.text,t.resolution,t.style)}getManagedTexture(t,e,i,r){if(this._activeTextures[r])return this._increaseReferenceCount(r),this._activeTextures[r].promise;let s=this._buildTexturePromise(t,e,i).then(a=>(this._activeTextures[r].texture=a,a));return this._activeTextures[r]={texture:null,promise:s,usageCount:1},s}async _buildTexturePromise(t,e,i){let r=st.get(Hy),s=Tk(t,i),a=await Ck(s,i,Kl.defaultTextStyle),l=qS(t,i,a,r),c=Math.ceil(Math.ceil(Math.max(1,l.width)+i.padding*2)*e),h=Math.ceil(Math.ceil(Math.max(1,l.height)+i.padding*2)*e),f=r.image,p=2;f.width=(c|0)+p,f.height=(h|0)+p;let g=Mk(t,i,e,a,r);await Ok(f,g,mk()&&s.length>0);let y=f,v;this._createCanvas&&(v=Pk(f,e));let x=DS(v?v.canvas:y,f.width-p,f.height-p,e);return this._createCanvas&&(this._renderer.texture.initSource(x.source),cs.returnCanvasAndContext(v)),st.return(r),x}_increaseReferenceCount(t){this._activeTextures[t].usageCount++}decreaseReferenceCount(t){let e=this._activeTextures[t];e&&(e.usageCount--,e.usageCount===0&&(e.texture?this._cleanUp(e):e.promise.then(i=>{e.texture=i,this._cleanUp(e)}).catch(()=>{Le("HTMLTextSystem: Failed to clean texture")}),this._activeTextures[t]=null))}_cleanUp(t){Jt.returnTexture(t.texture),t.texture.source.resource=null,t.texture.source.uploadMethodId="unknown"}getReferenceCount(t){return this._activeTextures[t].usageCount}destroy(){this._activeTextures=null}},sh.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"htmlText"},sh.defaultFontOptions={fontFamily:"Arial",fontStyle:"normal",fontWeight:"normal"}}),Lk=b(()=>{$(),pk(),Gk(),ke.add(sh),ke.add(Cm)}),t0,Tn,pa=b(()=>{xn(),Gs(),So(),gt(),t0=class kk extends ca{constructor(...e){let i=e[0]??{};i instanceof Float32Array&&(Pe(Xe,"use new MeshGeometry({ positions, uvs, indices }) instead"),i={positions:i,uvs:e[1],indices:e[2]}),i={...kk.defaultOptions,...i};let r=i.positions||new Float32Array([0,0,1,0,1,1,0,1]),s=i.uvs;s||(i.positions?s=new Float32Array(r.length):s=new Float32Array([0,0,1,0,1,1,0,1]));let a=i.indices||new Uint32Array([0,1,2,0,2,3]),l=i.shrinkBuffersToFit,c=new Xi({data:r,label:"attribute-mesh-positions",shrinkToFit:l,usage:Je.VERTEX|Je.COPY_DST}),h=new Xi({data:s,label:"attribute-mesh-uvs",shrinkToFit:l,usage:Je.VERTEX|Je.COPY_DST}),f=new Xi({data:a,label:"index-mesh-buffer",shrinkToFit:l,usage:Je.INDEX|Je.COPY_DST});super({attributes:{aPosition:{buffer:c,format:"float32x2",stride:2*4,offset:0},aUV:{buffer:h,format:"float32x2",stride:2*4,offset:0}},indexBuffer:f,topology:i.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}},t0.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1},Tn=t0}),io,KS,nd,yu=b(()=>{io={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},KS={...io,vertex:{...io.vertex,header:io.vertex.header.replace("group(1)","group(2)")}},nd={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}}}),$S,ZS,Ik=b(()=>{$S={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            } 

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},ZS={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;
        
        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);
        
        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0
    
        `}}}),i0,r0,QS,Uk=b(()=>{nt(),ha(),yu(),da(),fs(),hi(),tt(),Ik(),QS=class extends qr{constructor(){i0??(i0=uu({name:"tiling-sprite-shader",bits:[io,$S,Eo]})),r0??(r0=cu({name:"tiling-sprite-shader",bits:[nd,ZS,wo]}));let t=new ei({uMapCoord:{value:new De,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new De,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:r0,gpuProgram:i0,resources:{localUniforms:new ei({uTransformMatrix:{value:new De,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:t,uTexture:ve.EMPTY.source,uSampler:ve.EMPTY.source.style}})}updateUniforms(t,e,i,r,s,a){let l=this.resources.tilingUniforms,c=a.width,h=a.height,f=a.textureMatrix,p=l.uniforms.uTextureTransform;p.set(i.a*c/t,i.b*c/e,i.c*h/t,i.d*h/e,i.tx/t,i.ty/e),p.invert(),l.uniforms.uMapCoord=f.mapCoord,l.uniforms.uClampFrame=f.uClampFrame,l.uniforms.uClampOffset=f.uClampOffset,l.uniforms.uTextureTransform=p,l.uniforms.uSizeAnchor[0]=t,l.uniforms.uSizeAnchor[1]=e,l.uniforms.uSizeAnchor[2]=r,l.uniforms.uSizeAnchor[3]=s,a&&(this.resources.uTexture=a.source,this.resources.uSampler=a.source.style)}}}),JS,Nk=b(()=>{pa(),JS=class extends Tn{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}});function Hk(t,e){let i=t.anchor.x,r=t.anchor.y;e[0]=-i*t.width,e[1]=-r*t.height,e[2]=(1-i)*t.width,e[3]=-r*t.height,e[4]=(1-i)*t.width,e[5]=(1-r)*t.height,e[6]=-i*t.width,e[7]=(1-r)*t.height}var Vk=b(()=>{});function zk(t,e,i,r){let s=0,a=t.length/(e||2),l=r.a,c=r.b,h=r.c,f=r.d,p=r.tx,g=r.ty;for(i*=e;s<a;){let y=t[i],v=t[i+1];t[i]=l*y+h*v+p,t[i+1]=c*y+f*v+g,i+=e,s++}}var Xk=b(()=>{});function Yk(t,e){let i=t.texture,r=i.frame.width,s=i.frame.height,a=0,l=0;t.applyAnchorToTexture&&(a=t.anchor.x,l=t.anchor.y),e[0]=e[6]=-a,e[2]=e[4]=1-a,e[1]=e[3]=-l,e[5]=e[7]=1-l;let c=De.shared;c.copyFrom(t._tileTransform.matrix),c.tx/=t.width,c.ty/=t.height,c.invert(),c.scale(t.width/r,t.height/s),zk(e,2,0,c)}var jk=b(()=>{nt(),Xk()}),Oc,Rm,qk=b(()=>{$(),Wh(),Wr(),jr(),du(),Dy(),pa(),Uk(),Nk(),Vk(),jk(),Oc=new JS,Rm=class{constructor(t){this._state=ar.default2d,this._tilingSpriteDataHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_tilingSpriteDataHash")}validateRenderable(t){let e=this._getTilingSpriteData(t),i=e.canBatch;this._updateCanBatch(t);let r=e.canBatch;if(r&&r===i){let{batchableMesh:s}=e;return!s._batcher.checkAndUpdateTexture(s,t.texture)}return i!==r}addRenderable(t,e){let i=this._renderer.renderPipes.batch;this._updateCanBatch(t);let r=this._getTilingSpriteData(t),{geometry:s,canBatch:a}=r;if(a){r.batchableMesh||(r.batchableMesh=new id);let l=r.batchableMesh;t.didViewUpdate&&(this._updateBatchableMesh(t),l.geometry=s,l.renderable=t,l.transform=t.groupTransform,l.setTexture(t._texture)),l.roundPixels=this._renderer._roundPixels|t._roundPixels,i.addToBatch(l,e)}else i.break(e),r.shader||(r.shader=new QS),this.updateRenderable(t),e.add(t)}execute(t){let{shader:e}=this._tilingSpriteDataHash[t.uid];e.groups[0]=this._renderer.globalUniforms.bindGroup;let i=e.resources.localUniforms.uniforms;i.uTransformMatrix=t.groupTransform,i.uRound=this._renderer._roundPixels|t._roundPixels,hu(t.groupColorAlpha,i.uColor,0),this._state.blendMode=Yl(t.groupBlendMode,t.texture._source),this._renderer.encoder.draw({geometry:Oc,shader:e,state:this._state})}updateRenderable(t){let e=this._getTilingSpriteData(t),{canBatch:i}=e;if(i){let{batchableMesh:r}=e;t.didViewUpdate&&this._updateBatchableMesh(t),r._batcher.updateElement(r)}else if(t.didViewUpdate){let{shader:r}=e;r.updateUniforms(t.width,t.height,t._tileTransform.matrix,t.anchor.x,t.anchor.y,t.texture)}}destroyRenderable(t){var i;let e=this._getTilingSpriteData(t);e.batchableMesh=null,(i=e.shader)==null||i.destroy(),this._tilingSpriteDataHash[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}_getTilingSpriteData(t){return this._tilingSpriteDataHash[t.uid]||this._initTilingSpriteData(t)}_initTilingSpriteData(t){let e=new Tn({indices:Oc.indices,positions:Oc.positions.slice(),uvs:Oc.uvs.slice()});return this._tilingSpriteDataHash[t.uid]={canBatch:!0,renderable:t,geometry:e},t.on("destroyed",this._destroyRenderableBound),this._tilingSpriteDataHash[t.uid]}_updateBatchableMesh(t){let e=this._getTilingSpriteData(t),{geometry:i}=e,r=t.texture.source.style;r.addressMode!=="repeat"&&(r.addressMode="repeat",r.update()),Yk(t,i.uvs),Hk(t,i.positions)}destroy(){for(let t in this._tilingSpriteDataHash)this.destroyRenderable(this._tilingSpriteDataHash[t].renderable);this._tilingSpriteDataHash=null,this._renderer=null}_updateCanBatch(t){let e=this._getTilingSpriteData(t),i=t.texture,r=!0;return this._renderer.type===tr.WEBGL&&(r=this._renderer.context.supports.nonPowOf2wrapping),e.canBatch=i.textureMatrix.isSimple&&(r||i.source.isPowerOfTwo),e.canBatch}},Rm.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"tilingSprite"}}),Wk=b(()=>{$(),qk(),ke.add(Rm)}),s0,ad,zy=b(()=>{gt(),pa(),s0=class Kk extends Tn{constructor(...e){super({});let i=e[0]??{};typeof i=="number"&&(Pe(Xe,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),i={width:i,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(i)}build(e){e={...Kk.defaultOptions,...e},this.verticesX=this.verticesX??e.verticesX,this.verticesY=this.verticesY??e.verticesY,this.width=this.width??e.width,this.height=this.height??e.height;let i=this.verticesX*this.verticesY,r=[],s=[],a=[],l=this.verticesX-1,c=this.verticesY-1,h=this.width/l,f=this.height/c;for(let g=0;g<i;g++){let y=g%this.verticesX,v=g/this.verticesX|0;r.push(y*h,v*f),s.push(y/l,v/c)}let p=l*c;for(let g=0;g<p;g++){let y=g%l,v=g/l|0,x=v*this.verticesX+y,A=v*this.verticesX+y+1,S=(v+1)*this.verticesX+y,w=(v+1)*this.verticesX+y+1;a.push(x,A,S,A,w,S)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(s),this.indexBuffer.data=new Uint32Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}},s0.defaultOptions={width:100,height:100,verticesX:10,verticesY:10},ad=s0}),n0,on,eA=b(()=>{zy(),n0=class $k extends ad{constructor(e={}){e={...$k.defaultOptions,...e},super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(e){var i,r;this.width=e.width??this.width,this.height=e.height??this.height,this._originalWidth=e.originalWidth??this._originalWidth,this._originalHeight=e.originalHeight??this._originalHeight,this._leftWidth=e.leftWidth??this._leftWidth,this._rightWidth=e.rightWidth??this._rightWidth,this._topHeight=e.topHeight??this._topHeight,this._bottomHeight=e.bottomHeight??this._bottomHeight,this._anchorX=(i=e.anchor)==null?void 0:i.x,this._anchorY=(r=e.anchor)==null?void 0:r.y,this.updateUvs(),this.updatePositions()}updatePositions(){let e=this.positions,{width:i,height:r,_leftWidth:s,_rightWidth:a,_topHeight:l,_bottomHeight:c,_anchorX:h,_anchorY:f}=this,p=s+a,g=i>p?1:i/p,y=l+c,v=r>y?1:r/y,x=Math.min(g,v),A=h*i,S=f*r;e[0]=e[8]=e[16]=e[24]=-A,e[2]=e[10]=e[18]=e[26]=s*x-A,e[4]=e[12]=e[20]=e[28]=i-a*x-A,e[6]=e[14]=e[22]=e[30]=i-A,e[1]=e[3]=e[5]=e[7]=-S,e[9]=e[11]=e[13]=e[15]=l*x-S,e[17]=e[19]=e[21]=e[23]=r-c*x-S,e[25]=e[27]=e[29]=e[31]=r-S,this.getBuffer("aPosition").update()}updateUvs(){let e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;let i=1/this._originalWidth,r=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.getBuffer("aUV").update()}},n0.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100},on=n0}),Mm,Zk=b(()=>{$(),rr(),Dy(),eA(),Mm=class{constructor(t){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(t,e){let i=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,i),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){let e=this._gpuSpriteHash[t.uid];t.didViewUpdate&&this._updateBatchableSprite(t,e),e._batcher.updateElement(e)}validateRenderable(t){let e=this._getGpuSprite(t);return!e._batcher.checkAndUpdateTexture(e,t._texture)}destroyRenderable(t){let e=this._gpuSpriteHash[t.uid];st.return(e.geometry),st.return(e),this._gpuSpriteHash[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(t,e){e.geometry.update(t),e.setTexture(t._texture)}_getGpuSprite(t){return this._gpuSpriteHash[t.uid]||this._initGPUSprite(t)}_initGPUSprite(t){let e=st.get(id);return e.geometry=st.get(on),e.renderable=t,e.transform=t.groupTransform,e.texture=t._texture,e.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuSpriteHash[t.uid]=e,t.didViewUpdate||this._updateBatchableSprite(t,e),t.on("destroyed",this._destroyRenderableBound),e}destroy(){for(let t in this._gpuSpriteHash)this._gpuSpriteHash[t].geometry.destroy();this._gpuSpriteHash=null,this._renderer=null}},Mm.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"nineSliceSprite"}}),Qk=b(()=>{$(),Zk(),ke.add(Mm)}),Bm,Jk=b(()=>{$(),Bm=class{constructor(t){this._renderer=t}push(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:e,filterEffect:t})}pop(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(t){t.action==="pushFilter"?this._renderer.filter.push(t):t.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}},Bm.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"filter"}});function e4(t,e){e.clear();let i=e.matrix;for(let r=0;r<t.length;r++){let s=t[r];s.globalDisplayStatus<7||(e.matrix=s.worldTransform,e.addBounds(s.bounds))}return e.matrix=i,e}var t4=b(()=>{}),RB,Pm,i4=b(()=>{$(),nt(),vr(),ua(),So(),hi(),tt(),Os(),jr(),qi(),t4(),dt(),RB=new ca({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:2*4,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])}),Pm=class{constructor(t){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new ei({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new us({}),this.renderer=t}get activeBackTexture(){var t;return(t=this._activeFilterData)==null?void 0:t.backTexture}push(t){var y;let e=this.renderer,i=t.filterEffect.filters;this._filterStack[this._filterStackIndex]||(this._filterStack[this._filterStackIndex]=this._getFilterData());let r=this._filterStack[this._filterStackIndex];if(this._filterStackIndex++,i.length===0){r.skip=!0;return}let s=r.bounds;if(t.renderables?e4(t.renderables,s):t.filterEffect.filterArea?(s.clear(),s.addRect(t.filterEffect.filterArea),s.applyMatrix(t.container.worldTransform)):t.container.getFastGlobalBounds(!0,s),t.container){let v=(t.container.renderGroup||t.container.parentRenderGroup).cacheToLocalTransform;v&&s.applyMatrix(v)}let a=e.renderTarget.renderTarget.colorTexture.source,l=1/0,c=0,h=!0,f=!1,p=!1,g=!0;for(let v=0;v<i.length;v++){let x=i[v];if(l=Math.min(l,x.resolution==="inherit"?a._resolution:x.resolution),c+=x.padding,x.antialias==="off"?h=!1:x.antialias==="inherit"&&h&&(h=a.antialias),x.clipToViewport||(g=!1),!(x.compatibleRenderers&e.type)){p=!1;break}if(x.blendRequired&&!(((y=e.backBuffer)==null?void 0:y.useBackBuffer)??!0)){Le("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),p=!1;break}p=x.enabled||p,f||(f=x.blendRequired)}if(!p){r.skip=!0;return}if(g){let v=e.renderTarget.rootViewPort,x=e.renderTarget.renderTarget.resolution;s.fitBounds(0,v.width/x,0,v.height/x)}if(s.scale(l).ceil().scale(1/l).pad(c|0),!s.isPositive){r.skip=!0;return}r.skip=!1,r.bounds=s,r.blendRequired=f,r.container=t.container,r.filterEffect=t.filterEffect,r.previousRenderSurface=e.renderTarget.renderSurface,r.inputTexture=Jt.getOptimalTexture(s.width,s.height,l,h),e.renderTarget.bind(r.inputTexture,!0),e.globalUniforms.push({offset:s})}pop(){let t=this.renderer;this._filterStackIndex--;let e=this._filterStack[this._filterStackIndex];if(e.skip)return;this._activeFilterData=e;let i=e.inputTexture,r=e.bounds,s=ve.EMPTY;if(t.renderTarget.finishRenderPass(),e.blendRequired){let l=this._filterStackIndex>0?this._filterStack[this._filterStackIndex-1].bounds:null,c=t.renderTarget.getRenderTarget(e.previousRenderSurface);s=this.getBackTexture(c,r,l)}e.backTexture=s;let a=e.filterEffect.filters;if(this._globalFilterBindGroup.setResource(i.source.style,2),this._globalFilterBindGroup.setResource(s.source,3),t.globalUniforms.pop(),a.length===1)a[0].apply(this,i,e.previousRenderSurface,!1),Jt.returnTexture(i);else{let l=e.inputTexture,c=Jt.getOptimalTexture(r.width,r.height,l.source._resolution,!1),h=0;for(h=0;h<a.length-1;++h){a[h].apply(this,l,c,!0);let f=l;l=c,c=f}a[h].apply(this,l,e.previousRenderSurface,!1),Jt.returnTexture(l),Jt.returnTexture(c)}e.blendRequired&&Jt.returnTexture(s)}getBackTexture(t,e,i){let r=t.colorTexture.source._resolution,s=Jt.getOptimalTexture(e.width,e.height,r,!1),a=e.minX,l=e.minY;i&&(a-=i.minX,l-=i.minY),a=Math.floor(a*r),l=Math.floor(l*r);let c=Math.ceil(e.width*r),h=Math.ceil(e.height*r);return this.renderer.renderTarget.copyToTexture(t,s,{x:a,y:l},{width:c,height:h},{x:0,y:0}),s}applyFilter(t,e,i,r){let s=this.renderer,a=this._filterStack[this._filterStackIndex],l=a.bounds,c=Et.shared,h=a.previousRenderSurface===i,f=this.renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution,p=this._filterStackIndex-1;for(;p>0&&this._filterStack[p].skip;)--p;p>0&&(f=this._filterStack[p].inputTexture.source._resolution);let g=this._filterGlobalUniforms,y=g.uniforms,v=y.uOutputFrame,x=y.uInputSize,A=y.uInputPixel,S=y.uInputClamp,w=y.uGlobalFrame,E=y.uOutputTexture;if(h){let U=this._filterStackIndex;for(;U>0;){U--;let H=this._filterStack[this._filterStackIndex-1];if(!H.skip){c.x=H.bounds.minX,c.y=H.bounds.minY;break}}v[0]=l.minX-c.x,v[1]=l.minY-c.y}else v[0]=0,v[1]=0;v[2]=e.frame.width,v[3]=e.frame.height,x[0]=e.source.width,x[1]=e.source.height,x[2]=1/x[0],x[3]=1/x[1],A[0]=e.source.pixelWidth,A[1]=e.source.pixelHeight,A[2]=1/A[0],A[3]=1/A[1],S[0]=.5*A[2],S[1]=.5*A[3],S[2]=e.frame.width*x[2]-.5*A[2],S[3]=e.frame.height*x[3]-.5*A[3];let B=this.renderer.renderTarget.rootRenderTarget.colorTexture;w[0]=c.x*f,w[1]=c.y*f,w[2]=B.source.width*f,w[3]=B.source.height*f;let G=this.renderer.renderTarget.getRenderTarget(i);if(s.renderTarget.bind(i,!!r),i instanceof ve?(E[0]=i.frame.width,E[1]=i.frame.height):(E[0]=G.width,E[1]=G.height),E[2]=G.isRoot?-1:1,g.update(),s.renderPipes.uniformBatch){let U=s.renderPipes.uniformBatch.getUboResource(g);this._globalFilterBindGroup.setResource(U,0)}else this._globalFilterBindGroup.setResource(g,0);this._globalFilterBindGroup.setResource(e.source,1),this._globalFilterBindGroup.setResource(e.source.style,2),t.groups[0]=this._globalFilterBindGroup,s.encoder.draw({geometry:RB,shader:t,state:t._state,topology:"triangle-list"}),s.type===tr.WEBGL&&s.renderTarget.finishRenderPass()}_getFilterData(){return{skip:!1,inputTexture:null,bounds:new Ci,container:null,filterEffect:null,blendRequired:!1,previousRenderSurface:null}}calculateSpriteMatrix(t,e){let i=this._activeFilterData,r=t.set(i.inputTexture._source.width,0,0,i.inputTexture._source.height,i.bounds.minX,i.bounds.minY),s=e.worldTransform.copyTo(De.shared),a=e.renderGroup||e.parentRenderGroup;return a&&a.cacheToLocalTransform&&s.prepend(a.cacheToLocalTransform),s.invert(),r.prepend(s),r.scale(1/e.texture.frame.width,1/e.texture.frame.height),r.translate(e.anchor.x,e.anchor.y),r}},Pm.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"filter"}}),r4=b(()=>{$(),Jk(),i4(),ke.add(Pm),ke.add(Bm)}),f7={},p7=b(()=>{wz(),fF(),Cz(),bT(),RT(),tL(),rL(),gL(),ak(),fk(),Lk(),Wk(),Qk(),r4()}),tA,m7=b(()=>{$(),tA={extension:{type:I.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.resolve().then(()=>(p7(),f7))}}}),g7={},y7=b(()=>{fF(),bT(),RT(),tL(),rL(),gL(),ak(),fk(),Lk(),Wk(),Qk(),r4()}),iA,_7=b(()=>{$(),iA={extension:{type:I.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Promise.resolve().then(()=>(y7(),g7))}}}),a0,Ls,Sn=b(()=>{xr(),Yr(),fs(),Wr(),a0=class Zx extends qr{constructor(e){e={...Zx.defaultOptions,...e},super(e),this.enabled=!0,this._state=ar.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1)}apply(e,i,r,s){e.applyFilter(this,i,r,s)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){let{gpu:i,gl:r,...s}=e,a,l;return i&&(a=Tr.from(i)),r&&(l=lr.from(r)),new Zx({gpuProgram:a,glProgram:l,...s})}},a0.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0},Ls=a0}),rA,s4=b(()=>{rA=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uBlend;

uniform sampler2D uTexture;
uniform sampler2D uBackTexture;

{FUNCTIONS}

void main()
{ 
    vec4 back = texture(uBackTexture, vTextureCoord);
    vec4 front = texture(uTexture, vTextureCoord);
    float blendedAlpha = front.a + back.a * (1.0 - front.a);
    
    {MAIN}
}
`}),sA,n4=b(()=>{sA=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 backgroundUv;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`}),nA,a4=b(()=>{nA=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlendUniforms {
  uBlend:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(0) @binding(3) var uBackTexture: texture_2d<f32>;

@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

{FUNCTIONS}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>
) -> @location(0) vec4<f32> {


   var back =  textureSample(uBackTexture, uSampler, uv);
   var front = textureSample(uTexture, uSampler, uv);
   var blendedAlpha = front.a + back.a * (1.0 - front.a);
   
   var out = vec4<f32>(0.0,0.0,0.0,0.0);

   {MAIN}

   return out;
}`});function MB(t){let{source:e,functions:i,main:r}=t;return e.replace("{FUNCTIONS}",i).replace("{MAIN}",r)}var jt,ti=b(()=>{xr(),Yr(),hi(),tt(),Sn(),s4(),n4(),a4(),jt=class extends Ls{constructor(t){let e=t.gpu,i=MB({source:nA,...e}),r=Tr.from({vertex:{source:i,entryPoint:"mainVertex"},fragment:{source:i,entryPoint:"mainFragment"}}),s=t.gl,a=MB({source:rA,...s}),l=lr.from({vertex:sA,fragment:a}),c=new ei({uBlend:{value:1,type:"f32"}});super({gpuProgram:r,glProgram:l,blendRequired:!0,resources:{blendUniforms:c,uBackTexture:ve.EMPTY}})}}}),od,Xy=b(()=>{od=`
	float getLuminosity(vec3 c) {
		return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
	}

	vec3 setLuminosity(vec3 c, float lum) {
		float modLum = lum - getLuminosity(c);
		vec3 color = c.rgb + vec3(modLum);

		// clip back into legal range
		modLum = getLuminosity(color);
		vec3 modLumVec = vec3(modLum);

		float cMin = min(color.r, min(color.g, color.b));
		float cMax = max(color.r, max(color.g, color.b));

		if(cMin < 0.0) {
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0) {
			color = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));
		}

		return color;
	}

	float getSaturation(vec3 c) {
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	vec3 setSaturationMinMidMax(vec3 cSorted, float s) {
		vec3 colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x) {
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else {
			colorSorted.y = 0.0;
			colorSorted.z = 0.0;
		}

		colorSorted.x = 0.0;

		return colorSorted;
	}

	vec3 setSaturation(vec3 c, float s) {
		vec3 color = c;

		if(color.r <= color.g && color.r <= color.b) {
			if(color.g <= color.b) {
				color = setSaturationMinMidMax(color.rgb, s).rgb;
			}
			else {
				color = setSaturationMinMidMax(color.rbg, s).rbg;
			}
		}
		else if(color.g <= color.r && color.g <= color.b) {
			if(color.r <= color.b) {
				color = setSaturationMinMidMax(color.grb, s).grb;
			}
			else {
				color = setSaturationMinMidMax(color.gbr, s).gbr;
			}
		}
		else {
			// Using bgr for both fixes part of hue
			if(color.r <= color.g) {
				color = setSaturationMinMidMax(color.brg, s).brg;
			}
			else {
				color = setSaturationMinMidMax(color.bgr, s).bgr;
			}
		}

		return color;
	}
    `}),ld,Yy=b(()=>{ld=`
	fn getLuminosity(c: vec3<f32>) -> f32
	{
		return 0.3*c.r + 0.59*c.g + 0.11*c.b;
	}

	fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>
	{
		var modLum: f32 = lum - getLuminosity(c);
		var color: vec3<f32> = c.rgb + modLum;

		// clip back into legal range
		modLum = getLuminosity(color);
		let modLumVec = vec3<f32>(modLum);

		let cMin: f32 = min(color.r, min(color.g, color.b));
		let cMax: f32 = max(color.r, max(color.g, color.b));

		if(cMin < 0.0)
		{
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0)
		{
			color = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));
		}

		return color;
	}

	fn getSaturation(c: vec3<f32>) -> f32
	{
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>
	{
		var colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x)
		{
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else
		{
			colorSorted.y = 0;
			colorSorted.z = 0;
		}

		colorSorted.x = 0;

		return colorSorted;
	}

	fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>
	{
		var color = c;

		if (color.r <= color.g && color.r <= color.b)
		{
			if (color.g <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;
			}
		}
		else if (color.g <= color.r && color.g <= color.b)
		{
			if (color.r <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;
			}
		}
		else
		{
			// Using bgr for both fixes part of hue
			if (color.r <= color.g)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;
			}
			else
			{
				color  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;
			}
		}

		return color;
	}
	`}),Qx,v7=b(()=>{$(),ti(),Xy(),Yy(),Qx=class extends jt{constructor(){super({gl:{functions:`
                ${od}

                vec3 blendColor(vec3 base, vec3 blend,  float opacity)
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${ld}

                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}},Qx.extension={name:"color",type:I.BlendMode}}),Jx,b7=b(()=>{$(),ti(),Jx=class extends jt{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0 - ((1.0 - base) / blend)), 0.0);
                }

                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}},Jx.extension={name:"color-burn",type:I.BlendMode}}),e2,x7=b(()=>{$(),ti(),e2=class extends jt{constructor(){super({gl:{functions:`
                float colorDodge(float base, float blend)
                {
                    return base / (1.0 - blend);
                }

                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return base / (1.0 - blend);
                }

                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}},e2.extension={name:"color-dodge",type:I.BlendMode}}),t2,T7=b(()=>{$(),ti(),t2=class extends jt{constructor(){super({gl:{functions:`
                vec3 blendDarken(vec3 base, vec3 blend, float opacity)
                {
                    return (min(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (min(blend,base) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}},t2.extension={name:"darken",type:I.BlendMode}}),i2,S7=b(()=>{$(),ti(),i2=class extends jt{constructor(){super({gl:{functions:`
                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}},i2.extension={name:"difference",type:I.BlendMode}}),r2,A7=b(()=>{$(),ti(),r2=class extends jt{constructor(){super({gl:{functions:`
                float divide(float base, float blend)
                {
                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;
                }

                vec3 blendDivide(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn divide(base: f32, blend: f32) -> f32
                {
                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);
                }

                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}},r2.extension={name:"divide",type:I.BlendMode}}),s2,E7=b(()=>{$(),ti(),s2=class extends jt{constructor(){super({gl:{functions:`
                vec3 exclusion(vec3 base, vec3 blend)
                {
                    return base + blend - 2.0 * base * blend;
                }

                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return base+blend-2.0*base*blend;
                }

                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}},s2.extension={name:"exclusion",type:I.BlendMode}}),n2,w7=b(()=>{$(),ti(),n2=class extends jt{constructor(){super({gl:{functions:`
                float hardLight(float base, float blend)
                {
                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);
                }

                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardLight(base: f32, blend: f32) -> f32
                {
                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);
                }

                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}},n2.extension={name:"hard-light",type:I.BlendMode}}),a2,C7=b(()=>{$(),ti(),a2=class extends jt{constructor(){super({gl:{functions:`
                float hardMix(float base, float blend)
                {
                    return (base + blend >= 1.0) ? 1.0 : 0.0;
                }

                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blended = vec3(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardMix(base: f32, blend: f32) -> f32
                {
                    return select(0.0, 1.0, base + blend >= 1.0);
                }

                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}},a2.extension={name:"hard-mix",type:I.BlendMode}}),o2,R7=b(()=>{$(),ti(),o2=class extends jt{constructor(){super({gl:{functions:`
                vec3 blendLighten(vec3 base, vec3 blend, float opacity)
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}},o2.extension={name:"lighten",type:I.BlendMode}}),l2,M7=b(()=>{$(),ti(),l2=class extends jt{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend)
                {
                    return max(0.0, base + blend - 1.0);
                }

                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}},l2.extension={name:"linear-burn",type:I.BlendMode}}),u2,B7=b(()=>{$(),ti(),u2=class extends jt{constructor(){super({gl:{functions:`
                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1, base + blend);
                }

                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}},u2.extension={name:"linear-dodge",type:I.BlendMode}}),c2,P7=b(()=>{$(),ti(),c2=class extends jt{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend) {
                    return max(0.0, base + blend - 1.0);
                }

                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                float linearLight(float base, float blend) {
                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));
                }

                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base + blend);
                }

                fn linearLight(base: f32, blend: f32) -> f32
                {
                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);
                }

                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}},c2.extension={name:"linear-light",type:I.BlendMode}}),h2,D7=b(()=>{$(),ti(),Xy(),Yy(),h2=class extends jt{constructor(){super({gl:{functions:`
                ${od}

                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${ld}

                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}},h2.extension={name:"luminosity",type:I.BlendMode}}),d2,O7=b(()=>{$(),ti(),d2=class extends jt{constructor(){super({gl:{functions:`
                vec3 negation(vec3 base, vec3 blend)
                {
                    return 1.0-abs(1.0-base-blend);
                }

                vec3 blendNegation(vec3 base, vec3 blend, float opacity)
                {
                    return (negation(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return 1.0-abs(1.0-base-blend);
                }

                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}},d2.extension={name:"negation",type:I.BlendMode}}),f2,F7=b(()=>{$(),ti(),f2=class extends jt{constructor(){super({gl:{functions:`
                float overlay(float base, float blend)
                {
                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));
                }

                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );
   
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn overlay(base: f32, blend: f32) -> f32
                {
                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);
                }

                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}},f2.extension={name:"overlay",type:I.BlendMode}}),p2,G7=b(()=>{$(),ti(),p2=class extends jt{constructor(){super({gl:{functions:`
                float pinLight(float base, float blend)
                {
                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));
                }

                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn pinLight(base: f32, blend: f32) -> f32
                {
                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);
                }

                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}},p2.extension={name:"pin-light",type:I.BlendMode}}),m2,L7=b(()=>{$(),ti(),Xy(),Yy(),m2=class extends jt{constructor(){super({gl:{functions:`
                ${od}

                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                ${ld}

                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}},m2.extension={name:"saturation",type:I.BlendMode}}),g2,k7=b(()=>{$(),ti(),g2=class extends jt{constructor(){super({gl:{functions:`
                float softLight(float base, float blend)
                {
                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));
                }

                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn softLight(base: f32, blend: f32) -> f32
                {
                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);
                }

                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}},g2.extension={name:"soft-light",type:I.BlendMode}}),y2,I7=b(()=>{$(),ti(),y2=class extends jt{constructor(){super({gl:{functions:`
                float subtract(float base, float blend)
                {
                    return max(0.0, base - blend);
                }

                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn subtract(base: f32, blend: f32) -> f32
                {
                    return max(0, base - blend);
                }

                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}},y2.extension={name:"subtract",type:I.BlendMode}}),_2,U7=b(()=>{$(),ti(),_2=class extends jt{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                float colorDodge(float base, float blend)
                {
                    return min(1.0, base / (1.0-blend));
                }

                float vividLight(float base, float blend)
                {
                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));
                }

                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base / (1.0-blend));
                }

                fn vividLight(base: f32, blend: f32) -> f32
                {
                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);
                }

                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}},_2.extension={name:"vivid-light",type:I.BlendMode}});async function aA(t){if(!t)for(let e=0;e<Dm.length;e++){let i=Dm[e];if(i.value.test()){await i.value.load();return}}}async function N7(t){return aA(!t)}var Dm,o4=b(()=>{$(),Dm=[],ke.handleByNamedList(I.Environment,Dm)});function oA(){if(typeof Fc=="boolean")return Fc;try{Fc=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Fc=!1}return Fc}var Fc,lA=b(()=>{}),Qi,_u=b(()=>{Qi=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(Qi||{})}),jy,uA=b(()=>{jy=class{constructor(t){this.items=[],this._name=t}emit(t,e,i,r,s,a,l,c){let{name:h,items:f}=this;for(let p=0,g=f.length;p<g;p++)f[p][h](t,e,i,r,s,a,l,c);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){let e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}}),BB,o0,vu,ud=b(()=>{_i(),o4(),br(),lA(),gt(),_u(),uA(),ir(),BB=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],o0=class l4 extends ui{constructor(e){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;let i=[...BB,...this.config.runners??[]];this._addRunners(...i),this._unsafeEvalCheck()}async init(e={}){let i=e.skipExtensionImports===!0?!0:e.manageImports===!1;await aA(i),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(let r in this._systemsHash)e={...this._systemsHash[r].constructor.defaultOptions,...e};e={...l4.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let r=0;r<this.runners.init.items.length;r++)await this.runners.init.items[r].init(e);this._initOptions=e}render(e,i){let r=e;if(r instanceof Lt&&(r={container:r},i&&(Pe(Xe,"passing a second argument is deprecated, please use render options instead"),r.target=i.renderTexture)),r.target||(r.target=this.view.renderTarget),r.target===this.view.renderTarget&&(this._lastObjectRendered=r.container,r.clearColor??(r.clearColor=this.background.colorRgba),r.clear??(r.clear=this.background.clearBeforeRender)),r.clearColor){let s=Array.isArray(r.clearColor)&&r.clearColor.length===4;r.clearColor=s?r.clearColor:ct.shared.setValue(r.clearColor).toArray()}r.transform||(r.container.updateLocalTransform(),r.transform=r.container.localTransform),r.container.enableRenderGroup(),this.runners.prerender.emit(r),this.runners.renderStart.emit(r),this.runners.render.emit(r),this.runners.renderEnd.emit(r),this.runners.postrender.emit(r)}resize(e,i,r){let s=this.view.resolution;this.view.resize(e,i,r),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),r!==void 0&&r!==s&&this.runners.resolutionChange.emit(r)}clear(e={}){let i=this;e.target||(e.target=i.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=Qi.ALL);let{clear:r,clearColor:s,target:a}=e;ct.shared.setValue(s??this.background.colorRgba),i.renderTarget.clear(a,r,ct.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(i=>{this.runners[i]=new jy(i)})}_addSystems(e){let i;for(i in e){let r=e[i];this._addSystem(r.value,r.name)}}_addSystem(e,i){let r=new e(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=r,this._systemsHash[i]=r;for(let s in this.runners)this.runners[s].add(r);return this}_addPipes(e,i){let r=i.reduce((s,a)=>(s[a.name]=a.value,s),{});e.forEach(s=>{let a=s.value,l=s.name,c=r[l];this.renderPipes[l]=new a(this,c?new c:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(i=>{i.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!oA())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}},o0.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1},vu=o0});function cd(t){return l0!==void 0||(l0=(()=>{var i;let e={stencil:!0,failIfMajorPerformanceCaveat:t??vu.defaultOptions.failIfMajorPerformanceCaveat};try{if(!et.get().getWebGLRenderingContext())return!1;let r=et.get().createCanvas().getContext("webgl",e),s=!!((i=r==null?void 0:r.getContextAttributes())!=null&&i.stencil);if(r){let a=r.getExtension("WEBGL_lose_context");a&&a.loseContext()}return r=null,s}catch{return!1}})()),l0}var l0,hd=b(()=>{Ct(),ud()});async function dd(t={}){return u0!==void 0||(u0=await(async()=>{let e=et.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(t)).requestDevice(),!0}catch{return!1}})()),u0}var u0,fd=b(()=>{Ct()}),Om,u4=b(()=>{$(),nt(),xo(),Ty(),ha(),Qh(),Jh(),yu(),da(),fs(),hi(),Om=class{init(){let t=new ei({uTransformMatrix:{value:new De,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),e=uu({name:"graphics",bits:[$h,Sy(bo()),KS,Eo]});this.shader=new qr({gpuProgram:e,resources:{localUniforms:t}})}execute(t,e){let i=e.context,r=i.customShader||this.shader,s=t.renderer,a=s.graphicsContext,{batcher:l,instructions:c}=a.getContextRenderData(i),h=s.encoder;h.setGeometry(l.geometry,r.gpuProgram);let f=s.globalUniforms.bindGroup;h.setBindGroup(0,f,r.gpuProgram);let p=s.renderPipes.uniformBatch.getUniformBindGroup(r.resources.localUniforms,!0);h.setBindGroup(2,p,r.gpuProgram);let g=c.instructions,y=null;for(let v=0;v<c.instructionSize;v++){let x=g[v];if(x.topology!==y&&(y=x.topology,h.setPipelineFromGeometryProgramAndState(l.geometry,r.gpuProgram,t.state,x.topology)),r.groups[1]=x.bindGroup,!x.gpuBindGroup){let A=x.textures;x.bindGroup=xy(A.textures,A.count),x.gpuBindGroup=s.bindGroup.getBindGroup(x.bindGroup,r.gpuProgram,1)}h.setBindGroup(1,x.bindGroup,r.gpuProgram),h.renderPassEncoder.drawIndexed(x.size,1,x.start)}}destroy(){this.shader.destroy(!0),this.shader=null}},Om.extension={type:[I.WebGPUPipesAdaptor],name:"graphics"}}),cA,hA,dA=b(()=>{cA={name:"texture-bit",vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;

         
        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},hA={name:"texture-bit",vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;

         
        `,main:`
            outColor = texture(uTexture, vUV);
        `}}}),Fm,c4=b(()=>{$(),nt(),ha(),yu(),da(),dA(),fs(),tt(),dt(),Fm=class{init(){let t=uu({name:"mesh",bits:[io,cA,Eo]});this._shader=new qr({gpuProgram:t,resources:{uTexture:ve.EMPTY._source,uSampler:ve.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new De}}}})}execute(t,e){let i=t.renderer,r=e._shader;if(!r)r=this._shader,r.groups[2]=i.texture.getTextureBindGroup(e.texture);else if(!r.gpuProgram){Le("Mesh shader has no gpuProgram",e.shader);return}let s=r.gpuProgram;if(s.autoAssignGlobalUniforms&&(r.groups[0]=i.globalUniforms.bindGroup),s.autoAssignLocalUniforms){let a=t.localUniforms;r.groups[1]=i.renderPipes.uniformBatch.getUniformBindGroup(a,!0)}i.encoder.draw({geometry:e._geometry,shader:r,state:e.state})}destroy(){this._shader.destroy(!0),this._shader=null}},Fm.extension={type:[I.WebGPUPipesAdaptor],name:"mesh"}}),Gc,Gm,h4=b(()=>{$(),Wr(),Ty(),Gc=ar.for2d(),Gm=class{start(t,e,i){let r=t.renderer,s=r.encoder,a=i.gpuProgram;this._shader=i,this._geometry=e,s.setGeometry(e,a),Gc.blendMode="normal",r.pipeline.getPipeline(e,a,Gc);let l=r.globalUniforms.bindGroup;s.resetBindGroup(1),s.setBindGroup(0,l,a)}execute(t,e){let i=this._shader.gpuProgram,r=t.renderer,s=r.encoder;if(!e.bindGroup){let c=e.textures;e.bindGroup=xy(c.textures,c.count)}Gc.blendMode=e.blendMode;let a=r.bindGroup.getBindGroup(e.bindGroup,i,1),l=r.pipeline.getPipeline(this._geometry,i,Gc,e.topology);e.bindGroup._touch(r.textureGC.count),s.setPipeline(l),s.renderPassEncoder.setBindGroup(1,a),s.renderPassEncoder.drawIndexed(e.size,1,e.start)}},Gm.extension={type:[I.WebGPUPipesAdaptor],name:"batch"}}),Lm,d4=b(()=>{$(),Lm=class{constructor(t){this._renderer=t}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(t,e){this._renderer.renderPipes.batch.break(e),e.add(t)}execute(t){t.isRenderable&&t.render(this._renderer)}destroy(){this._renderer=null}},Lm.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"customRender"}});function km(t,e){let i=t.instructionSet,r=i.instructions;for(let s=0;s<i.instructionSize;s++){let a=r[s];e[a.renderPipeId].execute(a)}}var fA=b(()=>{}),PB,Im,f4=b(()=>{$(),nt(),rr(),rd(),fA(),PB=new De,Im=class{constructor(t){this._renderer=t}addRenderGroup(t,e){t.isCachedAsTexture?this._addRenderableCacheAsTexture(t,e):this._addRenderableDirect(t,e)}execute(t){t.isRenderable&&(t.isCachedAsTexture?this._executeCacheAsTexture(t):this._executeDirect(t))}destroy(){this._renderer=null}_addRenderableDirect(t,e){this._renderer.renderPipes.batch.break(e),t._batchableRenderGroup&&(st.return(t._batchableRenderGroup),t._batchableRenderGroup=null),e.add(t)}_addRenderableCacheAsTexture(t,e){let i=t._batchableRenderGroup??(t._batchableRenderGroup=st.get(fu));i.renderable=t.root,i.transform=t.root.relativeGroupTransform,i.texture=t.texture,i.bounds=t._textureBounds,e.add(t),this._renderer.renderPipes.batch.addToBatch(i,e)}_executeCacheAsTexture(t){if(t.textureNeedsUpdate){t.textureNeedsUpdate=!1;let e=PB.identity().translate(-t._textureBounds.x,-t._textureBounds.y);this._renderer.renderTarget.push(t.texture,!0,null,t.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:e,worldColor:4294967295}),km(t,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}t._batchableRenderGroup._batcher.updateElement(t._batchableRenderGroup),t._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(t){this._renderer.globalUniforms.push({worldTransformMatrix:t.inverseParentTextureTransform,worldColor:t.worldColorAlpha}),km(t,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}},Im.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"renderGroup"}});function Um(t,e){e||(e=0);for(let i=e;i<t.length&&t[i];i++)t[i]=null}var pA=b(()=>{});function mA(t,e=!1){p4(t);let i=t.childrenToUpdate,r=t.updateTick++;for(let s in i){let a=Number(s),l=i[s],c=l.list,h=l.index;for(let f=0;f<h;f++){let p=c[f];p.parentRenderGroup===t&&p.relativeRenderGroupDepth===a&&gA(p,r,0)}Um(c,h),l.index=0}if(e)for(let s=0;s<t.renderGroupChildren.length;s++)mA(t.renderGroupChildren[s],e)}function p4(t){let e=t.root,i;if(t.renderGroupParent){let r=t.renderGroupParent;t.worldTransform.appendFrom(e.relativeGroupTransform,r.worldTransform),t.worldColor=_h(e.groupColor,r.worldColor),i=e.groupAlpha*r.worldAlpha}else t.worldTransform.copyFrom(e.localTransform),t.worldColor=e.localColor,i=e.localAlpha;i=i<0?0:i>1?1:i,t.worldAlpha=i,t.worldColorAlpha=t.worldColor+((i*255|0)<<24)}function gA(t,e,i){if(e===t.updateTick)return;t.updateTick=e,t.didChange=!1;let r=t.localTransform;t.updateLocalTransform();let s=t.parent;if(s&&!s.renderGroup?(i|=t._updateFlags,t.relativeGroupTransform.appendFrom(r,s.relativeGroupTransform),i&v2&&DB(t,s,i)):(i=t._updateFlags,t.relativeGroupTransform.copyFrom(r),i&v2&&DB(t,m4,i)),!t.renderGroup){let a=t.children,l=a.length;for(let f=0;f<l;f++)gA(a[f],e,i);let c=t.parentRenderGroup,h=t;h.renderPipeId&&!c.structureDidChange&&c.updateRenderable(h)}}function DB(t,e,i){if(i&kl){t.groupColor=_h(t.localColor,e.groupColor);let r=t.localAlpha*e.groupAlpha;r=r<0?0:r>1?1:r,t.groupAlpha=r,t.groupColorAlpha=t.groupColor+((r*255|0)<<24)}i&bh&&(t.groupBlendMode=t.localBlendMode==="inherit"?e.groupBlendMode:t.localBlendMode),i&eo&&(t.globalDisplayStatus=t.localDisplayStatus&e.globalDisplayStatus),t._updateFlags=0}var m4,v2,g4=b(()=>{br(),pA(),q1(),m4=new Lt,v2=eo|kl|bh});function y4(t,e){let{list:i,index:r}=t.childrenRenderablesToUpdate,s=!1;for(let a=0;a<r;a++){let l=i[a];if(s=e[l.renderPipeId].validateRenderable(l),s)break}return t.structureDidChange=s,s}var _4=b(()=>{}),OB,Nm,v4=b(()=>{$(),nt(),Os(),qi(),pA(),fA(),g4(),_4(),OB=new De,Nm=class{constructor(t){this._renderer=t}render({container:t,transform:e}){let i=t.parent,r=t.renderGroup.renderGroupParent;t.parent=null,t.renderGroup.renderGroupParent=null;let s=this._renderer,a=OB;e&&(a=a.copyFrom(t.renderGroup.localTransform),t.renderGroup.localTransform.copyFrom(e));let l=s.renderPipes;this._updateCachedRenderGroups(t.renderGroup,null),this._updateRenderGroups(t.renderGroup),s.globalUniforms.start({worldTransformMatrix:e?t.renderGroup.localTransform:t.renderGroup.worldTransform,worldColor:t.renderGroup.worldColorAlpha}),km(t.renderGroup,l),l.uniformBatch&&l.uniformBatch.renderEnd(),e&&t.renderGroup.localTransform.copyFrom(a),t.parent=i,t.renderGroup.renderGroupParent=r}destroy(){this._renderer=null}_updateCachedRenderGroups(t,e){if(t.isCachedAsTexture){if(!t.updateCacheTexture)return;e=t}t._parentCacheAsTextureRenderGroup=e;for(let i=t.renderGroupChildren.length-1;i>=0;i--)this._updateCachedRenderGroups(t.renderGroupChildren[i],e);if(t.invalidateMatrices(),t.isCachedAsTexture){if(t.textureNeedsUpdate){let i=t.root.getLocalBounds();i.ceil();let r=t.texture;t.texture&&Jt.returnTexture(t.texture);let s=this._renderer,a=t.textureOptions.resolution||s.view.resolution,l=t.textureOptions.antialias??s.view.antialias;t.texture=Jt.getOptimalTexture(i.width,i.height,a,l),t._textureBounds||(t._textureBounds=new Ci),t._textureBounds.copyFrom(i),r!==t.texture&&t.renderGroupParent&&(t.renderGroupParent.structureDidChange=!0)}}else t.texture&&(Jt.returnTexture(t.texture),t.texture=null)}_updateRenderGroups(t){let e=this._renderer,i=e.renderPipes;if(t.runOnRender(e),t.instructionSet.renderPipes=i,t.structureDidChange?Um(t.childrenRenderablesToUpdate.list,0):y4(t,i),mA(t),t.structureDidChange?(t.structureDidChange=!1,this._buildInstructions(t,e)):this._updateRenderables(t),t.childrenRenderablesToUpdate.index=0,e.renderPipes.batch.upload(t.instructionSet),!(t.isCachedAsTexture&&!t.textureNeedsUpdate))for(let r=0;r<t.renderGroupChildren.length;r++)this._updateRenderGroups(t.renderGroupChildren[r])}_updateRenderables(t){let{list:e,index:i}=t.childrenRenderablesToUpdate;for(let r=0;r<i;r++){let s=e[r];s.didViewUpdate&&t.updateRenderable(s)}Um(e,i)}_buildInstructions(t,e){let i=t.root,r=t.instructionSet;r.reset();let s=e.renderPipes?e:e.batch.renderer,a=s.renderPipes;a.batch.buildStart(r),a.blendMode.buildStart(),a.colorMask.buildStart(),i.sortableChildren&&i.sortChildren(),i.collectRenderablesWithEffects(r,s,null),a.batch.buildEnd(r),a.blendMode.buildEnd(r)}},Nm.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"renderGroup"}}),Hm,b4=b(()=>{$(),rr(),rd(),Hm=class{constructor(t){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(t,e){let i=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,i),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){let e=this._gpuSpriteHash[t.uid];t.didViewUpdate&&this._updateBatchableSprite(t,e),e._batcher.updateElement(e)}validateRenderable(t){let e=this._getGpuSprite(t);return!e._batcher.checkAndUpdateTexture(e,t._texture)}destroyRenderable(t){let e=this._gpuSpriteHash[t.uid];st.return(e),this._gpuSpriteHash[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(t,e){e.bounds=t.visualBounds,e.texture=t._texture}_getGpuSprite(t){return this._gpuSpriteHash[t.uid]||this._initGPUSprite(t)}_initGPUSprite(t){let e=st.get(fu);return e.renderable=t,e.transform=t.groupTransform,e.texture=t._texture,e.bounds=t.visualBounds,e.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuSpriteHash[t.uid]=e,t.on("destroyed",this._destroyRenderableBound),e}destroy(){for(let t in this._gpuSpriteHash)st.return(this._gpuSpriteHash[t]);this._gpuSpriteHash=null,this._renderer=null}},Hm.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"sprite"}}),x4,$l,yA=b(()=>{ir(),x4=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,$l="8.8.1"}),Vm,zm,_A=b(()=>{$(),yA(),Vm=class{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,$l)}static destroy(){}},Vm.extension=I.Application,zm=class{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,$l)}destroy(){this._renderer=null}},zm.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"initHook",priority:-10}}),fp,Xm,T4=b(()=>{$(),Wr(),$T(),fp=class S4{constructor(e,i){var r,s;this.state=ar.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=e,this._adaptor=i,(s=(r=this._adaptor).init)==null||s.call(r,this)}static getBatcher(e){return new this._availableBatchers[e]}buildStart(e){let i=this._batchersByInstructionSet[e.uid];i||(i=this._batchersByInstructionSet[e.uid]=Object.create(null),i.default||(i.default=new Th)),this._activeBatches=i,this._activeBatch=this._activeBatches.default;for(let r in this._activeBatches)this._activeBatches[r].begin()}addToBatch(e,i){if(this._activeBatch.name!==e.batcherName){this._activeBatch.break(i);let r=this._activeBatches[e.batcherName];r||(r=this._activeBatches[e.batcherName]=S4.getBatcher(e.batcherName),r.begin()),this._activeBatch=r}this._activeBatch.add(e)}break(e){this._activeBatch.break(e)}buildEnd(e){this._activeBatch.break(e);let i=this._activeBatches;for(let r in i){let s=i[r],a=s.geometry;a.indexBuffer.setDataWithSize(s.indexBuffer,s.indexSize,!0),a.buffers[0].setDataWithSize(s.attributeBuffer.float32View,s.attributeSize,!1)}}upload(e){let i=this._batchersByInstructionSet[e.uid];for(let r in i){let s=i[r],a=s.geometry;s.dirty&&(s.dirty=!1,a.buffers[0].update(s.attributeSize*4))}}execute(e){if(e.action==="startBatch"){let i=e.batcher,r=i.geometry,s=i.shader;this._adaptor.start(this,r,s)}this._adaptor.execute(this,e)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(let e in this._activeBatches)this._activeBatches[e].destroy();this._activeBatches=null}},fp.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"batch"},fp._availableBatchers=Object.create(null),Xm=fp,ke.handleByMap(I.Batcher,Xm._availableBatchers),ke.add(Th)}),vA,A4=b(()=>{vA=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`}),bA,E4=b(()=>{bA=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`}),Ym,w4=b(()=>{Ym=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`}),xA,C4=b(()=>{nt(),xr(),Yr(),hi(),nT(),Sn(),A4(),E4(),w4(),xA=class extends Ls{constructor(t){let{sprite:e,...i}=t,r=new dy(e.texture),s=new ei({uFilterMatrix:{value:new De,type:"mat3x3<f32>"},uMaskClamp:{value:r.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:t.inverse?1:0,type:"f32"}}),a=Tr.from({vertex:{source:Ym,entryPoint:"mainVertex"},fragment:{source:Ym,entryPoint:"mainFragment"}}),l=lr.from({vertex:bA,fragment:vA,name:"mask-filter"});super({...i,gpuProgram:a,glProgram:l,resources:{filterUniforms:s,uMaskTexture:e.texture.source}}),this.sprite=e,this._textureMatrix=r}set inverse(t){this.resources.filterUniforms.uniforms.uInverse=t?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(t,e,i,r){this._textureMatrix.texture=this.sprite.texture,t.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,t.applyFilter(this,e,i,r)}}}),FB,GB,jm,R4=b(()=>{$(),ay(),C4(),qi(),nu(),vo(),rr(),tt(),Os(),jr(),FB=new Ci,GB=class extends Vl{constructor(){super(),this.filters=[new xA({sprite:new Yi(ve.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(t){this.filters[0].sprite=t}get inverse(){return this.filters[0].inverse}set inverse(t){this.filters[0].inverse=t}},jm=class{constructor(t){this._activeMaskStage=[],this._renderer=t}push(t,e,i){let r=this._renderer;if(r.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1,maskedContainer:e}),t.inverse=e._maskOptions.inverse,t.renderMaskToTexture){let s=t.mask;s.includeInBuild=!0,s.collectRenderables(i,r,null),s.includeInBuild=!1}r.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:t,maskedContainer:e,inverse:e._maskOptions.inverse,canBundle:!1})}pop(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1})}execute(t){let e=this._renderer,i=t.mask.renderMaskToTexture;if(t.action==="pushMaskBegin"){let r=st.get(GB);if(r.inverse=t.inverse,i){t.mask.mask.measurable=!0;let s=Xh(t.mask.mask,!0,FB);t.mask.mask.measurable=!1,s.ceil();let a=e.renderTarget.renderTarget.colorTexture.source,l=Jt.getOptimalTexture(s.width,s.height,a._resolution,a.antialias);e.renderTarget.push(l,!0),e.globalUniforms.push({offset:s,worldColor:4294967295});let c=r.sprite;c.texture=l,c.worldTransform.tx=s.minX,c.worldTransform.ty=s.minY,this._activeMaskStage.push({filterEffect:r,maskedContainer:t.maskedContainer,filterTexture:l})}else r.sprite=t.mask.mask,this._activeMaskStage.push({filterEffect:r,maskedContainer:t.maskedContainer})}else if(t.action==="pushMaskEnd"){let r=this._activeMaskStage[this._activeMaskStage.length-1];i&&(e.type===tr.WEBGL&&e.renderTarget.finishRenderPass(),e.renderTarget.pop(),e.globalUniforms.pop()),e.filter.push({renderPipeId:"filter",action:"pushFilter",container:r.maskedContainer,filterEffect:r.filterEffect,canBundle:!1})}else if(t.action==="popMaskEnd"){e.filter.pop();let r=this._activeMaskStage.pop();i&&Jt.returnTexture(r.filterTexture),st.return(r.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}},jm.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"alphaMask"}}),qm,M4=b(()=>{$(),qm=class{constructor(t){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=t}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(t,e,i){this._renderer.renderPipes.batch.break(i);let r=this._colorStack;r[this._colorStackIndex]=r[this._colorStackIndex-1]&t.mask;let s=this._colorStack[this._colorStackIndex];s!==this._currentColor&&(this._currentColor=s,i.add({renderPipeId:"colorMask",colorMask:s,canBundle:!1})),this._colorStackIndex++}pop(t,e,i){this._renderer.renderPipes.batch.break(i);let r=this._colorStack;this._colorStackIndex--;let s=r[this._colorStackIndex-1];s!==this._currentColor&&(this._currentColor=s,i.add({renderPipeId:"colorMask",colorMask:s,canBundle:!1}))}execute(t){this._renderer.colorMask.setMask(t.colorMask)}destroy(){this._colorStack=null}},qm.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"colorMask"}}),Wm,B4=b(()=>{$(),_u(),To(),Wm=class{constructor(t){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=t}push(t,e,i){var r;let s=t,a=this._renderer;a.renderPipes.batch.break(i),a.renderPipes.blendMode.setBlendMode(s.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});let l=s.mask;l.includeInBuild=!0,this._maskHash.has(s)||this._maskHash.set(s,{instructionsStart:0,instructionsLength:0});let c=this._maskHash.get(s);c.instructionsStart=i.instructionSize,l.collectRenderables(i,a,null),l.includeInBuild=!1,a.renderPipes.batch.break(i),i.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});let h=i.instructionSize-c.instructionsStart-1;c.instructionsLength=h;let f=a.renderTarget.renderTarget.uid;(r=this._maskStackHash)[f]??(r[f]=0)}pop(t,e,i){let r=t,s=this._renderer;s.renderPipes.batch.break(i),s.renderPipes.blendMode.setBlendMode(r.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:e._maskOptions.inverse,canBundle:!1});let a=this._maskHash.get(t);for(let l=0;l<a.instructionsLength;l++)i.instructions[i.instructionSize++]=i.instructions[a.instructionsStart++];i.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(t){var e;let i=this._renderer,r=i.renderTarget.renderTarget.uid,s=(e=this._maskStackHash)[r]??(e[r]=0);t.action==="pushMaskBegin"?(i.renderTarget.ensureDepthStencil(),i.stencil.setStencilMode(Ht.RENDERING_MASK_ADD,s),s++,i.colorMask.setMask(0)):t.action==="pushMaskEnd"?(t.inverse?i.stencil.setStencilMode(Ht.INVERSE_MASK_ACTIVE,s):i.stencil.setStencilMode(Ht.MASK_ACTIVE,s),i.colorMask.setMask(15)):t.action==="popMaskBegin"?(i.colorMask.setMask(0),s!==0?i.stencil.setStencilMode(Ht.RENDERING_MASK_REMOVE,s):(i.renderTarget.clear(null,Qi.STENCIL),i.stencil.setStencilMode(Ht.DISABLED,s)),s--):t.action==="popMaskEnd"&&(t.inverse?i.stencil.setStencilMode(Ht.INVERSE_MASK_ACTIVE,s):i.stencil.setStencilMode(Ht.MASK_ACTIVE,s),i.colorMask.setMask(15)),this._maskStackHash[r]=s}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}},Wm.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"stencilMask"}}),pp,TA,P4=b(()=>{_i(),$(),pp=class D4{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new ct(0),this.color=this._backgroundColor,this.alpha=1}init(e){e={...D4.defaultOptions,...e},this.clearBeforeRender=e.clearBeforeRender,this.color=e.background||e.backgroundColor||this._backgroundColor,this.alpha=e.backgroundAlpha,this._backgroundColor.setAlpha(e.backgroundAlpha)}get color(){return this._backgroundColor}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}},pp.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"background",priority:0},pp.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},TA=pp}),xl,Km,O4=b(()=>{$(),ay(),dt(),xl={},ke.handle(I.BlendMode,t=>{if(!t.name)throw new Error("BlendMode extension must have a name property");xl[t.name]=t.ref},t=>{delete xl[t.name]}),Km=class{constructor(t){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=t,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}setBlendMode(t,e,i){if(this._activeBlendMode===e){this._isAdvanced&&this._renderableList.push(t);return}this._activeBlendMode=e,this._isAdvanced&&this._endAdvancedBlendMode(i),this._isAdvanced=!!xl[e],this._isAdvanced&&(this._beginAdvancedBlendMode(i),this._renderableList.push(t))}_beginAdvancedBlendMode(t){this._renderer.renderPipes.batch.break(t);let e=this._activeBlendMode;if(!xl[e]){Le(`Unable to assign BlendMode: '${e}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}let i=this._filterHash[e];i||(i=this._filterHash[e]=new Vl,i.filters=[new xl[e]]);let r={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:i,canBundle:!1};this._renderableList=r.renderables,t.add(r)}_endAdvancedBlendMode(t){this._renderableList=null,this._renderer.renderPipes.batch.break(t),t.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(t){this._isAdvanced&&this._endAdvancedBlendMode(t)}destroy(){this._renderer=null,this._renderableList=null;for(let t in this._filterHash)this._filterHash[t].destroy();this._filterHash=null}},Km.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"blendMode"}}),mp,gp,SA,F4=b(()=>{$(),br(),tt(),mp={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},gp=class G4{constructor(e){this._renderer=e}_normalizeOptions(e,i={}){return e instanceof Lt||e instanceof ve?{target:e,...i}:{...i,...e}}async image(e){let i=new Image;return i.src=await this.base64(e),i}async base64(e){e=this._normalizeOptions(e,G4.defaultImageOptions);let{format:i,quality:r}=e,s=this.canvas(e);if(s.toBlob!==void 0)return new Promise((a,l)=>{s.toBlob(c=>{if(!c){l(new Error("ICanvas.toBlob failed!"));return}let h=new FileReader;h.onload=()=>a(h.result),h.onerror=l,h.readAsDataURL(c)},mp[i],r)});if(s.toDataURL!==void 0)return s.toDataURL(mp[i],r);if(s.convertToBlob!==void 0){let a=await s.convertToBlob({type:mp[i],quality:r});return new Promise((l,c)=>{let h=new FileReader;h.onload=()=>l(h.result),h.onerror=c,h.readAsDataURL(a)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e){e=this._normalizeOptions(e);let i=e.target,r=this._renderer;if(i instanceof ve)return r.texture.generateCanvas(i);let s=r.textureGenerator.generateTexture(e),a=r.texture.generateCanvas(s);return s.destroy(!0),a}pixels(e){e=this._normalizeOptions(e);let i=e.target,r=this._renderer,s=i instanceof ve?i:r.textureGenerator.generateTexture(e),a=r.texture.getPixels(s);return i instanceof Lt&&s.destroy(!0),a}texture(e){return e=this._normalizeOptions(e),e.target instanceof ve?e.target:this._renderer.textureGenerator.generateTexture(e)}download(e){e=this._normalizeOptions(e);let i=this.canvas(e),r=document.createElement("a");r.download=e.filename??"image.png",r.href=i.toDataURL("image/png"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}log(e){let i=e.width??200;e=this._normalizeOptions(e);let r=this.canvas(e),s=r.toDataURL();console.log(`[Pixi Texture] ${r.width}px ${r.height}px`);let a=["font-size: 1px;",`padding: ${i}px 300px;`,`background: url(${s}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",a)}destroy(){this._renderer=null}},gp.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"extract"},gp.defaultImageOptions={format:"png",quality:1},SA=gp}),AA,L4=b(()=>{Li(),tt(),AA=class k4 extends ve{static create(e){return new k4({source:new Yt(e)})}resize(e,i,r){return this.source.resize(e,i,r),this}}}),LB,kB,IB,$m,I4=b(()=>{_i(),$(),nt(),ci(),qi(),uy(),br(),L4(),LB=new wt,kB=new Ci,IB=[0,0,0,0],$m=class{constructor(t){this._renderer=t}generateTexture(t){var h;t instanceof Lt&&(t={target:t,frame:void 0,textureSourceOptions:{},resolution:void 0});let e=t.resolution||this._renderer.resolution,i=t.antialias||this._renderer.view.antialias,r=t.target,s=t.clearColor;s?s=Array.isArray(s)&&s.length===4?s:ct.shared.setValue(s).toArray():s=IB;let a=((h=t.frame)==null?void 0:h.copyTo(LB))||ly(r,kB).rectangle;a.width=Math.max(a.width,1/e)|0,a.height=Math.max(a.height,1/e)|0;let l=AA.create({...t.textureSourceOptions,width:a.width,height:a.height,resolution:e,antialias:i}),c=De.shared.translate(-a.x,-a.y);return this._renderer.render({container:r,transform:c,target:l,clearColor:s}),l.source.updateMipmaps(),l}destroy(){this._renderer=null}},$m.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"textureGenerator"}}),Zm,U4=b(()=>{$(),nt(),vr(),du(),ua(),jr(),hi(),Zm=class{constructor(t){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=t}reset(){this._stackIndex=0;for(let t=0;t<this._activeUniforms.length;t++)this._uniformsPool.push(this._activeUniforms[t]);for(let t=0;t<this._activeBindGroups.length;t++)this._bindGroupPool.push(this._activeBindGroups[t]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(t){this.reset(),this.push(t)}bind({size:t,projectionMatrix:e,worldTransformMatrix:i,worldColor:r,offset:s}){let a=this._renderer.renderTarget.renderTarget,l=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{worldTransformMatrix:new De,worldColor:4294967295,offset:new Et},c={projectionMatrix:e||this._renderer.renderTarget.projectionMatrix,resolution:t||a.size,worldTransformMatrix:i||l.worldTransformMatrix,worldColor:r||l.worldColor,offset:s||l.offset,bindGroup:null},h=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(h);let f=h.uniforms;f.uProjectionMatrix=c.projectionMatrix,f.uResolution=c.resolution,f.uWorldTransformMatrix.copyFrom(c.worldTransformMatrix),f.uWorldTransformMatrix.tx-=c.offset.x,f.uWorldTransformMatrix.ty-=c.offset.y,hu(c.worldColor,f.uWorldColorAlpha,0),h.update();let p;this._renderer.renderPipes.uniformBatch?p=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(h,!1):(p=this._bindGroupPool.pop()||new us,this._activeBindGroups.push(p),p.setResource(h,0)),c.bindGroup=p,this._currentGlobalUniformData=c}push(t){this.bind(t),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===tr.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new ei({uProjectionMatrix:{value:new De,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new De,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}},Zm.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"globalUniforms"}}),UB,Qm,N4=b(()=>{$(),go(),UB=1,Qm=class{constructor(){this._tasks=[],this._offset=0}init(){Xt.system.add(this._update,this)}repeat(t,e,i=!0){let r=UB++,s=0;return i&&(this._offset+=1e3,s=this._offset),this._tasks.push({func:t,duration:e,start:performance.now(),offset:s,last:performance.now(),repeat:!0,id:r}),r}cancel(t){for(let e=0;e<this._tasks.length;e++)if(this._tasks[e].id===t){this._tasks.splice(e,1);return}}_update(){let t=performance.now();for(let e=0;e<this._tasks.length;e++){let i=this._tasks[e];if(t-i.offset-i.last>=i.duration){let r=t-i.start;i.func(r),i.last=t}}}destroy(){Xt.system.remove(this._update,this),this._tasks.length=0}},Qm.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"scheduler",priority:0}});function H4(t){if(!b2){if(et.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){let e=[`%c  %c  %c  %c  %c PixiJS %c v${$l} (${t}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...e)}else globalThis.console&&globalThis.console.log(`PixiJS ${$l} - ${t} - http://www.pixijs.com/`);b2=!0}}var b2,V4=b(()=>{Ct(),yA(),b2=!1}),nh,z4=b(()=>{$(),V4(),jr(),nh=class{constructor(t){this._renderer=t}init(t){if(t.hello){let e=this._renderer.name;this._renderer.type===tr.WEBGL&&(e+=` ${this._renderer.context.webGLVersion}`),H4(e)}}},nh.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"hello",priority:-2},nh.defaultOptions={hello:!1}});function X4(t){let e=!1;for(let r in t)if(t[r]==null){e=!0;break}if(!e)return t;let i=Object.create(null);for(let r in t){let s=t[r];s&&(i[r]=s)}return i}function Y4(t){let e=0;for(let i=0;i<t.length;i++)t[i]==null?e++:t[i-e]=t[i];return t.length-=e,t}var j4=b(()=>{}),NB,yp,EA,q4=b(()=>{$(),j4(),NB=0,yp=class W4{constructor(e){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=e}init(e){e={...W4.defaultOptions,...e},this.maxUnusedTime=e.renderableGCMaxUnusedTime,this._frequency=e.renderableGCFrequency,this.enabled=e.renderableGCActive}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(let i of this._managedHashes)i.context[i.hash]=X4(i.context[i.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(let i of this._managedArrays)Y4(i.context[i.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(e,i){this._managedHashes.push({context:e,hash:i})}addManagedArray(e,i){this._managedArrays.push({context:e,hash:i})}prerender({container:e}){this._now=performance.now(),e.renderGroup.gcTick=NB++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}addRenderable(e){this.enabled&&(e._lastUsed===-1&&(this._managedRenderables.push(e),e.once("destroyed",this._removeRenderable,this)),e._lastUsed=this._now)}run(){var a;let e=this._now,i=this._managedRenderables,r=this._renderer.renderPipes,s=0;for(let l=0;l<i.length;l++){let c=i[l];if(c===null){s++;continue}let h=c.renderGroup??c.parentRenderGroup,f=((a=h==null?void 0:h.instructionSet)==null?void 0:a.gcTick)??-1;if(((h==null?void 0:h.gcTick)??0)===f&&(c._lastUsed=e),e-c._lastUsed>this.maxUnusedTime){if(!c.destroyed){let p=r;h&&(h.structureDidChange=!0),p[c.renderPipeId].destroyRenderable(c)}c._lastUsed=-1,s++,c.off("destroyed",this._removeRenderable,this)}else i[l-s]=c}i.length-=s}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(e){let i=this._managedRenderables.indexOf(e);i>=0&&(e.off("destroyed",this._removeRenderable,this),this._managedRenderables[i]=null)}_updateInstructionGCTick(e,i){e.instructionSet.gcTick=i;for(let r of e.renderGroupChildren)this._updateInstructionGCTick(r,i)}},yp.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"renderableGC",priority:0},yp.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4},EA=yp}),_p,wA,K4=b(()=>{$(),_p=class $4{constructor(e){this._renderer=e,this.count=0,this.checkCount=0}init(e){e={...$4.defaultOptions,...e},this.checkCountMax=e.textureGCCheckCountMax,this.maxIdle=e.textureGCAMaxIdle??e.textureGCMaxIdle,this.active=e.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let e=this._renderer.texture.managedTextures;for(let i=0;i<e.length;i++){let r=e[i];r.autoGarbageCollect&&r.resource&&r._touched>-1&&this.count-r._touched>this.maxIdle&&(r._touched=-1,r.unload())}}destroy(){this._renderer=null}},_p.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"textureGC"},_p.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:60*60,textureGCCheckCountMax:600},wA=_p}),c0,wh,CA=b(()=>{Gi(),Li(),tt(),c0=class Z4{constructor(e={}){if(this.uid=Gt("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,e={...Z4.defaultOptions,...e},this.stencil=e.stencil,this.depth=e.depth,this.isRoot=e.isRoot,typeof e.colorTextures=="number"){this._managedColorTextures=!0;for(let i=0;i<e.colorTextures;i++)this.colorTextures.push(new Yt({width:e.width,height:e.height,resolution:e.resolution,antialias:e.antialias}))}else{this.colorTextures=[...e.colorTextures.map(r=>r.source)];let i=this.colorTexture.source;this.resize(i.width,i.height,i._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(e.depthStencilTexture||this.stencil)&&(e.depthStencilTexture instanceof ve||e.depthStencilTexture instanceof Yt?this.depthStencilTexture=e.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){let e=this._size;return e[0]=this.pixelWidth,e[1]=this.pixelHeight,e}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(e){this.resize(e.width,e.height,e._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new Yt({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(e,i,r=this.resolution,s=!1){this.dirtyId++,this.colorTextures.forEach((a,l)=>{s&&l===0||a.source.resize(e,i,r)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(e,i,r)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(e=>{e.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}},c0.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1},wh=c0});function RA(t,e){if(!Ja.has(t)){let i=new ve({source:new ls({resource:t,...e})}),r=()=>{Ja.get(t)===i&&Ja.delete(t)};i.once("destroy",r),i.source.once("destroy",r),Ja.set(t,i)}return Ja.get(t)}function H7(t){return Ja.has(t)}var Ja,MA=b(()=>{ou(),tt(),Ja=new Map}),vp,BA,Q4=b(()=>{Ct(),$(),ci(),gt(),CA(),MA(),vp=class J4{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(e){this.texture.source.autoDensity=e}get resolution(){return this.texture.source._resolution}set resolution(e){this.texture.source.resize(this.texture.source.width,this.texture.source.height,e)}init(e){e={...J4.defaultOptions,...e},e.view&&(Pe(Xe,"ViewSystem.view has been renamed to ViewSystem.canvas"),e.canvas=e.view),this.screen=new wt(0,0,e.width,e.height),this.canvas=e.canvas||et.get().createCanvas(),this.antialias=!!e.antialias,this.texture=RA(this.canvas,e),this.renderTarget=new wh({colorTextures:[this.texture],depth:!!e.depth,isRoot:!0}),this.texture.source.transparent=e.backgroundAlpha<1,this.resolution=e.resolution}resize(e,i,r){this.texture.source.resize(e,i,r),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(e=!1){(typeof e=="boolean"?e:e!=null&&e.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}},vp.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"view",priority:0},vp.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1},BA=vp}),qy,Wy,PA=b(()=>{d4(),f4(),v4(),b4(),_A(),T4(),R4(),M4(),B4(),P4(),O4(),F4(),I4(),U4(),N4(),z4(),q4(),K4(),Q4(),qy=[TA,Zm,nh,BA,Nm,wA,$m,SA,zm,EA,Qm],Wy=[Km,Xm,Hm,Im,jm,Wm,qm,Lm]}),Jm,eI=b(()=>{$(),Jm=class{constructor(t){this._hash=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(t){this._gpu=t}getBindGroup(t,e,i){return t._updateKey(),this._hash[t._key]||this._createBindGroup(t,e,i)}_createBindGroup(t,e,i){let r=this._gpu.device,s=e.layout[i],a=[],l=this._renderer;for(let f in s){let p=t.resources[f]??t.resources[s[f]],g;if(p._resourceType==="uniformGroup"){let y=p;l.ubo.updateUniformGroup(y);let v=y.buffer;g={buffer:l.buffer.getGPUBuffer(v),offset:0,size:v.descriptor.size}}else if(p._resourceType==="buffer"){let y=p;g={buffer:l.buffer.getGPUBuffer(y),offset:0,size:y.descriptor.size}}else if(p._resourceType==="bufferResource"){let y=p;g={buffer:l.buffer.getGPUBuffer(y.buffer),offset:y.offset,size:y.size}}else if(p._resourceType==="textureSampler"){let y=p;g=l.texture.getGpuSampler(y)}else if(p._resourceType==="textureSource"){let y=p;g=l.texture.getGpuSource(y).createView({})}a.push({binding:s[f],resource:g})}let c=l.shader.getProgramData(e).bindGroups[i],h=r.createBindGroup({layout:c,entries:a});return this._hash[t._key]=h,h}destroy(){for(let t of Object.keys(this._hash))this._hash[t]=null;this._hash=null,this._renderer=null}},Jm.extension={type:[I.WebGPUSystem],name:"bindGroup"}}),eg,tI=b(()=>{$(),OT(),eg=class{constructor(t){this._gpuBuffers=Object.create(null),this._managedBuffers=[],t.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(t){this._gpu=t}getGPUBuffer(t){return this._gpuBuffers[t.uid]||this.createGPUBuffer(t)}updateBuffer(t){let e=this._gpuBuffers[t.uid]||this.createGPUBuffer(t),i=t.data;return t._updateID&&i&&(t._updateID=0,this._gpu.device.queue.writeBuffer(e,0,i.buffer,0,(t._updateSize||i.byteLength)+3&-4)),e}destroyAll(){for(let t in this._gpuBuffers)this._gpuBuffers[t].destroy();this._gpuBuffers={}}createGPUBuffer(t){this._gpuBuffers[t.uid]||(t.on("update",this.updateBuffer,this),t.on("change",this.onBufferChange,this),t.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(t));let e=this._gpu.device.createBuffer(t.descriptor);return t._updateID=0,t.data&&(fm(t.data.buffer,e.getMappedRange()),e.unmap()),this._gpuBuffers[t.uid]=e,e}onBufferChange(t){this._gpuBuffers[t.uid].destroy(),t._updateID=0,this._gpuBuffers[t.uid]=this.createGPUBuffer(t)}onBufferDestroy(t){this._managedBuffers.splice(this._managedBuffers.indexOf(t),1),this._destroyBuffer(t)}destroy(){this._managedBuffers.forEach(t=>this._destroyBuffer(t)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(t){this._gpuBuffers[t.uid].destroy(),t.off("update",this.updateBuffer,this),t.off("change",this.onBufferChange,this),t.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[t.uid]=null}},eg.extension={type:[I.WebGPUSystem],name:"buffer"}}),tg,iI=b(()=>{$(),tg=class{constructor(t){this._colorMaskCache=15,this._renderer=t}setMask(t){this._colorMaskCache!==t&&(this._colorMaskCache=t,this._renderer.pipeline.setColorMask(t))}destroy(){this._renderer=null,this._colorMaskCache=null}},tg.extension={type:[I.WebGPUSystem],name:"colorMask"}}),ah,rI=b(()=>{Ct(),$(),ah=class{constructor(t){this._renderer=t}async init(t){return this._initPromise?this._initPromise:(this._initPromise=this._createDeviceAndAdaptor(t).then(e=>{this.gpu=e,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(t){this._renderer.gpu=t}async _createDeviceAndAdaptor(t){let e=await et.get().getNavigator().gpu.requestAdapter({powerPreference:t.powerPreference,forceFallbackAdapter:t.forceFallbackAdapter}),i=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(s=>e.features.has(s)),r=await e.requestDevice({requiredFeatures:i});return{adapter:e,device:r}}destroy(){this.gpu=null,this._renderer=null}},ah.extension={type:[I.WebGPUSystem],name:"device"},ah.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1}}),ig,sI=b(()=>{$(),ig=class{constructor(t){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=t}renderStart(){this.commandFinished=new Promise(t=>{this._resolveCommandFinished=t}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(t){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(t.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(t){this.renderPassEncoder.setViewport(t.x,t.y,t.width,t.height,0,1)}setPipelineFromGeometryProgramAndState(t,e,i,r){let s=this._renderer.pipeline.getPipeline(t,e,i,r);this.setPipeline(s)}setPipeline(t){this._boundPipeline!==t&&(this._boundPipeline=t,this.renderPassEncoder.setPipeline(t))}_setVertexBuffer(t,e){this._boundVertexBuffer[t]!==e&&(this._boundVertexBuffer[t]=e,this.renderPassEncoder.setVertexBuffer(t,this._renderer.buffer.updateBuffer(e)))}_setIndexBuffer(t){if(this._boundIndexBuffer===t)return;this._boundIndexBuffer=t;let e=t.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(t),e)}resetBindGroup(t){this._boundBindGroup[t]=null}setBindGroup(t,e,i){if(this._boundBindGroup[t]===e)return;this._boundBindGroup[t]=e,e._touch(this._renderer.textureGC.count);let r=this._renderer.bindGroup.getBindGroup(e,i,t);this.renderPassEncoder.setBindGroup(t,r)}setGeometry(t,e){let i=this._renderer.pipeline.getBufferNamesToBind(t,e);for(let r in i)this._setVertexBuffer(r,t.attributes[i[r]].buffer);t.indexBuffer&&this._setIndexBuffer(t.indexBuffer)}_setShaderBindGroups(t,e){for(let i in t.groups){let r=t.groups[i];e||this._syncBindGroup(r),this.setBindGroup(i,r,t.gpuProgram)}}_syncBindGroup(t){for(let e in t.resources){let i=t.resources[e];i.isUniformGroup&&this._renderer.ubo.updateUniformGroup(i)}}draw(t){let{geometry:e,shader:i,state:r,topology:s,size:a,start:l,instanceCount:c,skipSync:h}=t;this.setPipelineFromGeometryProgramAndState(e,i.gpuProgram,r,s),this.setGeometry(e,i.gpuProgram),this._setShaderBindGroups(i,h),e.indexBuffer?this.renderPassEncoder.drawIndexed(a||e.indexBuffer.data.length,c??e.instanceCount,l||0):this.renderPassEncoder.draw(a||e.getSize(),c??e.instanceCount,l||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){let t=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(t);let e=this._boundPipeline,i={...this._boundVertexBuffer},r=this._boundIndexBuffer,s={...this._boundBindGroup};this._clearCache();let a=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(a.x,a.y,a.width,a.height,0,1),this.setPipeline(e);for(let l in i)this._setVertexBuffer(l,i[l]);for(let l in s)this.setBindGroup(l,s[l],null);this._setIndexBuffer(r)}_clearCache(){for(let t=0;t<16;t++)this._boundBindGroup[t]=null,this._boundVertexBuffer[t]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(t){this._gpu=t}},ig.extension={type:[I.WebGPUSystem],name:"encoder",priority:1}}),rg,nI=b(()=>{$(),To(),rg=class{constructor(t){this._renderTargetStencilState=Object.create(null),this._renderer=t,t.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(t){let e=this._renderTargetStencilState[t.uid];e||(e=this._renderTargetStencilState[t.uid]={stencilMode:Ht.DISABLED,stencilReference:0}),this._activeRenderTarget=t,this.setStencilMode(e.stencilMode,e.stencilReference)}setStencilMode(t,e){let i=this._renderTargetStencilState[this._activeRenderTarget.uid];i.stencilMode=t,i.stencilReference=e;let r=this._renderer;r.pipeline.setStencilMode(t),r.encoder.renderPassEncoder.setStencilReference(e)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}},rg.extension={type:[I.WebGPUSystem],name:"stencil"}}),Ky,DA=b(()=>{lA(),xn(),Gs(),Ky=class{constructor(t){this._syncFunctionHash=Object.create(null),this._adaptor=t,this._systemCheck()}_systemCheck(){if(!oA())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(t){let e=this.getUniformGroupData(t);t.buffer||(t.buffer=new Xi({data:new Float32Array(e.layout.size/4),usage:Je.UNIFORM|Je.COPY_DST}))}getUniformGroupData(t){return this._syncFunctionHash[t._signature]||this._initUniformGroup(t)}_initUniformGroup(t){let e=t._signature,i=this._syncFunctionHash[e];if(!i){let r=Object.keys(t.uniformStructures).map(l=>t.uniformStructures[l]),s=this._adaptor.createUboElements(r),a=this._generateUboSync(s.uboElements);i=this._syncFunctionHash[e]={layout:s,syncFunction:a}}return this._syncFunctionHash[e]}_generateUboSync(t){return this._adaptor.generateUboSync(t)}syncUniformGroup(t,e,i){let r=this.getUniformGroupData(t);t.buffer||(t.buffer=new Xi({data:new Float32Array(r.layout.size/4),usage:Je.UNIFORM|Je.COPY_DST}));let s=null;return e||(e=t.buffer.data,s=t.buffer.dataInt32),i||(i=0),r.syncFunction(t.uniforms,e,s,i),!0}updateUniformGroup(t){if(t.isStatic&&!t._dirtyId)return!1;t._dirtyId=0;let e=this.syncUniformGroup(t);return t.buffer.update(),e}destroy(){this._syncFunctionHash=null}}});function aI(t){let e=t.map(r=>({data:r,offset:0,size:0})),i=0;for(let r=0;r<e.length;r++){let s=e[r],a=Nl[s.data.type].size,l=Nl[s.data.type].align;if(!Nl[s.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${s.data.type}`);s.data.size>1&&(a=Math.max(a,l)*s.data.size),i=Math.ceil(i/l)*l,s.size=a,s.offset=i,i+=a}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}var Nl,OA=b(()=>{Nl={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}}}),un,FA=b(()=>{un=[{type:"mat3x3<f32>",test:t=>t.value.a!==void 0,ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:"vec4<f32>",test:t=>t.type==="vec4<f32>"&&t.size===1&&t.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:"vec2<f32>",test:t=>t.type==="vec2<f32>"&&t.size===1&&t.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:"vec4<f32>",test:t=>t.type==="vec4<f32>"&&t.size===1&&t.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:"vec3<f32>",test:t=>t.type==="vec3<f32>"&&t.size===1&&t.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}]});function GA(t,e,i,r){let s=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `],a=0;for(let c=0;c<t.length;c++){let h=t[c],f=h.data.name,p=!1,g=0;for(let y=0;y<un.length;y++)if(un[y].test(h.data)){g=h.offset/4,s.push(`name = "${f}";`,`offset += ${g-a};`,un[y][e]||un[y].ubo),p=!0;break}if(!p)if(h.data.size>1)g=h.offset/4,s.push(i(h,g-a));else{let y=r[h.data.type];g=h.offset/4,s.push(`
                    v = uv.${f};
                    offset += ${g-a};
                    ${y};
                `)}a=g}let l=s.join(`
`);return new Function("uv","data","dataInt32","offset",l)}var LA=b(()=>{FA()});function Tl(t,e){return`
        for (let i = 0; i < ${t*e}; i++) {
            data[offset + (((i / ${t})|0) * 4) + (i % ${t})] = v[i];
        }
    `}var sg,kA,IA=b(()=>{sg={f32:`
        data[offset] = v;`,i32:`
        dataInt32[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"vec2<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];
        dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":Tl(3,2),"mat4x2<f32>":Tl(4,2),"mat2x3<f32>":Tl(2,3),"mat4x3<f32>":Tl(4,3),"mat2x4<f32>":Tl(2,4),"mat3x4<f32>":Tl(3,4)},kA={...sg,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `}});function oI(t,e){let{size:i,align:r}=Nl[t.data.type],s=(r-i)/4,a=t.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
         v = uv.${t.data.name};
         ${e!==0?`offset += ${e};`:""}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${t.data.size*(i/4)}; i++)
         {
             for(var j = 0; j < ${i/4}; j++)
             {
                 ${a}[arrayOffset++] = v[t++];
             }
             ${s!==0?`arrayOffset += ${s};`:""}
         }
     `}var lI=b(()=>{OA()});function uI(t){return GA(t,"uboWgsl",oI,kA)}var cI=b(()=>{LA(),IA(),lI()}),ng,hI=b(()=>{$(),DA(),OA(),cI(),ng=class extends Ky{constructor(){super({createUboElements:aI,generateUboSync:uI})}},ng.extension={type:[I.WebGPUSystem],name:"ubo"}}),pd,$y=b(()=>{ir(),Gi(),pd=class extends ui{constructor({buffer:t,offset:e,size:i}){super(),this.uid=Gt("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=Gt("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=t,this.offset=e|0,this.size=i,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=Gt("resource"),this.emit("change",this)}destroy(t=!1){this.destroyed=!0,t&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}}}),UA,dI=b(()=>{UA=class{constructor({minUniformOffsetAlignment:t}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=t,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(t){if(t>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${t*4}`);let e=this.byteIndex,i=e+t*4;if(i=Math.ceil(i/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,i>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=i,e}addGroup(t){let e=this.addEmptyGroup(t.length);for(let i=0;i<t.length;i++)this.data[e/4+i]=t[i];return e}destroy(){this.data=null}}}),nn,ag,fI=b(()=>{$(),xn(),$y(),Gs(),dI(),ua(),nn=128,ag=class{constructor(t){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new UA({minUniformOffsetAlignment:nn});let e=256/nn;for(let i=0;i<e;i++){let r=Je.UNIFORM|Je.COPY_DST;i===0&&(r|=Je.COPY_SRC),this._buffers.push(new Xi({data:this._batchBuffer.data,usage:r}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(let t in this._bindGroupHash)this._bindGroupHash[t]=null;this._batchBuffer.clear()}getUniformBindGroup(t,e){if(!e&&this._bindGroupHash[t.uid])return this._bindGroupHash[t.uid];this._renderer.ubo.ensureUniformGroup(t);let i=t.buffer.data,r=this._batchBuffer.addEmptyGroup(i.length);return this._renderer.ubo.syncUniformGroup(t,this._batchBuffer.data,r/4),this._bindGroupHash[t.uid]=this._getBindGroup(r/nn),this._bindGroupHash[t.uid]}getUboResource(t){this._renderer.ubo.updateUniformGroup(t);let e=t.buffer.data,i=this._batchBuffer.addGroup(e);return this._getBufferResource(i/nn)}getArrayBindGroup(t){let e=this._batchBuffer.addGroup(t);return this._getBindGroup(e/nn)}getArrayBufferResource(t){let e=this._batchBuffer.addGroup(t)/nn;return this._getBufferResource(e)}_getBufferResource(t){if(!this._bufferResources[t]){let e=this._buffers[t%2];this._bufferResources[t]=new pd({buffer:e,offset:(t/2|0)*256,size:nn})}return this._bufferResources[t]}_getBindGroup(t){if(!this._bindGroups[t]){let e=new us({0:this._getBufferResource(t)});this._bindGroups[t]=e}return this._bindGroups[t]}_uploadBindGroups(){let t=this._renderer.buffer,e=this._buffers[0];e.update(this._batchBuffer.byteIndex),t.updateBuffer(e);let i=this._renderer.gpu.device.createCommandEncoder();for(let r=1;r<this._buffers.length;r++){let s=this._buffers[r];i.copyBufferToBuffer(t.getGPUBuffer(e),nn,t.getGPUBuffer(s),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([i.finish()])}destroy(){for(let t=0;t<this._bindGroups.length;t++)this._bindGroups[t].destroy();this._bindGroups=null,this._bindGroupHash=null;for(let t=0;t<this._buffers.length;t++)this._buffers[t].destroy();this._buffers=null;for(let t=0;t<this._bufferResources.length;t++)this._bufferResources[t].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}},ag.extension={type:[I.WebGPUPipes],name:"uniformBatch"}});function NA(t,e){for(let i in t.attributes){let r=t.attributes[i],s=e[i];s?(r.format??(r.format=s.format),r.offset??(r.offset=s.offset),r.instance??(r.instance=s.instance)):Le(`Attribute ${i} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}V7(t)}function V7(t){let{buffers:e,attributes:i}=t,r={},s={};for(let a in e){let l=e[a];r[l.uid]=0,s[l.uid]=0}for(let a in i){let l=i[a];r[l.buffer.uid]+=mn(l.format).stride}for(let a in i){let l=i[a];l.stride??(l.stride=r[l.buffer.uid]),l.start??(l.start=s[l.buffer.uid]),s[l.buffer.uid]+=mn(l.format).stride}}var HA=b(()=>{dt(),Ao()}),As,VA=b(()=>{To(),As=[],As[Ht.NONE]=void 0,As[Ht.DISABLED]={stencilWriteMask:0,stencilReadMask:0},As[Ht.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}},As[Ht.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}},As[Ht.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}},As[Ht.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"replace"},stencilBack:{compare:"not-equal",passOp:"replace"}}});function z7(t,e,i,r,s){return t<<24|e<<16|i<<10|r<<5|s}function X7(t,e,i,r){return i<<6|t<<3|r<<1|e}var HB,og,pI=b(()=>{$(),dt(),HA(),To(),Kh(),VA(),HB={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4},og=class{constructor(t){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=t}contextChange(t){this._gpu=t,this.setStencilMode(Ht.DISABLED),this._updatePipeHash()}setMultisampleCount(t){this._multisampleCount!==t&&(this._multisampleCount=t,this._updatePipeHash())}setRenderTarget(t){this._multisampleCount=t.msaaSamples,this._depthStencilAttachment=t.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(t){this._colorMask!==t&&(this._colorMask=t,this._updatePipeHash())}setStencilMode(t){this._stencilMode!==t&&(this._stencilMode=t,this._stencilState=As[t],this._updatePipeHash())}setPipeline(t,e,i,r){let s=this.getPipeline(t,e,i);r.setPipeline(s)}getPipeline(t,e,i,r){t._layoutKey||(NA(t,e.attributeData),this._generateBufferKey(t)),r||(r=t.topology);let s=z7(t._layoutKey,e._layoutKey,i.data,i._blendModeId,HB[r]);return this._pipeCache[s]?this._pipeCache[s]:(this._pipeCache[s]=this._createPipeline(t,e,i,r),this._pipeCache[s])}_createPipeline(t,e,i,r){let s=this._gpu.device,a=this._createVertexBufferLayouts(t,e),l=this._renderer.state.getColorTargets(i);l[0].writeMask=this._stencilMode===Ht.RENDERING_MASK_ADD?0:this._colorMask;let c=this._renderer.shader.getProgramData(e).pipeline,h={vertex:{module:this._getModule(e.vertex.source),entryPoint:e.vertex.entryPoint,buffers:a},fragment:{module:this._getModule(e.fragment.source),entryPoint:e.fragment.entryPoint,targets:l},primitive:{topology:r,cullMode:i.cullMode},layout:c,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(h.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:i.depthTest,depthCompare:i.depthTest?"less":"always"}),s.createRenderPipeline(h)}_getModule(t){return this._moduleCache[t]||this._createModule(t)}_createModule(t){let e=this._gpu.device;return this._moduleCache[t]=e.createShaderModule({code:t}),this._moduleCache[t]}_generateBufferKey(t){let e=[],i=0,r=Object.keys(t.attributes).sort();for(let a=0;a<r.length;a++){let l=t.attributes[r[a]];e[i++]=l.offset,e[i++]=l.format,e[i++]=l.stride,e[i++]=l.instance}let s=e.join("|");return t._layoutKey=jl(s,"geometry"),t._layoutKey}_generateAttributeLocationsKey(t){let e=[],i=0,r=Object.keys(t.attributeData).sort();for(let a=0;a<r.length;a++){let l=t.attributeData[r[a]];e[i++]=l.location}let s=e.join("|");return t._attributeLocationsKey=jl(s,"programAttributes"),t._attributeLocationsKey}getBufferNamesToBind(t,e){let i=t._layoutKey<<16|e._attributeLocationsKey;if(this._bindingNamesCache[i])return this._bindingNamesCache[i];let r=this._createVertexBufferLayouts(t,e),s=Object.create(null),a=e.attributeData;for(let l=0;l<r.length;l++){let c=Object.values(r[l].attributes)[0].shaderLocation;for(let h in a)if(a[h].location===c){s[l]=h;break}}return this._bindingNamesCache[i]=s,s}_createVertexBufferLayouts(t,e){e._attributeLocationsKey||this._generateAttributeLocationsKey(e);let i=t._layoutKey<<16|e._attributeLocationsKey;if(this._bufferLayoutsCache[i])return this._bufferLayoutsCache[i];let r=[];return t.buffers.forEach(s=>{let a={arrayStride:0,stepMode:"vertex",attributes:[]},l=a.attributes;for(let c in e.attributeData){let h=t.attributes[c];(h.divisor??1)!==1&&Le(`Attribute ${c} has an invalid divisor value of '${h.divisor}'. WebGPU only supports a divisor value of 1`),h.buffer===s&&(a.arrayStride=h.stride,a.stepMode=h.instance?"instance":"vertex",l.push({shaderLocation:e.attributeData[c].location,offset:h.offset,format:h.format}))}l.length&&r.push(a)}),this._bufferLayoutsCache[i]=r,r}_updatePipeHash(){let t=X7(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[t]||(this._pipeStateCaches[t]=Object.create(null)),this._pipeCache=this._pipeStateCaches[t]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}},og.extension={type:[I.WebGPUSystem],name:"pipeline"}});function mI(t,e,i,r,s,a){let l=a?1:-1;return t.identity(),t.a=1/r*2,t.d=l*(1/s*2),t.tx=-1-e*t.a,t.ty=-l-i*t.d,t}var gI=b(()=>{});function yI(t){let e=t.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement&&document.body.contains(e)}var _I=b(()=>{}),Zy,zA=b(()=>{nt(),ci(),_u(),gI(),uA(),ou(),Li(),tt(),MA(),_I(),CA(),Zy=class{constructor(t){this.rootViewPort=new wt,this.viewport=new wt,this.onRenderTargetChange=new jy("onRenderTargetChange"),this.projectionMatrix=new De,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:t,clear:e,clearColor:i,frame:r}){var s,a;this._renderTargetStack.length=0,this.push(t,e,i,r),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=yI(this.rootRenderTarget),(a=(s=this.adaptor).prerender)==null||a.call(s,this.rootRenderTarget)}postrender(){var t,e;(e=(t=this.adaptor).postrender)==null||e.call(t,this.rootRenderTarget)}bind(t,e=!0,i,r){let s=this.getRenderTarget(t),a=this.renderTarget!==s;this.renderTarget=s,this.renderSurface=t;let l=this.getGpuRenderTarget(s);(s.pixelWidth!==l.width||s.pixelHeight!==l.height)&&(this.adaptor.resizeGpuRenderTarget(s),l.width=s.pixelWidth,l.height=s.pixelHeight);let c=s.colorTexture,h=this.viewport,f=c.pixelWidth,p=c.pixelHeight;if(!r&&t instanceof ve&&(r=t.frame),r){let g=c._resolution;h.x=r.x*g+.5|0,h.y=r.y*g+.5|0,h.width=r.width*g+.5|0,h.height=r.height*g+.5|0}else h.x=0,h.y=0,h.width=f,h.height=p;return mI(this.projectionMatrix,0,0,h.width/c.resolution,h.height/c.resolution,!s.isRoot),this.adaptor.startRenderPass(s,e,i,h),a&&this.onRenderTargetChange.emit(s),s}clear(t,e=Qi.ALL,i){e&&(t&&(t=this.getRenderTarget(t)),this.adaptor.clear(t||this.renderTarget,e,i,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(t,e=Qi.ALL,i,r){let s=this.bind(t,e,i,r);return this._renderTargetStack.push({renderTarget:s,frame:r}),s}pop(){this._renderTargetStack.pop();let t=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(t.renderTarget,!1,null,t.frame)}getRenderTarget(t){return t.isTexture&&(t=t.source),this._renderSurfaceToRenderTargetHash.get(t)??this._initRenderTarget(t)}copyToTexture(t,e,i,r,s){i.x<0&&(r.width+=i.x,s.x-=i.x,i.x=0),i.y<0&&(r.height+=i.y,s.y-=i.y,i.y=0);let{pixelWidth:a,pixelHeight:l}=t;return r.width=Math.min(r.width,a-i.x),r.height=Math.min(r.height,l-i.y),this.adaptor.copyToTexture(t,e,i,r,s)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((t,e)=>{t!==e&&t.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(t){let e=null;return ls.test(t)&&(t=RA(t).source),t instanceof wh?e=t:t instanceof Yt&&(e=new wh({colorTextures:[t]}),ls.test(t.source.resource)&&(e.isRoot=!0),t.once("destroy",()=>{e.destroy(),this._renderSurfaceToRenderTargetHash.delete(t);let i=this._gpuRenderTargetHash[e.uid];i&&(this._gpuRenderTargetHash[e.uid]=null,this.adaptor.destroyGpuRenderTarget(i))})),this._renderSurfaceToRenderTargetHash.set(t,e),e}getGpuRenderTarget(t){return this._gpuRenderTargetHash[t.uid]||(this._gpuRenderTargetHash[t.uid]=this.adaptor.initGpuRenderTarget(t))}resetState(){this.renderTarget=null,this.renderSurface=null}}}),XA,vI=b(()=>{XA=class{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}}),YA,bI=b(()=>{_u(),ou(),Li(),vI(),YA=class{init(t,e){this._renderer=t,this._renderTargetSystem=e}copyToTexture(t,e,i,r,s){let a=this._renderer,l=this._getGpuColorTexture(t),c=a.texture.getGpuSource(e.source);return a.encoder.commandEncoder.copyTextureToTexture({texture:l,origin:i},{texture:c,origin:s},r),e}startRenderPass(t,e=!0,i,r){let s=this._renderTargetSystem.getGpuRenderTarget(t),a=this.getDescriptor(t,e,i);s.descriptor=a,this._renderer.pipeline.setRenderTarget(s),this._renderer.encoder.beginRenderPass(s),this._renderer.encoder.setViewport(r)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(t){let e=this._renderTargetSystem.getGpuRenderTarget(t);return e.contexts[0]?e.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(t.colorTextures[0].source)}getDescriptor(t,e,i){typeof e=="boolean"&&(e=e?Qi.ALL:Qi.NONE);let r=this._renderTargetSystem,s=r.getGpuRenderTarget(t),a=t.colorTextures.map((c,h)=>{let f=s.contexts[h],p,g;f?p=f.getCurrentTexture().createView():p=this._renderer.texture.getGpuSource(c).createView({mipLevelCount:1}),s.msaaTextures[h]&&(g=p,p=this._renderer.texture.getTextureView(s.msaaTextures[h]));let y=e&Qi.COLOR?"clear":"load";return i??(i=r.defaultClearColor),{view:p,resolveTarget:g,clearValue:i,storeOp:"store",loadOp:y}}),l;if((t.stencil||t.depth)&&!t.depthStencilTexture&&(t.ensureDepthStencilTexture(),t.depthStencilTexture.source.sampleCount=s.msaa?4:1),t.depthStencilTexture){let c=e&Qi.STENCIL?"clear":"load",h=e&Qi.DEPTH?"clear":"load";l={view:this._renderer.texture.getGpuSource(t.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:c,depthClearValue:1,depthLoadOp:h,depthStoreOp:"store"}}return{colorAttachments:a,depthStencilAttachment:l}}clear(t,e=!0,i,r){if(!e)return;let{gpu:s,encoder:a}=this._renderer,l=s.device;if(a.commandEncoder===null){let c=l.createCommandEncoder(),h=this.getDescriptor(t,e,i),f=c.beginRenderPass(h);f.setViewport(r.x,r.y,r.width,r.height,0,1),f.end();let p=c.finish();l.queue.submit([p])}else this.startRenderPass(t,e,i,r)}initGpuRenderTarget(t){t.isRoot=!0;let e=new XA;return t.colorTextures.forEach((i,r)=>{if(ls.test(i.resource)){let s=i.resource.getContext("webgpu"),a=i.transparent?"premultiplied":"opaque";try{s.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:a})}catch(l){console.error(l)}e.contexts[r]=s}if(e.msaa=i.source.antialias,i.source.antialias){let s=new Yt({width:0,height:0,sampleCount:4});e.msaaTextures[r]=s}}),e.msaa&&(e.msaaSamples=4,t.depthStencilTexture&&(t.depthStencilTexture.source.sampleCount=4)),e}destroyGpuRenderTarget(t){t.contexts.forEach(e=>{e.unconfigure()}),t.msaaTextures.forEach(e=>{e.destroy()}),t.msaaTextures.length=0,t.contexts.length=0}ensureDepthStencilTexture(t){let e=this._renderTargetSystem.getGpuRenderTarget(t);t.depthStencilTexture&&e.msaa&&(t.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(t){let e=this._renderTargetSystem.getGpuRenderTarget(t);e.width=t.width,e.height=t.height,e.msaa&&t.colorTextures.forEach((i,r)=>{var s;(s=e.msaaTextures[r])==null||s.resize(i.source.width,i.source.height,i.source._resolution)})}}}),lg,xI=b(()=>{$(),zA(),bI(),lg=class extends Zy{constructor(t){super(t),this.adaptor=new YA,this.adaptor.init(t,this)}},lg.extension={type:[I.WebGPUSystem],name:"renderTarget"}}),ug,TI=b(()=>{$(),ug=class{constructor(){this._gpuProgramData=Object.create(null)}contextChange(t){this._gpu=t,this.maxTextures=t.device.limits.maxSampledTexturesPerShaderStage}getProgramData(t){return this._gpuProgramData[t._layoutKey]||this._createGPUProgramData(t)}_createGPUProgramData(t){let e=this._gpu.device,i=t.gpuLayout.map(s=>e.createBindGroupLayout({entries:s})),r={bindGroupLayouts:i};return this._gpuProgramData[t._layoutKey]={bindGroups:i,pipeline:e.createPipelineLayout(r)},this._gpuProgramData[t._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}},ug.extension={type:[I.WebGPUSystem],name:"shader"}}),Ni,SI=b(()=>{Ni={},Ni.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}},Ni.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}},Ni.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}},Ni.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},Ni.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}},Ni.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}},Ni["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}},Ni["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}},Ni["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}},Ni.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}},Ni.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}},Ni.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}}}),cg,AI=b(()=>{$(),Wr(),SI(),cg=class{constructor(){this.defaultState=new ar,this.defaultState.blend=!0}contextChange(t){this.gpu=t}getColorTargets(t){return[{format:"bgra8unorm",writeMask:0,blend:Ni[t.blendMode]||Ni.normal}]}destroy(){this.gpu=null}},cg.extension={type:[I.WebGPUSystem],name:"state"}}),jA,EI=b(()=>{jA={type:"image",upload(t,e,i){let r=t.resource,s=(t.pixelWidth|0)*(t.pixelHeight|0),a=r.byteLength/s;i.device.queue.writeTexture({texture:e},r,{offset:0,rowsPerImage:t.pixelHeight,bytesPerRow:t.pixelHeight*a},{width:t.pixelWidth,height:t.pixelHeight,depthOrArrayLayers:1})}}}),hg,VB,qA,wI=b(()=>{hg={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},VB={blockBytes:4,blockWidth:1,blockHeight:1},qA={type:"compressed",upload(t,e,i){let r=t.pixelWidth,s=t.pixelHeight,a=hg[t.format]||VB;for(let l=0;l<t.resource.length;l++){let c=t.resource[l],h=Math.ceil(r/a.blockWidth)*a.blockBytes;i.device.queue.writeTexture({texture:e,mipLevel:l},c,{offset:0,bytesPerRow:h},{width:Math.ceil(r/a.blockWidth)*a.blockWidth,height:Math.ceil(s/a.blockHeight)*a.blockHeight,depthOrArrayLayers:1}),r=Math.max(r>>1,1),s=Math.max(s>>1,1)}}}}),Qy,WA=b(()=>{Qy={type:"image",upload(t,e,i){let r=t.resource;if(!r)return;let s=Math.min(e.width,t.resourceWidth||t.pixelWidth),a=Math.min(e.height,t.resourceHeight||t.pixelHeight),l=t.alphaMode==="premultiply-alpha-on-upload";i.device.queue.copyExternalImageToTexture({source:r},{texture:e,premultipliedAlpha:l},{width:s,height:a})}}}),KA,CI=b(()=>{WA(),KA={type:"video",upload(t,e,i){Qy.upload(t,e,i)}}}),$A,RI=b(()=>{$A=class{constructor(t){this.device=t,this.sampler=t.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(t){let e=this.pipelines[t];return e||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `})),e=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:t}]}}),this.pipelines[t]=e),e}generateMipmap(t){let e=this._getMipmapPipeline(t.format);if(t.dimension==="3d"||t.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let i=t,r=t.depthOrArrayLayers||1,s=t.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!s){let c={size:{width:Math.ceil(t.width/2),height:Math.ceil(t.height/2),depthOrArrayLayers:r},format:t.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:t.mipLevelCount-1};i=this.device.createTexture(c)}let a=this.device.createCommandEncoder({}),l=e.getBindGroupLayout(0);for(let c=0;c<r;++c){let h=t.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:c,arrayLayerCount:1}),f=s?1:0;for(let p=1;p<t.mipLevelCount;++p){let g=i.createView({baseMipLevel:f++,mipLevelCount:1,dimension:"2d",baseArrayLayer:c,arrayLayerCount:1}),y=a.beginRenderPass({colorAttachments:[{view:g,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),v=this.device.createBindGroup({layout:l,entries:[{binding:0,resource:this.sampler},{binding:1,resource:h}]});y.setPipeline(e),y.setBindGroup(0,v),y.draw(3,1,0,0),y.end(),h=g}}if(!s){let c={width:Math.ceil(t.width/2),height:Math.ceil(t.height/2),depthOrArrayLayers:r};for(let h=1;h<t.mipLevelCount;++h)a.copyTextureToTexture({texture:i,mipLevel:h-1},{texture:t,mipLevel:h},c),c.width=Math.ceil(c.width/2),c.height=Math.ceil(c.height/2)}return this.device.queue.submit([a.finish()]),s||i.destroy(),t}}}),dg,MI=b(()=>{Ct(),$(),hi(),pu(),ua(),EI(),wI(),WA(),CI(),RI(),dg=class{constructor(t){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:Qy,buffer:jA,video:KA,compressed:qA},this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuSources"),t.renderableGC.addManagedHash(this,"_gpuSamplers"),t.renderableGC.addManagedHash(this,"_bindGroupHash"),t.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(t){this._gpu=t}initSource(t){if(t.autoGenerateMipmaps){let c=Math.max(t.pixelWidth,t.pixelHeight);t.mipLevelCount=Math.floor(Math.log2(c))+1}let e=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;t.uploadMethodId!=="compressed"&&(e|=GPUTextureUsage.RENDER_ATTACHMENT,e|=GPUTextureUsage.COPY_SRC);let i=hg[t.format]||{blockWidth:1,blockHeight:1},r=Math.ceil(t.pixelWidth/i.blockWidth)*i.blockWidth,s=Math.ceil(t.pixelHeight/i.blockHeight)*i.blockHeight,a={label:t.label,size:{width:r,height:s},format:t.format,sampleCount:t.sampleCount,mipLevelCount:t.mipLevelCount,dimension:t.dimension,usage:e},l=this._gpu.device.createTexture(a);return this._gpuSources[t.uid]=l,this.managedTextures.includes(t)||(t.on("update",this.onSourceUpdate,this),t.on("resize",this.onSourceResize,this),t.on("destroy",this.onSourceDestroy,this),t.on("unload",this.onSourceUnload,this),t.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(t)),this.onSourceUpdate(t),l}onSourceUpdate(t){let e=this.getGpuSource(t);e&&(this._uploads[t.uploadMethodId]&&this._uploads[t.uploadMethodId].upload(t,e,this._gpu),t.autoGenerateMipmaps&&t.mipLevelCount>1&&this.onUpdateMipmaps(t))}onSourceUnload(t){let e=this._gpuSources[t.uid];e&&(this._gpuSources[t.uid]=null,e.destroy())}onUpdateMipmaps(t){this._mipmapGenerator||(this._mipmapGenerator=new $A(this._gpu.device));let e=this.getGpuSource(t);this._mipmapGenerator.generateMipmap(e)}onSourceDestroy(t){t.off("update",this.onSourceUpdate,this),t.off("unload",this.onSourceUnload,this),t.off("destroy",this.onSourceDestroy,this),t.off("resize",this.onSourceResize,this),t.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(t),1),this.onSourceUnload(t)}onSourceResize(t){let e=this._gpuSources[t.uid];e?(e.width!==t.pixelWidth||e.height!==t.pixelHeight)&&(this._textureViewHash[t.uid]=null,this._bindGroupHash[t.uid]=null,this.onSourceUnload(t),this.initSource(t)):this.initSource(t)}_initSampler(t){return this._gpuSamplers[t._resourceId]=this._gpu.device.createSampler(t),this._gpuSamplers[t._resourceId]}getGpuSampler(t){return this._gpuSamplers[t._resourceId]||this._initSampler(t)}getGpuSource(t){return this._gpuSources[t.uid]||this.initSource(t)}getTextureBindGroup(t){return this._bindGroupHash[t.uid]??this._createTextureBindGroup(t)}_createTextureBindGroup(t){let e=t.source;return this._bindGroupHash[t.uid]=new us({0:e,1:e.style,2:new ei({uTextureMatrix:{type:"mat3x3<f32>",value:t.textureMatrix.mapCoord}})}),this._bindGroupHash[t.uid]}getTextureView(t){let e=t.source;return this._textureViewHash[e.uid]??this._createTextureView(e)}_createTextureView(t){return this._textureViewHash[t.uid]=this.getGpuSource(t).createView(),this._textureViewHash[t.uid]}generateCanvas(t){let e=this._renderer,i=e.gpu.device.createCommandEncoder(),r=et.get().createCanvas();r.width=t.source.pixelWidth,r.height=t.source.pixelHeight;let s=r.getContext("webgpu");return s.configure({device:e.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:et.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),i.copyTextureToTexture({texture:e.texture.getGpuSource(t.source),origin:{x:0,y:0}},{texture:s.getCurrentTexture()},{width:r.width,height:r.height}),e.gpu.device.queue.submit([i.finish()]),r}getPixels(t){let e=this.generateCanvas(t),i=cs.getOptimalCanvasAndContext(e.width,e.height),r=i.context;r.drawImage(e,0,0);let{width:s,height:a}=e,l=r.getImageData(0,0,s,a),c=new Uint8ClampedArray(l.data.buffer);return cs.returnCanvasAndContext(i),{pixels:c,width:s,height:a}}destroy(){var t;this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null;for(let e of Object.keys(this._bindGroupHash)){let i=Number(e);(t=this._bindGroupHash[i])==null||t.destroy(),this._bindGroupHash[i]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}},dg.extension={type:[I.WebGPUSystem],name:"texture"}}),BI={};_n(BI,{WebGPURenderer:()=>ZA});var zB,XB,YB,h0,d0,f0,ZA,PI=b(()=>{$(),u4(),c4(),h4(),ud(),PA(),jr(),eI(),tI(),iI(),rI(),sI(),nI(),hI(),fI(),pI(),xI(),TI(),AI(),MI(),zB=[...qy,ng,ig,ah,eg,dg,lg,ug,cg,og,tg,rg,Jm],XB=[...Wy,ag],YB=[Gm,Fm,Om],h0=[],d0=[],f0=[],ke.handleByNamedList(I.WebGPUSystem,h0),ke.handleByNamedList(I.WebGPUPipes,d0),ke.handleByNamedList(I.WebGPUPipesAdaptor,f0),ke.add(...zB,...XB,...YB),ZA=class extends vu{constructor(){let t={name:"webgpu",type:tr.WEBGPU,systems:h0,renderPipes:d0,renderPipeAdaptors:f0};super(t)}}}),fg,DI=b(()=>{$(),nt(),xo(),ha(),Qh(),Jh(),yu(),da(),wy(),fs(),hi(),fg=class{init(){let t=new ei({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new De,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),e=bo(),i=cu({name:"graphics",bits:[Zh,Ay(e),nd,wo]});this.shader=new qr({glProgram:i,resources:{localUniforms:t,batchSamplers:Ey(e)}})}execute(t,e){let i=e.context,r=i.customShader||this.shader,s=t.renderer,a=s.graphicsContext,{batcher:l,instructions:c}=a.getContextRenderData(i);r.groups[0]=s.globalUniforms.bindGroup,s.state.set(t.state),s.shader.bind(r),s.geometry.bind(l.geometry,r.glProgram);let h=c.instructions;for(let f=0;f<c.instructionSize;f++){let p=h[f];if(p.size){for(let g=0;g<p.textures.count;g++)s.texture.bind(p.textures.textures[g],g);s.geometry.draw(p.topology,p.size,p.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}},fg.extension={type:[I.WebGLPipesAdaptor],name:"graphics"}}),pg,OI=b(()=>{$(),nt(),ha(),yu(),da(),dA(),fs(),tt(),dt(),pg=class{init(){let t=cu({name:"mesh",bits:[nd,hA,wo]});this._shader=new qr({glProgram:t,resources:{uTexture:ve.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new De}}}})}execute(t,e){let i=t.renderer,r=e._shader;if(r){if(!r.glProgram){Le("Mesh shader has no glProgram",e.shader);return}}else{r=this._shader;let s=e.texture,a=s.source;r.resources.uTexture=a,r.resources.uSampler=a.style,r.resources.textureUniforms.uniforms.uTextureMatrix=s.textureMatrix.mapCoord}r.groups[100]=i.globalUniforms.bindGroup,r.groups[101]=t.localUniformsBindGroup,i.encoder.draw({geometry:e._geometry,shader:r,state:e.state})}destroy(){this._shader.destroy(!0),this._shader=null}},pg.extension={type:[I.WebGLPipesAdaptor],name:"mesh"}}),mg,FI=b(()=>{$(),Wr(),mg=class{constructor(){this._tempState=ar.for2d(),this._didUploadHash={}}init(t){t.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(t,e,i){let r=t.renderer,s=this._didUploadHash[i.uid];r.shader.bind(i,s),s||(this._didUploadHash[i.uid]=!0),r.shader.updateUniformGroup(r.globalUniforms.uniformGroup),r.geometry.bind(e,i.glProgram)}execute(t,e){let i=t.renderer;this._tempState.blendMode=e.blendMode,i.state.set(this._tempState);let r=e.textures.textures;for(let s=0;s<e.textures.count;s++)i.texture.bind(r[s],s);i.geometry.draw(e.topology,e.size,e.start)}},mg.extension={type:[I.WebGLPipesAdaptor],name:"batch"}}),Hl,GI=b(()=>{Hl=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(Hl||{})}),QA,LI=b(()=>{QA=class{constructor(t,e){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.type=e}}}),gg,kI=b(()=>{$(),Gs(),GI(),LI(),gg=class{constructor(t){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){let t=this._gl=this._renderer.gl;this._gpuBuffers=Object.create(null),this._maxBindings=t.MAX_UNIFORM_BUFFER_BINDINGS?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0}getGlBuffer(t){return this._gpuBuffers[t.uid]||this.createGLBuffer(t)}bind(t){let{_gl:e}=this,i=this.getGlBuffer(t);e.bindBuffer(i.type,i.buffer)}bindBufferBase(t,e){let{_gl:i}=this;this._boundBufferBases[e]!==t&&(this._boundBufferBases[e]=t,t._lastBindBaseLocation=e,i.bindBufferBase(i.UNIFORM_BUFFER,e,t.buffer))}nextBindBase(t){this._bindCallId++,this._minBaseLocation=0,t&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(t){let e=this.getLastBindBaseLocation(t);if(e>=this._minBaseLocation)return t._lastBindCallId=this._bindCallId,e;let i=0,r=this._nextBindBaseIndex;for(;i<2;){r>=this._maxBindings&&(r=this._minBaseLocation,i++);let s=this._boundBufferBases[r];if(s&&s._lastBindCallId===this._bindCallId){r++;continue}break}return e=r,this._nextBindBaseIndex=r+1,i>=2?-1:(t._lastBindCallId=this._bindCallId,this._boundBufferBases[e]=null,e)}getLastBindBaseLocation(t){let e=t._lastBindBaseLocation;return this._boundBufferBases[e]===t?e:-1}bindBufferRange(t,e,i,r){let{_gl:s}=this;i||(i=0),e||(e=0),this._boundBufferBases[e]=null,s.bindBufferRange(s.UNIFORM_BUFFER,e||0,t.buffer,i*256,r||256)}updateBuffer(t){let{_gl:e}=this,i=this.getGlBuffer(t);if(t._updateID===i.updateID)return i;i.updateID=t._updateID,e.bindBuffer(i.type,i.buffer);let r=t.data,s=t.descriptor.usage&Je.STATIC?e.STATIC_DRAW:e.DYNAMIC_DRAW;return r?i.byteLength>=r.byteLength?e.bufferSubData(i.type,0,r,0,t._updateSize/r.BYTES_PER_ELEMENT):(i.byteLength=r.byteLength,e.bufferData(i.type,r,s)):(i.byteLength=t.descriptor.size,e.bufferData(i.type,i.byteLength,s)),i}destroyAll(){let t=this._gl;for(let e in this._gpuBuffers)t.deleteBuffer(this._gpuBuffers[e].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(t,e){let i=this._gpuBuffers[t.uid],r=this._gl;e||r.deleteBuffer(i.buffer),this._gpuBuffers[t.uid]=null}createGLBuffer(t){let{_gl:e}=this,i=Hl.ARRAY_BUFFER;t.descriptor.usage&Je.INDEX?i=Hl.ELEMENT_ARRAY_BUFFER:t.descriptor.usage&Je.UNIFORM&&(i=Hl.UNIFORM_BUFFER);let r=new QA(e.createBuffer(),i);return this._gpuBuffers[t.uid]=r,t.on("destroy",this.onBufferDestroy,this),r}resetState(){this._boundBufferBases=Object.create(null)}},gg.extension={type:[I.WebGLSystem],name:"buffer"}}),bp,JA,II=b(()=>{Ct(),$(),dt(),bp=class UI{constructor(e){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=e,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this._renderer.gl=e}init(e){e={...UI.defaultOptions,...e};let i=this.multiView=e.multiView;if(e.context&&i&&(Le("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),i=!1),i?this.canvas=et.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,e.context)this.initFromContext(e.context);else{let r=this._renderer.background.alpha<1,s=e.premultipliedAlpha??!0,a=e.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(e.preferWebGLVersion,{alpha:r,premultipliedAlpha:s,antialias:a,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference??"default"})}}ensureCanvasSize(e){if(!this.multiView){e!==this.canvas&&Le("multiView is disabled, but targetCanvas is not the main canvas");return}let{canvas:i}=this;(i.width<e.width||i.height<e.height)&&(i.width=Math.max(e.width,e.width),i.height=Math.max(e.height,e.height))}initFromContext(e){this.gl=e,this.webGLVersion=e instanceof et.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(e),this._renderer.runners.contextChange.emit(e);let i=this._renderer.view.canvas;i.addEventListener("webglcontextlost",this.handleContextLost,!1),i.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(e,i){let r,s=this.canvas;if(e===2&&(r=s.getContext("webgl2",i)),!r&&(r=s.getContext("webgl",i),!r))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=r,this.initFromContext(this.gl)}getExtensions(){let{gl:e}=this,i={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc"),rgtc:e.getExtension("EXT_texture_compression_rgtc"),loseContext:e.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions={...i,drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:e.getExtension("ANGLE_instanced_arrays"),srgb:e.getExtension("EXT_sRGB")};else{this.extensions={...i,colorBufferFloat:e.getExtension("EXT_color_buffer_float")};let r=e.getExtension("WEBGL_provoking_vertex");r&&r.provokingVertexWEBGL(r.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(e){e.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{var i;this.gl.isContextLost()&&((i=this.extensions.loseContext)==null||i.restoreContext())},0))}handleContextRestored(){this._renderer.runners.contextChange.emit(this.gl)}destroy(){var i;let e=this._renderer.view.canvas;this._renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),(i=this.extensions.loseContext)==null||i.loseContext()}forceContextLoss(){var e;(e=this.extensions.loseContext)==null||e.loseContext(),this._contextLossForced=!0}validateContext(e){let i=e.getContextAttributes();i&&!i.stencil&&Le("Provided WebGL context does not have a stencil buffer, masks may not render correctly");let r=this.supports,s=this.webGLVersion===2,a=this.extensions;r.uint32Indices=s||!!a.uint32ElementIndex,r.uniformBufferObject=s,r.vertexArrayObject=s||!!a.vertexArrayObject,r.srgbTextures=s||!!a.srgb,r.nonPowOf2wrapping=s,r.nonPowOf2mipmaps=s,r.msaa=s,r.uint32Indices||Le("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}},bp.extension={type:[I.WebGLSystem],name:"context"},bp.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1},JA=bp}),Ch,yg,x2,ut,eE=b(()=>{Ch=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(Ch||{}),yg=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(yg||{}),x2=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(x2||{}),ut=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(ut||{})});function NI(t){return T2[t]??T2.float32}var T2,HI=b(()=>{eE(),T2={uint8x2:ut.UNSIGNED_BYTE,uint8x4:ut.UNSIGNED_BYTE,sint8x2:ut.BYTE,sint8x4:ut.BYTE,unorm8x2:ut.UNSIGNED_BYTE,unorm8x4:ut.UNSIGNED_BYTE,snorm8x2:ut.BYTE,snorm8x4:ut.BYTE,uint16x2:ut.UNSIGNED_SHORT,uint16x4:ut.UNSIGNED_SHORT,sint16x2:ut.SHORT,sint16x4:ut.SHORT,unorm16x2:ut.UNSIGNED_SHORT,unorm16x4:ut.UNSIGNED_SHORT,snorm16x2:ut.SHORT,snorm16x4:ut.SHORT,float16x2:ut.HALF_FLOAT,float16x4:ut.HALF_FLOAT,float32:ut.FLOAT,float32x2:ut.FLOAT,float32x3:ut.FLOAT,float32x4:ut.FLOAT,uint32:ut.UNSIGNED_INT,uint32x2:ut.UNSIGNED_INT,uint32x3:ut.UNSIGNED_INT,uint32x4:ut.UNSIGNED_INT,sint32:ut.INT,sint32x2:ut.INT,sint32x3:ut.INT,sint32x4:ut.INT}}),jB,_g,VI=b(()=>{$(),Ao(),HA(),HI(),jB={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5},_g=class{constructor(t){this._geometryVaoHash=Object.create(null),this._renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){let t=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");let e=this._renderer.context.extensions.vertexArrayObject;e&&(t.createVertexArray=()=>e.createVertexArrayOES(),t.bindVertexArray=r=>e.bindVertexArrayOES(r),t.deleteVertexArray=r=>e.deleteVertexArrayOES(r));let i=this._renderer.context.extensions.vertexAttribDivisorANGLE;i&&(t.drawArraysInstanced=(r,s,a,l)=>{i.drawArraysInstancedANGLE(r,s,a,l)},t.drawElementsInstanced=(r,s,a,l,c)=>{i.drawElementsInstancedANGLE(r,s,a,l,c)},t.vertexAttribDivisor=(r,s)=>i.vertexAttribDivisorANGLE(r,s)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(t,e){let i=this.gl;this._activeGeometry=t;let r=this.getVao(t,e);this._activeVao!==r&&(this._activeVao=r,i.bindVertexArray(r)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){let t=this._activeGeometry,e=this._renderer.buffer;for(let i=0;i<t.buffers.length;i++){let r=t.buffers[i];e.updateBuffer(r)}}checkCompatibility(t,e){let i=t.attributes,r=e._attributeData;for(let s in r)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,e){let i=t.attributes,r=e._attributeData,s=["g",t.uid];for(let a in i)r[a]&&s.push(a,r[a].location);return s.join("-")}getVao(t,e){var i;return((i=this._geometryVaoHash[t.uid])==null?void 0:i[e._key])||this.initGeometryVao(t,e)}initGeometryVao(t,e,i=!0){let r=this._renderer.gl,s=this._renderer.buffer;this._renderer.shader._getProgramData(e),this.checkCompatibility(t,e);let a=this.getSignature(t,e);this._geometryVaoHash[t.uid]||(this._geometryVaoHash[t.uid]=Object.create(null),t.on("destroy",this.onGeometryDestroy,this));let l=this._geometryVaoHash[t.uid],c=l[a];if(c)return l[e._key]=c,c;NA(t,e._attributeData);let h=t.buffers;c=r.createVertexArray(),r.bindVertexArray(c);for(let f=0;f<h.length;f++){let p=h[f];s.bind(p)}return this.activateVao(t,e),l[e._key]=c,l[a]=c,r.bindVertexArray(null),c}onGeometryDestroy(t,e){let i=this._geometryVaoHash[t.uid],r=this.gl;if(i){if(e)for(let s in i)this._activeVao!==i[s]&&this.unbind(),r.deleteVertexArray(i[s]);this._geometryVaoHash[t.uid]=null}}destroyAll(t=!1){let e=this.gl;for(let i in this._geometryVaoHash){if(t)for(let r in this._geometryVaoHash[i]){let s=this._geometryVaoHash[i];this._activeVao!==s&&this.unbind(),e.deleteVertexArray(s[r])}this._geometryVaoHash[i]=null}}activateVao(t,e){var l;let i=this._renderer.gl,r=this._renderer.buffer,s=t.attributes;t.indexBuffer&&r.bind(t.indexBuffer);let a=null;for(let c in s){let h=s[c],f=h.buffer,p=r.getGlBuffer(f),g=e._attributeData[c];if(g){a!==p&&(r.bind(f),a=p);let y=g.location;i.enableVertexAttribArray(y);let v=mn(h.format),x=NI(h.format);if(((l=g.format)==null?void 0:l.substring(1,4))==="int"?i.vertexAttribIPointer(y,v.size,x,h.stride,h.offset):i.vertexAttribPointer(y,v.size,x,v.normalised,h.stride,h.offset),h.instance)if(this.hasInstance){let A=h.divisor??1;i.vertexAttribDivisor(y,A)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,r){let{gl:s}=this._renderer,a=this._activeGeometry,l=jB[t||a.topology];if(r??(r=a.instanceCount),a.indexBuffer){let c=a.indexBuffer.data.BYTES_PER_ELEMENT,h=c===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;r>1?s.drawElementsInstanced(l,e||a.indexBuffer.data.length,h,(i||0)*c,r):s.drawElements(l,e||a.indexBuffer.data.length,h,(i||0)*c)}else r>1?s.drawArraysInstanced(l,i||0,e||a.getSize(),r):s.drawArrays(l,i||0,e||a.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}},_g.extension={type:[I.WebGLSystem],name:"geometry"}}),qB,xp,tE,zI=b(()=>{$(),dt(),So(),fs(),Wr(),Li(),tt(),xr(),qB=new ca({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),xp=class XI{constructor(e){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=e}init(e={}){let{useBackBuffer:i,antialias:r}={...XI.defaultOptions,...e};this.useBackBuffer=i,this._antialias=r,this._renderer.context.supports.msaa||(Le("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=ar.for2d();let s=new lr({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new qr({glProgram:s,resources:{uTexture:ve.WHITE.source}})}renderStart(e){let i=this._renderer.renderTarget.getRenderTarget(e.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!i.isRoot,this._useBackBufferThisRender){let r=this._renderer.renderTarget.getRenderTarget(e.target);this._targetTexture=r.colorTexture,e.target=this._getBackBufferTexture(r.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){let e=this._renderer;e.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(e.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,e.encoder.draw({geometry:qB,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(e){return this._backBufferTexture=this._backBufferTexture||new ve({source:new Yt({width:e.width,height:e.height,resolution:e._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(e.width,e.height,e._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}},xp.extension={type:[I.WebGLSystem],name:"backBuffer",priority:1},xp.defaultOptions={useBackBuffer:!1},tE=xp}),vg,YI=b(()=>{$(),vg=class{constructor(t){this._colorMaskCache=15,this._renderer=t}setMask(t){this._colorMaskCache!==t&&(this._colorMaskCache=t,this._renderer.gl.colorMask(!!(t&8),!!(t&4),!!(t&2),!!(t&1)))}},vg.extension={type:[I.WebGLSystem],name:"colorMask"}}),bg,jI=b(()=>{$(),bg=class{constructor(t){this.commandFinished=Promise.resolve(),this._renderer=t}setGeometry(t,e){this._renderer.geometry.bind(t,e.glProgram)}finishRenderPass(){}draw(t){let e=this._renderer,{geometry:i,shader:r,state:s,skipSync:a,topology:l,size:c,start:h,instanceCount:f}=t;e.shader.bind(r,a),e.geometry.bind(i,e.shader._activeProgram),s&&e.state.set(s),e.geometry.draw(l,c,h,f??i.instanceCount)}destroy(){this._renderer=null}},bg.extension={type:[I.WebGLSystem],name:"encoder"}}),xg,qI=b(()=>{$(),VA(),To(),xg=class{constructor(t){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:Ht.NONE},this._renderTargetStencilState=Object.create(null),t.renderTarget.onRenderTargetChange.add(this)}contextChange(t){this._gl=t,this._comparisonFuncMapping={always:t.ALWAYS,never:t.NEVER,equal:t.EQUAL,"not-equal":t.NOTEQUAL,less:t.LESS,"less-equal":t.LEQUAL,greater:t.GREATER,"greater-equal":t.GEQUAL},this._stencilOpsMapping={keep:t.KEEP,zero:t.ZERO,replace:t.REPLACE,invert:t.INVERT,"increment-clamp":t.INCR,"decrement-clamp":t.DECR,"increment-wrap":t.INCR_WRAP,"decrement-wrap":t.DECR_WRAP},this.resetState()}onRenderTargetChange(t){if(this._activeRenderTarget===t)return;this._activeRenderTarget=t;let e=this._renderTargetStencilState[t.uid];e||(e=this._renderTargetStencilState[t.uid]={stencilMode:Ht.DISABLED,stencilReference:0}),this.setStencilMode(e.stencilMode,e.stencilReference)}resetState(){this._stencilCache.enabled=!1,this._stencilCache.stencilMode=Ht.NONE,this._stencilCache.stencilReference=0}setStencilMode(t,e){let i=this._renderTargetStencilState[this._activeRenderTarget.uid],r=this._gl,s=As[t],a=this._stencilCache;if(i.stencilMode=t,i.stencilReference=e,t===Ht.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,r.disable(r.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,r.enable(r.STENCIL_TEST)),(t!==a.stencilMode||a.stencilReference!==e)&&(a.stencilMode=t,a.stencilReference=e,r.stencilFunc(this._comparisonFuncMapping[s.stencilBack.compare],e,255),r.stencilOp(r.KEEP,r.KEEP,this._stencilOpsMapping[s.stencilBack.passOp]))}},xg.extension={type:[I.WebGLSystem],name:"stencil"}});function WI(t){let e=t.map(a=>({data:a,offset:0,size:0})),i=16,r=0,s=0;for(let a=0;a<e.length;a++){let l=e[a];if(r=Jy[l.data.type],!r)throw new Error(`Unknown type ${l.data.type}`);l.data.size>1&&(r=Math.max(r,i)*l.data.size);let c=r===12?16:r;l.size=r;let h=s%i;h>0&&i-h<c?s+=(i-h)%16:s+=(r-h%r)%r,l.offset=s,s+=r}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}var Jy,iE=b(()=>{Jy={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64}});function KI(t,e){let i=Math.max(Jy[t.data.type]/16,1),r=t.data.value.length/t.data.size,s=(4-r%4)%4,a=t.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
        v = uv.${t.data.name};
        offset += ${e};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${t.data.size*i}; i++)
        {
            for(var j = 0; j < ${r}; j++)
            {
                ${a}[arrayOffset++] = v[t++];
            }
            ${s!==0?`arrayOffset += ${s};`:""}
        }
    `}var $I=b(()=>{iE()});function ZI(t){return GA(t,"uboStd40",KI,sg)}var QI=b(()=>{LA(),IA(),$I()}),Tg,JI=b(()=>{$(),DA(),iE(),QI(),Tg=class extends Ky{constructor(){super({createUboElements:WI,generateUboSync:ZI})}},Tg.extension={type:[I.WebGLSystem],name:"ubo"}}),rE,eU=b(()=>{rE=class{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}}),sE,tU=b(()=>{ci(),dt(),ou(),_u(),eU(),sE=class{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new wt}init(t,e){this._renderer=t,this._renderTargetSystem=e,t.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new wt}copyToTexture(t,e,i,r,s){let a=this._renderTargetSystem,l=this._renderer,c=a.getGpuRenderTarget(t),h=l.gl;return this.finishRenderPass(t),h.bindFramebuffer(h.FRAMEBUFFER,c.resolveTargetFramebuffer),l.texture.bind(e,0),h.copyTexSubImage2D(h.TEXTURE_2D,0,s.x,s.y,i.x,i.y,r.width,r.height),e}startRenderPass(t,e=!0,i,r){let s=this._renderTargetSystem,a=t.colorTexture,l=s.getGpuRenderTarget(t),c=r.y;t.isRoot&&(c=a.pixelHeight-r.height),t.colorTextures.forEach(p=>{this._renderer.texture.unbind(p)});let h=this._renderer.gl;h.bindFramebuffer(h.FRAMEBUFFER,l.framebuffer);let f=this._viewPortCache;(f.x!==r.x||f.y!==c||f.width!==r.width||f.height!==r.height)&&(f.x=r.x,f.y=c,f.width=r.width,f.height=r.height,h.viewport(r.x,c,r.width,r.height)),!l.depthStencilRenderBuffer&&(t.stencil||t.depth)&&this._initStencil(l),this.clear(t,e,i)}finishRenderPass(t){let e=this._renderTargetSystem.getGpuRenderTarget(t);if(!e.msaa)return;let i=this._renderer.gl;i.bindFramebuffer(i.FRAMEBUFFER,e.resolveTargetFramebuffer),i.bindFramebuffer(i.READ_FRAMEBUFFER,e.framebuffer),i.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,i.COLOR_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,e.framebuffer)}initGpuRenderTarget(t){let e=this._renderer.gl,i=new rE,r=t.colorTexture;return ls.test(r.resource)?(this._renderer.context.ensureCanvasSize(t.colorTexture.resource),i.framebuffer=null,i):(this._initColor(t,i),e.bindFramebuffer(e.FRAMEBUFFER,null),i)}destroyGpuRenderTarget(t){let e=this._renderer.gl;t.framebuffer&&(e.deleteFramebuffer(t.framebuffer),t.framebuffer=null),t.resolveTargetFramebuffer&&(e.deleteFramebuffer(t.resolveTargetFramebuffer),t.resolveTargetFramebuffer=null),t.depthStencilRenderBuffer&&(e.deleteRenderbuffer(t.depthStencilRenderBuffer),t.depthStencilRenderBuffer=null),t.msaaRenderBuffer.forEach(i=>{e.deleteRenderbuffer(i)}),t.msaaRenderBuffer=null}clear(t,e,i){if(!e)return;let r=this._renderTargetSystem;typeof e=="boolean"&&(e=e?Qi.ALL:Qi.NONE);let s=this._renderer.gl;if(e&Qi.COLOR){i??(i=r.defaultClearColor);let a=this._clearColorCache,l=i;(a[0]!==l[0]||a[1]!==l[1]||a[2]!==l[2]||a[3]!==l[3])&&(a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],s.clearColor(l[0],l[1],l[2],l[3]))}s.clear(e)}resizeGpuRenderTarget(t){if(t.isRoot)return;let e=this._renderTargetSystem.getGpuRenderTarget(t);this._resizeColor(t,e),(t.stencil||t.depth)&&this._resizeStencil(e)}_initColor(t,e){let i=this._renderer,r=i.gl,s=r.createFramebuffer();if(e.resolveTargetFramebuffer=s,r.bindFramebuffer(r.FRAMEBUFFER,s),e.width=t.colorTexture.source.pixelWidth,e.height=t.colorTexture.source.pixelHeight,t.colorTextures.forEach((a,l)=>{let c=a.source;c.antialias&&(i.context.supports.msaa?e.msaa=!0:Le("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),i.texture.bindSource(c,0);let h=i.texture.getGlSource(c).texture;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l,3553,h,0)}),e.msaa){let a=r.createFramebuffer();e.framebuffer=a,r.bindFramebuffer(r.FRAMEBUFFER,a),t.colorTextures.forEach((l,c)=>{let h=r.createRenderbuffer();e.msaaRenderBuffer[c]=h})}else e.framebuffer=s;this._resizeColor(t,e)}_resizeColor(t,e){let i=t.colorTexture.source;if(e.width=i.pixelWidth,e.height=i.pixelHeight,t.colorTextures.forEach((r,s)=>{s!==0&&r.source.resize(i.width,i.height,i._resolution)}),e.msaa){let r=this._renderer,s=r.gl,a=e.framebuffer;s.bindFramebuffer(s.FRAMEBUFFER,a),t.colorTextures.forEach((l,c)=>{let h=l.source;r.texture.bindSource(h,0);let f=r.texture.getGlSource(h).internalFormat,p=e.msaaRenderBuffer[c];s.bindRenderbuffer(s.RENDERBUFFER,p),s.renderbufferStorageMultisample(s.RENDERBUFFER,4,f,h.pixelWidth,h.pixelHeight),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+c,s.RENDERBUFFER,p)})}}_initStencil(t){if(t.framebuffer===null)return;let e=this._renderer.gl,i=e.createRenderbuffer();t.depthStencilRenderBuffer=i,e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i),this._resizeStencil(t)}_resizeStencil(t){let e=this._renderer.gl;e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilRenderBuffer),t.msaa?e.renderbufferStorageMultisample(e.RENDERBUFFER,4,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,this._renderer.context.webGLVersion===2?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL,t.width,t.height)}prerender(t){let e=t.colorTexture.resource;this._renderer.context.multiView&&ls.test(e)&&this._renderer.context.ensureCanvasSize(e)}postrender(t){if(this._renderer.context.multiView&&ls.test(t.colorTexture.resource)){let e=this._renderer.context.canvas,i=t.colorTexture;i.context2D.drawImage(e,0,i.pixelHeight-e.height)}}}}),Sg,iU=b(()=>{$(),zA(),tU(),Sg=class extends Zy{constructor(t){super(t),this.adaptor=new sE,this.adaptor.init(t,this)}},Sg.extension={type:[I.WebGLSystem],name:"renderTarget"}});function rU(t,e){let i=[],r=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `],s=!1,a=0,l=e._getProgramData(t.glProgram);for(let h in t.groups){let f=t.groups[h];i.push(`
            resources = g[${h}].resources;
        `);for(let p in f.resources){let g=f.resources[p];if(g instanceof ei)if(g.ubo){let y=t._uniformBindMap[h][Number(p)];i.push(`
                        sS.bindUniformBlock(
                            resources[${p}],
                            '${y}',
                            ${t.glProgram._uniformBlockData[y].index}
                        );
                    `)}else i.push(`
                        ugS.updateUniformGroup(resources[${p}], p, sD);
                    `);else if(g instanceof pd){let y=t._uniformBindMap[h][Number(p)];i.push(`
                    sS.bindUniformBlock(
                        resources[${p}],
                        '${y}',
                        ${t.glProgram._uniformBlockData[y].index}
                    );
                `)}else if(g instanceof Yt){let y=t._uniformBindMap[h][p],v=l.uniformData[y];v&&(s||(s=!0,r.push(`
                        var tS = r.texture;
                        `)),e._gl.uniform1i(v.location,a),i.push(`
                        tS.bind(resources[${p}], ${a});
                    `),a++)}}}let c=[...r,...i].join(`
`);return new Function("r","s","sD",c)}var sU=b(()=>{$y(),hi(),Li()}),nU,nE,aU=b(()=>{nU=class{},nE=class{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}});function S2(t,e,i){let r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),r}var oU=b(()=>{});function p0(t){let e=new Array(t);for(let i=0;i<e.length;i++)e[i]=!1;return e}function aE(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return p0(2*e);case"bvec3":return p0(3*e);case"bvec4":return p0(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var oE=b(()=>{});function lE(t,e){if(!Kc){let i=Object.keys(A2);Kc={};for(let r=0;r<i.length;++r){let s=i[r];Kc[t[s]]=A2[s]}}return Kc[e]}function lU(t,e){let i=lE(t,e);return uU[i]||"float32"}var Kc,A2,uU,uE=b(()=>{Kc=null,A2={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},uU={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"}});function cU(t,e,i=!1){let r={},s=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let l=0;l<s;l++){let c=e.getActiveAttrib(t,l);if(c.name.startsWith("gl_"))continue;let h=lU(e,c.type);r[c.name]={location:0,format:h,stride:mn(h).stride,offset:0,instance:!1,start:0}}let a=Object.keys(r);if(i){a.sort((l,c)=>l>c?1:-1);for(let l=0;l<a.length;l++)r[a[l]].location=l,e.bindAttribLocation(t,l,a[l]);e.linkProgram(t)}else for(let l=0;l<a.length;l++)r[a[l]].location=e.getAttribLocation(t,a[l]);return r}var hU=b(()=>{Ao(),uE()});function dU(t,e){if(!e.ACTIVE_UNIFORM_BLOCKS)return{};let i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS);for(let s=0;s<r;s++){let a=e.getActiveUniformBlockName(t,s),l=e.getUniformBlockIndex(t,a),c=e.getActiveUniformBlockParameter(t,s,e.UNIFORM_BLOCK_DATA_SIZE);i[a]={name:a,index:l,size:c}}return i}var fU=b(()=>{});function pU(t,e){let i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<r;s++){let a=e.getActiveUniform(t,s),l=a.name.replace(/\[.*?\]$/,""),c=!!a.name.match(/\[.*?\]$/),h=lE(e,a.type);i[l]={name:l,index:s,type:h,size:a.size,isArray:c,value:aE(h,a.size)}}return i}var mU=b(()=>{oE(),uE()});function WB(t,e){let i=t.getShaderSource(e).split(`
`).map((f,p)=>`${p}: ${f}`),r=t.getShaderInfoLog(e),s=r.split(`
`),a={},l=s.map(f=>parseFloat(f.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(f=>f&&!a[f]?(a[f]=!0,!0):!1),c=[""];l.forEach(f=>{i[f-1]=`%c${i[f-1]}%c`,c.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let h=i.join(`
`);c[0]=h,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...c),console.groupEnd()}function gU(t,e,i,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||WB(t,i),t.getShaderParameter(r,t.COMPILE_STATUS)||WB(t,r),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}var yU=b(()=>{});function _U(t,e){let i=S2(t,t.VERTEX_SHADER,e.vertex),r=S2(t,t.FRAGMENT_SHADER,e.fragment),s=t.createProgram();t.attachShader(s,i),t.attachShader(s,r);let a=e.transformFeedbackVaryings;a&&(typeof t.transformFeedbackVaryings!="function"?Le("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(s,a.names,a.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||gU(t,s,i,r),e._attributeData=cU(s,t,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertex)),e._uniformData=pU(s,t),e._uniformBlockData=dU(s,t),t.deleteShader(i),t.deleteShader(r);let l={};for(let c in e._uniformData){let h=e._uniformData[c];l[c]={location:t.getUniformLocation(s,c),value:aE(h.type,h.size)}}return new nE(s,l)}var vU=b(()=>{dt(),aU(),oU(),oE(),hU(),fU(),mU(),yU()}),Lc,Ag,bU=b(()=>{$(),xo(),sU(),vU(),Lc={textureCount:0,blockIndex:0},Ag=class{constructor(t){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(t){this._gl=t,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null,this.maxTextures=bo()}bind(t,e){if(this._setProgram(t.glProgram),e)return;Lc.textureCount=0,Lc.blockIndex=0;let i=this._shaderSyncFunctions[t.glProgram._key];i||(i=this._shaderSyncFunctions[t.glProgram._key]=this._generateShaderSync(t,this)),this._renderer.buffer.nextBindBase(!!t.glProgram.transformFeedbackVaryings),i(this._renderer,t,Lc)}updateUniformGroup(t){this._renderer.uniformGroup.updateUniformGroup(t,this._activeProgram,Lc)}bindUniformBlock(t,e,i=0){let r=this._renderer.buffer,s=this._getProgramData(this._activeProgram),a=t._bufferResource;a||this._renderer.ubo.updateUniformGroup(t);let l=t.buffer,c=r.updateBuffer(l),h=r.freeLocationForBufferBase(c);if(a){let{offset:p,size:g}=t;p===0&&g===l.data.byteLength?r.bindBufferBase(c,h):r.bindBufferRange(c,h,p)}else r.getLastBindBaseLocation(c)!==h&&r.bindBufferBase(c,h);let f=this._activeProgram._uniformBlockData[e].index;s.uniformBlockBindings[i]!==h&&(s.uniformBlockBindings[i]=h,this._renderer.gl.uniformBlockBinding(s.program,f,h))}_setProgram(t){if(this._activeProgram===t)return;this._activeProgram=t;let e=this._getProgramData(t);this._gl.useProgram(e.program)}_getProgramData(t){return this._programDataHash[t._key]||this._createProgramData(t)}_createProgramData(t){let e=t._key;return this._programDataHash[e]=_U(this._gl,t),this._programDataHash[e]}destroy(){for(let t of Object.keys(this._programDataHash))this._programDataHash[t].destroy(),this._programDataHash[t]=null;this._programDataHash=null}_generateShaderSync(t,e){return rU(t,e)}resetState(){this._activeProgram=null}},Ag.extension={type:[I.WebGLSystem],name:"shader"}}),cE,hE,xU=b(()=>{cE={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},hE={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"}});function TU(t,e){let i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(let r in t.uniforms){if(!e[r]){t.uniforms[r]instanceof ei?t.uniforms[r].ubo?i.push(`
                        renderer.shader.bindUniformBlock(uv.${r}, "${r}");
                    `):i.push(`
                        renderer.shader.updateUniformGroup(uv.${r});
                    `):t.uniforms[r]instanceof pd&&i.push(`
                        renderer.shader.bindBufferResource(uv.${r}, "${r}");
                    `);continue}let s=t.uniformStructures[r],a=!1;for(let l=0;l<un.length;l++){let c=un[l];if(s.type===c.type&&c.test(s)){i.push(`name = "${r}";`,un[l].uniform),a=!0;break}}if(!a){let l=(s.size===1?cE:hE)[s.type].replace("location",`ud["${r}"].location`);i.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}var SU=b(()=>{$y(),hi(),FA(),xU()}),Eg,AU=b(()=>{$(),SU(),Eg=class{constructor(t){this._cache={},this._uniformGroupSyncHash={},this._renderer=t,this.gl=null,this._cache={}}contextChange(t){this.gl=t}updateUniformGroup(t,e,i){let r=this._renderer.shader._getProgramData(e);(!t.isStatic||t._dirtyId!==r.uniformDirtyGroups[t.uid])&&(r.uniformDirtyGroups[t.uid]=t._dirtyId,this._getUniformSyncFunction(t,e)(r.uniformData,t.uniforms,this._renderer,i))}_getUniformSyncFunction(t,e){var i;return((i=this._uniformGroupSyncHash[t._signature])==null?void 0:i[e._key])||this._createUniformSyncFunction(t,e)}_createUniformSyncFunction(t,e){let i=this._uniformGroupSyncHash[t._signature]||(this._uniformGroupSyncHash[t._signature]={}),r=this._getSignature(t,e._uniformData,"u");return this._cache[r]||(this._cache[r]=this._generateUniformsSync(t,e._uniformData)),i[e._key]=this._cache[r],i[e._key]}_generateUniformsSync(t,e){return TU(t,e)}_getSignature(t,e,i){let r=t.uniforms,s=[`${i}-`];for(let a in r)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")}destroy(){this._renderer=null,this._cache=null}},Eg.extension={type:[I.WebGLSystem],name:"uniformGroup"}});function EU(t){let e={};if(e.normal=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.add=[t.ONE,t.ONE],e.multiply=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.screen=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.none=[0,0],e["normal-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e["add-npm"]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e["screen-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.erase=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],!(t instanceof et.get().getWebGLRenderingContext()))e.min=[t.ONE,t.ONE,t.ONE,t.ONE,t.MIN,t.MIN],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,t.MAX,t.MAX];else{let i=t.getExtension("EXT_blend_minmax");i&&(e.min=[t.ONE,t.ONE,t.ONE,t.ONE,i.MIN_EXT,i.MIN_EXT],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,i.MAX_EXT,i.MAX_EXT])}return e}var wU=b(()=>{Ct()}),KB,$B,ZB,QB,JB,eP,m0,dE,CU=b(()=>{$(),Wr(),wU(),KB=0,$B=1,ZB=2,QB=3,JB=4,eP=5,m0=class E2{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[KB]=this.setBlend,this.map[$B]=this.setOffset,this.map[ZB]=this.setCullFace,this.map[QB]=this.setDepthTest,this.map[JB]=this.setFrontFace,this.map[eP]=this.setDepthMask,this.checks=[],this.defaultState=ar.for2d()}contextChange(e){this.gl=e,this.blendModesMap=EU(e),this.resetState()}set(e){if(e||(e=this.defaultState),this.stateId!==e.data){let i=this.stateId^e.data,r=0;for(;i;)i&1&&this.map[r].call(this,!!(e.data&1<<r)),i>>=1,r++;this.stateId=e.data}for(let i=0;i<this.checks.length;i++)this.checks[i](this,e)}forceState(e){e||(e=this.defaultState);for(let i=0;i<this.map.length;i++)this.map[i].call(this,!!(e.data&1<<i));for(let i=0;i<this.checks.length;i++)this.checks[i](this,e);this.stateId=e.data}setBlend(e){this._updateCheck(E2._checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this._updateCheck(E2._checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(this.blendModesMap[e]||(e="normal"),e===this.blendMode)return;this.blendMode=e;let i=this.blendModesMap[e],r=this.gl;i.length===2?r.blendFunc(i[0],i[1]):r.blendFuncSeparate(i[0],i[1],i[2],i[3]),i.length===6?(this._blendEq=!0,r.blendEquationSeparate(i[4],i[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,i){this.gl.polygonOffset(e,i)}resetState(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(e,i){let r=this.checks.indexOf(e);i&&r===-1?this.checks.push(e):!i&&r!==-1&&this.checks.splice(r,1)}static _checkBlendMode(e,i){e.setBlendMode(i.blendMode)}static _checkPolygonOffset(e,i){e.setPolygonOffset(1,i.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}},m0.extension={type:[I.WebGLSystem],name:"state"},dE=m0}),fE,RU=b(()=>{eE(),fE=class{constructor(t){this.target=yg.TEXTURE_2D,this.texture=t,this.width=-1,this.height=-1,this.type=ut.UNSIGNED_BYTE,this.internalFormat=Ch.RGBA,this.format=Ch.RGBA,this.samplerType=0}}}),pE,MU=b(()=>{pE={id:"buffer",upload(t,e,i){e.width===t.width||e.height===t.height?i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.width,t.height,e.format,e.type,t.resource):i.texImage2D(e.target,0,e.internalFormat,t.width,t.height,0,e.format,e.type,t.resource),e.width=t.width,e.height=t.height}}}),tP,mE,BU=b(()=>{tP={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},mE={id:"compressed",upload(t,e,i){i.pixelStorei(i.UNPACK_ALIGNMENT,4);let r=t.pixelWidth,s=t.pixelHeight,a=!!tP[t.format];for(let l=0;l<t.resource.length;l++){let c=t.resource[l];a?i.compressedTexImage2D(i.TEXTURE_2D,l,e.internalFormat,r,s,0,c):i.texImage2D(i.TEXTURE_2D,l,e.internalFormat,r,s,0,e.format,e.type,c),r=Math.max(r>>1,1),s=Math.max(s>>1,1)}}}}),e_,gE=b(()=>{e_={id:"image",upload(t,e,i,r){let s=e.width,a=e.height,l=t.pixelWidth,c=t.pixelHeight,h=t.resourceWidth,f=t.resourceHeight;h<l||f<c?((s!==l||a!==c)&&i.texImage2D(e.target,0,e.internalFormat,l,c,0,e.format,e.type,null),r===2?i.texSubImage2D(i.TEXTURE_2D,0,0,0,h,f,e.format,e.type,t.resource):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,e.type,t.resource)):s===l&&a===c?i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,e.type,t.resource):r===2?i.texImage2D(e.target,0,e.internalFormat,l,c,0,e.format,e.type,t.resource):i.texImage2D(e.target,0,e.internalFormat,e.format,e.type,t.resource),e.width=l,e.height=c}}}),yE,PU=b(()=>{gE(),yE={id:"video",upload(t,e,i,r){if(!t.isValid){i.texImage2D(e.target,0,e.internalFormat,1,1,0,e.format,e.type,null);return}e_.upload(t,e,i,r)}}}),wg,_E,oh,vE,DU=b(()=>{wg={linear:9729,nearest:9728},_E={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},oh={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},vE={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519}});function w2(t,e,i,r,s,a,l,c){let h=a;if(!c||t.addressModeU!=="repeat"||t.addressModeV!=="repeat"||t.addressModeW!=="repeat"){let f=oh[l?"clamp-to-edge":t.addressModeU],p=oh[l?"clamp-to-edge":t.addressModeV],g=oh[l?"clamp-to-edge":t.addressModeW];e[s](h,e.TEXTURE_WRAP_S,f),e[s](h,e.TEXTURE_WRAP_T,p),e.TEXTURE_WRAP_R&&e[s](h,e.TEXTURE_WRAP_R,g)}if((!c||t.magFilter!=="linear")&&e[s](h,e.TEXTURE_MAG_FILTER,wg[t.magFilter]),i){if(!c||t.mipmapFilter!=="linear"){let f=_E[t.minFilter][t.mipmapFilter];e[s](h,e.TEXTURE_MIN_FILTER,f)}}else e[s](h,e.TEXTURE_MIN_FILTER,wg[t.minFilter]);if(r&&t.maxAnisotropy>1){let f=Math.min(t.maxAnisotropy,e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e[s](h,r.TEXTURE_MAX_ANISOTROPY_EXT,f)}t.compare&&e[s](h,e.TEXTURE_COMPARE_FUNC,vE[t.compare])}var OU=b(()=>{DU()});function FU(t){return{r8unorm:t.RED,r8snorm:t.RED,r8uint:t.RED,r8sint:t.RED,r16uint:t.RED,r16sint:t.RED,r16float:t.RED,rg8unorm:t.RG,rg8snorm:t.RG,rg8uint:t.RG,rg8sint:t.RG,r32uint:t.RED,r32sint:t.RED,r32float:t.RED,rg16uint:t.RG,rg16sint:t.RG,rg16float:t.RG,rgba8unorm:t.RGBA,"rgba8unorm-srgb":t.RGBA,rgba8snorm:t.RGBA,rgba8uint:t.RGBA,rgba8sint:t.RGBA,bgra8unorm:t.RGBA,"bgra8unorm-srgb":t.RGBA,rgb9e5ufloat:t.RGB,rgb10a2unorm:t.RGBA,rg11b10ufloat:t.RGB,rg32uint:t.RG,rg32sint:t.RG,rg32float:t.RG,rgba16uint:t.RGBA,rgba16sint:t.RGBA,rgba16float:t.RGBA,rgba32uint:t.RGBA,rgba32sint:t.RGBA,rgba32float:t.RGBA,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT,depth24plus:t.DEPTH_COMPONENT,"depth24plus-stencil8":t.DEPTH_STENCIL,depth32float:t.DEPTH_COMPONENT,"depth32float-stencil8":t.DEPTH_STENCIL}}var GU=b(()=>{});function LU(t,e){let i={},r=t.RGBA;return t instanceof et.get().getWebGLRenderingContext()?e.srgb&&(i={"rgba8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT}):(i={"rgba8unorm-srgb":t.SRGB8_ALPHA8,"bgra8unorm-srgb":t.SRGB8_ALPHA8},r=t.RGBA8),{r8unorm:t.R8,r8snorm:t.R8_SNORM,r8uint:t.R8UI,r8sint:t.R8I,r16uint:t.R16UI,r16sint:t.R16I,r16float:t.R16F,rg8unorm:t.RG8,rg8snorm:t.RG8_SNORM,rg8uint:t.RG8UI,rg8sint:t.RG8I,r32uint:t.R32UI,r32sint:t.R32I,r32float:t.R32F,rg16uint:t.RG16UI,rg16sint:t.RG16I,rg16float:t.RG16F,rgba8unorm:t.RGBA,...i,rgba8snorm:t.RGBA8_SNORM,rgba8uint:t.RGBA8UI,rgba8sint:t.RGBA8I,bgra8unorm:r,rgb9e5ufloat:t.RGB9_E5,rgb10a2unorm:t.RGB10_A2,rg11b10ufloat:t.R11F_G11F_B10F,rg32uint:t.RG32UI,rg32sint:t.RG32I,rg32float:t.RG32F,rgba16uint:t.RGBA16UI,rgba16sint:t.RGBA16I,rgba16float:t.RGBA16F,rgba32uint:t.RGBA32UI,rgba32sint:t.RGBA32I,rgba32float:t.RGBA32F,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT16,depth24plus:t.DEPTH_COMPONENT24,"depth24plus-stencil8":t.DEPTH24_STENCIL8,depth32float:t.DEPTH_COMPONENT32F,"depth32float-stencil8":t.DEPTH32F_STENCIL8,...e.s3tc?{"bc1-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...e.s3tc_sRGB?{"bc1-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...e.rgtc?{"bc4-r-unorm":e.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":e.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":e.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":e.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...e.bptc?{"bc6h-rgb-float":e.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":e.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":e.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":e.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...e.etc?{"etc2-rgb8unorm":e.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":e.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":e.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":e.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":e.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":e.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":e.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":e.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...e.astc?{"astc-4x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}var kU=b(()=>{Ct()});function IU(t){return{r8unorm:t.UNSIGNED_BYTE,r8snorm:t.BYTE,r8uint:t.UNSIGNED_BYTE,r8sint:t.BYTE,r16uint:t.UNSIGNED_SHORT,r16sint:t.SHORT,r16float:t.HALF_FLOAT,rg8unorm:t.UNSIGNED_BYTE,rg8snorm:t.BYTE,rg8uint:t.UNSIGNED_BYTE,rg8sint:t.BYTE,r32uint:t.UNSIGNED_INT,r32sint:t.INT,r32float:t.FLOAT,rg16uint:t.UNSIGNED_SHORT,rg16sint:t.SHORT,rg16float:t.HALF_FLOAT,rgba8unorm:t.UNSIGNED_BYTE,"rgba8unorm-srgb":t.UNSIGNED_BYTE,rgba8snorm:t.BYTE,rgba8uint:t.UNSIGNED_BYTE,rgba8sint:t.BYTE,bgra8unorm:t.UNSIGNED_BYTE,"bgra8unorm-srgb":t.UNSIGNED_BYTE,rgb9e5ufloat:t.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:t.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:t.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:t.UNSIGNED_INT,rg32sint:t.INT,rg32float:t.FLOAT,rgba16uint:t.UNSIGNED_SHORT,rgba16sint:t.SHORT,rgba16float:t.HALF_FLOAT,rgba32uint:t.UNSIGNED_INT,rgba32sint:t.INT,rgba32float:t.FLOAT,stencil8:t.UNSIGNED_BYTE,depth16unorm:t.UNSIGNED_SHORT,depth24plus:t.UNSIGNED_INT,"depth24plus-stencil8":t.UNSIGNED_INT_24_8,depth32float:t.FLOAT,"depth32float-stencil8":t.FLOAT_32_UNSIGNED_INT_24_8_REV}}var UU=b(()=>{});function Y7(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));let e=t.length;for(let i=0;i<e;i+=4){let r=t[i+3];if(r!==0){let s=255.001/r;t[i]=t[i]*s+.5,t[i+1]=t[i+1]*s+.5,t[i+2]=t[i+2]*s+.5}}}var j7=b(()=>{}),iP,Cg,NU=b(()=>{Ct(),$(),tt(),RU(),MU(),BU(),gE(),PU(),OU(),GU(),kU(),UU(),iP=4,Cg=class{constructor(t){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:e_,buffer:pE,video:yE,compressed:mE},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(t){this._gl=t,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=LU(t,this._renderer.context.extensions),this._mapFormatToType=IU(t),this._mapFormatToFormat=FU(t)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let e=0;e<16;e++)this.bind(ve.EMPTY,e)}initSource(t){this.bind(t)}bind(t,e=0){let i=t.source;t?(this.bindSource(i,e),this._useSeparateSamplers&&this._bindSampler(i.style,e)):(this.bindSource(null,e),this._useSeparateSamplers&&this._bindSampler(null,e))}bindSource(t,e=0){let i=this._gl;if(t._touched=this._renderer.textureGC.count,this._boundTextures[e]!==t){this._boundTextures[e]=t,this._activateLocation(e),t||(t=ve.EMPTY.source);let r=this.getGlSource(t);i.bindTexture(r.target,r.texture)}}_bindSampler(t,e=0){let i=this._gl;if(!t){this._boundSamplers[e]=null,i.bindSampler(e,null);return}let r=this._getGlSampler(t);this._boundSamplers[e]!==r&&(this._boundSamplers[e]=r,i.bindSampler(e,r))}unbind(t){let e=t.source,i=this._boundTextures,r=this._gl;for(let s=0;s<i.length;s++)if(i[s]===e){this._activateLocation(s);let a=this.getGlSource(e);r.bindTexture(a.target,null),i[s]=null}}_activateLocation(t){this._activeTextureLocation!==t&&(this._activeTextureLocation=t,this._gl.activeTexture(this._gl.TEXTURE0+t))}_initSource(t){let e=this._gl,i=new fE(e.createTexture());if(i.type=this._mapFormatToType[t.format],i.internalFormat=this._mapFormatToInternalFormat[t.format],i.format=this._mapFormatToFormat[t.format],t.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||t.isPowerOfTwo)){let r=Math.max(t.width,t.height);t.mipLevelCount=Math.floor(Math.log2(r))+1}return this._glTextures[t.uid]=i,this.managedTextures.includes(t)||(t.on("update",this.onSourceUpdate,this),t.on("resize",this.onSourceUpdate,this),t.on("styleChange",this.onStyleChange,this),t.on("destroy",this.onSourceDestroy,this),t.on("unload",this.onSourceUnload,this),t.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(t)),this.onSourceUpdate(t),this.updateStyle(t,!1),i}onStyleChange(t){this.updateStyle(t,!1)}updateStyle(t,e){let i=this._gl,r=this.getGlSource(t);i.bindTexture(i.TEXTURE_2D,r.texture),this._boundTextures[this._activeTextureLocation]=t,w2(t.style,i,t.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",i.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!t.isPowerOfTwo,e)}onSourceUnload(t){let e=this._glTextures[t.uid];e&&(this.unbind(t),this._glTextures[t.uid]=null,this._gl.deleteTexture(e.texture))}onSourceUpdate(t){let e=this._gl,i=this.getGlSource(t);e.bindTexture(e.TEXTURE_2D,i.texture),this._boundTextures[this._activeTextureLocation]=t;let r=t.alphaMode==="premultiply-alpha-on-upload";this._premultiplyAlpha!==r&&(this._premultiplyAlpha=r,e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r)),this._uploads[t.uploadMethodId]?this._uploads[t.uploadMethodId].upload(t,i,e,this._renderer.context.webGLVersion):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.pixelWidth,t.pixelHeight,0,e.RGBA,e.UNSIGNED_BYTE,null),t.autoGenerateMipmaps&&t.mipLevelCount>1&&this.onUpdateMipmaps(t,!1)}onUpdateMipmaps(t,e=!0){e&&this.bindSource(t,0);let i=this.getGlSource(t);this._gl.generateMipmap(i.target)}onSourceDestroy(t){t.off("destroy",this.onSourceDestroy,this),t.off("update",this.onSourceUpdate,this),t.off("resize",this.onSourceUpdate,this),t.off("unload",this.onSourceUnload,this),t.off("styleChange",this.onStyleChange,this),t.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(t),1),this.onSourceUnload(t)}_initSampler(t){let e=this._gl,i=this._gl.createSampler();return this._glSamplers[t._resourceId]=i,w2(t,e,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",i,!1,!0),this._glSamplers[t._resourceId]}_getGlSampler(t){return this._glSamplers[t._resourceId]||this._initSampler(t)}getGlSource(t){return this._glTextures[t.uid]||this._initSource(t)}generateCanvas(t){let{pixels:e,width:i,height:r}=this.getPixels(t),s=et.get().createCanvas();s.width=i,s.height=r;let a=s.getContext("2d");if(a){let l=a.createImageData(i,r);l.data.set(e),a.putImageData(l,0,0)}return s}getPixels(t){let e=t.source.resolution,i=t.frame,r=Math.max(Math.round(i.width*e),1),s=Math.max(Math.round(i.height*e),1),a=new Uint8Array(iP*r*s),l=this._renderer,c=l.renderTarget.getRenderTarget(t),h=l.renderTarget.getGpuRenderTarget(c),f=l.gl;return f.bindFramebuffer(f.FRAMEBUFFER,h.resolveTargetFramebuffer),f.readPixels(Math.round(i.x*e),Math.round(i.y*e),r,s,f.RGBA,f.UNSIGNED_BYTE,a),{pixels:new Uint8ClampedArray(a.buffer),width:r,height:s}}destroy(){this.managedTextures.slice().forEach(t=>this.onSourceDestroy(t)),this.managedTextures=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(ve.EMPTY.source),this._boundSamplers=Object.create(null)}},Cg.extension={type:[I.WebGLSystem],name:"texture"}}),HU={};_n(HU,{WebGLRenderer:()=>bE});var rP,sP,nP,g0,y0,_0,bE,VU=b(()=>{$(),DI(),OI(),FI(),ud(),PA(),jr(),kI(),II(),VI(),zI(),YI(),jI(),qI(),JI(),iU(),bU(),AU(),CU(),NU(),rP=[...qy,Tg,tE,JA,gg,Cg,Sg,_g,Eg,Ag,bg,dE,xg,vg],sP=[...Wy],nP=[mg,pg,fg],g0=[],y0=[],_0=[],ke.handleByNamedList(I.WebGLSystem,g0),ke.handleByNamedList(I.WebGLPipes,y0),ke.handleByNamedList(I.WebGLPipesAdaptor,_0),ke.add(...rP,...sP,...nP),bE=class extends vu{constructor(){let t={name:"webgl",type:tr.WEBGL,systems:g0,renderPipes:y0,renderPipeAdaptors:_0};super(t)}}});async function zU(t){let e=[];t.preference?(e.push(t.preference),C2.forEach(a=>{a!==t.preference&&e.push(a)})):e=C2.slice();let i,r={};for(let a=0;a<e.length;a++){let l=e[a];if(l==="webgpu"&&await dd()){let{WebGPURenderer:c}=await Promise.resolve().then(()=>(PI(),BI));i=c,r={...t,...t.webgpu};break}else if(l==="webgl"&&cd(t.failIfMajorPerformanceCaveat??vu.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:c}=await Promise.resolve().then(()=>(VU(),HU));i=c,r={...t,...t.webgl};break}else if(l==="canvas")throw r={...t},new Error("CanvasRenderer is not yet implemented")}if(delete r.webgpu,delete r.webgl,!i)throw new Error("No available renderer for the current environment");let s=new i;return await s.init(r),s}var C2,XU=b(()=>{hd(),fd(),ud(),C2=["webgl","webgpu","canvas"]}),v0,Rg,q7=b(()=>{$(),XU(),br(),_A(),gt(),v0=class R2{constructor(...e){this.stage=new Lt,e[0]!==void 0&&Pe(Xe,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await zU(e),R2._plugins.forEach(i=>{i.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Pe(Xe,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,i=!1){let r=R2._plugins.slice(0);r.reverse(),r.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null}},v0._plugins=[],Rg=v0,ke.handleByList(I.Application,Rg._plugins),ke.add(Vm)}),Mg,YU=b(()=>{ci(),tt(),HS(),Ny(),Mg=class extends Uy{constructor(t,e){super();let{textures:i,data:r}=t;Object.keys(r.pages).forEach(s=>{let a=r.pages[parseInt(s,10)],l=i[a.id];this.pages.push({texture:l})}),Object.keys(r.chars).forEach(s=>{let a=r.chars[s],{frame:l,source:c}=i[a.page],h=new wt(a.x+l.x,a.y+l.y,a.width,a.height),f=new ve({source:c,frame:h});this.chars[s]={id:s.codePointAt(0),xOffset:a.xOffset,yOffset:a.yOffset,xAdvance:a.xAdvance,kerning:a.kerning??{},texture:f}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){let{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){Wl.install(t)}static uninstall(t){Wl.uninstall(t)}}}),lh,jU=b(()=>{lh={test(t){return typeof t=="string"&&t.startsWith("info face=")},parse(t){let e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let g in e){let y=e[g].match(/^[a-z]+/gm)[0],v=e[g].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),x={};for(let A in v){let S=v[A].split("="),w=S[0],E=S[1].replace(/"/gm,""),B=parseFloat(E),G=isNaN(B)?E:B;x[w]=G}i[y].push(x)}let r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[s]=i.info,[a]=i.common,[l]=i.distanceField??[];l&&(r.distanceField={range:parseInt(l.distanceRange,10),type:l.fieldType}),r.fontSize=parseInt(s.size,10),r.fontFamily=s.face,r.lineHeight=parseInt(a.lineHeight,10);let c=i.page;for(let g=0;g<c.length;g++)r.pages.push({id:parseInt(c[g].id,10)||0,file:c[g].file});let h={};r.baseLineOffset=r.lineHeight-parseInt(a.base,10);let f=i.char;for(let g=0;g<f.length;g++){let y=f[g],v=parseInt(y.id,10),x=y.letter??y.char??String.fromCharCode(v);x==="space"&&(x=" "),h[v]=x,r.chars[x]={id:v,page:parseInt(y.page,10)||0,x:parseInt(y.x,10),y:parseInt(y.y,10),width:parseInt(y.width,10),height:parseInt(y.height,10),xOffset:parseInt(y.xoffset,10),yOffset:parseInt(y.yoffset,10),xAdvance:parseInt(y.xadvance,10),kerning:{}}}let p=i.kerning||[];for(let g=0;g<p.length;g++){let y=parseInt(p[g].first,10),v=parseInt(p[g].second,10),x=parseInt(p[g].amount,10);r.chars[h[v]].kerning[h[y]]=x}return r}}}),Bg,qU=b(()=>{Bg={test(t){let e=t;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(t){let e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},i=t.getElementsByTagName("info")[0],r=t.getElementsByTagName("common")[0],s=t.getElementsByTagName("distanceField")[0];s&&(e.distanceField={type:s.getAttribute("fieldType"),range:parseInt(s.getAttribute("distanceRange"),10)});let a=t.getElementsByTagName("page"),l=t.getElementsByTagName("char"),c=t.getElementsByTagName("kerning");e.fontSize=parseInt(i.getAttribute("size"),10),e.fontFamily=i.getAttribute("face"),e.lineHeight=parseInt(r.getAttribute("lineHeight"),10);for(let f=0;f<a.length;f++)e.pages.push({id:parseInt(a[f].getAttribute("id"),10)||0,file:a[f].getAttribute("file")});let h={};e.baseLineOffset=e.lineHeight-parseInt(r.getAttribute("base"),10);for(let f=0;f<l.length;f++){let p=l[f],g=parseInt(p.getAttribute("id"),10),y=p.getAttribute("letter")??p.getAttribute("char")??String.fromCharCode(g);y==="space"&&(y=" "),h[g]=y,e.chars[y]={id:g,page:parseInt(p.getAttribute("page"),10)||0,x:parseInt(p.getAttribute("x"),10),y:parseInt(p.getAttribute("y"),10),width:parseInt(p.getAttribute("width"),10),height:parseInt(p.getAttribute("height"),10),xOffset:parseInt(p.getAttribute("xoffset"),10),yOffset:parseInt(p.getAttribute("yoffset"),10),xAdvance:parseInt(p.getAttribute("xadvance"),10),kerning:{}}}for(let f=0;f<c.length;f++){let p=parseInt(c[f].getAttribute("first"),10),g=parseInt(c[f].getAttribute("second"),10),y=parseInt(c[f].getAttribute("amount"),10);e.chars[h[g]].kerning[h[p]]=y}return e}}}),Pg,WU=b(()=>{Ct(),qU(),Pg={test(t){return typeof t=="string"&&t.includes("<font>")?Bg.test(et.get().parseXML(t)):!1},parse(t){return Bg.parse(et.get().parseXML(t))}}}),aP,xE,TE,KU=b(()=>{Xr(),_T(),Ct(),$(),yo(),YU(),jU(),WU(),aP=[".xml",".fnt"],xE={extension:{type:I.CacheParser,name:"cacheBitmapFont"},test:t=>t instanceof Mg,getCacheableAssets(t,e){let i={};return t.forEach(r=>{i[r]=e,i[`${r}-bitmap`]=e}),i[`${e.fontFamily}-bitmap`]=e,i}},TE={extension:{type:I.LoadParser,priority:er.Normal},name:"loadBitmapFont",test(t){return aP.includes(gi.extname(t).toLowerCase())},async testParse(t){return lh.test(t)||Pg.test(t)},async parse(t,e,i){let r=lh.test(t)?lh.parse(t):Pg.parse(t),{src:s}=e,{pages:a}=r,l=[],c=r.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let p=0;p<a.length;++p){let g=a[p].file,y=gi.join(gi.dirname(s),g);y=xh(y,s),l.push({src:y,data:c})}let h=await i.load(l),f=l.map(p=>h[p.src]);return new Mg({data:r,textures:f},s)},async load(t,e){return await(await et.get().fetch(t)).text()},async unload(t,e,i){await Promise.all(t.pages.map(r=>i.unload(r.texture.source._sourceOrigin))),t.destroy()}}}),SE,$U=b(()=>{SE=class{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}}),AE,ZU=b(()=>{$(),tt(),AE={extension:{type:I.CacheParser,name:"cacheTextureArray"},test:t=>Array.isArray(t)&&t.every(e=>e instanceof ve),getCacheableAssets:(t,e)=>{let i={};return t.forEach(r=>{e.forEach((s,a)=>{i[r+(a===0?"":a+1)]=s})}),i}}});async function EE(t){if("Image"in globalThis)return new Promise(e=>{let i=new Image;i.onload=()=>{e(!0)},i.onerror=()=>{e(!1)},i.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}var wE=b(()=>{}),CE,QU=b(()=>{$(),wE(),CE={extension:{type:I.DetectionParser,priority:1},test:async()=>EE("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")}}),b0,RE,JU=b(()=>{$(),b0=["png","jpg","jpeg"],RE={extension:{type:I.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...b0],remove:async t=>t.filter(e=>!b0.includes(e))}});function t_(t){return e8?!1:document.createElement("video").canPlayType(t)!==""}var e8,i_=b(()=>{e8="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope}),ME,t8=b(()=>{$(),i_(),ME={extension:{type:I.DetectionParser,priority:0},test:async()=>t_("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")}}),BE,i8=b(()=>{$(),i_(),BE={extension:{type:I.DetectionParser,priority:0},test:async()=>t_("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")}}),PE,r8=b(()=>{$(),i_(),PE={extension:{type:I.DetectionParser,priority:0},test:async()=>t_("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")}}),DE,s8=b(()=>{$(),wE(),DE={extension:{type:I.DetectionParser,priority:0},test:async()=>EE("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")}}),OE,n8=b(()=>{dt(),yo(),qh(),gy(),OE=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){let i={promise:null,parser:null};return i.promise=(async()=>{var a,l;let r=null,s=null;if(e.loadParser&&(s=this._parserHash[e.loadParser],s||Le(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!s){for(let c=0;c<this.parsers.length;c++){let h=this.parsers[c];if(h.load&&((a=h.test)!=null&&a.call(h,t,e,this))){s=h;break}}if(!s)return Le(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await s.load(t,e,this),i.parser=s;for(let c=0;c<this.parsers.length;c++){let h=this.parsers[c];h.parse&&h.parse&&await((l=h.testParse)==null?void 0:l.call(h,r,e,this))&&(r=await h.parse(r,e,this)||r,i.parser=h)}return r})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0,r={},s=Xl(t),a=yr(t,h=>({alias:[h],src:h,data:{}})),l=a.length,c=a.map(async h=>{let f=gi.toAbsolute(h.src);if(!r[h.src])try{this.promiseCache[f]||(this.promiseCache[f]=this._getLoadPromiseAndParser(f,h)),r[h.src]=await this.promiseCache[f].promise,e&&e(++i/l)}catch(p){throw delete this.promiseCache[f],delete r[h.src],new Error(`[Loader.load] Failed to load ${f}.
${p}`)}});return await Promise.all(c),s?r[a[0].src]:r}async unload(t){let e=yr(t,i=>({alias:[i],src:i})).map(async i=>{var a,l;let r=gi.toAbsolute(i.src),s=this.promiseCache[r];if(s){let c=await s.promise;delete this.promiseCache[r],await((l=(a=s.parser)==null?void 0:a.unload)==null?void 0:l.call(a,c,i,this))}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(e.name?t[e.name]&&Le(`[Assets] loadParser name conflict "${e.name}"`):Le("[Assets] loadParser should have a name"),{...t,[e.name]:e}),{})}}});function Co(t,e){if(Array.isArray(e)){for(let i of e)if(t.startsWith(`data:${i}`))return!0;return!1}return t.startsWith(`data:${e}`)}var Ro=b(()=>{});function Kr(t,e){let i=t.split("?")[0],r=gi.extname(i).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}var $r=b(()=>{yo()}),oP,lP,FE,a8=b(()=>{Ct(),$(),Ro(),$r(),Xr(),oP=".json",lP="application/json",FE={extension:{type:I.LoadParser,priority:er.Low},name:"loadJson",test(t){return Co(t,lP)||Kr(t,oP)},async load(t){return await(await et.get().fetch(t)).json()}}}),uP,cP,GE,o8=b(()=>{Ct(),$(),Ro(),$r(),Xr(),uP=".txt",cP="text/plain",GE={name:"loadTxt",extension:{type:I.LoadParser,priority:er.Low,name:"loadTxt"},test(t){return Co(t,cP)||Kr(t,uP)},async load(t){return await(await et.get().fetch(t)).text()}}});function l8(t){let e=gi.extname(t),i=gi.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)),r=i.length>0;for(let a of i)if(!a.match(u8)){r=!1;break}let s=i.join(" ");return r||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}function W7(t){return c8.test(t)?t:encodeURI(t)}var hP,dP,fP,u8,c8,LE,h8=b(()=>{Ct(),$(),dt(),yo(),bn(),Ro(),$r(),Xr(),hP=["normal","bold","100","200","300","400","500","600","700","800","900"],dP=[".ttf",".otf",".woff",".woff2"],fP=["font/ttf","font/otf","font/woff","font/woff2"],u8=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i,c8=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/,LE={extension:{type:I.LoadParser,priority:er.Low},name:"loadWebFont",test(t){return Co(t,fP)||Kr(t,dP)},async load(t,e){var r,s,a;let i=et.get().getFontFaceSet();if(i){let l=[],c=((r=e.data)==null?void 0:r.family)??l8(t),h=((a=(s=e.data)==null?void 0:s.weights)==null?void 0:a.filter(p=>hP.includes(p)))??["normal"],f=e.data??{};for(let p=0;p<h.length;p++){let g=h[p],y=new FontFace(c,`url(${W7(t)})`,{...f,weight:g});await y.load(),i.add(y),l.push(y)}return At.set(`${c}-and-url`,{url:t,fontFaces:l}),l.length===1?l[0]:l}return Le("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>{At.remove(`${e.family}-and-url`),et.get().getFontFaceSet().delete(e)})}}});function r_(t,e=1){var r;let i=(r=fn.RETINA_PREFIX)==null?void 0:r.exec(t);return i?parseFloat(i[1]):e}var s_=b(()=>{_o()});function ma(t,e,i){t.label=i,t._sourceOrigin=i;let r=new ve({source:t,label:i}),s=()=>{delete e.promiseCache[i],At.has(i)&&At.remove(i)};return r.source.once("destroy",()=>{e.promiseCache[i]&&(Le("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),s())}),r.once("destroy",()=>{t.destroyed||(Le("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),r}var ga=b(()=>{tt(),dt(),bn()});async function K7(t,e,i,r){var A,S,w;let s=await(await et.get().fetch(t)).blob(),a=URL.createObjectURL(s),l=new Image;l.src=a,l.crossOrigin=r,await l.decode(),URL.revokeObjectURL(a);let c=document.createElement("canvas"),h=c.getContext("2d"),f=((A=e.data)==null?void 0:A.resolution)||r_(t),p=((S=e.data)==null?void 0:S.width)??l.width,g=((w=e.data)==null?void 0:w.height)??l.height;c.width=p*f,c.height=g*f,h.drawImage(l,0,0,p*f,g*f);let{parseAsGraphicsContext:y,...v}=e.data??{},x=new pn({resource:c,alphaMode:"premultiply-alpha-on-upload",resolution:f,...v});return ma(x,i,t)}async function $7(t){let e=await(await et.get().fetch(t)).text(),i=new Vi;return i.svg(e),i}var pP,mP,kE,d8=b(()=>{Ct(),$(),lu(),gu(),s_(),Ro(),$r(),Xr(),ga(),pP=".svg",mP="image/svg+xml",kE={extension:{type:I.LoadParser,priority:er.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(t){return Co(t,mP)||Kr(t,pP)},async load(t,e,i){var r;return((r=e.data)==null?void 0:r.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?$7(t):K7(t,e,i,this.config.crossOrigin)},unload(t){t.destroy(!0)}}}),gP,Xa,Dg,Z7=b(()=>{gP=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`,Xa=null,Dg=class{constructor(){Xa||(Xa=URL.createObjectURL(new Blob([gP],{type:"application/javascript"}))),this.worker=new Worker(Xa)}},Dg.revokeObjectURL=function(){Xa&&(URL.revokeObjectURL(Xa),Xa=null)}}),yP,Ya,M2,Q7=b(()=>{yP=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`,Ya=null,M2=class{constructor(){Ya||(Ya=URL.createObjectURL(new Blob([yP],{type:"application/javascript"}))),this.worker=new Worker(Ya)}},M2.revokeObjectURL=function(){Ya&&(URL.revokeObjectURL(Ya),Ya=null)}}),x0,T0,_P,Og,f8=b(()=>{Z7(),Q7(),x0=0,_P=class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{let{worker:e}=new Dg;e.addEventListener("message",i=>{e.terminate(),Dg.revokeObjectURL(),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,e){var i;return this._run("loadImageBitmap",[t,(i=e==null?void 0:e.data)==null?void 0:i.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){T0===void 0&&(T0=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<T0&&(this._createdWorkers++,t=new M2().worker,t.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();let i=new Promise((r,s)=>{this._queue.push({id:t,arguments:e,resolve:r,reject:s})});return this._next(),i}_next(){if(!this._queue.length)return;let t=this._getWorker();if(!t)return;let e=this._queue.pop(),i=e.id;this._resolveHash[x0]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:x0++,id:i})}},Og=new _P});async function p8(t,e){var s;let i=await et.get().fetch(t);if(!i.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${i.status} ${i.statusText}`);let r=await i.blob();return((s=e==null?void 0:e.data)==null?void 0:s.alphaMode)==="premultiplied-alpha"?createImageBitmap(r,{premultiplyAlpha:"none"}):createImageBitmap(r)}var vP,bP,n_,IE=b(()=>{Ct(),$(),lu(),s_(),Ro(),$r(),f8(),Xr(),ga(),vP=[".jpeg",".jpg",".png",".webp",".avif"],bP=["image/jpeg","image/png","image/webp","image/avif"],n_={name:"loadTextures",extension:{type:I.LoadParser,priority:er.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Co(t,bP)||Kr(t,vP)},async load(t,e,i){var a;let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Og.isImageBitmapSupported()?r=await Og.loadImageBitmap(t,e):r=await p8(t,e):r=await new Promise((l,c)=>{r=new Image,r.crossOrigin=this.config.crossOrigin,r.src=t,r.complete?l(r):(r.onload=()=>{l(r)},r.onerror=c)});let s=new pn({resource:r,alphaMode:"premultiply-alpha-on-upload",resolution:((a=e.data)==null?void 0:a.resolution)||r_(t),...e.data});return ma(s,i,t)},unload(t){t.destroy(!0)}}});function m8(t,e,i){i===void 0&&!e.startsWith("data:")?t.crossOrigin=y8(e):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}function g8(t){return new Promise((e,i)=>{t.addEventListener("canplaythrough",r),t.addEventListener("error",s),t.load();function r(){a(),e()}function s(l){a(),i(l)}function a(){t.removeEventListener("canplaythrough",r),t.removeEventListener("error",s)}})}function y8(t,e=globalThis.location){if(t.startsWith("data:"))return"";e||(e=globalThis.location);let i=new URL(t,document.baseURI);return i.hostname!==e.hostname||i.port!==e.port||i.protocol!==e.protocol?"anonymous":""}var S0,xP,UE,_8=b(()=>{$(),wT(),ET(),s_(),Ro(),$r(),ga(),S0=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],xP=S0.map(t=>`video/${t.substring(1)}`),UE={name:"loadVideo",extension:{type:I.LoadParser,name:"loadVideo"},test(t){let e=Co(t,xP),i=Kr(t,S0);return e||i},async load(t,e,i){var h,f;let r={...Il.defaultOptions,resolution:((h=e.data)==null?void 0:h.resolution)||r_(t),alphaMode:((f=e.data)==null?void 0:f.alphaMode)||await AT(),...e.data},s=document.createElement("video"),a={preload:r.autoLoad!==!1?"auto":void 0,"webkit-playsinline":r.playsinline!==!1?"":void 0,playsinline:r.playsinline!==!1?"":void 0,muted:r.muted===!0?"":void 0,loop:r.loop===!0?"":void 0,autoplay:r.autoPlay!==!1?"":void 0};Object.keys(a).forEach(p=>{let g=a[p];g!==void 0&&s.setAttribute(p,g)}),r.muted===!0&&(s.muted=!0),m8(s,t,r.crossorigin);let l=document.createElement("source"),c;if(t.startsWith("data:"))c=t.slice(5,t.indexOf(";"));else if(!t.startsWith("blob:")){let p=t.split("?")[0].slice(t.lastIndexOf(".")+1).toLowerCase();c=Il.MIME_TYPES[p]||`video/${p}`}return l.src=t,c&&(l.type=c),new Promise(p=>{let g=async()=>{let y=new Il({...r,resource:s});s.removeEventListener("canplay",g),e.data.preload&&await g8(s),p(ma(y,i,t))};s.addEventListener("canplay",g),s.appendChild(l)})},unload(t){t.destroy(!0)}}}),a_,NE=b(()=>{$(),IE(),_o(),a_={extension:{type:I.ResolveParser,name:"resolveTexture"},test:n_.test,parse:t=>{var e;return{resolution:parseFloat(((e=fn.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:t.split(".").pop(),src:t}}}}),HE,v8=b(()=>{$(),_o(),NE(),HE={extension:{type:I.ResolveParser,priority:-2,name:"resolveJson"},test:t=>fn.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:a_.parse}}),B2,ge,A0,J7=b(()=>{$(),KU(),dt(),$U(),bn(),ZU(),QU(),JU(),t8(),i8(),r8(),s8(),n8(),a8(),o8(),h8(),d8(),IE(),_8(),v8(),NE(),_o(),qh(),gy(),B2=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new fn,this.loader=new OE,this.cache=At,this._backgroundLoader=new SE(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var s,a;if(this._initialized){Le("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}let e=((s=t.texturePreference)==null?void 0:s.resolution)??1,i=typeof e=="number"?[e]:e,r=await this._detectFormats({preferredFormats:(a=t.texturePreference)==null?void 0:a.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();let i=Xl(t),r=yr(t).map(l=>{if(typeof l!="string"){let c=this.resolver.getAlias(l);return c.some(h=>!this.resolver.hasKey(h))&&this.add(l),Array.isArray(c)?c[0]:c}return this.resolver.hasKey(l)||this.add({alias:l,src:l}),l}),s=this.resolver.resolve(r),a=await this._mapLoadToResolve(s,e);return i?a[r[0]]:a}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);let r=this.resolver.resolveBundle(t),s={},a=Object.keys(r),l=0,c=0,h=()=>{e==null||e(++l/c)},f=a.map(p=>{let g=r[p];return c+=Object.keys(g).length,this._mapLoadToResolve(g,h).then(y=>{s[p]=y})});return await Promise.all(f),i?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);let e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);let e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return At.get(t);let e={};for(let i=0;i<t.length;i++)e[i]=At.get(t[i]);return e}async _mapLoadToResolve(t,e){let i=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;let r=await this.loader.load(i,e);this._backgroundLoader.active=!0;let s={};return i.forEach(a=>{let l=r[a.src],c=[a.src];a.alias&&c.push(...a.alias),c.forEach(h=>{s[h]=l}),At.set(c,l)}),s}async unload(t){this._initialized||await this.init();let e=yr(t).map(r=>typeof r!="string"?r.src:r),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=yr(t);let e=this.resolver.resolveBundle(t),i=Object.keys(e).map(r=>this._unloadFromResolved(e[r]));await Promise.all(i)}async _unloadFromResolved(t){let e=Object.values(t);e.forEach(i=>{At.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(let i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,r)=>e.indexOf(i)===r),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}},ge=new B2,ke.handleByList(I.LoadParser,ge.loader.parsers).handleByList(I.ResolveParser,ge.resolver.parsers).handleByList(I.CacheParser,ge.cache.parsers).handleByList(I.DetectionParser,ge.detections),ke.add(AE,RE,CE,DE,ME,BE,PE,FE,GE,LE,kE,n_,UE,TE,xE,a_,HE),A0={loader:I.LoadParser,resolver:I.ResolveParser,cache:I.CacheParser,detection:I.DetectionParser},ke.handle(I.Asset,t=>{let e=t.ref;Object.entries(A0).filter(([i])=>!!e[i]).forEach(([i,r])=>ke.add(Object.assign(e[i],{extension:e[i].extension??r})))},t=>{let e=t.ref;Object.keys(A0).filter(i=>!!e[i]).forEach(i=>ke.remove(e[i]))})}),b8,eX=b(()=>{$(),hd(),fd(),b8={extension:{type:I.DetectionParser,priority:3},test:async()=>!!(await dd()||cd()),add:async t=>[...t,"basis"],remove:async t=>t.filter(e=>e!=="basis")}}),bu,md=b(()=>{Li(),bu=class extends Yt{constructor(t){super(t),this.uploadMethodId="compressed",this.resource=t.resource,this.mipLevelCount=this.resource.length}}});function P2(){if(Tp)return Tp;let t=document.createElement("canvas").getContext("webgl");return t?(Tp=[...t.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...t.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...t.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...t.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...t.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...t.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Tp):[]}var Tp,x8=b(()=>{});async function D2(){if(Sp)return Sp;let t=await et.get().getNavigator().gpu.requestAdapter();return Sp=[...t.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...t.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...t.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Sp}var Sp,T8=b(()=>{Ct()});async function VE(){return E0!==void 0||(E0=await(async()=>{let t=await dd(),e=cd();if(t&&e){let i=await D2(),r=P2();return i.filter(s=>r.includes(s))}else{if(t)return await D2();if(e)return P2()}return[]})()),E0}var E0,zE=b(()=>{hd(),fd(),x8(),T8()});async function gd(){if(Ap!==void 0)return Ap;let t=await VE();return Ap=[...XE,...t],Ap}var XE,Ap,yd=b(()=>{zE(),XE=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"]}),TP,ja,O2,tX=b(()=>{TP=`(function () {
    'use strict';

    function createLevelBuffers(basisTexture, basisTranscoderFormat) {
      const images = basisTexture.getNumImages();
      const levels = basisTexture.getNumLevels(0);
      const success = basisTexture.startTranscoding();
      if (!success) {
        throw new Error("startTranscoding failed");
      }
      const levelBuffers = [];
      for (let levelIndex = 0; levelIndex < levels; ++levelIndex) {
        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex) {
          const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);
          const levelBuffer = new Uint8Array(transcodeSize);
          const success2 = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);
          if (!success2) {
            throw new Error("transcodeImage failed");
          }
          levelBuffers.push(levelBuffer);
        }
      }
      return levelBuffers;
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": 3,
      // cTFBC3_RGBA
      "bc7-rgba-unorm": 6,
      // cTFBC7_RGBA,
      "etc2-rgba8unorm": 1,
      // cTFETC2_RGBA,
      "astc-4x4-unorm": 10,
      // cTFASTC_4x4_RGBA,
      // Uncompressed
      rgba8unorm: 13,
      // cTFRGBA32,
      rgba4unorm: 16
      // cTFRGBA4444,
    };
    function gpuFormatToBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "basis/basis_transcoder.js",
      wasmUrl: "basis/basis_transcoder.wasm"
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let basisPromise;
    async function getBasis() {
      if (!basisPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        basisPromise = new Promise((resolve) => {
          BASIS({
            locateFile: (_file) => absoluteWasmUrl
          }).then((module) => {
            module.initializeBasis();
            resolve(module.BasisFile);
          });
        });
      }
      return basisPromise;
    }
    async function fetchBasisTexture(url, BasisTexture) {
      const basisResponse = await fetch(url);
      if (basisResponse.ok) {
        const basisArrayBuffer = await basisResponse.arrayBuffer();
        return new BasisTexture(new Uint8Array(basisArrayBuffer));
      }
      throw new Error(\`Failed to load Basis texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const BasisTexture = await getBasis();
      const basisTexture = await fetchBasisTexture(url, BasisTexture);
      const levelBuffers = createLevelBuffers(basisTexture, basisTranscoderFormat);
      return {
        width: basisTexture.getImageWidth(0, 0),
        height: basisTexture.getImageHeight(0, 0),
        format: basisTranscodedTextureFormat,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getBasis();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type](message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`,ja=null,O2=class{constructor(){ja||(ja=URL.createObjectURL(new Blob([TP],{type:"application/javascript"}))),this.worker=new Worker(ja)}},O2.revokeObjectURL=function(){ja&&(URL.revokeObjectURL(ja),ja=null)}});function iX(t){Object.assign(Rh,t)}var Rh,S8=b(()=>{Rh={jsUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.js",wasmUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm"}});function rX(t){return kc||(kc=new O2().worker,kc.onmessage=e=>{let{success:i,url:r,textureOptions:s}=e.data;i||console.warn("Failed to load Basis texture",r),YE[r](s)},kc.postMessage({type:"init",jsUrl:Rh.jsUrl,wasmUrl:Rh.wasmUrl,supportedTextures:t})),kc}function A8(t,e){let i=rX(e);return new Promise(r=>{YE[t]=r,i.postMessage({type:"load",url:t})})}var kc,YE,E8=b(()=>{tX(),S8(),YE={}}),w8,sX=b(()=>{Xr(),ga(),$r(),$(),md(),yd(),E8(),w8={extension:{type:I.LoadParser,priority:er.High,name:"loadBasis"},name:"loadBasis",test(t){return Kr(t,[".basis"])},async load(t,e,i){let r=await gd(),s=await A8(t,r),a=new bu(s);return ma(a,i,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}}});function nX(t,e){let i=t.getNumImages(),r=t.getNumLevels(0);if(!t.startTranscoding())throw new Error("startTranscoding failed");let s=[];for(let a=0;a<r;++a)for(let l=0;l<i;++l){let c=t.getImageTranscodedSizeInBytes(l,a,e),h=new Uint8Array(c);if(!t.transcodeImage(h,l,a,e,1,0))throw new Error("transcodeImage failed");s.push(h)}return s}var aX=b(()=>{});function oX(t){let e=C8[t];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${t}`)}var C8,lX=b(()=>{C8={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16}});function Ei(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}var SP,AP,Zp,Qp,$i,Fg,Zi,He,jE,R8=b(()=>{SP={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},AP={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Zp=(t=>(t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",t))(Zp||{}),Qp=(t=>(t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",t))(Qp||{}),$i=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.R8G8B8=20]="R8G8B8",t[t.A8R8G8B8=21]="A8R8G8B8",t[t.X8R8G8B8=22]="X8R8G8B8",t[t.R5G6B5=23]="R5G6B5",t[t.X1R5G5B5=24]="X1R5G5B5",t[t.A1R5G5B5=25]="A1R5G5B5",t[t.A4R4G4B4=26]="A4R4G4B4",t[t.R3G3B2=27]="R3G3B2",t[t.A8=28]="A8",t[t.A8R3G3B2=29]="A8R3G3B2",t[t.X4R4G4B4=30]="X4R4G4B4",t[t.A2B10G10R10=31]="A2B10G10R10",t[t.A8B8G8R8=32]="A8B8G8R8",t[t.X8B8G8R8=33]="X8B8G8R8",t[t.G16R16=34]="G16R16",t[t.A2R10G10B10=35]="A2R10G10B10",t[t.A16B16G16R16=36]="A16B16G16R16",t[t.A8P8=40]="A8P8",t[t.P8=41]="P8",t[t.L8=50]="L8",t[t.A8L8=51]="A8L8",t[t.A4L4=52]="A4L4",t[t.V8U8=60]="V8U8",t[t.L6V5U5=61]="L6V5U5",t[t.X8L8V8U8=62]="X8L8V8U8",t[t.Q8W8V8U8=63]="Q8W8V8U8",t[t.V16U16=64]="V16U16",t[t.A2W10V10U10=67]="A2W10V10U10",t[t.Q16W16V16U16=110]="Q16W16V16U16",t[t.R16F=111]="R16F",t[t.G16R16F=112]="G16R16F",t[t.A16B16G16R16F=113]="A16B16G16R16F",t[t.R32F=114]="R32F",t[t.G32R32F=115]="G32R32F",t[t.A32B32G32R32F=116]="A32B32G32R32F",t[t.UYVY=Ei("UYVY")]="UYVY",t[t.R8G8_B8G8=Ei("RGBG")]="R8G8_B8G8",t[t.YUY2=Ei("YUY2")]="YUY2",t[t.D3DFMT_G8R8_G8B8=Ei("GRGB")]="D3DFMT_G8R8_G8B8",t[t.DXT1=Ei("DXT1")]="DXT1",t[t.DXT2=Ei("DXT2")]="DXT2",t[t.DXT3=Ei("DXT3")]="DXT3",t[t.DXT4=Ei("DXT4")]="DXT4",t[t.DXT5=Ei("DXT5")]="DXT5",t[t.ATI1=Ei("ATI1")]="ATI1",t[t.AT1N=Ei("AT1N")]="AT1N",t[t.ATI2=Ei("ATI2")]="ATI2",t[t.AT2N=Ei("AT2N")]="AT2N",t[t.BC4U=Ei("BC4U")]="BC4U",t[t.BC4S=Ei("BC4S")]="BC4S",t[t.BC5U=Ei("BC5U")]="BC5U",t[t.BC5S=Ei("BC5S")]="BC5S",t[t.DX10=Ei("DX10")]="DX10",t))($i||{}),Fg={[$i.DXT1]:"bc1-rgba-unorm",[$i.DXT2]:"bc2-rgba-unorm",[$i.DXT3]:"bc2-rgba-unorm",[$i.DXT4]:"bc3-rgba-unorm",[$i.DXT5]:"bc3-rgba-unorm",[$i.ATI1]:"bc4-r-unorm",[$i.BC4U]:"bc4-r-unorm",[$i.BC4S]:"bc4-r-snorm",[$i.ATI2]:"bc5-rg-unorm",[$i.BC5U]:"bc5-rg-unorm",[$i.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},Zi={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},He={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:SP,HEADER_DX10_FIELDS:AP,DXGI_FORMAT:Zp,D3D10_RESOURCE_DIMENSION:Qp,D3DFMT:$i},jE={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16}});function M8(t,e){let{format:i,fourCC:r,width:s,height:a,dataOffset:l,mipmapCount:c}=cX(t);if(!e.includes(i))throw new Error(`Unsupported texture format: ${r} ${i}, supported: ${e}`);if(c<=1)return{format:i,width:s,height:a,resource:[new Uint8Array(t,l)],alphaMode:"no-premultiply-alpha"};let h=uX(i,s,a,l,c,t);return{format:i,width:s,height:a,resource:h,alphaMode:"no-premultiply-alpha"}}function uX(t,e,i,r,s,a){let l=[],c=jE[t],h=e,f=i,p=r;for(let g=0;g<s;++g){let y=Math.ceil(Math.max(4,h)/4)*4,v=Math.ceil(Math.max(4,f)/4)*4,x=c?y/4*v/4*c:h*f*4,A=new Uint8Array(a,p,x);l.push(A),p+=x,h=Math.max(h>>1,1),f=Math.max(f>>1,1)}return l}function cX(t){let e=new Uint32Array(t,0,He.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(e[He.HEADER_FIELDS.MAGIC]!==He.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");let i=e[He.HEADER_FIELDS.HEIGHT],r=e[He.HEADER_FIELDS.WIDTH],s=Math.max(1,e[He.HEADER_FIELDS.MIPMAP_COUNT]),a=e[He.HEADER_FIELDS.PF_FLAGS],l=e[He.HEADER_FIELDS.FOURCC],c=hX(e,a,l,t),h=He.MAGIC_SIZE+He.HEADER_SIZE+(l===He.D3DFMT.DX10?He.HEADER_DX10_SIZE:0);return{format:c,fourCC:l,width:r,height:i,dataOffset:h,mipmapCount:s}}function hX(t,e,i,r){if(e&He.PIXEL_FORMAT_FLAGS.FOURCC){if(i===He.D3DFMT.DX10){let s=new Uint32Array(r,He.MAGIC_SIZE+He.HEADER_SIZE,He.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(s[He.HEADER_DX10_FIELDS.MISC_FLAG]===He.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(s[He.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===He.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");let a=s[He.HEADER_DX10_FIELDS.DXGI_FORMAT];if(a in Zi)return Zi[a];throw new Error(`DDSParser cannot parse texture data with DXGI format ${a}`)}if(i in Fg)return Fg[i];throw new Error(`DDSParser cannot parse texture data with fourCC format ${i}`)}if(e&He.PIXEL_FORMAT_FLAGS.RGB||e&He.PIXEL_FORMAT_FLAGS.RGBA)return dX(t);throw e&He.PIXEL_FORMAT_FLAGS.YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):e&He.PIXEL_FORMAT_FLAGS.LUMINANCE||e&He.PIXEL_FORMAT_FLAGS.LUMINANCEA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):e&He.PIXEL_FORMAT_FLAGS.ALPHA||e&He.PIXEL_FORMAT_FLAGS.ALPHAPIXELS?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}function dX(t){let e=t[He.HEADER_FIELDS.RGB_BITCOUNT],i=t[He.HEADER_FIELDS.R_BIT_MASK],r=t[He.HEADER_FIELDS.G_BIT_MASK],s=t[He.HEADER_FIELDS.B_BIT_MASK],a=t[He.HEADER_FIELDS.A_BIT_MASK];switch(e){case 32:if(i===255&&r===65280&&s===16711680&&a===4278190080)return Zi[He.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(i===16711680&&r===65280&&s===255&&a===4278190080)return Zi[He.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(i===1072693248&&r===1047552&&s===1023&&a===3221225472)return Zi[He.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(i===65535&&r===4294901760&&s===0&&a===0)return Zi[He.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(i===4294967295&&r===0&&s===0&&a===0)return Zi[He.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(i===31744&&r===992&&s===31&&a===32768)return Zi[He.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(i===63488&&r===2016&&s===31&&a===0)return Zi[He.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(i===3840&&r===240&&s===15&&a===61440)return Zi[He.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(i===255&&r===0&&s===0&&a===65280)return Zi[He.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(i===65535&&r===0&&s===0&&a===0)return Zi[He.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(i===255&&r===0&&s===0&&a===0)return Zi[He.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
                bitCount = ${e}, rBitMask = ${i}, gBitMask = ${r}, aBitMask = ${a}`)}var B8=b(()=>{R8()}),P8,fX=b(()=>{Xr(),ga(),$r(),$(),md(),yd(),B8(),P8={extension:{type:I.LoadParser,priority:er.High,name:"loadDDS"},name:"loadDDS",test(t){return Kr(t,[".dds"])},async load(t,e,i){let r=await gd(),s=await(await fetch(t)).arrayBuffer(),a=M8(s,r),l=new bu(a);return ma(l,i,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}}}),F2,EP,wP,CP,RP,MP,BP,PP,DP,OP,Nt,D8=b(()=>{F2=(t=>(t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGBA=6408]="RGBA",t[t.RGBA8UI=36220]="RGBA8UI",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGBA8I=36238]="RGBA8I",t[t.RGBA8=32856]="RGBA8",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(F2||{}),EP={33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},wP=[171,75,84,88,32,49,49,187,13,10,26,10],CP={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},RP=64,MP=67305985,BP={5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},PP={6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},DP={32819:2,32820:2,33635:2},OP={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},Nt={FILE_HEADER_SIZE:RP,FILE_IDENTIFIER:wP,FORMATS_TO_COMPONENTS:PP,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:OP,INTERNAL_FORMAT_TO_TEXTURE_FORMATS:EP,FIELDS:CP,TYPES_TO_BYTES_PER_COMPONENT:BP,TYPES_TO_BYTES_PER_PIXEL:DP,ENDIANNESS:MP}});function O8(t,e){let i=new DataView(t);if(!yX(i))throw new Error("Invalid KTX identifier in header");let{littleEndian:r,glType:s,glFormat:a,glInternalFormat:l,pixelWidth:c,pixelHeight:h,numberOfMipmapLevels:f,offset:p}=gX(i),g=Nt.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[l];if(!g)throw new Error(`Unknown texture format ${l}`);if(!e.includes(g))throw new Error(`Unsupported texture format: ${g}, supportedFormats: ${e}`);let y=mX(s,a,l),v=pX(i,s,y,c,h,p,f,r);return{format:g,width:c,height:h,resource:v,alphaMode:"no-premultiply-alpha"}}function pX(t,e,i,r,s,a,l,c){let h=r+3&-4,f=s+3&-4,p=r*s;e===0&&(p=h*f);let g=p*i,y=r,v=s,x=h,A=f,S=a,w=new Array(l);for(let E=0;E<l;E++){let B=t.getUint32(S,c),G=S+4;w[E]=new Uint8Array(t.buffer,G,g),G+=g,S+=B+4,S=S%4!==0?S+4-S%4:S,y=y>>1||1,v=v>>1||1,x=y+4-1&-4,A=v+4-1&-4,g=x*A*i}return w}function mX(t,e,i){let r=Nt.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[i];if(t!==0&&(Nt.TYPES_TO_BYTES_PER_COMPONENT[t]?r=Nt.TYPES_TO_BYTES_PER_COMPONENT[t]*Nt.FORMATS_TO_COMPONENTS[e]:r=Nt.TYPES_TO_BYTES_PER_PIXEL[t]),r===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return r}function gX(t){let e=t.getUint32(Nt.FIELDS.ENDIANNESS,!0)===Nt.ENDIANNESS,i=t.getUint32(Nt.FIELDS.GL_TYPE,e),r=t.getUint32(Nt.FIELDS.GL_FORMAT,e),s=t.getUint32(Nt.FIELDS.GL_INTERNAL_FORMAT,e),a=t.getUint32(Nt.FIELDS.PIXEL_WIDTH,e),l=t.getUint32(Nt.FIELDS.PIXEL_HEIGHT,e)||1,c=t.getUint32(Nt.FIELDS.PIXEL_DEPTH,e)||1,h=t.getUint32(Nt.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,e)||1,f=t.getUint32(Nt.FIELDS.NUMBER_OF_FACES,e),p=t.getUint32(Nt.FIELDS.NUMBER_OF_MIPMAP_LEVELS,e),g=t.getUint32(Nt.FIELDS.BYTES_OF_KEY_VALUE_DATA,e);if(l===0||c!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");return{littleEndian:e,glType:i,glFormat:r,glInternalFormat:s,pixelWidth:a,pixelHeight:l,numberOfMipmapLevels:p,offset:Nt.FILE_HEADER_SIZE+g}}function yX(t){for(let e=0;e<Nt.FILE_IDENTIFIER.length;e++)if(t.getUint8(e)!==Nt.FILE_IDENTIFIER[e])return!1;return!0}var F8=b(()=>{D8()}),G8,_X=b(()=>{Xr(),ga(),$r(),$(),md(),yd(),F8(),G8={extension:{type:I.LoadParser,priority:er.High,name:"loadKTX"},name:"loadKTX",test(t){return Kr(t,".ktx")},async load(t,e,i){let r=await gd(),s=await(await fetch(t)).arrayBuffer(),a=O8(s,r),l=new bu(a);return ma(l,i,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}}}),FP,qa,G2,vX=b(()=>{FP=`(function () {
    'use strict';

    const converters = {
      rgb8unorm: {
        convertedFormat: "rgba8unorm",
        convertFunction: convertRGBtoRGBA
      },
      "rgb8unorm-srgb": {
        convertedFormat: "rgba8unorm-srgb",
        convertFunction: convertRGBtoRGBA
      }
    };
    function convertFormatIfRequired(textureOptions) {
      const format = textureOptions.format;
      if (converters[format]) {
        const convertFunction = converters[format].convertFunction;
        const levelBuffers = textureOptions.resource;
        for (let i = 0; i < levelBuffers.length; i++) {
          levelBuffers[i] = convertFunction(levelBuffers[i]);
        }
        textureOptions.format = converters[format].convertedFormat;
      }
    }
    function convertRGBtoRGBA(levelBuffer) {
      const pixelCount = levelBuffer.byteLength / 3;
      const levelBufferWithAlpha = new Uint32Array(pixelCount);
      for (let i = 0; i < pixelCount; ++i) {
        levelBufferWithAlpha[i] = levelBuffer[i * 3] + (levelBuffer[i * 3 + 1] << 8) + (levelBuffer[i * 3 + 2] << 16) + 4278190080;
      }
      return new Uint8Array(levelBufferWithAlpha.buffer);
    }

    function createLevelBuffersFromKTX(ktxTexture) {
      const levelBuffers = [];
      for (let i = 0; i < ktxTexture.numLevels; i++) {
        const imageData = ktxTexture.getImageData(i, 0, 0);
        const levelBuffer = new Uint8Array(imageData.byteLength);
        levelBuffer.set(imageData);
        levelBuffers.push(levelBuffer);
      }
      return levelBuffers;
    }

    const glFormatToGPUFormatMap = {
      6408: "rgba8unorm",
      32856: "bgra8unorm",
      //
      32857: "rgb10a2unorm",
      33189: "depth16unorm",
      33190: "depth24plus",
      33321: "r8unorm",
      33323: "rg8unorm",
      33325: "r16float",
      33326: "r32float",
      33327: "rg16float",
      33328: "rg32float",
      33329: "r8sint",
      33330: "r8uint",
      33331: "r16sint",
      33332: "r16uint",
      33333: "r32sint",
      33334: "r32uint",
      33335: "rg8sint",
      33336: "rg8uint",
      33337: "rg16sint",
      33338: "rg16uint",
      33339: "rg32sint",
      33340: "rg32uint",
      33778: "bc2-rgba-unorm",
      33779: "bc3-rgba-unorm",
      34836: "rgba32float",
      34842: "rgba16float",
      35056: "depth24plus-stencil8",
      35898: "rg11b10ufloat",
      35901: "rgb9e5ufloat",
      35907: "rgba8unorm-srgb",
      // bgra8unorm-srgb
      36012: "depth32float",
      36013: "depth32float-stencil8",
      36168: "stencil8",
      36208: "rgba32uint",
      36214: "rgba16uint",
      36220: "rgba8uint",
      36226: "rgba32sint",
      36232: "rgba16sint",
      36238: "rgba8sint",
      36492: "bc7-rgba-unorm",
      36756: "r8snorm",
      36757: "rg8snorm",
      36759: "rgba8snorm",
      37496: "etc2-rgba8unorm",
      37808: "astc-4x4-unorm"
    };
    function glFormatToGPUFormat(glInternalFormat) {
      const format = glFormatToGPUFormatMap[glInternalFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported glInternalFormat: \${glInternalFormat}\`);
    }

    const vkFormatToGPUFormatMap = {
      23: "rgb8unorm",
      // VK_FORMAT_R8G8B8_UNORM
      37: "rgba8unorm",
      // VK_FORMAT_R8G8B8A8_UNORM
      43: "rgba8unorm-srgb"
      // VK_FORMAT_R8G8B8A8_SRGB
      // TODO add more!
    };
    function vkFormatToGPUFormat(vkFormat) {
      const format = vkFormatToGPUFormatMap[vkFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported VkFormat: \${vkFormat}\`);
    }

    function getTextureFormatFromKTXTexture(ktxTexture) {
      if (ktxTexture.classId === 2) {
        return vkFormatToGPUFormat(ktxTexture.vkFormat);
      }
      return glFormatToGPUFormat(ktxTexture.glInternalformat);
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": "BC3_RGBA",
      "bc7-rgba-unorm": "BC7_M5_RGBA",
      "etc2-rgba8unorm": "ETC2_RGBA",
      "astc-4x4-unorm": "ASTC_4x4_RGBA",
      // Uncompressed
      rgba8unorm: "RGBA32",
      rg11b10ufloat: "R11F_G11F_B10F"
    };
    function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "",
      wasmUrl: ""
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let ktxPromise;
    async function getKTX() {
      if (!ktxPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        ktxPromise = new Promise((resolve) => {
          LIBKTX({
            locateFile: (_file) => absoluteWasmUrl
          }).then((libktx) => {
            resolve(libktx);
          });
        });
      }
      return ktxPromise;
    }
    async function fetchKTXTexture(url, ktx) {
      const ktx2Response = await fetch(url);
      if (ktx2Response.ok) {
        const ktx2ArrayBuffer = await ktx2Response.arrayBuffer();
        return new ktx.ktxTexture(new Uint8Array(ktx2ArrayBuffer));
      }
      throw new Error(\`Failed to load KTX(2) texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const ktx = await getKTX();
      const ktxTexture = await fetchKTXTexture(url, ktx);
      let format;
      if (ktxTexture.needsTranscoding) {
        format = basisTranscodedTextureFormat;
        const transcodeFormat = ktx.TranscodeTarget[basisTranscoderFormat];
        const result = ktxTexture.transcodeBasis(transcodeFormat, 0);
        if (result !== ktx.ErrorCode.SUCCESS) {
          throw new Error("Unable to transcode basis texture.");
        }
      } else {
        format = getTextureFormatFromKTXTexture(ktxTexture);
      }
      const levelBuffers = createLevelBuffersFromKTX(ktxTexture);
      const textureOptions = {
        width: ktxTexture.baseWidth,
        height: ktxTexture.baseHeight,
        format,
        mipLevelCount: ktxTexture.numLevels,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
      convertFormatIfRequired(textureOptions);
      return textureOptions;
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToKTXBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getKTX();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type]?.(message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`,qa=null,G2=class{constructor(){qa||(qa=URL.createObjectURL(new Blob([FP],{type:"application/javascript"}))),this.worker=new Worker(qa)}},G2.revokeObjectURL=function(){qa&&(URL.revokeObjectURL(qa),qa=null)}});function bX(t){Object.assign(Mh,t)}var Mh,L8=b(()=>{Mh={jsUrl:"https://files.pixijs.download/transcoders/ktx/libktx.js",wasmUrl:"https://files.pixijs.download/transcoders/ktx/libktx.wasm"}});function xX(t){return Ic||(Ic=new G2().worker,Ic.onmessage=e=>{let{success:i,url:r,textureOptions:s}=e.data;i||console.warn("Failed to load KTX texture",r),qE[r](s)},Ic.postMessage({type:"init",jsUrl:Mh.jsUrl,wasmUrl:Mh.wasmUrl,supportedTextures:t})),Ic}function k8(t,e){let i=xX(e);return new Promise(r=>{qE[t]=r,i.postMessage({type:"load",url:t})})}var Ic,qE,I8=b(()=>{vX(),L8(),qE={}}),U8,TX=b(()=>{Xr(),ga(),$r(),$(),md(),yd(),I8(),U8={extension:{type:I.LoadParser,priority:er.High,name:"loadKTX2"},name:"loadKTX2",test(t){return Kr(t,".ktx2")},async load(t,e,i){let r=await gd(),s=await k8(t,r),a=new bu(s);return ma(a,i,t)},async unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}}});function SX(t){let e=t.format;if(Jp[e]){let i=Jp[e].convertFunction,r=t.resource;for(let s=0;s<r.length;s++)r[s]=i(r[s]);t.format=Jp[e].convertedFormat}}function GP(t){let e=t.byteLength/3,i=new Uint32Array(e);for(let r=0;r<e;++r)i[r]=t[r*3]+(t[r*3+1]<<8)+(t[r*3+2]<<16)+4278190080;return new Uint8Array(i.buffer)}var Jp,AX=b(()=>{Jp={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:GP},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:GP}}});function EX(t){let e=[];for(let i=0;i<t.numLevels;i++){let r=t.getImageData(i,0,0),s=new Uint8Array(r.byteLength);s.set(r),e.push(s)}return e}var wX=b(()=>{});function N8(t){let e=H8[t];if(e)return e;throw new Error(`Unsupported glInternalFormat: ${t}`)}var H8,V8=b(()=>{H8={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"}});function z8(t){let e=X8[t];if(e)return e;throw new Error(`Unsupported VkFormat: ${t}`)}var X8,Y8=b(()=>{X8={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"}});function CX(t){return t.classId===2?z8(t.vkFormat):N8(t.glInternalformat)}var RX=b(()=>{V8(),Y8()});function MX(t){let e=j8[t];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${t}`)}var j8,BX=b(()=>{j8={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"}}),Bh,q8,W8=b(()=>{_o(),$r(),$(),Bh=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],q8={extension:I.ResolveParser,test:t=>Kr(t,[".ktx",".ktx2",".dds"]),parse:t=>{var r;let e,i=t.split(".");if(i.length>2){let s=i[i.length-2];Bh.includes(s)&&(e=s)}else e=i[i.length-1];return{resolution:parseFloat(((r=fn.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e,src:t}}}});function PX(t){let e=["basis"],i={};return t.forEach(r=>{let s=r.split("-")[0];s&&!i[s]&&(i[s]=!0,e.push(s))}),e.sort((r,s)=>{let a=Bh.indexOf(r),l=Bh.indexOf(s);return a===-1?1:l===-1?-1:a-l}),e}var Ep,K8,DX=b(()=>{$(),zE(),hd(),fd(),W8(),K8={extension:{type:I.DetectionParser,priority:2},test:async()=>!!(await dd()||cd()),add:async t=>{let e=await VE();return Ep=PX(e),[...Ep,...t]},remove:async t=>Ep?t.filter(e=>!(e in Ep)):t}}),LP,wp,WE,$8=b(()=>{qi(),nu(),LP=new Ci,wp=class{cull(t,e,i=!0){this._cullRecursive(t,e,i)}_cullRecursive(t,e,i=!0){if(t.cullable&&t.measurable&&t.includeInBuild){let r=t.cullArea??Xh(t,i,LP);t.culled=r.x>=e.x+e.width||r.y>=e.y+e.height||r.x+r.width<=e.x||r.y+r.height<=e.y}else t.culled=!1;if(!(!t.cullableChildren||t.culled||!t.renderable||!t.measurable||!t.includeInBuild))for(let r=0;r<t.children.length;r++)this._cullRecursive(t.children[r],e,i)}},wp.shared=new wp,WE=wp}),L2,OX=b(()=>{$(),$8(),L2=class{static init(){this._renderRef=this.render.bind(this),this.render=()=>{WE.shared.cull(this.stage,this.renderer.screen),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}},L2.extension={priority:10,type:I.Application,name:"culler"}}),o_=ds(t=>{function e(l,c,h){if(h===void 0&&(h=Array.prototype),l&&typeof h.find=="function")return h.find.call(l,c);for(var f=0;f<l.length;f++)if(Object.prototype.hasOwnProperty.call(l,f)){var p=l[f];if(c.call(void 0,p,f,l))return p}}function i(l,c){return c===void 0&&(c=Object),c&&typeof c.freeze=="function"?c.freeze(l):l}function r(l,c){if(l===null||typeof l!="object")throw new TypeError("target is not an object");for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(l[h]=c[h]);return l}var s=i({HTML:"text/html",isHTML:function(l){return l===s.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),a=i({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(l){return l===a.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=r,t.find=e,t.freeze=i,t.MIME_TYPE=s,t.NAMESPACE=a}),Z8=ds(t=>{var e=o_(),i=e.find,r=e.NAMESPACE;function s(C){return C!==""}function a(C){return C?C.split(/[\t\n\f\r ]+/).filter(s):[]}function l(C,M){return C.hasOwnProperty(M)||(C[M]=!0),C}function c(C){if(!C)return[];var M=a(C);return Object.keys(M.reduce(l,{}))}function h(C){return function(M){return C&&C.indexOf(M)!==-1}}function f(C,M){for(var k in C)Object.prototype.hasOwnProperty.call(C,k)&&(M[k]=C[k])}function p(C,M){var k=C.prototype;if(!(k instanceof M)){let ee=function(){};ee.prototype=M.prototype,ee=new ee,f(k,ee),C.prototype=k=ee}k.constructor!=C&&(typeof C!="function"&&console.error("unknown Class:"+C),k.constructor=C)}var g={},y=g.ELEMENT_NODE=1,v=g.ATTRIBUTE_NODE=2,x=g.TEXT_NODE=3,A=g.CDATA_SECTION_NODE=4,S=g.ENTITY_REFERENCE_NODE=5,w=g.ENTITY_NODE=6,E=g.PROCESSING_INSTRUCTION_NODE=7,B=g.COMMENT_NODE=8,G=g.DOCUMENT_NODE=9,U=g.DOCUMENT_TYPE_NODE=10,H=g.DOCUMENT_FRAGMENT_NODE=11,j=g.NOTATION_NODE=12,Z={},q={};Z.INDEX_SIZE_ERR=(q[1]="Index size error",1),Z.DOMSTRING_SIZE_ERR=(q[2]="DOMString size error",2);var L=Z.HIERARCHY_REQUEST_ERR=(q[3]="Hierarchy request error",3);Z.WRONG_DOCUMENT_ERR=(q[4]="Wrong document",4),Z.INVALID_CHARACTER_ERR=(q[5]="Invalid character",5),Z.NO_DATA_ALLOWED_ERR=(q[6]="No data allowed",6),Z.NO_MODIFICATION_ALLOWED_ERR=(q[7]="No modification allowed",7);var N=Z.NOT_FOUND_ERR=(q[8]="Not found",8);Z.NOT_SUPPORTED_ERR=(q[9]="Not supported",9);var se=Z.INUSE_ATTRIBUTE_ERR=(q[10]="Attribute in use",10);Z.INVALID_STATE_ERR=(q[11]="Invalid state",11),Z.SYNTAX_ERR=(q[12]="Syntax error",12),Z.INVALID_MODIFICATION_ERR=(q[13]="Invalid modification",13),Z.NAMESPACE_ERR=(q[14]="Invalid namespace",14),Z.INVALID_ACCESS_ERR=(q[15]="Invalid access",15);function le(C,M){if(M instanceof Error)var k=M;else k=this,Error.call(this,q[C]),this.message=q[C],Error.captureStackTrace&&Error.captureStackTrace(this,le);return k.code=C,M&&(this.message=this.message+": "+M),k}le.prototype=Error.prototype,f(Z,le);function pe(){}pe.prototype={length:0,item:function(C){return C>=0&&C<this.length?this[C]:null},toString:function(C,M){for(var k=[],ee=0;ee<this.length;ee++)wn(this[ee],k,C,M);return k.join("")},filter:function(C){return Array.prototype.filter.call(this,C)},indexOf:function(C){return Array.prototype.indexOf.call(this,C)}};function Ae(C,M){this._node=C,this._refresh=M,W(this)}function W(C){var M=C._node._inc||C._node.ownerDocument._inc;if(C._inc!==M){var k=C._refresh(C._node);if(va(C,"length",k.length),!C.$$length||k.length<C.$$length)for(var ee=k.length;ee in C;ee++)Object.prototype.hasOwnProperty.call(C,ee)&&delete C[ee];f(k,C),C._inc=M}}Ae.prototype.item=function(C){return W(this),this[C]||null},p(Ae,pe);function te(){}function P(C,M){for(var k=C.length;k--;)if(C[k]===M)return k}function D(C,M,k,ee){if(ee?M[P(M,ee)]=k:M[M.length++]=k,C){k.ownerElement=C;var ye=C.ownerDocument;ye&&(ee&&we(ye,C,ee),xe(ye,C,k))}}function O(C,M,k){var ee=P(M,k);if(ee>=0){for(var ye=M.length-1;ee<ye;)M[ee]=M[++ee];if(M.length=ye,C){var Ne=C.ownerDocument;Ne&&(we(Ne,C,k),k.ownerElement=null)}}else throw new le(N,new Error(C.tagName+"@"+k))}te.prototype={length:0,item:pe.prototype.item,getNamedItem:function(C){for(var M=this.length;M--;){var k=this[M];if(k.nodeName==C)return k}},setNamedItem:function(C){var M=C.ownerElement;if(M&&M!=this._ownerElement)throw new le(se);var k=this.getNamedItem(C.nodeName);return D(this._ownerElement,this,C,k),k},setNamedItemNS:function(C){var M=C.ownerElement,k;if(M&&M!=this._ownerElement)throw new le(se);return k=this.getNamedItemNS(C.namespaceURI,C.localName),D(this._ownerElement,this,C,k),k},removeNamedItem:function(C){var M=this.getNamedItem(C);return O(this._ownerElement,this,M),M},removeNamedItemNS:function(C,M){var k=this.getNamedItemNS(C,M);return O(this._ownerElement,this,k),k},getNamedItemNS:function(C,M){for(var k=this.length;k--;){var ee=this[k];if(ee.localName==M&&ee.namespaceURI==C)return ee}return null}};function Q(){}Q.prototype={hasFeature:function(C,M){return!0},createDocument:function(C,M,k){var ee=new he;if(ee.implementation=this,ee.childNodes=new pe,ee.doctype=k||null,k&&ee.appendChild(k),M){var ye=ee.createElementNS(C,M);ee.appendChild(ye)}return ee},createDocumentType:function(C,M,k){var ee=new Is;return ee.name=C,ee.nodeName=C,ee.publicId=M||"",ee.systemId=k||"",ee}};function X(){}X.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(C,M){return Sr(this,C,M)},replaceChild:function(C,M){Sr(this,C,M,An),M&&this.removeChild(M)},removeChild:function(C){return Ee(this,C)},appendChild:function(C){return this.insertBefore(C,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(C){return Pu(this.ownerDocument||this,this,C)},normalize:function(){for(var C=this.firstChild;C;){var M=C.nextSibling;M&&M.nodeType==x&&C.nodeType==x?(this.removeChild(M),C.appendData(M.data)):(C.normalize(),C=M)}},isSupported:function(C,M){return this.ownerDocument.implementation.hasFeature(C,M)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(C){for(var M=this;M;){var k=M._nsMap;if(k){for(var ee in k)if(Object.prototype.hasOwnProperty.call(k,ee)&&k[ee]===C)return ee}M=M.nodeType==v?M.ownerDocument:M.parentNode}return null},lookupNamespaceURI:function(C){for(var M=this;M;){var k=M._nsMap;if(k&&Object.prototype.hasOwnProperty.call(k,C))return k[C];M=M.nodeType==v?M.ownerDocument:M.parentNode}return null},isDefaultNamespace:function(C){var M=this.lookupPrefix(C);return M==null}};function re(C){return C=="<"&&"&lt;"||C==">"&&"&gt;"||C=="&"&&"&amp;"||C=='"'&&"&quot;"||"&#"+C.charCodeAt()+";"}f(g,X),f(g,X.prototype);function ie(C,M){if(M(C))return!0;if(C=C.firstChild)do if(ie(C,M))return!0;while(C=C.nextSibling)}function he(){this.ownerDocument=this}function xe(C,M,k){C&&C._inc++;var ee=k.namespaceURI;ee===r.XMLNS&&(M._nsMap[k.prefix?k.localName:""]=k.value)}function we(C,M,k,ee){C&&C._inc++;var ye=k.namespaceURI;ye===r.XMLNS&&delete M._nsMap[k.prefix?k.localName:""]}function Ye(C,M,k){if(C&&C._inc){C._inc++;var ee=M.childNodes;if(k)ee[ee.length++]=k;else{for(var ye=M.firstChild,Ne=0;ye;)ee[Ne++]=ye,ye=ye.nextSibling;ee.length=Ne,delete ee[ee.length]}}}function Ee(C,M){var k=M.previousSibling,ee=M.nextSibling;return k?k.nextSibling=ee:C.firstChild=ee,ee?ee.previousSibling=k:C.lastChild=k,M.parentNode=null,M.previousSibling=null,M.nextSibling=null,Ye(C.ownerDocument,C),M}function Te(C){return C&&(C.nodeType===X.DOCUMENT_NODE||C.nodeType===X.DOCUMENT_FRAGMENT_NODE||C.nodeType===X.ELEMENT_NODE)}function it(C){return C&&(at(C)||Ot(C)||Ge(C)||C.nodeType===X.DOCUMENT_FRAGMENT_NODE||C.nodeType===X.COMMENT_NODE||C.nodeType===X.PROCESSING_INSTRUCTION_NODE)}function Ge(C){return C&&C.nodeType===X.DOCUMENT_TYPE_NODE}function at(C){return C&&C.nodeType===X.ELEMENT_NODE}function Ot(C){return C&&C.nodeType===X.TEXT_NODE}function ft(C,M){var k=C.childNodes||[];if(i(k,at)||Ge(M))return!1;var ee=i(k,Ge);return!(M&&ee&&k.indexOf(ee)>k.indexOf(M))}function vi(C,M){var k=C.childNodes||[];function ee(Ne){return at(Ne)&&Ne!==M}if(i(k,ee))return!1;var ye=i(k,Ge);return!(M&&ye&&k.indexOf(ye)>k.indexOf(M))}function Fe(C,M,k){if(!Te(C))throw new le(L,"Unexpected parent node type "+C.nodeType);if(k&&k.parentNode!==C)throw new le(N,"child not in parent");if(!it(M)||Ge(M)&&C.nodeType!==X.DOCUMENT_NODE)throw new le(L,"Unexpected node type "+M.nodeType+" for parent node type "+C.nodeType)}function qe(C,M,k){var ee=C.childNodes||[],ye=M.childNodes||[];if(M.nodeType===X.DOCUMENT_FRAGMENT_NODE){var Ne=ye.filter(at);if(Ne.length>1||i(ye,Ot))throw new le(L,"More than one element or text in fragment");if(Ne.length===1&&!ft(C,k))throw new le(L,"Element in fragment can not be inserted before doctype")}if(at(M)&&!ft(C,k))throw new le(L,"Only one element can be added and only after doctype");if(Ge(M)){if(i(ee,Ge))throw new le(L,"Only one doctype is allowed");var xt=i(ee,at);if(k&&ee.indexOf(xt)<ee.indexOf(k))throw new le(L,"Doctype can only be inserted before an element");if(!k&&xt)throw new le(L,"Doctype can not be appended since element is present")}}function An(C,M,k){var ee=C.childNodes||[],ye=M.childNodes||[];if(M.nodeType===X.DOCUMENT_FRAGMENT_NODE){var Ne=ye.filter(at);if(Ne.length>1||i(ye,Ot))throw new le(L,"More than one element or text in fragment");if(Ne.length===1&&!vi(C,k))throw new le(L,"Element in fragment can not be inserted before doctype")}if(at(M)&&!vi(C,k))throw new le(L,"Only one element can be added and only after doctype");if(Ge(M)){if(i(ee,function(Ar){return Ge(Ar)&&Ar!==k}))throw new le(L,"Only one doctype is allowed");var xt=i(ee,at);if(k&&ee.indexOf(xt)<ee.indexOf(k))throw new le(L,"Doctype can only be inserted before an element")}}function Sr(C,M,k,ee){Fe(C,M,k),C.nodeType===X.DOCUMENT_NODE&&(ee||qe)(C,M,k);var ye=M.parentNode;if(ye&&ye.removeChild(M),M.nodeType===H){var Ne=M.firstChild;if(Ne==null)return M;var xt=M.lastChild}else Ne=xt=M;var vt=k?k.previousSibling:C.lastChild;Ne.previousSibling=vt,xt.nextSibling=k,vt?vt.nextSibling=Ne:C.firstChild=Ne,k==null?C.lastChild=xt:k.previousSibling=xt;do Ne.parentNode=C;while(Ne!==xt&&(Ne=Ne.nextSibling));return Ye(C.ownerDocument||C,C),M.nodeType==H&&(M.firstChild=M.lastChild=null),M}function En(C,M){return M.parentNode&&M.parentNode.removeChild(M),M.parentNode=C,M.previousSibling=C.lastChild,M.nextSibling=null,M.previousSibling?M.previousSibling.nextSibling=M:C.firstChild=M,C.lastChild=M,Ye(C.ownerDocument,C,M),M}he.prototype={nodeName:"#document",nodeType:G,doctype:null,documentElement:null,_inc:1,insertBefore:function(C,M){if(C.nodeType==H){for(var k=C.firstChild;k;){var ee=k.nextSibling;this.insertBefore(k,M),k=ee}return C}return Sr(this,C,M),C.ownerDocument=this,this.documentElement===null&&C.nodeType===y&&(this.documentElement=C),C},removeChild:function(C){return this.documentElement==C&&(this.documentElement=null),Ee(this,C)},replaceChild:function(C,M){Sr(this,C,M,An),C.ownerDocument=this,M&&this.removeChild(M),at(C)&&(this.documentElement=C)},importNode:function(C,M){return Md(this,C,M)},getElementById:function(C){var M=null;return ie(this.documentElement,function(k){if(k.nodeType==y&&k.getAttribute("id")==C)return M=k,!0}),M},getElementsByClassName:function(C){var M=c(C);return new Ae(this,function(k){var ee=[];return M.length>0&&ie(k.documentElement,function(ye){if(ye!==k&&ye.nodeType===y){var Ne=ye.getAttribute("class");if(Ne){var xt=C===Ne;if(!xt){var vt=c(Ne);xt=M.every(h(vt))}xt&&ee.push(ye)}}}),ee})},createElement:function(C){var M=new _t;M.ownerDocument=this,M.nodeName=C,M.tagName=C,M.localName=C,M.childNodes=new pe;var k=M.attributes=new te;return k._ownerElement=M,M},createDocumentFragment:function(){var C=new Fo;return C.ownerDocument=this,C.childNodes=new pe,C},createTextNode:function(C){var M=new Ru;return M.ownerDocument=this,M.appendData(C),M},createComment:function(C){var M=new Do;return M.ownerDocument=this,M.appendData(C),M},createCDATASection:function(C){var M=new Oo;return M.ownerDocument=this,M.appendData(C),M},createProcessingInstruction:function(C,M){var k=new Us;return k.ownerDocument=this,k.tagName=k.nodeName=k.target=C,k.nodeValue=k.data=M,k},createAttribute:function(C){var M=new di;return M.ownerDocument=this,M.name=C,M.nodeName=C,M.localName=C,M.specified=!0,M},createEntityReference:function(C){var M=new Bu;return M.ownerDocument=this,M.nodeName=C,M},createElementNS:function(C,M){var k=new _t,ee=M.split(":"),ye=k.attributes=new te;return k.childNodes=new pe,k.ownerDocument=this,k.nodeName=M,k.tagName=M,k.namespaceURI=C,ee.length==2?(k.prefix=ee[0],k.localName=ee[1]):k.localName=M,ye._ownerElement=k,k},createAttributeNS:function(C,M){var k=new di,ee=M.split(":");return k.ownerDocument=this,k.nodeName=M,k.name=M,k.namespaceURI=C,k.specified=!0,ee.length==2?(k.prefix=ee[0],k.localName=ee[1]):k.localName=M,k}},p(he,X);function _t(){this._nsMap={}}_t.prototype={nodeType:y,hasAttribute:function(C){return this.getAttributeNode(C)!=null},getAttribute:function(C){var M=this.getAttributeNode(C);return M&&M.value||""},getAttributeNode:function(C){return this.attributes.getNamedItem(C)},setAttribute:function(C,M){var k=this.ownerDocument.createAttribute(C);k.value=k.nodeValue=""+M,this.setAttributeNode(k)},removeAttribute:function(C){var M=this.getAttributeNode(C);M&&this.removeAttributeNode(M)},appendChild:function(C){return C.nodeType===H?this.insertBefore(C,null):En(this,C)},setAttributeNode:function(C){return this.attributes.setNamedItem(C)},setAttributeNodeNS:function(C){return this.attributes.setNamedItemNS(C)},removeAttributeNode:function(C){return this.attributes.removeNamedItem(C.nodeName)},removeAttributeNS:function(C,M){var k=this.getAttributeNodeNS(C,M);k&&this.removeAttributeNode(k)},hasAttributeNS:function(C,M){return this.getAttributeNodeNS(C,M)!=null},getAttributeNS:function(C,M){var k=this.getAttributeNodeNS(C,M);return k&&k.value||""},setAttributeNS:function(C,M,k){var ee=this.ownerDocument.createAttributeNS(C,M);ee.value=ee.nodeValue=""+k,this.setAttributeNode(ee)},getAttributeNodeNS:function(C,M){return this.attributes.getNamedItemNS(C,M)},getElementsByTagName:function(C){return new Ae(this,function(M){var k=[];return ie(M,function(ee){ee!==M&&ee.nodeType==y&&(C==="*"||ee.tagName==C)&&k.push(ee)}),k})},getElementsByTagNameNS:function(C,M){return new Ae(this,function(k){var ee=[];return ie(k,function(ye){ye!==k&&ye.nodeType===y&&(C==="*"||ye.namespaceURI===C)&&(M==="*"||ye.localName==M)&&ee.push(ye)}),ee})}},he.prototype.getElementsByTagName=_t.prototype.getElementsByTagName,he.prototype.getElementsByTagNameNS=_t.prototype.getElementsByTagNameNS,p(_t,X);function di(){}di.prototype.nodeType=v,p(di,X);function bi(){}bi.prototype={data:"",substringData:function(C,M){return this.data.substring(C,C+M)},appendData:function(C){C=this.data+C,this.nodeValue=this.data=C,this.length=C.length},insertData:function(C,M){this.replaceData(C,0,M)},appendChild:function(C){throw new Error(q[L])},deleteData:function(C,M){this.replaceData(C,M,"")},replaceData:function(C,M,k){var ee=this.data.substring(0,C),ye=this.data.substring(C+M);k=ee+k+ye,this.nodeValue=this.data=k,this.length=k.length}},p(bi,X);function Ru(){}Ru.prototype={nodeName:"#text",nodeType:x,splitText:function(C){var M=this.data,k=M.substring(C);M=M.substring(0,C),this.data=this.nodeValue=M,this.length=M.length;var ee=this.ownerDocument.createTextNode(k);return this.parentNode&&this.parentNode.insertBefore(ee,this.nextSibling),ee}},p(Ru,bi);function Do(){}Do.prototype={nodeName:"#comment",nodeType:B},p(Do,bi);function Oo(){}Oo.prototype={nodeName:"#cdata-section",nodeType:A},p(Oo,bi);function Is(){}Is.prototype.nodeType=U,p(Is,X);function Cd(){}Cd.prototype.nodeType=j,p(Cd,X);function Mu(){}Mu.prototype.nodeType=w,p(Mu,X);function Bu(){}Bu.prototype.nodeType=S,p(Bu,X);function Fo(){}Fo.prototype.nodeName="#document-fragment",Fo.prototype.nodeType=H,p(Fo,X);function Us(){}Us.prototype.nodeType=E,p(Us,X);function ki(){}ki.prototype.serializeToString=function(C,M,k){return Rd.call(C,M,k)},X.prototype.toString=Rd;function Rd(C,M){var k=[],ee=this.nodeType==9&&this.documentElement||this,ye=ee.prefix,Ne=ee.namespaceURI;if(Ne&&ye==null){var ye=ee.lookupPrefix(Ne);if(ye==null)var xt=[{namespace:Ne,prefix:null}]}return wn(this,k,C,M,xt),k.join("")}function Zr(C,M,k){var ee=C.prefix||"",ye=C.namespaceURI;if(!ye||ee==="xml"&&ye===r.XML||ye===r.XMLNS)return!1;for(var Ne=k.length;Ne--;){var xt=k[Ne];if(xt.prefix===ee)return xt.namespace!==ye}return!0}function Ri(C,M,k){C.push(" ",M,'="',k.replace(/[<>&"\t\n\r]/g,re),'"')}function wn(C,M,k,ee,ye){if(ye||(ye=[]),ee)if(C=ee(C),C){if(typeof C=="string"){M.push(C);return}}else return;switch(C.nodeType){case y:var Ne=C.attributes,xt=Ne.length,vt=C.firstChild,Ar=C.tagName;k=r.isHTML(C.namespaceURI)||k;var Qr=Ar;if(!k&&!C.prefix&&C.namespaceURI){for(var Er,ba=0;ba<Ne.length;ba++)if(Ne.item(ba).name==="xmlns"){Er=Ne.item(ba).value;break}if(!Er)for(var ms=ye.length-1;ms>=0;ms--){var Ns=ye[ms];if(Ns.prefix===""&&Ns.namespace===C.namespaceURI){Er=Ns.namespace;break}}if(Er!==C.namespaceURI)for(var ms=ye.length-1;ms>=0;ms--){var Ns=ye[ms];if(Ns.namespace===C.namespaceURI){Ns.prefix&&(Qr=Ns.prefix+":"+Ar);break}}}M.push("<",Qr);for(var Ii=0;Ii<xt;Ii++){var Rt=Ne.item(Ii);Rt.prefix=="xmlns"?ye.push({prefix:Rt.localName,namespace:Rt.value}):Rt.nodeName=="xmlns"&&ye.push({prefix:"",namespace:Rt.value})}for(var Ii=0;Ii<xt;Ii++){var Rt=Ne.item(Ii);if(Zr(Rt,k,ye)){var qt=Rt.prefix||"",wr=Rt.namespaceURI;Ri(M,qt?"xmlns:"+qt:"xmlns",wr),ye.push({prefix:qt,namespace:wr})}wn(Rt,M,k,ee,ye)}if(Ar===Qr&&Zr(C,k,ye)){var qt=C.prefix||"",wr=C.namespaceURI;Ri(M,qt?"xmlns:"+qt:"xmlns",wr),ye.push({prefix:qt,namespace:wr})}if(vt||k&&!/^(?:meta|link|img|br|hr|input)$/i.test(Ar)){if(M.push(">"),k&&/^script$/i.test(Ar))for(;vt;)vt.data?M.push(vt.data):wn(vt,M,k,ee,ye.slice()),vt=vt.nextSibling;else for(;vt;)wn(vt,M,k,ee,ye.slice()),vt=vt.nextSibling;M.push("</",Qr,">")}else M.push("/>");return;case G:case H:for(var vt=C.firstChild;vt;)wn(vt,M,k,ee,ye.slice()),vt=vt.nextSibling;return;case v:return Ri(M,C.name,C.value);case x:return M.push(C.data.replace(/[<&>]/g,re));case A:return M.push("<![CDATA[",C.data,"]]>");case B:return M.push("<!--",C.data,"-->");case U:var Lo=C.publicId,Cn=C.systemId;if(M.push("<!DOCTYPE ",C.name),Lo)M.push(" PUBLIC ",Lo),Cn&&Cn!="."&&M.push(" ",Cn),M.push(">");else if(Cn&&Cn!=".")M.push(" SYSTEM ",Cn,">");else{var Bd=C.internalSubset;Bd&&M.push(" [",Bd,"]"),M.push(">")}return;case E:return M.push("<?",C.target," ",C.data,"?>");case S:return M.push("&",C.nodeName,";");default:M.push("??",C.nodeName)}}function Md(C,M,k){var ee;switch(M.nodeType){case y:ee=M.cloneNode(!1),ee.ownerDocument=C;case H:break;case v:k=!0;break}if(ee||(ee=M.cloneNode(!1)),ee.ownerDocument=C,ee.parentNode=null,k)for(var ye=M.firstChild;ye;)ee.appendChild(Md(C,ye,k)),ye=ye.nextSibling;return ee}function Pu(C,M,k){var ee=new M.constructor;for(var ye in M)if(Object.prototype.hasOwnProperty.call(M,ye)){var Ne=M[ye];typeof Ne!="object"&&Ne!=ee[ye]&&(ee[ye]=Ne)}switch(M.childNodes&&(ee.childNodes=new pe),ee.ownerDocument=C,ee.nodeType){case y:var xt=M.attributes,vt=ee.attributes=new te,Ar=xt.length;vt._ownerElement=ee;for(var Qr=0;Qr<Ar;Qr++)ee.setAttributeNode(Pu(C,xt.item(Qr),!0));break;case v:k=!0}if(k)for(var Er=M.firstChild;Er;)ee.appendChild(Pu(C,Er,k)),Er=Er.nextSibling;return ee}function va(C,M,k){C[M]=k}try{if(Object.defineProperty){let C=function(M){switch(M.nodeType){case y:case H:var k=[];for(M=M.firstChild;M;)M.nodeType!==7&&M.nodeType!==8&&k.push(C(M)),M=M.nextSibling;return k.join("");default:return M.nodeValue}};Go=C,Object.defineProperty(Ae.prototype,"length",{get:function(){return W(this),this.$$length}}),Object.defineProperty(X.prototype,"textContent",{get:function(){return C(this)},set:function(M){switch(this.nodeType){case y:case H:for(;this.firstChild;)this.removeChild(this.firstChild);(M||String(M))&&this.appendChild(this.ownerDocument.createTextNode(M));break;default:this.data=M,this.value=M,this.nodeValue=M}}}),va=function(M,k,ee){M["$$"+k]=ee}}}catch{}var Go;t.DocumentType=Is,t.DOMException=le,t.DOMImplementation=Q,t.Element=_t,t.Node=X,t.NodeList=pe,t.XMLSerializer=ki}),FX=ds(t=>{var e=o_().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES}),GX=ds(t=>{var e=o_().NAMESPACE,i=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+i.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),s=new RegExp("^"+i.source+r.source+"*(?::"+i.source+r.source+"*)?$"),a=0,l=1,c=2,h=3,f=4,p=5,g=6,y=7;function v(L,N){this.message=L,this.locator=N,Error.captureStackTrace&&Error.captureStackTrace(this,v)}v.prototype=new Error,v.prototype.name=v.name;function x(){}x.prototype={parse:function(L,N,se){var le=this.domBuilder;le.startDocument(),U(N,N={}),A(L,N,se,le,this.errorHandler),le.endDocument()}};function A(L,N,se,le,pe){function Ae(_t){if(_t>65535){_t-=65536;var di=55296+(_t>>10),bi=56320+(_t&1023);return String.fromCharCode(di,bi)}else return String.fromCharCode(_t)}function W(_t){var di=_t.slice(1,-1);return Object.hasOwnProperty.call(se,di)?se[di]:di.charAt(0)==="#"?Ae(parseInt(di.substr(1).replace("x","0x"))):(pe.error("entity not found:"+_t),_t)}function te(_t){if(_t>he){var di=L.substring(he,_t).replace(/&#?\w+;/g,W);X&&P(he),le.characters(di,0,_t-he),he=_t}}function P(_t,di){for(;_t>=O&&(di=Q.exec(L));)D=di.index,O=D+di[0].length,X.lineNumber++;X.columnNumber=_t-D+1}for(var D=0,O=0,Q=/.*(?:\r\n?|\n)|.*$/g,X=le.locator,re=[{currentNSMap:N}],ie={},he=0;;){try{var xe=L.indexOf("<",he);if(xe<0){if(!L.substr(he).match(/^\s*$/)){var we=le.doc,Ye=we.createTextNode(L.substr(he));we.appendChild(Ye),le.currentElement=Ye}return}switch(xe>he&&te(xe),L.charAt(xe+1)){case"/":var Fe=L.indexOf(">",xe+3),Ee=L.substring(xe+2,Fe).replace(/[ \t\n\r]+$/g,""),Te=re.pop();Fe<0?(Ee=L.substring(xe+2).replace(/[\s<].*/,""),pe.error("end tag name: "+Ee+" is not complete:"+Te.tagName),Fe=xe+1+Ee.length):Ee.match(/\s</)&&(Ee=Ee.replace(/[\s<].*/,""),pe.error("end tag name: "+Ee+" maybe not complete"),Fe=xe+1+Ee.length);var it=Te.localNSMap,Ge=Te.tagName==Ee,at=Ge||Te.tagName&&Te.tagName.toLowerCase()==Ee.toLowerCase();if(at){if(le.endElement(Te.uri,Te.localName,Ee),it)for(var Ot in it)Object.prototype.hasOwnProperty.call(it,Ot)&&le.endPrefixMapping(Ot);Ge||pe.fatalError("end tag name: "+Ee+" is not match the current start tagName:"+Te.tagName)}else re.push(Te);Fe++;break;case"?":X&&P(xe),Fe=j(L,xe,le);break;case"!":X&&P(xe),Fe=H(L,xe,le,pe);break;default:X&&P(xe);var ft=new Z,vi=re[re.length-1].currentNSMap,Fe=w(L,xe,ft,vi,W,pe),qe=ft.length;if(!ft.closed&&G(L,Fe,ft.tagName,ie)&&(ft.closed=!0,se.nbsp||pe.warning("unclosed xml attribute")),X&&qe){for(var An=S(X,{}),Sr=0;Sr<qe;Sr++){var En=ft[Sr];P(En.offset),En.locator=S(X,{})}le.locator=An,E(ft,le,vi)&&re.push(ft),le.locator=X}else E(ft,le,vi)&&re.push(ft);e.isHTML(ft.uri)&&!ft.closed?Fe=B(L,Fe,ft.tagName,W,le):Fe++}}catch(_t){if(_t instanceof v)throw _t;pe.error("element parse error: "+_t),Fe=-1}Fe>he?he=Fe:te(Math.max(xe,he)+1)}}function S(L,N){return N.lineNumber=L.lineNumber,N.columnNumber=L.columnNumber,N}function w(L,N,se,le,pe,Ae){function W(X,re,ie){se.attributeNames.hasOwnProperty(X)&&Ae.fatalError("Attribute "+X+" redefined"),se.addValue(X,re.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,pe),ie)}for(var te,P,D=++N,O=a;;){var Q=L.charAt(D);switch(Q){case"=":if(O===l)te=L.slice(N,D),O=h;else if(O===c)O=h;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(O===h||O===l)if(O===l&&(Ae.warning('attribute value must after "="'),te=L.slice(N,D)),N=D+1,D=L.indexOf(Q,N),D>0)P=L.slice(N,D),W(te,P,N-1),O=p;else throw new Error("attribute value no end '"+Q+"' match");else if(O==f)P=L.slice(N,D),W(te,P,N),Ae.warning('attribute "'+te+'" missed start quot('+Q+")!!"),N=D+1,O=p;else throw new Error('attribute value must after "="');break;case"/":switch(O){case a:se.setTagName(L.slice(N,D));case p:case g:case y:O=y,se.closed=!0;case f:case l:break;case c:se.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Ae.error("unexpected end of input"),O==a&&se.setTagName(L.slice(N,D)),D;case">":switch(O){case a:se.setTagName(L.slice(N,D));case p:case g:case y:break;case f:case l:P=L.slice(N,D),P.slice(-1)==="/"&&(se.closed=!0,P=P.slice(0,-1));case c:O===c&&(P=te),O==f?(Ae.warning('attribute "'+P+'" missed quot(")!'),W(te,P,N)):((!e.isHTML(le[""])||!P.match(/^(?:disabled|checked|selected)$/i))&&Ae.warning('attribute "'+P+'" missed value!! "'+P+'" instead!!'),W(P,P,N));break;case h:throw new Error("attribute value missed!!")}return D;case"":Q=" ";default:if(Q<=" ")switch(O){case a:se.setTagName(L.slice(N,D)),O=g;break;case l:te=L.slice(N,D),O=c;break;case f:var P=L.slice(N,D);Ae.warning('attribute "'+P+'" missed quot(")!!'),W(te,P,N);case p:O=g;break}else switch(O){case c:se.tagName,(!e.isHTML(le[""])||!te.match(/^(?:disabled|checked|selected)$/i))&&Ae.warning('attribute "'+te+'" missed value!! "'+te+'" instead2!!'),W(te,te,N),N=D,O=l;break;case p:Ae.warning('attribute space is required"'+te+'"!!');case g:O=l,N=D;break;case h:O=f,N=D;break;case y:throw new Error("elements closed character '/' and '>' must be connected to")}}D++}}function E(L,N,se){for(var le=L.tagName,pe=null,Ae=L.length;Ae--;){var W=L[Ae],te=W.qName,P=W.value,X=te.indexOf(":");if(X>0)var D=W.prefix=te.slice(0,X),O=te.slice(X+1),Q=D==="xmlns"&&O;else O=te,D=null,Q=te==="xmlns"&&"";W.localName=O,Q!==!1&&(pe==null&&(pe={},U(se,se={})),se[Q]=pe[Q]=P,W.uri=e.XMLNS,N.startPrefixMapping(Q,P))}for(var Ae=L.length;Ae--;){W=L[Ae];var D=W.prefix;D&&(D==="xml"&&(W.uri=e.XML),D!=="xmlns"&&(W.uri=se[D||""]))}var X=le.indexOf(":");X>0?(D=L.prefix=le.slice(0,X),O=L.localName=le.slice(X+1)):(D=null,O=L.localName=le);var re=L.uri=se[D||""];if(N.startElement(re,O,le,L),L.closed){if(N.endElement(re,O,le),pe)for(D in pe)Object.prototype.hasOwnProperty.call(pe,D)&&N.endPrefixMapping(D)}else return L.currentNSMap=se,L.localNSMap=pe,!0}function B(L,N,se,le,pe){if(/^(?:script|textarea)$/i.test(se)){var Ae=L.indexOf("</"+se+">",N),W=L.substring(N+1,Ae);if(/[&<]/.test(W))return/^script$/i.test(se)?(pe.characters(W,0,W.length),Ae):(W=W.replace(/&#?\w+;/g,le),pe.characters(W,0,W.length),Ae)}return N+1}function G(L,N,se,le){var pe=le[se];return pe==null&&(pe=L.lastIndexOf("</"+se+">"),pe<N&&(pe=L.lastIndexOf("</"+se)),le[se]=pe),pe<N}function U(L,N){for(var se in L)Object.prototype.hasOwnProperty.call(L,se)&&(N[se]=L[se])}function H(L,N,se,le){var pe=L.charAt(N+2);switch(pe){case"-":if(L.charAt(N+3)==="-"){var Ae=L.indexOf("-->",N+4);return Ae>N?(se.comment(L,N+4,Ae-N-4),Ae+3):(le.error("Unclosed comment"),-1)}else return-1;default:if(L.substr(N+3,6)=="CDATA["){var Ae=L.indexOf("]]>",N+9);return se.startCDATA(),se.characters(L,N+9,Ae-N-9),se.endCDATA(),Ae+3}var W=q(L,N),te=W.length;if(te>1&&/!doctype/i.test(W[0][0])){var P=W[1][0],D=!1,O=!1;te>3&&(/^public$/i.test(W[2][0])?(D=W[3][0],O=te>4&&W[4][0]):/^system$/i.test(W[2][0])&&(O=W[3][0]));var Q=W[te-1];return se.startDTD(P,D,O),se.endDTD(),Q.index+Q[0].length}}return-1}function j(L,N,se){var le=L.indexOf("?>",N);if(le){var pe=L.substring(N,le).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return pe?(pe[0].length,se.processingInstruction(pe[1],pe[2]),le+2):-1}return-1}function Z(){this.attributeNames={}}Z.prototype={setTagName:function(L){if(!s.test(L))throw new Error("invalid tagName:"+L);this.tagName=L},addValue:function(L,N,se){if(!s.test(L))throw new Error("invalid attribute:"+L);this.attributeNames[L]=this.length,this[this.length++]={qName:L,value:N,offset:se}},length:0,getLocalName:function(L){return this[L].localName},getLocator:function(L){return this[L].locator},getQName:function(L){return this[L].qName},getURI:function(L){return this[L].uri},getValue:function(L){return this[L].value}};function q(L,N){var se,le=[],pe=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(pe.lastIndex=N,pe.exec(L);se=pe.exec(L);)if(le.push(se),se[1])return le}t.XMLReader=x,t.ParseError=v}),LX=ds(t=>{var e=o_(),i=Z8(),r=FX(),s=GX(),a=i.DOMImplementation,l=e.NAMESPACE,c=s.ParseError,h=s.XMLReader;function f(w){return w.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function p(w){this.options=w||{locator:{}}}p.prototype.parseFromString=function(w,E){var B=this.options,G=new h,U=B.domBuilder||new y,H=B.errorHandler,j=B.locator,Z=B.xmlns||{},q=/\/x?html?$/.test(E),L=q?r.HTML_ENTITIES:r.XML_ENTITIES;j&&U.setDocumentLocator(j),G.errorHandler=g(H,U,j),G.domBuilder=B.domBuilder||U,q&&(Z[""]=l.HTML),Z.xml=Z.xml||l.XML;var N=B.normalizeLineEndings||f;return w&&typeof w=="string"?G.parse(N(w),Z,L):G.errorHandler.error("invalid doc source"),U.doc};function g(w,E,B){if(!w){if(E instanceof y)return E;w=E}var G={},U=w instanceof Function;B=B||{};function H(j){var Z=w[j];!Z&&U&&(Z=w.length==2?function(q){w(j,q)}:w),G[j]=Z&&function(q){Z("[xmldom "+j+"]	"+q+x(B))}||function(){}}return H("warning"),H("error"),H("fatalError"),G}function y(){this.cdata=!1}function v(w,E){E.lineNumber=w.lineNumber,E.columnNumber=w.columnNumber}y.prototype={startDocument:function(){this.doc=new a().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(w,E,B,G){var U=this.doc,H=U.createElementNS(w,B||E),j=G.length;S(this,H),this.currentElement=H,this.locator&&v(this.locator,H);for(var Z=0;Z<j;Z++){var w=G.getURI(Z),q=G.getValue(Z),B=G.getQName(Z),L=U.createAttributeNS(w,B);this.locator&&v(G.getLocator(Z),L),L.value=L.nodeValue=q,H.setAttributeNode(L)}},endElement:function(w,E,B){var G=this.currentElement;G.tagName,this.currentElement=G.parentNode},startPrefixMapping:function(w,E){},endPrefixMapping:function(w){},processingInstruction:function(w,E){var B=this.doc.createProcessingInstruction(w,E);this.locator&&v(this.locator,B),S(this,B)},ignorableWhitespace:function(w,E,B){},characters:function(w,E,B){if(w=A.apply(this,arguments),w){if(this.cdata)var G=this.doc.createCDATASection(w);else var G=this.doc.createTextNode(w);this.currentElement?this.currentElement.appendChild(G):/^\s*$/.test(w)&&this.doc.appendChild(G),this.locator&&v(this.locator,G)}},skippedEntity:function(w){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(w){(this.locator=w)&&(w.lineNumber=0)},comment:function(w,E,B){w=A.apply(this,arguments);var G=this.doc.createComment(w);this.locator&&v(this.locator,G),S(this,G)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(w,E,B){var G=this.doc.implementation;if(G&&G.createDocumentType){var U=G.createDocumentType(w,E,B);this.locator&&v(this.locator,U),S(this,U),this.doc.doctype=U}},warning:function(w){console.warn("[xmldom warning]	"+w,x(this.locator))},error:function(w){console.error("[xmldom error]	"+w,x(this.locator))},fatalError:function(w){throw new c(w,this.locator)}};function x(w){if(w)return`
@`+(w.systemId||"")+"#[line:"+w.lineNumber+",col:"+w.columnNumber+"]"}function A(w,E,B){return typeof w=="string"?w.substr(E,B):w.length>=E+B||E?new java.lang.String(w,E,B)+"":w}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(w){y.prototype[w]=function(){return null}});function S(w,E){w.currentElement?w.currentElement.appendChild(E):w.doc.appendChild(E)}t.__DOMHandler=y,t.normalizeLineEndings=f,t.DOMParser=p}),kX=ds(t=>{var e=Z8();t.DOMImplementation=e.DOMImplementation,t.XMLSerializer=e.XMLSerializer,t.DOMParser=LX().DOMParser}),kP,Q8,IX=b(()=>{kP=ho(kX()),Q8={createCanvas:(t,e)=>new OffscreenCanvas(t??0,e??0),getCanvasRenderingContext2D:()=>OffscreenCanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>globalThis.location.href,getFontFaceSet:()=>globalThis.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new kP.DOMParser().parseFromString(t,"text/xml")}}),_d,l_=b(()=>{_d=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`}),KE,J8=b(()=>{KE=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`}),Gg,e5=b(()=>{Gg=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
  uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
 
    var sample = textureSample(uTexture, uSampler, uv);
    
    return sample * alphaUniforms.uAlpha;
}`}),w0,t5,UX=b(()=>{xr(),Yr(),hi(),Sn(),l_(),J8(),e5(),w0=class i5 extends Ls{constructor(e){e={...i5.defaultOptions,...e};let i=Tr.from({vertex:{source:Gg,entryPoint:"mainVertex"},fragment:{source:Gg,entryPoint:"mainFragment"}}),r=lr.from({vertex:_d,fragment:KE,name:"alpha-filter"}),{alpha:s,...a}=e,l=new ei({uAlpha:{value:s,type:"f32"}});super({...a,gpuProgram:i,glProgram:r,resources:{alphaUniforms:l}})}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(e){this.resources.alphaUniforms.uniforms.uAlpha=e}},w0.defaultOptions={alpha:1},t5=w0}),u_,$E=b(()=>{u_={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]}});function r5(t){let e=u_[t],i=e.length,r=s5,s="",a="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;",l;for(let c=0;c<t;c++){let h=a.replace("%index%",c.toString());l=c,c>=i&&(l=t-c-1),h=h.replace("%value%",e[l].toString()),s+=h,s+=`
`}return r=r.replace("%blur%",s),r=r.replace("%size%",t.toString()),r}var s5,n5=b(()=>{$E(),s5=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`)});function a5(t,e){let i=Math.ceil(t/2),r=o5,s="",a;e?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let l=0;l<t;l++){let c=a.replace("%index%",l.toString());c=c.replace("%sampleIndex%",`${l-(i-1)}.0`),s+=c,s+=`
`}return r=r.replace("%blur%",s),r=r.replace("%size%",t.toString()),r=r.replace("%dimension%",e?"z":"w"),r}var o5,l5=b(()=>{o5=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`});function u5(t,e){let i=a5(e,t),r=r5(e);return lr.from({vertex:i,fragment:r,name:`blur-${t?"horizontal":"vertical"}-pass-filter`})}var c5=b(()=>{xr(),n5(),l5()}),ZE,h5=b(()=>{ZE=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`});function d5(t,e){let i=u_[e],r=i.length,s=[],a=[],l=[];for(let g=0;g<e;g++){s[g]=`@location(${g}) offset${g}: vec2<f32>,`,t?a[g]=`filteredCord + vec2(${g-r+1} * pixelStrength, 0.0),`:a[g]=`filteredCord + vec2(0.0, ${g-r+1} * pixelStrength),`;let y=g<r?g:e-g-1,v=i[y].toString();l[g]=`finalColor += textureSample(uTexture, uSampler, offset${g}) * ${v};`}let c=s.join(`
`),h=a.join(`
`),f=l.join(`
`),p=ZE.replace("%blur-struct%",c).replace("%blur-vertex-out%",h).replace("%blur-fragment-in%",c).replace("%blur-sampling%",f).replace("%dimension%",t?"z":"w");return Tr.from({vertex:{source:p,entryPoint:"mainVertex"},fragment:{source:p,entryPoint:"mainFragment"}})}var f5=b(()=>{Yr(),$E(),h5()}),C0,uh,p5=b(()=>{Os(),jr(),Sn(),c5(),f5(),C0=class m5 extends Ls{constructor(e){e={...m5.defaultOptions,...e};let i=u5(e.horizontal,e.kernelSize),r=d5(e.horizontal,e.kernelSize);super({glProgram:i,gpuProgram:r,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...e}),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,i,r,s){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,i,r,s);else{let a=Jt.getSameSizeTexture(i),l=i,c=a;this._state.blend=!1;let h=e.renderer.type===tr.WEBGPU;for(let f=0;f<this.passes-1;f++){e.applyFilter(this,l,c,f===0?!0:h);let p=c;c=l,l=p}this._state.blend=!0,e.applyFilter(this,l,r,s),Jt.returnTexture(a)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}},C0.defaultOptions={strength:8,quality:4,kernelSize:5},uh=C0}),k2,NX=b(()=>{Os(),jr(),gt(),Sn(),p5(),k2=class extends Ls{constructor(...t){let e=t[0]??{};typeof e=="number"&&(Pe(Xe,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),e={strength:e},t[1]!==void 0&&(e.quality=t[1]),t[2]!==void 0&&(e.resolution=t[2]||"inherit"),t[3]!==void 0&&(e.kernelSize=t[3])),e={...uh.defaultOptions,...e};let{strength:i,strengthX:r,strengthY:s,quality:a,...l}=e;super({...l,compatibleRenderers:tr.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new uh({horizontal:!0,...e}),this.blurYFilter=new uh({horizontal:!1,...e}),this.quality=a,this.strengthX=r??i,this.strengthY=s??i,this.repeatEdgePixels=!1}apply(t,e,i,r){let s=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(s&&a){let l=Jt.getSameSizeTexture(e);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(t,e,l,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(t,l,i,r),Jt.returnTexture(l)}else a?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(t,e,i,r)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(t,e,i,r))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get strengthX(){return this.blurXFilter.blur}set strengthX(t){this.blurXFilter.blur=t,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(t){this.blurYFilter.blur=t,this.updatePadding()}get blur(){return Pe("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(t){Pe("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=t}get blurX(){return Pe("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(t){Pe("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=t}get blurY(){return Pe("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(t){Pe("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}},k2.defaultOptions={strength:8,quality:4,kernelSize:5}}),QE,g5=b(()=>{QE=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uColorMatrix[20];
uniform float uAlpha;

uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * 0.2);
    float diff = (randomValue - 0.5) *  0.5;

    if (uAlpha == 0.0) {
        finalColor = color;
        return;
    }

    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    vec4 result;

    result.r = (uColorMatrix[0] * color.r);
        result.r += (uColorMatrix[1] * color.g);
        result.r += (uColorMatrix[2] * color.b);
        result.r += (uColorMatrix[3] * color.a);
        result.r += uColorMatrix[4];

    result.g = (uColorMatrix[5] * color.r);
        result.g += (uColorMatrix[6] * color.g);
        result.g += (uColorMatrix[7] * color.b);
        result.g += (uColorMatrix[8] * color.a);
        result.g += uColorMatrix[9];

    result.b = (uColorMatrix[10] * color.r);
       result.b += (uColorMatrix[11] * color.g);
       result.b += (uColorMatrix[12] * color.b);
       result.b += (uColorMatrix[13] * color.a);
       result.b += uColorMatrix[14];

    result.a = (uColorMatrix[15] * color.r);
       result.a += (uColorMatrix[16] * color.g);
       result.a += (uColorMatrix[17] * color.b);
       result.a += (uColorMatrix[18] * color.a);
       result.a += uColorMatrix[19];

    vec3 rgb = mix(color.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    finalColor = vec4(rgb, result.a);
}
`}),Lg,y5=b(()=>{Lg=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct ColorMatrixUniforms {
  uColorMatrix:array<vec4<f32>, 5>,
  uAlpha:f32,
};


@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(1) @binding(0) var<uniform> colorMatrixUniforms : ColorMatrixUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
  };
  
fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
  );
}


@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {


  var c = textureSample(uTexture, uSampler, uv);
  
  if (colorMatrixUniforms.uAlpha == 0.0) {
    return c;
  }

 
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.r /= c.a;
      c.g /= c.a;
      c.b /= c.a;
    }

    var cm = colorMatrixUniforms.uColorMatrix;


    var result = vec4<f32>(0.);

    result.r = (cm[0][0] * c.r);
    result.r += (cm[0][1] * c.g);
    result.r += (cm[0][2] * c.b);
    result.r += (cm[0][3] * c.a);
    result.r += cm[1][0];

    result.g = (cm[1][1] * c.r);
    result.g += (cm[1][2] * c.g);
    result.g += (cm[1][3] * c.b);
    result.g += (cm[2][0] * c.a);
    result.g += cm[2][1];

    result.b = (cm[2][2] * c.r);
    result.b += (cm[2][3] * c.g);
    result.b += (cm[3][0] * c.b);
    result.b += (cm[3][1] * c.a);
    result.b += cm[3][2];

    result.a = (cm[3][3] * c.r);
    result.a += (cm[4][0] * c.g);
    result.a += (cm[4][1] * c.b);
    result.a += (cm[4][2] * c.a);
    result.a += cm[4][3];

    var rgb = mix(c.rgb, result.rgb, colorMatrixUniforms.uAlpha);

    rgb.r *= result.a;
    rgb.g *= result.a;
    rgb.b *= result.a;

    return vec4(rgb, result.a);
}`}),_5,HX=b(()=>{_i(),xr(),Yr(),hi(),Sn(),l_(),g5(),y5(),_5=class extends Ls{constructor(t={}){let e=new ei({uColorMatrix:{value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],type:"f32",size:20},uAlpha:{value:1,type:"f32"}}),i=Tr.from({vertex:{source:Lg,entryPoint:"mainVertex"},fragment:{source:Lg,entryPoint:"mainFragment"}}),r=lr.from({vertex:_d,fragment:QE,name:"color-matrix-filter"});super({...t,gpuProgram:i,glProgram:r,resources:{colorMatrixUniforms:e}}),this.alpha=1}_loadMatrix(t,e=!1){let i=t;e&&(this._multiply(i,this.matrix,t),i=this._colorMatrix(i)),this.resources.colorMatrixUniforms.uniforms.uColorMatrix=i,this.resources.colorMatrixUniforms.update()}_multiply(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t}_colorMatrix(t){let e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){let i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}tint(t,e){let[i,r,s]=ct.shared.setValue(t).toArray(),a=[i,0,0,0,0,0,r,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(a,e)}greyscale(t,e){let i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}grayscale(t,e){this.greyscale(t,e)}blackAndWhite(t){let e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;let i=Math.cos(t),r=Math.sin(t),s=Math.sqrt,a=1/3,l=s(a),c=i+(1-i)*a,h=a*(1-i)-l*r,f=a*(1-i)+l*r,p=a*(1-i)+l*r,g=i+a*(1-i),y=a*(1-i)-l*r,v=a*(1-i)-l*r,x=a*(1-i)+l*r,A=i+a*(1-i),S=[c,h,f,0,0,p,g,y,0,0,v,x,A,0,0,0,0,0,1,0];this._loadMatrix(S,e)}contrast(t,e){let i=(t||0)+1,r=-.5*(i-1),s=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(s,e)}saturate(t=0,e){let i=t*2/3+1,r=(i-1)*-.5,s=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(s,e)}desaturate(){this.saturate(-1)}negative(t){let e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){let e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){let e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){let e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){let e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){let e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){let e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){let e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,i,r,s){t||(t=.2),e||(e=.15),i||(i=16770432),r||(r=3375104);let a=ct.shared,[l,c,h]=a.setValue(i).toArray(),[f,p,g]=a.setValue(r).toArray(),y=[.3,.59,.11,0,0,l,c,h,t,0,f,p,g,e,0,l-f,c-p,h-g,0,0];this._loadMatrix(y,s)}night(t,e){t||(t=.1);let i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,e)}predator(t,e){let i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)}lsd(t){let e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){let t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.resources.colorMatrixUniforms.uniforms.uColorMatrix}set matrix(t){this.resources.colorMatrixUniforms.uniforms.uColorMatrix=t}get alpha(){return this.resources.colorMatrixUniforms.uniforms.uAlpha}set alpha(t){this.resources.colorMatrixUniforms.uniforms.uAlpha=t}}}),JE,v5=b(()=>{JE=`
in vec2 vTextureCoord;
in vec2 vFilterUv;

out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uMapTexture;

uniform vec4 uInputClamp;
uniform highp vec4 uInputSize;
uniform mat2 uRotation;
uniform vec2 uScale;

void main()
{
    vec4 map = texture(uMapTexture, vFilterUv);
    
    vec2 offset = uInputSize.zw * (uRotation * (map.xy - 0.5)) * uScale; 

    finalColor = texture(uTexture, clamp(vTextureCoord + offset, uInputClamp.xy, uInputClamp.zw));
}
`}),ew,b5=b(()=>{ew=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 vFilterUv;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

uniform mat3 uFilterMatrix;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( void )
{
  return ( uFilterMatrix * vec3( filterTextureCoord(), 1.0)  ).xy;
}


void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
    vFilterUv = getFilterCoord();
}
`}),kg,x5=b(()=>{kg=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct DisplacementUniforms {
  uFilterMatrix:mat3x3<f32>,
  uScale:vec2<f32>,
  uRotation:mat2x2<f32>
};



@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : DisplacementUniforms;
@group(1) @binding(1) var uMapTexture: texture_2d<f32>;
@group(1) @binding(2) var uMapSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{

  
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var map = textureSample(uMapTexture, uMapSampler, filterUv);

    var offset =  gfu.uInputSize.zw * (filterUniforms.uRotation * (map.xy - 0.5)) * filterUniforms.uScale; 
   
    return textureSample(uTexture, uSampler, clamp(uv + offset, gfu.uInputClamp.xy, gfu.uInputClamp.zw));
}`}),T5,VX=b(()=>{nt(),vr(),xr(),Yr(),hi(),vo(),gt(),Sn(),v5(),b5(),x5(),T5=class extends Ls{constructor(...t){let e=t[0];e instanceof Yi&&(t[1]&&Pe(Xe,"DisplacementFilter now uses options object instead of params. {sprite, scale}"),e={sprite:e,scale:t[1]});let{sprite:i,scale:r,...s}=e,a=r??20;typeof a=="number"&&(a=new Et(a,a));let l=new ei({uFilterMatrix:{value:new De,type:"mat3x3<f32>"},uScale:{value:a,type:"vec2<f32>"},uRotation:{value:new Float32Array([0,0,0,0]),type:"mat2x2<f32>"}}),c=lr.from({vertex:ew,fragment:JE,name:"displacement-filter"}),h=Tr.from({vertex:{source:kg,entryPoint:"mainVertex"},fragment:{source:kg,entryPoint:"mainFragment"}}),f=i.texture.source;super({...s,gpuProgram:h,glProgram:c,resources:{filterUniforms:l,uMapTexture:f,uMapSampler:f.style}}),this._sprite=e.sprite,this._sprite.renderable=!1}apply(t,e,i,r){let s=this.resources.filterUniforms.uniforms;t.calculateSpriteMatrix(s.uFilterMatrix,this._sprite);let a=this._sprite.worldTransform,l=Math.sqrt(a.a*a.a+a.b*a.b),c=Math.sqrt(a.c*a.c+a.d*a.d);l!==0&&c!==0&&(s.uRotation[0]=a.a/l,s.uRotation[1]=a.b/l,s.uRotation[2]=a.c/c,s.uRotation[3]=a.d/c),this.resources.uMapTexture=this._sprite.texture.source,t.applyFilter(this,e,i,r)}get scale(){return this.resources.filterUniforms.uniforms.uScale}}}),tw,S5=b(()=>{tw=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) *  uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    finalColor = color;
}
`}),Ig,A5=b(()=>{Ig=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
  uNoise:f32,
  uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

fn rand(co:vec2<f32>) -> f32
{
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);
  
    
    var sample = textureSample(uTexture, uSampler, uv);
    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;
  
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (sample.a > 0.0) {
      sample.r /= sample.a;
      sample.g /= sample.a;
      sample.b /= sample.a;
    }

    sample.r += diff;
    sample.g += diff;
    sample.b += diff;

    // Premultiply alpha again.
    sample.r *= sample.a;
    sample.g *= sample.a;
    sample.b *= sample.a;
    
    return sample;
}`}),R0,E5,zX=b(()=>{xr(),Yr(),hi(),Sn(),l_(),S5(),A5(),R0=class w5 extends Ls{constructor(e={}){e={...w5.defaultOptions,...e};let i=Tr.from({vertex:{source:Ig,entryPoint:"mainVertex"},fragment:{source:Ig,entryPoint:"mainFragment"}}),r=lr.from({vertex:_d,fragment:tw,name:"noise-filter"}),{noise:s,seed:a,...l}=e;super({...l,gpuProgram:i,glProgram:r,resources:{noiseUniforms:new ei({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}}),this.noise=s,this.seed=a??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(e){this.resources.noiseUniforms.uniforms.uNoise=e}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(e){this.resources.noiseUniforms.uniforms.uSeed=e}},R0.defaultOptions={noise:.5},E5=R0}),C5,XX=b(()=>{C5=`fn getLuminosity(c: vec3<f32>) -> f32 {
  return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
}

fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32> {
  let d: f32 = lum - getLuminosity(c);
  let newColor: vec3<f32> = c.rgb + vec3<f32>(d, d, d);

  // clip back into legal range
  let newLum: f32 = getLuminosity(newColor);
  let cMin: f32 = min(newColor.r, min(newColor.g, newColor.b));
  let cMax: f32 = max(newColor.r, max(newColor.g, newColor.b));

  let t1: f32 = newLum / (newLum - cMin);
  let t2: f32 = (1.0 - newLum) / (cMax - newLum);

  let finalColor = mix(vec3<f32>(newLum, newLum, newLum), newColor, select(select(1.0, t2, cMax > 1.0), t1, cMin < 0.0));

  return finalColor;
}

fn getSaturation(c: vec3<f32>) -> f32 {
  return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
}

// Set saturation if color components are sorted in ascending order.
fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32> {
  var result: vec3<f32>;
  if (cSorted.z > cSorted.x) {
    let newY = (((cSorted.y - cSorted.x) * s) / (cSorted.z - cSorted.x));
    result = vec3<f32>(0.0, newY, s);
  } else {
    result = vec3<f32>(0.0, 0.0, 0.0);
  }
  return vec3<f32>(result.x, result.y, result.z);
}

fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32> {
    var result: vec3<f32> = c;

    if (c.r <= c.g && c.r <= c.b) {
        if (c.g <= c.b) {
            result = setSaturationMinMidMax(result, s);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.r, result.b, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.r, temp.b, temp.g);
        }
    } else if (c.g <= c.r && c.g <= c.b) {
        if (c.r <= c.b) {
            var temp: vec3<f32> = vec3<f32>(result.g, result.r, result.b);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.r, temp.b);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.g, result.b, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.b, temp.r);
        }
    } else {
        if (c.r <= c.g) {
            var temp: vec3<f32> = vec3<f32>(result.b, result.r, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.r, temp.g);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.b, result.g, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.g, temp.r);
        }
    }

    return result;
}`});function I2(t,e,i,r,s,a,l,c){let h=l-i,f=c-r,p=s-i,g=a-r,y=t-i,v=e-r,x=h*h+f*f,A=h*p+f*g,S=h*y+f*v,w=p*p+g*g,E=p*y+g*v,B=1/(x*w-A*A),G=(w*S-A*E)*B,U=(x*E-A*S)*B;return G>=0&&U>=0&&G+U<1}var R5=b(()=>{}),M5,YX=b(()=>{bS(),ci(),M5=class B5{constructor(e=0,i=0,r=0,s=0,a=0,l=0){this.type="triangle",this.x=e,this.y=i,this.x2=r,this.y2=s,this.x3=a,this.y3=l}contains(e,i){let r=(this.x-this.x3)*(i-this.y3)-(this.y-this.y3)*(e-this.x3),s=(this.x2-this.x)*(i-this.y)-(this.y2-this.y)*(e-this.x);if(r<0!=s<0&&r!==0&&s!==0)return!1;let a=(this.x3-this.x2)*(i-this.y2)-(this.y3-this.y2)*(e-this.x2);return a===0||a<0==r+s<=0}strokeContains(e,i,r,s=.5){let a=r/2,l=a*a,{x:c,x2:h,x3:f,y:p,y2:g,y3:y}=this;return ih(e,i,c,p,h,y)<=l||ih(e,i,h,g,f,y)<=l||ih(e,i,f,y,c,p)<=l}clone(){return new B5(this.x,this.y,this.x2,this.y2,this.x3,this.y3)}copyFrom(e){return this.x=e.x,this.y=e.y,this.x2=e.x2,this.y2=e.y2,this.x3=e.x3,this.y3=e.y3,this}copyTo(e){return e.copyFrom(this),e}getBounds(e){e||(e=new wt);let i=Math.min(this.x,this.x2,this.x3),r=Math.max(this.x,this.x2,this.x3),s=Math.min(this.y,this.y2,this.y3),a=Math.max(this.y,this.y2,this.y3);return e.x=i,e.y=s,e.width=r-i,e.height=a-s,e}}}),M0,iw,P5=b(()=>{br(),au(),go(),M0=class D5{constructor(e){this._tick=()=>{this.timeout=setTimeout(this._processQueue,0)},this._processQueue=()=>{let{queue:i}=this,r=0;for(;i.length&&r<D5.uploadsPerFrame;){let s=i.shift();this.uploadQueueItem(s),r++}i.length?Xt.system.addOnce(this._tick,this,Bs.UTILITY):this._resolve()},this.renderer=e,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(e){let i=Array.isArray(e)?e:[e];for(let r of i)r instanceof Lt?this._addContainer(r):this.resolveQueueItem(r,this.queue);return this}_addContainer(e){this.resolveQueueItem(e,this.queue);for(let i of e.children)this._addContainer(i)}upload(e){return e&&this.add(e),new Promise(i=>{this.queue.length?(this.resolves.push(i),this.dedupeQueue(),Xt.system.addOnce(this._tick,this,Bs.UTILITY)):i()})}dedupeQueue(){let e=Object.create(null),i=0;for(let r=0;r<this.queue.length;r++){let s=this.queue[r];e[s.uid]||(e[s.uid]=!0,this.queue[i++]=s)}this.queue.length=i}_resolve(){let{resolves:e}=this,i=e.slice(0);e.length=0;for(let r of i)r()}},M0.uploadsPerFrame=4,iw=M0}),Mo,xu=b(()=>{R5(),So(),Wr(),tt(),gt(),vn(),pa(),Mo=class extends Fs{constructor(...t){let e=t[0];e instanceof ca&&(Pe(Xe,"Mesh: use new Mesh({ geometry, shader }) instead"),e={geometry:e,shader:t[1]},t[3]&&(Pe(Xe,"Mesh: drawMode argument has been removed, use geometry.topology instead"),e.geometry.topology=t[3]));let{geometry:i,shader:r,texture:s,roundPixels:a,state:l,...c}=e;super({label:"Mesh",...c}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=r??null,this.texture=s??(r==null?void 0:r.texture)??ve.WHITE,this.state=l??ar.for2d(),this._geometry=i,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=a??!1}get material(){return Pe(Xe,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(t){this._shader!==t&&(this._shader=t,this.onViewUpdate())}get shader(){return this._shader}set geometry(t){var e;this._geometry!==t&&((e=this._geometry)==null||e.off("update",this.onViewUpdate,this),t.on("update",this.onViewUpdate,this),this._geometry=t,this.onViewUpdate())}get geometry(){return this._geometry}set texture(t){t||(t=ve.EMPTY);let e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=t),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||(this.state.data&12)!==0?!1:this._geometry instanceof Tn?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(t){let{x:e,y:i}=t;if(!this.bounds.containsPoint(e,i))return!1;let r=this.geometry.getBuffer("aPosition").data,s=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){let a=this.geometry.getIndex().data,l=a.length;for(let c=0;c+2<l;c+=s){let h=a[c]*2,f=a[c+1]*2,p=a[c+2]*2;if(I2(e,i,r[h],r[h+1],r[f],r[f+1],r[p],r[p+1]))return!0}}else{let a=r.length/2;for(let l=0;l+2<a;l+=s){let c=l*2,h=(l+1)*2,f=(l+2)*2;if(I2(e,i,r[c],r[c+1],r[h],r[h+1],r[f],r[f+1]))return!0}}return!1}destroy(t){var e;if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){let i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}(e=this._geometry)==null||e.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null}}}),rw,O5=b(()=>{tt(),au(),go(),vo(),rw=class U2 extends Yi{constructor(...e){let i=e[0];Array.isArray(e[0])&&(i={textures:e[0],autoUpdate:e[1]});let{animationSpeed:r=1,autoPlay:s=!1,autoUpdate:a=!0,loop:l=!0,onComplete:c=null,onFrameChange:h=null,onLoop:f=null,textures:p,updateAnchor:g=!1,...y}=i,[v]=p;super({...y,texture:v instanceof ve?v:v.texture}),this._textures=null,this._durations=null,this._autoUpdate=a,this._isConnectedToTicker=!1,this.animationSpeed=r,this.loop=l,this.updateAnchor=g,this.onComplete=c,this.onFrameChange=h,this.onLoop=f,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=p,s&&this.play()}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Xt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Xt.shared.add(this.update,this,Bs.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;let i=e.deltaTime,r=this.animationSpeed*i,s=this.currentFrame;if(this._durations!==null){let a=this._currentTime%1*this._durations[this.currentFrame];for(a+=r/60*1e3;a<0;)this._currentTime--,a+=this._durations[this.currentFrame];let l=Math.sign(this.animationSpeed*i);for(this._currentTime=Math.floor(this._currentTime);a>=this._durations[this.currentFrame];)a-=this._durations[this.currentFrame]*l,this._currentTime+=l;this._currentTime+=a/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):s!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<s||this.animationSpeed<0&&this.currentFrame>s)&&this.onLoop(),this._updateTexture())}_updateTexture(){let e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this.texture=this._textures[e],this.updateAnchor&&this.texture.defaultAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(){this.stop(),super.destroy(),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){let i=[];for(let r=0;r<e.length;++r)i.push(ve.from(e[r]));return new U2(i)}static fromImages(e){let i=[];for(let r=0;r<e.length;++r)i.push(ve.from(e[r]));return new U2(i)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof ve)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let i=0;i<e.length;i++)this._textures.push(e[i].texture),this._durations.push(e[i].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);let i=this.currentFrame;this._currentTime=e,i!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Xt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Xt.shared.add(this.update,this),this._isConnectedToTicker=!0))}}}),sw,F5=b(()=>{nt(),fo(),sw=class{constructor({matrix:t,observer:e}={}){this.dirty=!0,this._matrix=t??new De,this.observer=e,this.position=new oi(this,0,0),this.scale=new oi(this,1,1),this.pivot=new oi(this,0,0),this.skew=new oi(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){let t=this._matrix;return this.dirty&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this.dirty=!1),t}_onUpdate(t){var e;this.dirty=!0,t===this.skew&&this.updateSkew(),(e=this.observer)==null||e._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(t){t.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this.skew))}}}),B0,nw,G5=b(()=>{bn(),fo(),tt(),gt(),dt(),F5(),vn(),B0=class em extends Fs{constructor(...e){let i=e[0]||{};i instanceof ve&&(i={texture:i}),e.length>1&&(Pe(Xe,"use new TilingSprite({ texture, width:100, height:100 }) instead"),i.width=e[1],i.height=e[2]),i={...em.defaultOptions,...i};let{texture:r,anchor:s,tilePosition:a,tileScale:l,tileRotation:c,width:h,height:f,applyAnchorToTexture:p,roundPixels:g,...y}=i??{};super({label:"TilingSprite",...y}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new oi({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=p,this.texture=r,this._width=h??r.width,this._height=f??r.height,this._tileTransform=new sw({observer:{_onUpdate:()=>this.onViewUpdate()}}),s&&(this.anchor=s),this.tilePosition=a,this.tileScale=l,this.tileRotation=c,this.roundPixels=g??!1}static from(e,i={}){return typeof e=="string"?new em({texture:At.get(e),...i}):new em({texture:e,...i})}get uvRespectAnchor(){return Le("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(e){Le("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){typeof e=="number"?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||(e=ve.EMPTY);let i=this._texture;i!==e&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,i){typeof e=="object"&&(i=e.height??e.width,e=e.width),this._width=e,this._height=i??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}updateBounds(){let e=this._bounds,i=this._anchor,r=this._width,s=this._height;e.minX=-i._x*r,e.maxX=e.minX+r,e.minY=-i._y*s,e.maxY=e.minY+s}containsPoint(e){let i=this._width,r=this._height,s=-i*this._anchor._x,a=0;return e.x>=s&&e.x<=s+i&&(a=-r*this._anchor._y,e.y>=a&&e.y<=a+r)}destroy(e=!1){if(super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof e=="boolean"?e:e==null?void 0:e.texture){let i=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(i)}this._texture=null}},B0.defaultOptions={texture:ve.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1},nw=B0});function c_(t,e){let i=t[0]??{};return(typeof i=="string"||t[1])&&(Pe(Xe,`use new ${e}({ text: "hi!", style }) instead`),i={text:i,style:t[1]}),i}var vd,h_=b(()=>{fo(),gt(),vn(),vd=class extends Fs{constructor(t,e){let{text:i,resolution:r,style:s,anchor:a,width:l,height:c,roundPixels:h,...f}=t;super({...f}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=i??"",this.style=s,this.resolution=r??null,this.allowChildren=!1,this._anchor=new oi({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=h??!1,l!==void 0&&(this.width=l),c!==void 0&&(this.height=c)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var e;t||(t={}),(e=this._style)==null||e.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}containsPoint(t){let e=this.bounds.width,i=this.bounds.height,r=-e*this.anchor.x,s=0;return t.x>=r&&t.x<=r+e&&(s=-i*this.anchor.y,t.y>=s&&t.y<=s+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}}}),Tu,aw=b(()=>{h_(),ky(),fa(),Tu=class extends vd{constructor(...t){let e=c_(t,"Text");super(e,or),this.renderPipeId="text"}updateBounds(){let t=this._bounds,e=this._anchor,i=as.measureText(this._text,this._style),{width:r,height:s}=i;t.minX=-e._x*r,t.maxX=t.minX+r,t.minY=-e._y*s,t.maxY=t.minY+s}}}),ow,L5=b(()=>{Li(),tt(),br(),GS(),gu(),xu(),vo(),O5(),G5(),aw(),P5(),ow=class extends iw{resolveQueueItem(t,e){return t instanceof Lt?this.resolveContainerQueueItem(t,e):t instanceof Yt||t instanceof ve?e.push(t.source):t instanceof Vi&&e.push(t),null}resolveContainerQueueItem(t,e){t instanceof Yi||t instanceof nw||t instanceof Mo?e.push(t.texture.source):t instanceof Tu?e.push(t):t instanceof Iy?e.push(t.context):t instanceof rw&&t.textures.forEach(i=>{i.source?e.push(i.source):e.push(i.texture.source)})}resolveGraphicsContextQueueItem(t){this.renderer.graphicsContext.getGpuContext(t);let{instructions:e}=t;for(let i of e)if(i.action==="texture"){let{image:r}=i.data;return r.source}else if(i.action==="fill"){let{texture:r}=i.data.style;return r.source}return null}}}),lw,k5=b(()=>{dt(),h_(),fa(),Ny(),lw=class extends vd{constructor(...t){var e;let i=c_(t,"BitmapText");i.style??(i.style=i.style||{}),(e=i.style).fill??(e.fill=16777215),super(i,or),this.renderPipeId="bitmapText"}updateBounds(){let t=this._bounds,e=this._anchor,i=Wl.measureText(this.text,this._style),r=i.scale,s=i.offsetY*r,a=i.width*r,l=i.height*r,c=this._style._stroke;c&&(a+=c.width,l+=c.width),t.minX=-e._x*a,t.maxX=t.minX+a,t.minY=-e._y*(l+s),t.maxY=t.minY+l}set resolution(t){t!==null&&Le("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}}}),uw,I5=b(()=>{h_(),Vy(),WS(),uw=class extends vd{constructor(...t){let e=c_(t,"HtmlText");super(e,Kl),this.renderPipeId="htmlText"}updateBounds(){let t=this._bounds,e=this._anchor,i=qS(this.text,this._style),{width:r,height:s}=i;t.minX=-e._x*r,t.maxX=t.minX+r,t.minY=-e._y*s,t.maxY=t.minY+s}}}),cw,U5=b(()=>{Li(),gu(),aw(),k5(),I5(),L5(),cw=class extends ow{uploadQueueItem(t){t instanceof Yt?this.uploadTextureSource(t):t instanceof Tu?this.uploadText(t):t instanceof uw?this.uploadHTMLText(t):t instanceof lw?this.uploadBitmapText(t):t instanceof Vi&&this.uploadGraphicsContext(t)}uploadTextureSource(t){this.renderer.texture.initSource(t)}uploadText(t){this.renderer.renderPipes.text.initGpuText(t)}uploadBitmapText(t){this.renderer.renderPipes.bitmapText.initGpuText(t)}uploadHTMLText(t){this.renderer.renderPipes.htmlText.initGpuText(t)}uploadGraphicsContext(t){this.renderer.graphicsContext.getGpuContext(t);let{instructions:e}=t;for(let i of e)if(i.action==="texture"){let{image:r}=i.data;this.uploadTextureSource(r.source)}else if(i.action==="fill"){let{texture:r}=i.data.style;this.uploadTextureSource(r.source)}return null}}}),N2,jX=b(()=>{$(),U5(),N2=class extends cw{destroy(){clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}},N2.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"prepare"}});function qX(t){let e=[],i=0;for(let r=0;r<t;r++)e[i]={texture:{sampleType:"float",viewDimension:"2d",multisampled:!1},binding:i,visibility:GPUShaderStage.FRAGMENT},i++,e[i]={sampler:{type:"filtering"},binding:i,visibility:GPUShaderStage.FRAGMENT},i++;return e}var WX=b(()=>{});function KX(t){let e={},i=0;for(let r=0;r<t;r++)e[`textureSource${r+1}`]=i++,e[`textureSampler${r+1}`]=i++;return e}var $X=b(()=>{});function ZX(t){let e=t.split(/([\n{}])/g).map(r=>r.trim()).filter(r=>r.length),i="";return e.map(r=>{let s=i+r;return r==="{"?i+="    ":r==="}"&&(i=i.substr(0,i.length-4),s=i+r),s}).join(`
`)}var QX=b(()=>{}),N5,JX=b(()=>{_y(),by(),N5=class{constructor(t){this.priority=0,this.pipe="scissorMask",this.mask=t,this.mask.renderable=!1,this.mask.measurable=!1}addBounds(t,e){yy(this.mask,t,e)}addLocalBounds(t,e){vy(this.mask,t,e)}containsPoint(t,e){let i=this.mask;return e(i,t)}reset(){this.mask.measurable=!0,this.mask=null}destroy(){this.reset()}}});function eY(t){return t=t.replaceAll("texture2D","texture").replaceAll("gl_FragColor","finalColor").replaceAll("varying","in"),t=`
        out vec4 finalColor;
    ${t}
    `,t}var tY=b(()=>{});function iY(t){return H5[t]}var H5,rY=b(()=>{H5={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1}});function sY(t,e){let i=t.descriptor.size,r=e.gpu.device,s=new Xi({data:new Float32Array(24e5),usage:Je.MAP_READ|Je.COPY_DST}),a=e.buffer.createGPUBuffer(s),l=r.createCommandEncoder();l.copyBufferToBuffer(e.buffer.getGPUBuffer(t),0,a,0,i),r.queue.submit([l.finish()]),a.mapAsync(GPUMapMode.READ,0,i).then(()=>{a.getMappedRange(0,i),a.unmap()})}var nY=b(()=>{xn(),Gs()}),P0,V5,aY=b(()=>{gt(),P0={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},V5=new Proxy(P0,{get(t,e){return Pe(Xe,`DRAW_MODES.${e} is deprecated, use '${P0[e]}' instead`),t[e]}})});function oY(t,e,i){i||(i=z5);let r=e.pixelWidth,s=e.pixelHeight;return t.x=i.x*r|0,t.y=i.y*s|0,t.width=i.width*r|0,t.height=i.height*s|0,t}var z5,lY=b(()=>{ci(),z5=new wt(0,0,1,1)}),H2,$c,X5,Zc,Y5,uY=b(()=>{gt(),H2=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(H2||{}),$c=(t=>(t.CLAMP="clamp-to-edge",t.REPEAT="repeat",t.MIRRORED_REPEAT="mirror-repeat",t))($c||{}),X5=new Proxy($c,{get(t,e){return Pe(Xe,`DRAW_MODES.${e} is deprecated, use '${$c[e]}' instead`),t[e]}}),Zc=(t=>(t.NEAREST="nearest",t.LINEAR="linear",t))(Zc||{}),Y5=new Proxy(Zc,{get(t,e){return Pe(Xe,`DRAW_MODES.${e} is deprecated, use '${Zc[e]}' instead`),t[e]}})}),j5,cY=b(()=>{rT(),j5=class{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){let r=e.width,s=e.height;if(i){let a=t.width/2/r,l=t.height/2/s,c=t.x/r+a,h=t.y/s+l;i=Qe.add(i,Qe.NW),this.x0=c+a*Qe.uX(i),this.y0=h+l*Qe.uY(i),i=Qe.add(i,2),this.x1=c+a*Qe.uX(i),this.y1=h+l*Qe.uY(i),i=Qe.add(i,2),this.x2=c+a*Qe.uX(i),this.y2=h+l*Qe.uY(i),i=Qe.add(i,2),this.x3=c+a*Qe.uX(i),this.y3=h+l*Qe.uY(i)}else this.x0=t.x/r,this.y0=t.y/s,this.x1=(t.x+t.width)/r,this.y1=t.y/s,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/s,this.x3=t.x/r,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[pixi.js/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}});function hY(){return q5++}var q5,dY=b(()=>{q5=0});function fY(t){let e=t.toString(),i=e.indexOf("{"),r=e.lastIndexOf("}");if(i===-1||r===-1)throw new Error("getFunctionBody: No body found in function definition");return e.slice(i+1,r).trim()}var pY=b(()=>{});function mY(t,e){return Pe("8.7.0","Use container.getFastGlobalBounds() instead"),t.getFastGlobalBounds(!0,e)}var gY=b(()=>{gt()}),W5,yY=b(()=>{vn(),W5=class extends Fs{constructor(t){typeof t=="function"&&(t={render:t});let{render:e,...i}=t;super({label:"RenderContainer",...i}),this.renderPipeId="customRender",this.batched=!1,e&&(this.render=e),this.containsPoint=t.containsPoint??(()=>!1),this.addBounds=t.addBounds??(()=>!1)}updateBounds(){this._bounds.clear(),this.addBounds(this._bounds)}render(t){}}});function _Y(t,e,i){Pe("8.7.0","Please use container.collectRenderables instead.");let r=i.renderPipes?i:i.batch.renderer;return t.collectRenderables(e,r,null)}var vY=b(()=>{gt()});function bY(t,e,i){let r=t>>16&255,s=t>>8&255,a=t&255,l=e>>16&255,c=e>>8&255,h=e&255,f=r+(l-r)*i,p=s+(c-s)*i,g=a+(h-a)*i;return(f<<16)+(p<<8)+g}var xY=b(()=>{});function TY(t,e){let i=e._scale,r=e._pivot,s=e._position,a=i._x,l=i._y,c=r._x,h=r._y;t.a=e._cx*a,t.b=e._sx*a,t.c=e._cy*l,t.d=e._sy*l,t.tx=s._x-(c*t.a+h*t.c),t.ty=s._y-(c*t.b+h*t.d)}var SY=b(()=>{});function AY(t,e,i){let r=t.a,s=t.b,a=t.c,l=t.d,c=t.tx,h=t.ty,f=e.a,p=e.b,g=e.c,y=e.d;i.a=r*f+s*g,i.b=r*p+s*y,i.c=a*f+l*g,i.d=a*p+l*y,i.tx=c*f+h*g+e.tx,i.ty=c*p+h*y+e.ty}var EY=b(()=>{});function wY(t){t instanceof uo&&(t={path:t,textureMatrix:null,out:null});let e=[],i=[],r=[],s=t.path.shapePath,a=t.textureMatrix;s.shapePrimitives.forEach(({shape:c,transform:h})=>{let f=r.length,p=e.length/2,g=[],y=K5[c.type];y.build(c,g),h&&Cy(g,h),y.triangulate(g,e,2,p,r,f);let v=i.length/2;a?(h&&a.append(h.clone().invert()),ZT(e,2,p,i,v,2,e.length/2-p,a)):QT(i,v,2,e.length/2-p)});let l=t.out;return l?(l.positions=new Float32Array(e),l.uvs=new Float32Array(i),l.indices=new Uint32Array(r),l):new Tn({positions:new Float32Array(e),uvs:new Float32Array(i),indices:new Uint32Array(r)})}var K5,CY=b(()=>{JT(),eS(),pa(),sS(),oS(),lS(),uS(),Gy(),K5={rectangle:My,polygon:Ry,triangle:By,circle:ws,ellipse:ws,roundedRectangle:ws}}),D0,V2,$5,RY=b(()=>{dt(),br(),D0=class Z5 extends Lt{constructor(e={}){e={...Z5.defaultOptions,...e},super(),this.renderLayerChildren=[],this.sortableChildren=e.sortableChildren,this.sortFunction=e.sortFunction}attach(...e){for(let i=0;i<e.length;i++){let r=e[i];if(r.parentRenderLayer){if(r.parentRenderLayer===this)continue;r.parentRenderLayer.detach(r)}this.renderLayerChildren.push(r),r.parentRenderLayer=this;let s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)}return e[0]}detach(...e){for(let i=0;i<e.length;i++){let r=e[i],s=this.renderLayerChildren.indexOf(r);s!==-1&&this.renderLayerChildren.splice(s,1),r.parentRenderLayer=null;let a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0)}return e[0]}detachAll(){let e=this.renderLayerChildren;for(let i=0;i<e.length;i++)e[i].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(e,i,r){let s=this.renderLayerChildren,a=s.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let l=0;l<a;l++)s[l].parent||Le("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",s[l]),s[l].collectRenderables(e,i,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(e,i,r){if(!e)return;let s=this.renderLayerChildren;for(let a=0;a<s.length;a++)s[a]._getGlobalBoundsRecursive(!0,i,this)}},D0.defaultOptions={sortableChildren:!1,sortFunction:(t,e)=>t.zIndex-e.zIndex},V2=D0,$5=V2});function Q5(t,e,i,r){let s=i.buffers[0],a=s.data,{verticesX:l,verticesY:c}=i,h=t/(l-1),f=e/(c-1),p=0,g=r[0],y=r[1],v=r[2],x=r[3],A=r[4],S=r[5],w=r[6],E=r[7],B=r[8];for(let G=0;G<a.length;G+=2){let U=p%l*h,H=(p/l|0)*f,j=g*U+y*H+v,Z=x*U+A*H+S,q=w*U+E*H+B;a[G]=j/q,a[G+1]=Z/q,p++}s.update()}var J5=b(()=>{});function eN(t,e){let i=e[0],r=e[1],s=e[2],a=e[3],l=e[4],c=e[5],h=e[6],f=e[7],p=e[8];return t[0]=l*p-c*f,t[1]=s*f-r*p,t[2]=r*c-s*l,t[3]=c*h-a*p,t[4]=i*p-s*h,t[5]=s*a-i*c,t[6]=a*f-l*h,t[7]=r*h-i*f,t[8]=i*l-r*a,t}function tN(t,e,i){let r=e[0],s=e[1],a=e[2],l=e[3],c=e[4],h=e[5],f=e[6],p=e[7],g=e[8],y=i[0],v=i[1],x=i[2],A=i[3],S=i[4],w=i[5],E=i[6],B=i[7],G=i[8];return t[0]=y*r+v*l+x*f,t[1]=y*s+v*c+x*p,t[2]=y*a+v*h+x*g,t[3]=A*r+S*l+w*f,t[4]=A*s+S*c+w*p,t[5]=A*a+S*h+w*g,t[6]=E*r+B*l+G*f,t[7]=E*s+B*c+G*p,t[8]=E*a+B*h+G*g,t}function MY(t,e,i){let r=i[0],s=i[1],a=i[2];return t[0]=e[0]*r+e[1]*s+e[2]*a,t[1]=e[3]*r+e[4]*s+e[5]*a,t[2]=e[6]*r+e[7]*s+e[8]*a,t}function IP(t,e,i,r,s,a,l,c,h){let f=rN;f[0]=e,f[1]=r,f[2]=a,f[3]=i,f[4]=s,f[5]=l,f[6]=1,f[7]=1,f[8]=1;let p=eN(t,f);Qc[0]=c,Qc[1]=h,Qc[2]=1;let g=MY(sN,p,Qc),y=t;return t[0]=g[0],t[1]=0,t[2]=0,t[3]=0,t[4]=g[1],t[5]=0,t[6]=0,t[7]=0,t[8]=g[2],tN(t,y,f)}function iN(t,e,i,r,s,a,l,c,h,f,p,g,y,v,x,A,S){let w=IP(nN,e,i,a,l,f,p,v,x),E=IP(aN,r,s,c,h,g,y,A,S);return tN(t,eN(w,w),E)}var rN,sN,Qc,nN,aN,oN=b(()=>{rN=[0,0,0,0,0,0,0,0,0],sN=[0,0,0],Qc=[0,0,0],nN=[0,0,0,0,0,0,0,0,0],aN=[0,0,0,0,0,0,0,0,0]}),hw,lN=b(()=>{zy(),J5(),oN(),hw=class extends ad{constructor(t){super(t),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];let{width:e,height:i}=t;this.corners=[0,0,e,0,e,i,0,i]}setCorners(t,e,i,r,s,a,l,c){let h=this.corners;h[0]=t,h[1]=e,h[2]=i,h[3]=r,h[4]=s,h[5]=a,h[6]=l,h[7]=c,this.updateProjection()}updateProjection(){let{width:t,height:e}=this,i=this.corners,r=iN(this._projectionMatrix,0,0,i[0],i[1],t,0,i[2],i[3],t,e,i[4],i[5],0,e,i[6],i[7]);Q5(t,e,this,r)}}}),O0,uN,BY=b(()=>{tt(),mo(),xu(),lN(),O0=class cN extends Mo{constructor(e){e={...cN.defaultOptions,...e};let{texture:i,verticesX:r,verticesY:s,...a}=e,l=new hw(hs({width:i.width,height:i.height,verticesX:r,verticesY:s}));super(hs({...a,geometry:l})),this._texture=i,this.geometry.setCorners(e.x0,e.y0,e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}textureUpdated(){let e=this.geometry;if(!e)return;let{width:i,height:r}=this.texture;(e.width!==i||e.height!==r)&&(e.width=i,e.height=r,e.updateProjection())}set texture(e){this._texture!==e&&(super.texture=e,this.textureUpdated())}get texture(){return this._texture}setCorners(e,i,r,s,a,l,c,h){this.geometry.setCorners(e,i,r,s,a,l,c,h)}},O0.defaultOptions={texture:ve.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100},uN=O0}),hN,PY=b(()=>{mo(),xu(),zy(),hN=class extends Mo{constructor(t){let{texture:e,verticesX:i,verticesY:r,...s}=t,a=new ad(hs({width:e.width,height:e.height,verticesX:i,verticesY:r}));super(hs({...s,geometry:a,texture:e})),this.texture=e,this.autoResize=!0}textureUpdated(){let t=this.geometry,{width:e,height:i}=this.texture;this.autoResize&&(t.width!==e||t.height!==i)&&(t.width=e,t.height=i,t.build({}))}set texture(t){var e;(e=this._texture)==null||e.off("update",this.textureUpdated,this),super.texture=t,t.on("update",this.textureUpdated,this),this.textureUpdated()}get texture(){return this._texture}destroy(t){this.texture.off("update",this.textureUpdated,this),super.destroy(t)}}}),F0,dw,dN=b(()=>{pa(),F0=class fN extends Tn{constructor(e){let{width:i,points:r,textureScale:s}={...fN.defaultOptions,...e};super({positions:new Float32Array(r.length*4),uvs:new Float32Array(r.length*4),indices:new Uint32Array((r.length-1)*6)}),this.points=r,this._width=i,this.textureScale=s,this._build()}get width(){return this._width}_build(){let e=this.points;if(!e)return;let i=this.getBuffer("aPosition"),r=this.getBuffer("aUV"),s=this.getIndex();if(e.length<1)return;i.data.length/4!==e.length&&(i.data=new Float32Array(e.length*4),r.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));let a=r.data,l=s.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;let c=0,h=e[0],f=this._width*this.textureScale,p=e.length;for(let y=0;y<p;y++){let v=y*4;if(this.textureScale>0){let x=h.x-e[y].x,A=h.y-e[y].y,S=Math.sqrt(x*x+A*A);h=e[y],c+=S/f}else c=y/(p-1);a[v]=c,a[v+1]=0,a[v+2]=c,a[v+3]=1}let g=0;for(let y=0;y<p-1;y++){let v=y*2;l[g++]=v,l[g++]=v+1,l[g++]=v+2,l[g++]=v+2,l[g++]=v+1,l[g++]=v+3}r.update(),s.update(),this.updateVertices()}updateVertices(){let e=this.points;if(e.length<1)return;let i=e[0],r,s=0,a=0,l=this.buffers[0].data,c=e.length,h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let f=0;f<c;f++){let p=e[f],g=f*4;f<e.length-1?r=e[f+1]:r=p,a=-(r.x-i.x),s=r.y-i.y;let y=Math.sqrt(s*s+a*a);y<1e-6?(s=0,a=0):(s/=y,a/=y,s*=h,a*=h),l[g]=p.x+s,l[g+1]=p.y+a,l[g+2]=p.x-s,l[g+3]=p.y-a,i=p}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}},F0.defaultOptions={width:200,points:[],textureScale:0},dw=F0}),G0,pN,DY=b(()=>{mo(),xu(),dN(),G0=class mN extends Mo{constructor(e){let{texture:i,points:r,textureScale:s,...a}={...mN.defaultOptions,...e},l=new dw(hs({width:i.height,points:r,textureScale:s}));s>0&&(i.source.style.addressMode="repeat"),super(hs({...a,texture:i,geometry:l})),this.autoUpdate=!0,this.onRender=this._render}_render(){let e=this.geometry;(this.autoUpdate||e._width!==this.texture.height)&&(e._width=this.texture.height,e.update())}},G0.defaultOptions={textureScale:0},pN=G0}),gN,OY=b(()=>{mo(),xu(),pa(),gN=class extends Mo{constructor(t){let{texture:e,vertices:i,uvs:r,indices:s,topology:a,...l}=t,c=new Tn(hs({positions:i,uvs:r,indices:s,topology:a}));super(hs({...l,texture:e,geometry:c})),this.autoUpdate=!0,this.onRender=this._render}get vertices(){return this.geometry.getBuffer("aPosition").data}set vertices(t){this.geometry.getBuffer("aPosition").data=t}_render(){this.autoUpdate&&this.geometry.getBuffer("aPosition").update()}}});function FY(t,e){let{width:i,height:r}=t.frame;return e.scale(1/i,1/r),e}var GY=b(()=>{}),L0,yN,LY=b(()=>{_i(),tt(),K1(),oT(),L0=class z2{constructor(e){if(e instanceof ve)this.texture=e,nm(this,z2.defaultOptions,{});else{let i={...z2.defaultOptions,...e};nm(this,i,{})}}get alpha(){return this._alpha}set alpha(e){this._alpha=Math.min(Math.max(e,0),1),this._updateColor()}get tint(){return Ll(this._tint)}set tint(e){typeof e=="number"?this._tint=e:this._tint=ct.shared.setValue(e??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}},L0.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1},yN=L0}),Ug,_N=b(()=>{Ug={vertex:{attributeName:"aVertex",format:"float32x2",code:`
            const texture = p.texture;
            const sx = p.scaleX;
            const sy = p.scaleY;
            const ax = p.anchorX;
            const ay = p.anchorY;
            const trim = texture.trim;
            const orig = texture.orig;

            if (trim)
            {
                w1 = trim.x - (ax * orig.width);
                w0 = w1 + trim.width;

                h1 = trim.y - (ay * orig.height);
                h0 = h1 + trim.height;
            }
            else
            {
                w1 = -ax * (orig.width);
                w0 = w1 + orig.width;

                h1 = -ay * (orig.height);
                h0 = h1 + orig.height;
            }

            f32v[offset] = w1 * sx;
            f32v[offset + 1] = h1 * sy;

            f32v[offset + stride] = w0 * sx;
            f32v[offset + stride + 1] = h1 * sy;

            f32v[offset + (stride * 2)] = w0 * sx;
            f32v[offset + (stride * 2) + 1] = h0 * sy;

            f32v[offset + (stride * 3)] = w1 * sx;
            f32v[offset + (stride * 3) + 1] = h0 * sy;
        `,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
            var x = p.x;
            var y = p.y;

            f32v[offset] = x;
            f32v[offset + 1] = y;

            f32v[offset + stride] = x;
            f32v[offset + stride + 1] = y;

            f32v[offset + (stride * 2)] = x;
            f32v[offset + (stride * 2) + 1] = y;

            f32v[offset + (stride * 3)] = x;
            f32v[offset + (stride * 3) + 1] = y;
        `,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
            var rotation = p.rotation;

            f32v[offset] = rotation;
            f32v[offset + stride] = rotation;
            f32v[offset + (stride * 2)] = rotation;
            f32v[offset + (stride * 3)] = rotation;
        `,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
            var uvs = p.texture.uvs;

            f32v[offset] = uvs.x0;
            f32v[offset + 1] = uvs.y0;

            f32v[offset + stride] = uvs.x1;
            f32v[offset + stride + 1] = uvs.y1;

            f32v[offset + (stride * 2)] = uvs.x2;
            f32v[offset + (stride * 2) + 1] = uvs.y2;

            f32v[offset + (stride * 3)] = uvs.x3;
            f32v[offset + (stride * 3) + 1] = uvs.y3;
        `,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
            const c = p.color;

            u32v[offset] = c;
            u32v[offset + stride] = c;
            u32v[offset + (stride * 2)] = c;
            u32v[offset + (stride * 3)] = c;
        `,dynamic:!1}}}),UP,k0,vN,kY=b(()=>{qi(),vn(),_N(),UP=new Ci(0,0,0,0),k0=class X2 extends Fs{constructor(e={}){e={...X2.defaultOptions,...e,dynamicProperties:{...X2.defaultOptions.dynamicProperties,...e==null?void 0:e.dynamicProperties}};let{dynamicProperties:i,shader:r,roundPixels:s,texture:a,particles:l,...c}=e;super({label:"ParticleContainer",...c}),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=a||null,this.shader=r,this._properties={};for(let h in Ug){let f=Ug[h],p=i[h];this._properties[h]={...f,dynamic:p}}this.allowChildren=!0,this.roundPixels=s??!1,this.particleChildren=l??[]}addParticle(...e){for(let i=0;i<e.length;i++)this.particleChildren.push(e[i]);return this.onViewUpdate(),e[0]}removeParticle(...e){let i=!1;for(let r=0;r<e.length;r++){let s=this.particleChildren.indexOf(e[r]);s>-1&&(this.particleChildren.splice(s,1),i=!0)}return i&&this.onViewUpdate(),e[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return UP}updateBounds(){}destroy(e=!1){var i,r;if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){let s=typeof e=="boolean"?e:e==null?void 0:e.textureSource,a=this.texture??((i=this.particleChildren[0])==null?void 0:i.texture);a&&a.destroy(s)}this.texture=null,(r=this.shader)==null||r.destroy()}removeParticles(e,i){let r=this.particleChildren.splice(e,i);return this.onViewUpdate(),r}removeParticleAt(e){let i=this.particleChildren.splice(e,1);return this.onViewUpdate(),i[0]}addParticleAt(e,i){return this.particleChildren.splice(i,0,e),this.onViewUpdate(),e}addChild(...e){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...e){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(e,i){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(e){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(e){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(e,i){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(e){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(e,i){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(e,i){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...e){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(e,i){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}},k0.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1},vN=k0}),I0,Y2,bN,IY=b(()=>{tt(),gt(),vn(),eA(),fo(),I0=class xN extends Fs{constructor(e){var y,v,x,A;e instanceof ve&&(e={texture:e});let{width:i,height:r,anchor:s,leftWidth:a,rightWidth:l,topHeight:c,bottomHeight:h,texture:f,roundPixels:p,...g}=e;super({label:"NineSliceSprite",...g}),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=a??((y=f==null?void 0:f.defaultBorders)==null?void 0:y.left)??on.defaultOptions.leftWidth,this._topHeight=c??((v=f==null?void 0:f.defaultBorders)==null?void 0:v.top)??on.defaultOptions.topHeight,this._rightWidth=l??((x=f==null?void 0:f.defaultBorders)==null?void 0:x.right)??on.defaultOptions.rightWidth,this._bottomHeight=h??((A=f==null?void 0:f.defaultBorders)==null?void 0:A.bottom)??on.defaultOptions.bottomHeight,this._width=i??f.width??on.defaultOptions.width,this._height=r??f.height??on.defaultOptions.height,this.allowChildren=!1,this.texture=f??xN.defaultOptions.texture,this.roundPixels=p??!1,this._anchor=new oi({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:this.texture.defaultAnchor&&(this.anchor=this.texture.defaultAnchor)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return this._width}set width(e){this._width=e,this.onViewUpdate()}get height(){return this._height}set height(e){this._height=e,this.onViewUpdate()}setSize(e,i){typeof e=="object"&&(i=e.height??e.width,e=e.width),this._width=e,this._height=i??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this.onViewUpdate()}get texture(){return this._texture}set texture(e){e||(e=ve.EMPTY);let i=this._texture;i!==e&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){let i=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(i)}this._texture=null}updateBounds(){let e=this._bounds,i=this._anchor,r=this._width,s=this._height;e.minX=-i._x*r,e.maxX=e.minX+r,e.minY=-i._y*s,e.maxY=e.minY+s}},I0.defaultOptions={texture:ve.EMPTY},Y2=I0,bN=class extends Y2{constructor(...t){let e=t[0];e instanceof ve&&(Pe(Xe,"NineSlicePlane now uses the options object {texture, leftWidth, rightWidth, topHeight, bottomHeight}"),e={texture:e,leftWidth:t[1],topHeight:t[2],rightWidth:t[3],bottomHeight:t[4]}),Pe(Xe,"NineSlicePlane is deprecated. Use NineSliceSprite instead."),super(e)}}});function UY(t,e){return e instanceof or||e instanceof Kl?e:t==="html"?new Kl(e):new or(e)}var NY=b(()=>{Vy(),fa()});async function HY(t,e,i=200){let r=await e.extract.base64(t);await e.encoder.commandFinished;let s=i;console.log(`logging texture ${t.source.width}px ${t.source.height}px`);let a=["font-size: 1px;",`padding: ${s}px 300px;`,`background: url(${r}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",a)}var VY=b(()=>{});function TN(t,e=0,i={color:"#000000"}){t.renderGroup&&(i.color=AN[EN++]);let r="";for(let l=0;l<e;l++)r+="    ";let s=t.label;!s&&t instanceof Yi&&(s=`sprite:${t.texture.label}`);let a=`%c ${r}|- ${s} (worldX:${t.worldTransform.tx}, relativeRenderX:${t.relativeGroupTransform.tx}, renderX:${t.groupTransform.tx}, localX:${t.x})`;t.renderGroup&&(a+=" (RenderGroup)"),t.filters&&(a+="(*filters)"),console.log(a,`color:${i.color}; font-weight:bold;`),e++;for(let l=0;l<t.children.length;l++){let c=t.children[l];TN(c,e,{...i})}}function SN(t,e=0,i={index:0,color:"#000000"}){let r="";for(let a=0;a<e;a++)r+="    ";let s=`%c ${r}- ${i.index}: ${t.root.label} worldX:${t.worldTransform.tx}`;console.log(s,`color:${i.color}; font-weight:bold;`),e++;for(let a=0;a<t.renderGroupChildren.length;a++){let l=t.renderGroupChildren[a];SN(l,e,{...i,index:a})}}var AN,EN,zY=b(()=>{vo(),AN=["#000080","#228B22","#8B0000","#4169E1","#008080","#800000","#9400D3","#FF8C00","#556B2F","#8B008B"],EN=0}),wN={};_n(wN,{AbstractBitmapFont:()=>Uy,AbstractRenderer:()=>vu,AbstractText:()=>vd,AccessibilitySystem:()=>uT,AlphaFilter:()=>t5,AlphaMask:()=>um,AlphaMaskPipe:()=>jm,AnimatedSprite:()=>rw,Application:()=>Rg,ApplicationInitHook:()=>Vm,Assets:()=>ge,AssetsClass:()=>B2,BLEND_TO_NPM:()=>FT,BUFFER_TYPE:()=>Hl,BackgroundLoader:()=>SE,BackgroundSystem:()=>TA,Batch:()=>LT,BatchGeometry:()=>NT,BatchTextureArray:()=>GT,BatchableGraphics:()=>ed,BatchableMesh:()=>id,BatchableSprite:()=>fu,Batcher:()=>IT,BatcherPipe:()=>Xm,BigPool:()=>st,BindGroup:()=>us,BindGroupSystem:()=>Jm,BitmapFont:()=>Mg,BitmapFontManager:()=>Wl,BitmapText:()=>lw,BitmapTextPipe:()=>wm,BlendModeFilter:()=>jt,BlendModePipe:()=>Km,BlurFilter:()=>k2,BlurFilterPass:()=>uh,Bounds:()=>Ci,BrowserAdapter:()=>yT,Buffer:()=>Xi,BufferImageSource:()=>vh,BufferResource:()=>pd,BufferUsage:()=>Je,CLEAR:()=>Qi,Cache:()=>At,CanvasPool:()=>cs,CanvasPoolClass:()=>Ix,CanvasSource:()=>ls,CanvasTextMetrics:()=>as,CanvasTextPipe:()=>Tm,CanvasTextSystem:()=>Am,Circle:()=>_S,Color:()=>ct,ColorBlend:()=>Qx,ColorBurnBlend:()=>Jx,ColorDodgeBlend:()=>e2,ColorMask:()=>cm,ColorMaskPipe:()=>qm,ColorMatrixFilter:()=>_5,CompressedSource:()=>bu,Container:()=>Lt,Culler:()=>WE,CullerPlugin:()=>L2,CustomRenderPipe:()=>Lm,D3D10_RESOURCE_DIMENSION:()=>Qp,D3DFMT:()=>$i,DATA_URI:()=>x4,DDS:()=>He,DEG_TO_RAD:()=>D1,DEPRECATED_SCALE_MODES:()=>Zc,DEPRECATED_WRAP_MODES:()=>$c,DOMAdapter:()=>et,DRAW_MODES:()=>V5,DXGI_FORMAT:()=>Zp,DXGI_TO_TEXTURE_FORMAT:()=>Zi,DarkenBlend:()=>t2,DefaultBatcher:()=>Th,DefaultShader:()=>KT,DifferenceBlend:()=>i2,DisplacementFilter:()=>T5,DivideBlend:()=>r2,DynamicBitmapFont:()=>Em,Ellipse:()=>vS,EventBoundary:()=>pT,EventEmitter:()=>ui,EventSystem:()=>my,EventsTicker:()=>Es,ExclusionBlend:()=>s2,ExtensionType:()=>I,ExtractSystem:()=>SA,FOURCC_TO_TEXTURE_FORMAT:()=>Fg,FederatedContainer:()=>gT,FederatedEvent:()=>jh,FederatedMouseEvent:()=>zl,FederatedPointerEvent:()=>gr,FederatedWheelEvent:()=>ta,FillGradient:()=>Ps,FillPattern:()=>mu,Filter:()=>Ls,FilterEffect:()=>Vl,FilterPipe:()=>Bm,FilterSystem:()=>Pm,FontStylePromiseCache:()=>Rl,GAUSSIAN_VALUES:()=>u_,GL_FORMATS:()=>Ch,GL_INTERNAL_FORMAT:()=>F2,GL_TARGETS:()=>yg,GL_TYPES:()=>ut,GL_WRAP_MODES:()=>x2,GenerateTextureSystem:()=>$m,Geometry:()=>ca,GlBackBufferSystem:()=>tE,GlBatchAdaptor:()=>mg,GlBuffer:()=>QA,GlBufferSystem:()=>gg,GlColorMaskSystem:()=>vg,GlContextSystem:()=>JA,GlEncoderSystem:()=>bg,GlGeometrySystem:()=>_g,GlGraphicsAdaptor:()=>fg,GlMeshAdaptor:()=>pg,GlParticleContainerAdaptor:()=>cS,GlParticleContainerPipe:()=>vm,GlProgram:()=>lr,GlProgramData:()=>nE,GlRenderTarget:()=>rE,GlRenderTargetAdaptor:()=>sE,GlRenderTargetSystem:()=>Sg,GlShaderSystem:()=>Ag,GlStateSystem:()=>dE,GlStencilSystem:()=>xg,GlTexture:()=>fE,GlTextureSystem:()=>Cg,GlUboSystem:()=>Tg,GlUniformGroupSystem:()=>Eg,GlobalUniformSystem:()=>Zm,GpuBatchAdaptor:()=>Gm,GpuBlendModesToPixi:()=>Ni,GpuBufferSystem:()=>eg,GpuColorMaskSystem:()=>tg,GpuDeviceSystem:()=>ah,GpuEncoderSystem:()=>ig,GpuGraphicsAdaptor:()=>Om,GpuGraphicsContext:()=>Fx,GpuMeshAdapter:()=>Fm,GpuMipmapGenerator:()=>$A,GpuParticleContainerAdaptor:()=>gS,GpuParticleContainerPipe:()=>bm,GpuProgram:()=>Tr,GpuReadBuffer:()=>sY,GpuRenderTarget:()=>XA,GpuRenderTargetAdaptor:()=>YA,GpuRenderTargetSystem:()=>lg,GpuShaderSystem:()=>ug,GpuStateSystem:()=>cg,GpuStencilModesToPixi:()=>As,GpuStencilSystem:()=>rg,GpuTextureSystem:()=>dg,GpuUboSystem:()=>ng,GpuUniformBatchPipe:()=>ag,Graphics:()=>Iy,GraphicsContext:()=>Vi,GraphicsContextRenderData:()=>Gx,GraphicsContextSystem:()=>td,GraphicsPath:()=>uo,GraphicsPipe:()=>gm,HTMLText:()=>uw,HTMLTextPipe:()=>Cm,HTMLTextRenderData:()=>Hy,HTMLTextStyle:()=>Kl,HTMLTextSystem:()=>sh,HardLightBlend:()=>n2,HardMixBlend:()=>a2,HelloSystem:()=>nh,IGLUniformData:()=>nU,ImageSource:()=>pn,InstructionSet:()=>cy,KTX:()=>Nt,LightenBlend:()=>o2,LinearBurnBlend:()=>l2,LinearDodgeBlend:()=>u2,LinearLightBlend:()=>c2,Loader:()=>OE,LoaderParserPriority:()=>er,LuminosityBlend:()=>h2,MSAA_QUALITY:()=>H2,MaskEffectManager:()=>yh,MaskEffectManagerClass:()=>ax,MaskFilter:()=>xA,Matrix:()=>De,Mesh:()=>Mo,MeshGeometry:()=>Tn,MeshPipe:()=>ym,MeshPlane:()=>hN,MeshRope:()=>pN,MeshSimple:()=>gN,NOOP:()=>sm,NegationBlend:()=>d2,NineSliceGeometry:()=>on,NineSlicePlane:()=>bN,NineSliceSprite:()=>Y2,NineSliceSpritePipe:()=>Mm,NoiseFilter:()=>E5,ObservablePoint:()=>oi,OverlayBlend:()=>f2,PI_2:()=>B1,Particle:()=>yN,ParticleBuffer:()=>hS,ParticleContainer:()=>vN,ParticleContainerPipe:()=>Oy,ParticleShader:()=>pS,PerspectiveMesh:()=>uN,PerspectivePlaneGeometry:()=>hw,PinLightBlend:()=>p2,PipelineSystem:()=>og,PlaneGeometry:()=>ad,Point:()=>Et,Polygon:()=>rh,Pool:()=>gh,PoolGroupClass:()=>nx,PrepareBase:()=>iw,PrepareQueue:()=>ow,PrepareSystem:()=>N2,PrepareUpload:()=>cw,QuadGeometry:()=>JS,RAD_TO_DEG:()=>P1,Rectangle:()=>wt,RenderContainer:()=>W5,RenderGroup:()=>aT,RenderGroupPipe:()=>Im,RenderGroupSystem:()=>Nm,RenderLayer:()=>$5,RenderLayerClass:()=>V2,RenderTarget:()=>wh,RenderTargetSystem:()=>Zy,RenderTexture:()=>AA,RenderableGCSystem:()=>EA,RendererInitHook:()=>zm,RendererType:()=>tr,ResizePlugin:()=>am,Resolver:()=>fn,RopeGeometry:()=>dw,RoundedRectangle:()=>xS,SCALE_MODES:()=>Y5,STENCIL_MODES:()=>Ht,SVGParser:()=>JL,SaturationBlend:()=>m2,SchedulerSystem:()=>Qm,ScissorMask:()=>N5,SdfShader:()=>NS,Shader:()=>qr,ShaderStage:()=>to,ShapePath:()=>wS,SharedRenderPipes:()=>Wy,SharedSystems:()=>qy,SoftLightBlend:()=>g2,Sprite:()=>Yi,SpritePipe:()=>Hm,Spritesheet:()=>lm,State:()=>ar,StencilMask:()=>hm,StencilMaskPipe:()=>Wm,SubtractBlend:()=>y2,SystemRunner:()=>jy,TEXTURE_FORMAT_BLOCK_SIZE:()=>jE,Text:()=>Tu,TextStyle:()=>or,Texture:()=>ve,TextureGCSystem:()=>wA,TextureMatrix:()=>dy,TexturePool:()=>Jt,TexturePoolClass:()=>dx,TextureSource:()=>Yt,TextureStyle:()=>hy,TextureUvs:()=>j5,Ticker:()=>Xt,TickerListener:()=>th,TickerPlugin:()=>om,TilingSprite:()=>nw,TilingSpritePipe:()=>Rm,TilingSpriteShader:()=>QS,Transform:()=>sw,Triangle:()=>M5,UNIFORM_TO_ARRAY_SETTERS:()=>hE,UNIFORM_TO_SINGLE_SETTERS:()=>cE,UNIFORM_TYPES_MAP:()=>WT,UNIFORM_TYPES_VALUES:()=>mm,UPDATE_BLEND:()=>bh,UPDATE_COLOR:()=>kl,UPDATE_PRIORITY:()=>Bs,UPDATE_TRANSFORM:()=>rF,UPDATE_VISIBLE:()=>eo,UboBatch:()=>UA,UboSystem:()=>Ky,UniformGroup:()=>ei,VERSION:()=>$l,VideoSource:()=>Il,ViewContainer:()=>Fs,ViewSystem:()=>BA,ViewableBuffer:()=>ia,VividLightBlend:()=>_2,WGSL_ALIGN_SIZE_DATA:()=>Nl,WGSL_TO_STD40_SIZE:()=>Jy,WRAP_MODES:()=>X5,WebGLRenderer:()=>bE,WebGPURenderer:()=>ZA,WebWorkerAdapter:()=>Q8,WorkerManager:()=>Og,_getGlobalBounds:()=>X1,accessibilityTarget:()=>cT,addBits:()=>Mx,addMaskBounds:()=>yy,addMaskLocalBounds:()=>vy,addProgramDefines:()=>zF,alphaFrag:()=>KE,alphaWgsl:()=>Gg,applyMatrix:()=>zk,applyProjectiveTransformationToPlane:()=>Q5,applyStyleParams:()=>w2,assignWithIgnore:()=>nm,autoDetectEnvironment:()=>N7,autoDetectRenderer:()=>zU,autoDetectSource:()=>Pz,basisTranscoderUrls:()=>Rh,bgr2rgb:()=>Ll,bitmapFontCachePlugin:()=>xE,bitmapFontTextParser:()=>lh,bitmapFontXMLParser:()=>Bg,bitmapFontXMLStringParser:()=>Pg,blendTemplateFrag:()=>rA,blendTemplateVert:()=>sA,blendTemplateWgsl:()=>nA,blockDataMap:()=>hg,blurTemplateWgsl:()=>ZE,boundsPool:()=>os,browserExt:()=>tA,buildAdaptiveBezier:()=>TS,buildAdaptiveQuadratic:()=>OL,buildArc:()=>AS,buildArcTo:()=>UL,buildArcToSvg:()=>HL,buildCircle:()=>ws,buildContextBatches:()=>KG,buildEllipse:()=>iS,buildGeometryFromPath:()=>wY,buildLine:()=>UG,buildPixelLine:()=>HG,buildPolygon:()=>Ry,buildRectangle:()=>My,buildRoundedRectangle:()=>rS,buildSimpleUvs:()=>QT,buildTriangle:()=>By,buildUvs:()=>ZT,cacheAsTextureMixin:()=>L1,cacheTextureArray:()=>AE,calculateProjection:()=>mI,checkChildrenDidChange:()=>$1,checkDataUrl:()=>Co,checkExtension:()=>Kr,checkMaxIfStatementsInShader:()=>DF,childrenHelperMixin:()=>U1,cleanArray:()=>Y4,cleanHash:()=>X4,clearList:()=>Um,closePointEps:()=>GG,collectAllRenderables:()=>_Y,collectRenderablesMixin:()=>N1,color32BitToUniform:()=>hu,colorBit:()=>$h,colorBitGl:()=>Zh,colorMatrixFilterFrag:()=>QE,colorMatrixFilterWgsl:()=>Lg,colorToUniform:()=>Xz,compareModeToGlCompare:()=>vE,compileHighShader:()=>vG,compileHighShaderGl:()=>bG,compileHighShaderGlProgram:()=>cu,compileHighShaderGpuProgram:()=>uu,compileHooks:()=>Bx,compileInputs:()=>Px,compileOutputs:()=>gG,compileShader:()=>S2,compute2DProjection:()=>iN,convertFormatIfRequired:()=>SX,convertToList:()=>yr,copySearchParams:()=>xh,createIdFromString:()=>jl,createIndicesForQuads:()=>kx,createLevelBuffers:()=>nX,createLevelBuffersFromKTX:()=>EX,createStringVariations:()=>_F,createTexture:()=>ma,createUboElementsSTD40:()=>WI,createUboElementsWGSL:()=>aI,createUboSyncFunction:()=>GA,createUboSyncFunctionSTD40:()=>ZI,createUboSyncFunctionWGSL:()=>uI,crossOrigin:()=>m8,cullingMixin:()=>M1,curveEps:()=>LG,defaultFilterVert:()=>_d,defaultValue:()=>aE,definedProps:()=>hs,deprecation:()=>Pe,detectAvif:()=>CE,detectBasis:()=>b8,detectCompressed:()=>K8,detectDefaults:()=>RE,detectMp4:()=>ME,detectOgv:()=>BE,detectVideoAlphaMode:()=>AT,detectWebm:()=>PE,detectWebp:()=>DE,determineCrossOrigin:()=>y8,displacementFrag:()=>JE,displacementVert:()=>ew,displacementWgsl:()=>kg,earcut:()=>CN.default,effectsMixin:()=>H1,ensureAttributes:()=>NA,ensureIsBuffer:()=>UT,ensurePrecision:()=>YF,ensureTextOptions:()=>c_,ensureTextStyle:()=>UY,executeInstructions:()=>km,extensions:()=>ke,extractAttributesFromGlProgram:()=>cU,extractAttributesFromGpuProgram:()=>tG,extractFontFamilies:()=>Tk,extractStructAndGroups:()=>Vp,extractSvgUrlId:()=>zx,fastCopy:()=>fm,findHooksRx:()=>HT,findMixin:()=>V1,fontStringFromTextStyle:()=>Ah,formatShader:()=>ZX,fragmentGPUTemplate:()=>zT,fragmentGlTemplate:()=>YT,generateArraySyncSTD40:()=>KI,generateArraySyncWGSL:()=>oI,generateBlurFragSource:()=>r5,generateBlurGlProgram:()=>u5,generateBlurProgram:()=>d5,generateBlurVertSource:()=>a5,generateGPULayout:()=>qX,generateGpuLayoutGroups:()=>aG,generateLayout:()=>KX,generateLayoutHash:()=>lG,generateParticleUpdateFunction:()=>aL,generateProgram:()=>_U,generateShaderSyncCode:()=>rU,generateTextStyleKey:()=>BS,generateTextureBatchBit:()=>Sy,generateTextureBatchBitGl:()=>Ay,generateTextureMatrix:()=>YG,generateUID:()=>hY,generateUniformsSync:()=>TU,getAdjustedBlendModeBlend:()=>Yl,getAttributeInfoFromFormat:()=>mn,getBatchSamplersUniformGroup:()=>Ey,getBitmapTextLayout:()=>XS,getCanvasBoundingBox:()=>_L,getCanvasFillStyle:()=>Eh,getCanvasTexture:()=>RA,getDefaultUniformValue:()=>MG,getFastGlobalBounds:()=>mY,getFastGlobalBoundsMixin:()=>z1,getFontCss:()=>Ck,getFontFamilyName:()=>l8,getGeometryBounds:()=>IF,getGlTypeFromFormat:()=>NI,getGlobalBounds:()=>Xh,getGlobalMixin:()=>W1,getGlobalRenderableBounds:()=>e4,getLocalBounds:()=>ly,getMatrixRelativeToParent:()=>ST,getMaxFragmentPrecision:()=>HF,getMaxTexturesPerBatch:()=>bo,getOrientationOfPoints:()=>kG,getParent:()=>qO,getPo2TextureFromSource:()=>DS,getResolutionOfUrl:()=>r_,getSVGUrl:()=>Mk,getSupportedCompressedTextureFormats:()=>VE,getSupportedGPUCompressedTextureFormats:()=>D2,getSupportedGlCompressedTextureFormats:()=>P2,getSupportedTextureFormats:()=>gd,getTemporaryCanvasFromImage:()=>Pk,getTestContext:()=>MT,getTextureBatchBindGroup:()=>xy,getTextureDefaultMatrix:()=>FY,getTextureFormatFromKTXTexture:()=>CX,getUboData:()=>dU,getUniformData:()=>pU,getUrlExtension:()=>bF,glFormatToGPUFormat:()=>N8,glUploadBufferImageResource:()=>pE,glUploadCompressedTextureResource:()=>mE,glUploadImageResource:()=>e_,glUploadVideoResource:()=>yE,globalUniformsBit:()=>jT,globalUniformsBitGl:()=>qT,globalUniformsUBOBitGl:()=>wG,gpuFormatToBasisTranscoderFormat:()=>oX,gpuFormatToKTXBasisTranscoderFormat:()=>MX,gpuUploadBufferImageResource:()=>jA,gpuUploadCompressedTextureResource:()=>qA,gpuUploadImageResource:()=>Qy,gpuUploadVideoResource:()=>KA,groupD8:()=>Qe,hasCachedCanvasTexture:()=>H7,hslWgsl:()=>C5,hslgl:()=>od,hslgpu:()=>ld,injectBits:()=>Dx,insertVersion:()=>qF,isMobile:()=>lT,isPow2:()=>ux,isRenderingToScreen:()=>yI,isSafari:()=>mk,isSingleItem:()=>Xl,isWebGLSupported:()=>cd,isWebGPUSupported:()=>dd,ktxTranscoderUrls:()=>Mh,loadBasis:()=>w8,loadBasisOnWorker:()=>A8,loadBitmapFont:()=>TE,loadDDS:()=>P8,loadEnvironmentExtensions:()=>aA,loadFontAsBase64:()=>Ak,loadFontCSS:()=>$x,loadImageBitmap:()=>p8,loadJson:()=>FE,loadKTX:()=>G8,loadKTX2:()=>U8,loadKTX2onWorker:()=>k8,loadSVGImage:()=>Ok,loadSvg:()=>kE,loadTextures:()=>n_,loadTxt:()=>GE,loadVideoTextures:()=>UE,loadWebFont:()=>LE,localUniformBit:()=>io,localUniformBitGl:()=>nd,localUniformBitGroup2:()=>KS,localUniformMSDFBit:()=>LS,localUniformMSDFBitGl:()=>kS,log2:()=>xz,logDebugTexture:()=>HY,logProgramError:()=>gU,logRenderGroupScene:()=>SN,logScene:()=>TN,mSDFBit:()=>IS,mSDFBitGl:()=>US,mapFormatToGlFormat:()=>FU,mapFormatToGlInternalFormat:()=>LU,mapFormatToGlType:()=>IU,mapGlToVertexFormat:()=>lU,mapSize:()=>iY,mapType:()=>lE,mapWebGLBlendModesToPixi:()=>EU,maskFrag:()=>vA,maskVert:()=>bA,maskWgsl:()=>Ym,matrixPool:()=>Oi,measureHtmlText:()=>qS,measureMixin:()=>Z1,migrateFragmentFromV7toV8:()=>eY,mipmapScaleModeToGlFilter:()=>_E,mixHexColors:()=>bY,multiplyColors:()=>_h,multiplyHexColors:()=>Y1,nextPow2:()=>lo,noiseFrag:()=>tw,noiseWgsl:()=>Ig,nonCompressedFormats:()=>XE,normalizeExtensionPriority:()=>El,nssvg:()=>Kp,nsxhtml:()=>$p,onRenderMixin:()=>Q1,parseAttribute:()=>Xx,parseDDS:()=>M8,parseFunctionBody:()=>fY,parseKTX:()=>O8,parseSVGDefinitions:()=>KL,parseSVGFloatAttribute:()=>Ut,parseSVGPath:()=>bL,parseSVGStyle:()=>RS,particleData:()=>Ug,particlesFrag:()=>dS,particlesVert:()=>fS,particlesWgsl:()=>_m,path:()=>gi,pointInTriangle:()=>I2,preloadVideo:()=>g8,removeItems:()=>k1,removeStructAndGroupDuplicates:()=>cG,resetUids:()=>vz,resolveCharacters:()=>VS,resolveCompressedTextureUrl:()=>q8,resolveJsonUrl:()=>HE,resolveTextureUrl:()=>a_,resourceToTexture:()=>MF,roundPixelsBit:()=>Eo,roundPixelsBitGl:()=>wo,roundedShapeArc:()=>XL,roundedShapeQuadraticCurve:()=>YL,sayHello:()=>H4,scaleModeToGlFilter:()=>wg,setBasisTranscoderPath:()=>iX,setKTXTranscoderPath:()=>bX,setPositions:()=>Hk,setProgramName:()=>KF,setUvs:()=>Yk,shapeBuilders:()=>ql,sortMixin:()=>J1,spritesheetAsset:()=>vT,squaredDistanceToLineSegment:()=>ih,stripVersion:()=>JF,styleAttributes:()=>Sm,testImageFormat:()=>EE,testVideoFormat:()=>t_,textStyleToCSS:()=>yk,textureBit:()=>cA,textureBitGl:()=>hA,textureFrom:()=>BF,tilingBit:()=>$S,tilingBitGl:()=>ZS,toFillStyle:()=>sa,toLocalGlobalMixin:()=>eT,toStrokeStyle:()=>Sh,transformVertices:()=>Cy,triangulateWithHoles:()=>nS,uboSyncFunctionsSTD40:()=>sg,uboSyncFunctionsWGSL:()=>kA,uid:()=>Gt,uniformParsers:()=>un,unpremultiplyAlpha:()=>Y7,unsafeEvalSupported:()=>oA,updateLocalTransform:()=>TY,updateQuadBounds:()=>xT,updateRenderGroupTransform:()=>p4,updateRenderGroupTransforms:()=>mA,updateTextBounds:()=>xm,updateTransformAndChildren:()=>gA,updateTransformBackwards:()=>oy,updateWorldTransform:()=>AY,v8_0_0:()=>Xe,v8_3_4:()=>F1,validFormats:()=>Bh,validateRenderables:()=>y4,vertexGPUTemplate:()=>VT,vertexGlTemplate:()=>XT,viewportFromFrame:()=>oY,vkFormatToGPUFormat:()=>z8,warn:()=>Le,webworkerExt:()=>iA,wrapModeToGlAddress:()=>oh});var CN,yt=b(()=>{m7(),_7(),$(),$(),RT(),bT(),oF(),uF(),v7(),b7(),x7(),T7(),S7(),A7(),E7(),w7(),C7(),R7(),M7(),B7(),P7(),D7(),O7(),F7(),G7(),L7(),k7(),I7(),U7(),q7(),cF(),dF(),J7(),$U(),bn(),ZU(),QU(),JU(),t8(),i8(),r8(),s8(),wE(),i_(),n8(),Xr(),a8(),o8(),h8(),d8(),IE(),_8(),ga(),f8(),v8(),NE(),_o(),Ro(),$r(),qh(),_T(),vF(),gy(),_i(),eX(),sX(),aX(),lX(),S8(),E8(),R8(),fX(),B8(),_X(),F8(),D8(),TX(),AX(),wX(),RX(),V8(),BX(),L8(),Y8(),I8(),DX(),W8(),$8(),OX(),FO(),Ct(),o4(),gF(),IX(),pF(),mT(),hT(),fy(),mF(),py(),dT(),fT(),s4(),n4(),a4(),XX(),J8(),e5(),h5(),g5(),y5(),l_(),v5(),b5(),x5(),S5(),A5(),A4(),E4(),w4(),ti(),Xy(),Yy(),UX(),NX(),p5(),$E(),n5(),c5(),l5(),f5(),HX(),VX(),zX(),Sn(),ay(),Jk(),i4(),C4(),rT(),nt(),O1(),Yh(),bS(),fo(),vr(),R5(),SL(),EL(),CL(),ci(),ML(),YX(),P5(),L5(),jX(),U5(),FI(),FF(),xo(),WX(),$X(),Ty(),h4(),LF(),T4(),NF(),GF(),$T(),OG(),ha(),AG(),fG(),pG(),mG(),yG(),QX(),_G(),EG(),Qh(),Jh(),CG(),yu(),da(),dA(),EF(),R4(),wF(),M4(),HO(),JX(),CF(),B4(),_y(),by(),XU(),GI(),LI(),kI(),_u(),II(),VI(),HI(),zI(),YI(),jI(),eU(),qI(),JI(),tU(),iU(),sU(),wy(),xr(),aU(),bU(),AU(),tY(),oU(),oE(),HA(),hU(),vU(),VF(),BT(),fU(),mU(),yU(),rY(),uE(),XF(),jF(),WF(),QF(),eG(),iE(),QI(),$I(),SU(),xU(),CU(),wU(),eE(),RU(),NU(),MU(),BU(),gE(),PU(),OU(),x8(),GU(),kU(),UU(),DU(),j7(),VU(),eI(),tI(),nY(),dI(),iI(),rI(),sI(),nI(),hI(),fI(),pI(),gI(),vI(),bI(),xI(),ua(),Yr(),TI(),OA(),cI(),rG(),sG(),lI(),oG(),uG(),hG(),SI(),AI(),VA(),MI(),EI(),wI(),WA(),CI(),T8(),RI(),PI(),P4(),O4(),xn(),$y(),Gs(),OT(),F4(),I4(),aY(),So(),JT(),kF(),Ao(),UF(),eS(),tT(),U4(),_I(),CA(),zA(),lY(),N4(),nG(),fs(),RG(),DA(),hi(),LA(),BG(),IA(),FA(),z4(),To(),Wh(),Wr(),ud(),PA(),uA(),pu(),uY(),q4(),L4(),sT(),ou(),md(),lu(),Li(),wT(),tt(),K4(),nT(),Os(),iT(),cY(),dY(),MA(),zE(),yd(),PF(),Kh(),pY(),Q4(),jr(),uL(),cL(),hL(),qi(),gY(),nu(),uy(),t4(),po(),IO(),UO(),NO(),VO(),zO(),YO(),K1(),KO(),$O(),ZO(),QO(),br(),d4(),yY(),iF(),f4(),v4(),oT(),WO(),pA(),vY(),mo(),fA(),xY(),q1(),j1(),SY(),g4(),EY(),_4(),DI(),du(),u4(),tS(),SS(),IL(),ES(),NL(),zL(),sS(),NG(),VG(),oS(),lS(),uS(),Hz(),sd(),Fy(),GS(),gu(),Py(),eL(),Gy(),jL(),qL(),$L(),CS(),TL(),QL(),tk(),ZL(),QG(),CY(),MS(),WG(),IG(),aS(),RY(),BY(),lN(),J5(),oN(),PY(),zy(),DY(),OY(),dN(),OI(),c4(),Dy(),GY(),xu(),pa(),iL(),sL(),pL(),fL(),mL(),LY(),lL(),kY(),mS(),_N(),dL(),nL(),oL(),O5(),eA(),IY(),Zk(),Ik(),Uk(),G5(),qk(),Xk(),Nk(),Vk(),jk(),rd(),vo(),b4(),HS(),jU(),qU(),WU(),KU(),YU(),Ny(),k5(),dk(),ck(),YS(),zS(),I5(),pk(),jS(),Vy(),Gk(),Sk(),Rk(),Bk(),Dk(),Ek(),wk(),Fk(),WS(),bk(),h_(),ky(),yL(),nk(),Ly(),FS(),uk(),ok(),lk(),aw(),fa(),NY(),PS(),OS(),yS(),vn(),xF(),SF(),au(),go(),hF(),ET(),aF(),gk(),hd(),fd(),lA(),vL(),yA(),ir(),j4(),I1(),Gi(),TT(),DT(),_A(),gt(),VY(),zY(),dt(),tF(),F5(),s_(),yo(),G1(),rr(),V4(),CN=ho(zG()),ke.add(tA,iA)}),XY=ds((t,e)=>{(function(i,r){typeof t=="object"?e.exports=t=r():typeof define=="function"&&define.amd?define([],r):i.CryptoJS=r()})(t,function(){var i=i||function(r,s){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof global<"u"&&global.crypto&&(a=global.crypto),!a&&typeof CM=="function")try{a=CM("crypto")}catch{}var l=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||function(){function E(){}return function(B){var G;return E.prototype=B,G=new E,E.prototype=null,G}}(),h={},f=h.lib={},p=f.Base=function(){return{extend:function(E){var B=c(this);return E&&B.mixIn(E),(!B.hasOwnProperty("init")||this.init===B.init)&&(B.init=function(){B.$super.init.apply(this,arguments)}),B.init.prototype=B,B.$super=this,B},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var B in E)E.hasOwnProperty(B)&&(this[B]=E[B]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),g=f.WordArray=p.extend({init:function(E,B){E=this.words=E||[],B!=s?this.sigBytes=B:this.sigBytes=E.length*4},toString:function(E){return(E||v).stringify(this)},concat:function(E){var B=this.words,G=E.words,U=this.sigBytes,H=E.sigBytes;if(this.clamp(),U%4)for(var j=0;j<H;j++){var Z=G[j>>>2]>>>24-j%4*8&255;B[U+j>>>2]|=Z<<24-(U+j)%4*8}else for(var q=0;q<H;q+=4)B[U+q>>>2]=G[q>>>2];return this.sigBytes+=H,this},clamp:function(){var E=this.words,B=this.sigBytes;E[B>>>2]&=4294967295<<32-B%4*8,E.length=r.ceil(B/4)},clone:function(){var E=p.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var B=[],G=0;G<E;G+=4)B.push(l());return new g.init(B,E)}}),y=h.enc={},v=y.Hex={stringify:function(E){for(var B=E.words,G=E.sigBytes,U=[],H=0;H<G;H++){var j=B[H>>>2]>>>24-H%4*8&255;U.push((j>>>4).toString(16)),U.push((j&15).toString(16))}return U.join("")},parse:function(E){for(var B=E.length,G=[],U=0;U<B;U+=2)G[U>>>3]|=parseInt(E.substr(U,2),16)<<24-U%8*4;return new g.init(G,B/2)}},x=y.Latin1={stringify:function(E){for(var B=E.words,G=E.sigBytes,U=[],H=0;H<G;H++){var j=B[H>>>2]>>>24-H%4*8&255;U.push(String.fromCharCode(j))}return U.join("")},parse:function(E){for(var B=E.length,G=[],U=0;U<B;U++)G[U>>>2]|=(E.charCodeAt(U)&255)<<24-U%4*8;return new g.init(G,B)}},A=y.Utf8={stringify:function(E){try{return decodeURIComponent(escape(x.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return x.parse(unescape(encodeURIComponent(E)))}},S=f.BufferedBlockAlgorithm=p.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=A.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var B,G=this._data,U=G.words,H=G.sigBytes,j=this.blockSize,Z=j*4,q=H/Z;E?q=r.ceil(q):q=r.max((q|0)-this._minBufferSize,0);var L=q*j,N=r.min(L*4,H);if(L){for(var se=0;se<L;se+=j)this._doProcessBlock(U,se);B=U.splice(0,L),G.sigBytes-=N}return new g.init(B,N)},clone:function(){var E=p.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});f.Hasher=S.extend({cfg:p.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){S.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var B=this._doFinalize();return B},blockSize:16,_createHelper:function(E){return function(B,G){return new E.init(G).finalize(B)}},_createHmacHelper:function(E){return function(B,G){return new w.HMAC.init(E,G).finalize(B)}}});var w=h.algo={};return h}(Math);return i})}),RN=ds((t,e)=>{(function(i,r){typeof t=="object"?e.exports=t=r(XY()):typeof define=="function"&&define.amd?define(["./core"],r):r(i.CryptoJS)})(t,function(i){return function(){var r=i,s=r.lib,a=s.WordArray,l=s.Hasher,c=r.algo,h=[],f=c.SHA1=l.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(p,g){for(var y=this._hash.words,v=y[0],x=y[1],A=y[2],S=y[3],w=y[4],E=0;E<80;E++){if(E<16)h[E]=p[g+E]|0;else{var B=h[E-3]^h[E-8]^h[E-14]^h[E-16];h[E]=B<<1|B>>>31}var G=(v<<5|v>>>27)+w+h[E];E<20?G+=(x&A|~x&S)+1518500249:E<40?G+=(x^A^S)+1859775393:E<60?G+=(x&A|x&S|A&S)-1894007588:G+=(x^A^S)-899497514,w=S,S=A,A=x<<30|x>>>2,x=v,v=G}y[0]=y[0]+v|0,y[1]=y[1]+x|0,y[2]=y[2]+A|0,y[3]=y[3]+S|0,y[4]=y[4]+w|0},_doFinalize:function(){var p=this._data,g=p.words,y=this._nDataBytes*8,v=p.sigBytes*8;return g[v>>>5]|=128<<24-v%32,g[(v+64>>>9<<4)+14]=Math.floor(y/4294967296),g[(v+64>>>9<<4)+15]=y,p.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var p=l.clone.call(this);return p._hash=this._hash.clone(),p}});r.SHA1=l._createHelper(f),r.HmacSHA1=l._createHmacHelper(f)}(),i.SHA1})});yt();var MN={};_n(MN,{CanvasBase:()=>WP,CanvasBaseItem:()=>WP,CanvasContainer:()=>Ph,CanvasEvent:()=>Kj,CanvasImage:()=>yi,CanvasSprite:()=>Oh,CanvasText:()=>Wg,CanvasVideo:()=>gn,CharacterBaseModel:()=>Zj,CharacterStoredClass:()=>bw,ChoiceMenuOption:()=>e6,ChoiceMenuOptionClose:()=>e1,Container:()=>Ph,Dialogue:()=>Ml,DialogueBaseModel:()=>Ml,ImageContainer:()=>ji,ImageSprite:()=>yi,Label:()=>p_,LabelAbstract:()=>JN,Sound:()=>a1,Sprite:()=>Oh,StoredClassModel:()=>h6,Text:()=>Wg,VideoSprite:()=>gn});yt();var Vt={};_n(Vt,{DistortionFilter:()=>jY,EqualizerFilter:()=>ps,Filter:()=>ya,MonoFilter:()=>qY,ReverbFilter:()=>WY,StereoFilter:()=>KY,StreamFilter:()=>$Y,TelephoneFilter:()=>ZY});var BN;function YY(t){return BN=t,t}function li(){return BN}var ya=class{constructor(t,e){this.init(t,e)}init(t,e){this.destination=t,this.source=e||t}connect(t){var e;(e=this.source)==null||e.connect(t)}disconnect(){var t;(t=this.source)==null||t.disconnect()}destroy(){this.disconnect(),this.destination=null,this.source=null}},jY=class extends ya{constructor(t=0){let e;if(!li().useLegacy){let{audioContext:i}=li().context;e=i.createWaveShaper()}super(e),this._distortion=e,this.amount=t}set amount(t){if(this._amount=t,li().useLegacy)return;let e=t*1e3,i=44100,r=new Float32Array(i),s=Math.PI/180,a=0,l;for(;a<i;++a)l=a*2/i-1,r[a]=(3+e)*l*20*s/(Math.PI+e*Math.abs(l));this._distortion.curve=r,this._distortion.oversample="4x"}get amount(){return this._amount}destroy(){this._distortion=null,super.destroy()}},zr=class{static setParamValue(t,e){if(t.setValueAtTime){let i=li().context;t.setValueAtTime(e,i.audioContext.currentTime)}else t.value=e;return e}},bt=class extends ya{constructor(t=0,e=0,i=0,r=0,s=0,a=0,l=0,c=0,h=0,f=0){let p=[],g=[{f:bt.F32,type:"lowshelf",gain:t},{f:bt.F64,type:"peaking",gain:e},{f:bt.F125,type:"peaking",gain:i},{f:bt.F250,type:"peaking",gain:r},{f:bt.F500,type:"peaking",gain:s},{f:bt.F1K,type:"peaking",gain:a},{f:bt.F2K,type:"peaking",gain:l},{f:bt.F4K,type:"peaking",gain:c},{f:bt.F8K,type:"peaking",gain:h},{f:bt.F16K,type:"highshelf",gain:f}];li().useLegacy||(p=g.map(y=>{let v=li().context.audioContext.createBiquadFilter();return v.type=y.type,zr.setParamValue(v.Q,1),v.frequency.value=y.f,zr.setParamValue(v.gain,y.gain),v})),super(p[0],p[p.length-1]),this.bands=p,this.bandsMap={};for(let y=0;y<this.bands.length;y++){let v=this.bands[y];y>0&&this.bands[y-1].connect(v),this.bandsMap[v.frequency.value]=v}}setGain(t,e=0){if(!this.bandsMap[t])throw new Error(`No band found for frequency ${t}`);zr.setParamValue(this.bandsMap[t].gain,e)}getGain(t){if(!this.bandsMap[t])throw new Error(`No band found for frequency ${t}`);return this.bandsMap[t].gain.value}set f32(t){this.setGain(bt.F32,t)}get f32(){return this.getGain(bt.F32)}set f64(t){this.setGain(bt.F64,t)}get f64(){return this.getGain(bt.F64)}set f125(t){this.setGain(bt.F125,t)}get f125(){return this.getGain(bt.F125)}set f250(t){this.setGain(bt.F250,t)}get f250(){return this.getGain(bt.F250)}set f500(t){this.setGain(bt.F500,t)}get f500(){return this.getGain(bt.F500)}set f1k(t){this.setGain(bt.F1K,t)}get f1k(){return this.getGain(bt.F1K)}set f2k(t){this.setGain(bt.F2K,t)}get f2k(){return this.getGain(bt.F2K)}set f4k(t){this.setGain(bt.F4K,t)}get f4k(){return this.getGain(bt.F4K)}set f8k(t){this.setGain(bt.F8K,t)}get f8k(){return this.getGain(bt.F8K)}set f16k(t){this.setGain(bt.F16K,t)}get f16k(){return this.getGain(bt.F16K)}reset(){this.bands.forEach(t=>{zr.setParamValue(t.gain,0)})}destroy(){this.bands.forEach(t=>{t.disconnect()}),this.bands=null,this.bandsMap=null}},ps=bt;ps.F32=32;ps.F64=64;ps.F125=125;ps.F250=250;ps.F500=500;ps.F1K=1e3;ps.F2K=2e3;ps.F4K=4e3;ps.F8K=8e3;ps.F16K=16e3;var qY=class extends ya{constructor(){let t,e;if(!li().useLegacy){let{audioContext:i}=li().context;e=i.createChannelSplitter(),t=i.createChannelMerger(),t.connect(e)}super(t,e),this._merger=t}destroy(){var t;(t=this._merger)==null||t.disconnect(),this._merger=null,super.destroy()}},WY=class extends ya{constructor(t=3,e=2,i=!1){super(null),this._seconds=this._clamp(t,1,50),this._decay=this._clamp(e,0,100),this._reverse=i,this._rebuild()}_clamp(t,e,i){return Math.min(i,Math.max(e,t))}get seconds(){return this._seconds}set seconds(t){this._seconds=this._clamp(t,1,50),this._rebuild()}get decay(){return this._decay}set decay(t){this._decay=this._clamp(t,0,100),this._rebuild()}get reverse(){return this._reverse}set reverse(t){this._reverse=t,this._rebuild()}_rebuild(){if(li().useLegacy)return;let{audioContext:t}=li().context,e=t.sampleRate,i=e*this._seconds,r=t.createBuffer(2,i,e),s=r.getChannelData(0),a=r.getChannelData(1),l;for(let h=0;h<i;h++)l=this._reverse?i-h:h,s[h]=(Math.random()*2-1)*Math.pow(1-l/i,this._decay),a[h]=(Math.random()*2-1)*Math.pow(1-l/i,this._decay);let c=t.createConvolver();c.buffer=r,this.init(c)}},KY=class extends ya{constructor(t=0){let e,i,r;if(!li().useLegacy){let{audioContext:s}=li().context;s.createStereoPanner?(e=s.createStereoPanner(),r=e):(i=s.createPanner(),i.panningModel="equalpower",r=i)}super(r),this._stereo=e,this._panner=i,this.pan=t}set pan(t){this._pan=t,this._stereo?zr.setParamValue(this._stereo.pan,t):this._panner&&this._panner.setPosition(t,0,1-Math.abs(t))}get pan(){return this._pan}destroy(){super.destroy(),this._stereo=null,this._panner=null}},$Y=class extends ya{constructor(){let t,e;if(!li().useLegacy){let{audioContext:i}=li().context;t=i.createMediaStreamDestination(),e=i.createMediaStreamSource(t.stream)}super(t,e),this._stream=t==null?void 0:t.stream}get stream(){return this._stream}destroy(){this._stream=null,super.destroy()}},ZY=class extends ya{constructor(){let t,e;if(!li().useLegacy){let{audioContext:i}=li().context,r=i.createBiquadFilter(),s=i.createBiquadFilter(),a=i.createBiquadFilter(),l=i.createBiquadFilter();r.type="lowpass",zr.setParamValue(r.frequency,2e3),s.type="lowpass",zr.setParamValue(s.frequency,2e3),a.type="highpass",zr.setParamValue(a.frequency,500),l.type="highpass",zr.setParamValue(l.frequency,500),r.connect(s),s.connect(a),a.connect(l),t=r,e=l}super(t,e)}};yt();var QY=class extends ui{constructor(){super(...arguments),this.speed=1,this.muted=!1,this.volume=1,this.paused=!1}refresh(){this.emit("refresh")}refreshPaused(){this.emit("refreshPaused")}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(t){console.warn("HTML Audio does not support filters")}get audioContext(){return console.warn("HTML Audio does not support audioContext"),null}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this.paused}destroy(){this.removeAllListeners()}};yt();var JY=0,j2=class extends ui{constructor(t){super(),this.id=JY++,this.init(t)}set(t,e){if(this[t]===void 0)throw new Error(`Property with name ${t} does not exist.`);switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"paused":this.paused=e;break;case"loop":this.loop=e;break;case"muted":this.muted=e;break}return this}get progress(){let{currentTime:t}=this._source;return t/this._duration}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}_onPlay(){this._playing=!0}_onPause(){this._playing=!1}init(t){this._playing=!1,this._duration=t.source.duration;let e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t}_internalStop(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())}stop(){this._internalStop(),this._source&&this.emit("stop")}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh()}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(t){console.warn("HTML Audio does not support filters")}refresh(){let t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;let i=t.volume*(t.muted?0:1),r=e.volume*(e.muted?0:1),s=this._volume*(this._muted?0:1);this._source.volume=s*i*r,this._source.playbackRate=this._speed*t.speed*e.speed}refreshPaused(){let t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",i))}play(t){let{start:e,end:i,speed:r,loop:s,volume:a,muted:l}=t;i&&console.assert(i>e,"End time is before start time"),this._speed=r,this._volume=a,this._loop=!!s,this._muted=l,this.refresh(),this.loop&&i!==null&&(console.warn('Looping not support when specifying an "end" time'),this.loop=!1),this._start=e,this._end=i||this._duration,this._start=Math.max(0,this._start-j2.PADDING),this._end=Math.min(this._end+j2.PADDING,this._duration),this._source.onloadedmetadata=()=>{this._source&&(this._source.currentTime=e,this._source.onloadedmetadata=null,this.emit("progress",e/this._duration,this._duration),Xt.shared.add(this._onUpdate,this))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")}_onUpdate(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()}_onComplete(){Xt.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)}destroy(){Xt.shared.remove(this._onUpdate,this),this.removeAllListeners();let t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)}toString(){return`[HTMLAudioInstance id=${this.id}]`}},PN=j2;PN.PADDING=.1;yt();var ej=class extends ui{init(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)}create(){return new PN(this)}get isPlayable(){return!!this._source&&this._source.readyState===4}get duration(){return this._source.duration}get context(){return this.parent.context}get filters(){return null}set filters(t){console.warn("HTML Audio does not support filters")}destroy(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)}get source(){return this._source}load(t){let e=this._source,i=this.parent;if(e.readyState===4){i.isLoaded=!0;let c=i.autoPlayStart();t&&setTimeout(()=>{t(null,i,c)},0);return}if(!i.url){t(new Error("sound.url or sound.source must be set"));return}e.src=i.url;let r=()=>{l(),i.isLoaded=!0;let c=i.autoPlayStart();t&&t(null,i,c)},s=()=>{l(),t&&t(new Error("Sound loading has been aborted"))},a=()=>{l();let c=`Failed to load audio element (code: ${e.error.code})`;t?t(new Error(c)):console.error(c)},l=()=>{e.removeEventListener("canplaythrough",r),e.removeEventListener("load",r),e.removeEventListener("abort",s),e.removeEventListener("error",a)};e.addEventListener("canplaythrough",r,!1),e.addEventListener("load",r,!1),e.addEventListener("abort",s,!1),e.addEventListener("error",a,!1),e.load()}};yt();var tj=class{constructor(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start,console.assert(this.duration>0,"End time must be after start time")}play(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})}destroy(){this.parent=null}},Ng=["ogg","oga","opus","m4a","mp3","mpeg","wav","aiff","wma","mid","caf"],ij=["audio/mpeg","audio/ogg"],Hg={};function rj(t){let e={m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"'},i=document.createElement("audio"),r={},s=/^no$/;Ng.forEach(a=>{let l=i.canPlayType(`audio/${a}`).replace(s,""),c=e[a]?i.canPlayType(e[a]).replace(s,""):"";r[a]=!!l||!!c}),Object.assign(Hg,r)}rj();yt();yt();var sj=0,nj=class extends ui{constructor(t){super(),this.id=sj++,this._media=null,this._paused=!1,this._muted=!1,this._elapsed=0,this.init(t)}set(t,e){if(this[t]===void 0)throw new Error(`Property with name ${t} does not exist.`);switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"muted":this.muted=e;break;case"loop":this.loop=e;break;case"paused":this.paused=e;break}return this}stop(){this._source&&(this._internalStop(),this.emit("stop"))}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh(),this._update(!0)}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}get filters(){return this._filters}set filters(t){var e;this._filters&&((e=this._filters)==null||e.filter(i=>i).forEach(i=>i.disconnect()),this._filters=null,this._source.connect(this._gain)),this._filters=t!=null&&t.length?t.slice(0):null,this.refresh()}refresh(){if(!this._source)return;let t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;let i=t.volume*(t.muted?0:1),r=e.volume*(e.muted?0:1),s=this._volume*(this._muted?0:1);zr.setParamValue(this._gain.gain,s*r*i),zr.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed),this.applyFilters()}applyFilters(){var t;if((t=this._filters)!=null&&t.length){this._source.disconnect();let e=this._source;this._filters.forEach(i=>{e.connect(i.destination),e=i}),e.connect(this._gain)}}refreshPaused(){let t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",i))}play(t){let{start:e,end:i,speed:r,loop:s,volume:a,muted:l,filters:c}=t;i&&console.assert(i>e,"End time is before start time"),this._paused=!1;let{source:h,gain:f}=this._media.nodes.cloneBufferSource();this._source=h,this._gain=f,this._speed=r,this._volume=a,this._loop=!!s,this._muted=l,this._filters=c,this.refresh();let p=this._source.buffer.duration;this._duration=p,this._end=i,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=i,this._source.loopStart=e,this._source.start(0,e)):i?this._source.start(0,e,i-e):this._source.start(0,e),this.emit("start"),this._update(!0),this.enableTicker(!0)}enableTicker(t){Xt.shared.remove(this._updateListener,this),t&&Xt.shared.add(this._updateListener,this)}get progress(){return this._progress}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}destroy(){var t;this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),(t=this._filters)==null||t.forEach(e=>e.disconnect()),this._filters=null,this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1}toString(){return`[WebAudioInstance id=${this.id}]`}_now(){return this._media.context.audioContext.currentTime}_updateListener(){this._update()}_update(t=!1){if(this._source){let e=this._now(),i=e-this._lastUpdate;if(i>0||t){let r=this._source.playbackRate.value;this._elapsed+=i*r,this._lastUpdate=e;let s=this._duration,a;if(this._source.loopStart){let l=this._source.loopEnd-this._source.loopStart;a=(this._source.loopStart+this._elapsed%l)/s}else a=this._elapsed%s/s;this._progress=a,this.emit("progress",this._progress,s)}}}init(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)}_internalStop(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect();try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}this._source=null}}_onComplete(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.disconnect();try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}}this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)}},DN=class{constructor(t,e){this._output=e,this._input=t}get destination(){return this._input}get filters(){return this._filters}set filters(t){if(this._filters&&(this._filters.forEach(e=>{e&&e.disconnect()}),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();let e=null;t.forEach(i=>{e===null?this._input.connect(i.destination):e.connect(i.destination),e=i}),e.connect(this._output)}}destroy(){this.filters=null,this._input=null,this._output=null}},ON=class extends DN{constructor(t){let e=t.audioContext,i=e.createBufferSource(),r=e.createGain(),s=e.createAnalyser();i.connect(s),s.connect(r),r.connect(t.destination),super(s,r),this.context=t,this.bufferSource=i,this.gain=r,this.analyser=s}get script(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(ON.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script}destroy(){super.destroy(),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null}cloneBufferSource(){let t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,zr.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;let i=this.context.audioContext.createGain();return e.connect(i),i.connect(this.destination),{source:e,gain:i}}get bufferSize(){return this.script.bufferSize}},FN=ON;FN.BUFFER_SIZE=0;var aj=class{init(t){this.parent=t,this._nodes=new FN(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source}destroy(){this.parent=null,this._nodes.destroy(),this._nodes=null;try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}this._source=null,this.source=null}create(){return new nj(this)}get context(){return this.parent.context}get isPlayable(){return!!this._source&&!!this._source.buffer}get filters(){return this._nodes.filters}set filters(t){this._nodes.filters=t}get duration(){return console.assert(this.isPlayable,"Sound not yet playable, no duration"),this._source.buffer.duration}get buffer(){return this._source.buffer}set buffer(t){this._source.buffer=t}get nodes(){return this._nodes}load(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t?t(new Error("sound.url or sound.source must be set")):console.error("sound.url or sound.source must be set")}async _loadUrl(t){let e=this.parent.url,i=await et.get().fetch(e);this._decode(await i.arrayBuffer(),t)}_decode(t,e){let i=(r,s)=>{if(r)e&&e(r);else{this.parent.isLoaded=!0,this.buffer=s;let a=this.parent.autoPlayStart();e&&e(null,this.parent,a)}};t instanceof AudioBuffer?i(null,t):this.parent.context.decode(t,i)}},Cl=class{static from(t){let e={};typeof t=="string"?e.url=t:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?e.source=t:Array.isArray(t)?e.url=t:e=t,e={autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1,...e},Object.freeze(e);let i=li().useLegacy?new ej:new aj;return new Cl(i,e)}constructor(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);let i=e.complete;this._autoPlayOptions=i?{complete:i}:null,this.isLoaded=!1,this._preloadQueue=null,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=Array.isArray(e.url)?this.preferUrl(e.url):e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}preferUrl(t){let[e]=t.map(i=>({url:i,ext:gi.extname(i).slice(1)})).filter(({ext:i})=>Hg[i]).sort((i,r)=>Ng.indexOf(i.ext)-Ng.indexOf(r.ext));if(!e)throw new Error("No supported file type found");return e.url}get context(){return li().context}pause(){return this.isPlaying=!1,this.paused=!0,this}resume(){return this.isPlaying=this._instances.length>0,this.paused=!1,this}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh()}get filters(){return this.media.filters}set filters(t){this.media.filters=t}addSprites(t,e){if(typeof t=="object"){let r={};for(let s in t)r[s]=this.addSprites(s,t[s]);return r}console.assert(!this._sprites[t],`Alias ${t} is already taken`);let i=new tj(this,e);return this._sprites[t]=i,i}destroy(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null}removeSprites(t){if(t){let e=this._sprites[t];e!==void 0&&(e.destroy(),delete this._sprites[t])}else for(let e in this._sprites)this.removeSprites(e);return this}get isPlayable(){return this.isLoaded&&this.media&&this.media.isPlayable}stop(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(let t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this}play(t,e){let i;if(typeof t=="string"?i={sprite:t,loop:this.loop,complete:e}:typeof t=="function"?(i={},i.complete=t):i=t,i={complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1,...i||{}},i.sprite){let s=i.sprite;console.assert(!!this._sprites[s],`Alias ${s} is not available`);let a=this._sprites[s];i.start=a.start+(i.start||0),i.end=a.end,i.speed=a.speed||1,i.loop=a.loop||i.loop,delete i.sprite}if(i.offset&&(i.start=i.offset),!this.isLoaded)return this._preloadQueue?new Promise(s=>{this._preloadQueue.push(()=>{s(this.play(i))})}):(this._preloadQueue=[],this.autoPlay=!0,this._autoPlayOptions=i,new Promise((s,a)=>{this._preload((l,c,h)=>{this._preloadQueue.forEach(f=>f()),this._preloadQueue=null,l?a(l):(i.loaded&&i.loaded(l,c,h),s(h))})}));(this.singleInstance||i.singleInstance)&&this._removeInstances();let r=this._createInstance();return this._instances.push(r),this.isPlaying=!0,r.once("end",()=>{i.complete&&i.complete(this),this._onComplete(r)}),r.once("stop",()=>{this._onComplete(r)}),r.play(i),r}refresh(){let t=this._instances.length;for(let e=0;e<t;e++)this._instances[e].refresh()}refreshPaused(){let t=this._instances.length;for(let e=0;e<t;e++)this._instances[e].refreshPaused()}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}_preload(t){this.media.load(t)}get instances(){return this._instances}get sprites(){return this._sprites}get duration(){return this.media.duration}autoPlayStart(){let t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t}_removeInstances(){for(let t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0}_onComplete(t){if(this._instances){let e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)}_createInstance(){if(Cl._pool.length>0){let t=Cl._pool.pop();return t.init(this.media),t}return this.media.create()}_poolInstance(t){t.destroy(),Cl._pool.indexOf(t)<0&&Cl._pool.push(t)}},co=Cl;co._pool=[];yt();var NP=class q2 extends DN{constructor(){let e=window,i=new q2.AudioContext,r=i.createDynamicsCompressor(),s=i.createAnalyser();s.connect(r),r.connect(i.destination),super(s,r),this.autoPause=!0,this._ctx=i,this._offlineCtx=new q2.OfflineAudioContext(1,2,e.OfflineAudioContext?Math.max(8e3,Math.min(96e3,i.sampleRate)):44100),this.compressor=r,this.analyser=s,this.events=new ui,this.volume=1,this.speed=1,this.muted=!1,this.paused=!1,this._locked=i.state==="suspended"&&("ontouchstart"in globalThis||"onclick"in globalThis),this._locked&&(this._unlock(),this._unlock=this._unlock.bind(this),document.addEventListener("mousedown",this._unlock,!0),document.addEventListener("touchstart",this._unlock,!0),document.addEventListener("touchend",this._unlock,!0)),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),globalThis.addEventListener("focus",this.onFocus),globalThis.addEventListener("blur",this.onBlur)}onFocus(){if(!this.autoPause)return;let e=this._ctx.state;(e==="suspended"||e==="interrupted"||!this._locked)&&(this.paused=this._pausedOnBlur,this.refreshPaused())}onBlur(){this.autoPause&&(this._locked||(this._pausedOnBlur=this._paused,this.paused=!0,this.refreshPaused()))}_unlock(){this._locked&&(this.playEmptySound(),this._ctx.state==="running"&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._locked=!1))}playEmptySound(){let e=this._ctx.createBufferSource();e.buffer=this._ctx.createBuffer(1,1,22050),e.connect(this._ctx.destination),e.start(0,0,0),e.context.state==="suspended"&&e.context.resume()}static get AudioContext(){let e=window;return e.AudioContext||e.webkitAudioContext||null}static get OfflineAudioContext(){let e=window;return e.OfflineAudioContext||e.webkitOfflineAudioContext||null}destroy(){super.destroy();let e=this._ctx;typeof e.close<"u"&&e.close(),globalThis.removeEventListener("focus",this.onFocus),globalThis.removeEventListener("blur",this.onBlur),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null}get audioContext(){return this._ctx}get offlineContext(){return this._offlineCtx}set paused(e){e&&this._ctx.state==="running"?this._ctx.suspend():!e&&this._ctx.state==="suspended"&&this._ctx.resume(),this._paused=e}get paused(){return this._paused}refresh(){this.events.emit("refresh")}refreshPaused(){this.events.emit("refreshPaused")}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this._paused}decode(e,i){let r=a=>{i(new Error((a==null?void 0:a.message)||"Unable to decode file"))},s=this._offlineCtx.decodeAudioData(e,a=>{i(null,a)},r);s&&s.catch(r)}},GN=class{constructor(){this.init()}init(){return this.supported&&(this._webAudioContext=new NP),this._htmlAudioContext=new QY,this._sounds={},this.useLegacy=!this.supported,this}get context(){return this._context}get filtersAll(){return this.useLegacy?[]:this._context.filters}set filtersAll(t){this.useLegacy||(this._context.filters=t)}get supported(){return NP.AudioContext!==null}add(t,e){if(typeof t=="object"){let s={};for(let a in t){let l=this._getOptions(t[a],e);s[a]=this.add(a,l)}return s}if(console.assert(!this._sounds[t],`Sound with alias ${t} already exists.`),e instanceof co)return this._sounds[t]=e,e;let i=this._getOptions(e),r=co.from(i);return this._sounds[t]=r,r}_getOptions(t,e){let i;return typeof t=="string"?i={url:t}:Array.isArray(t)?i={url:t}:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?i={source:t}:i=t,i={...i,...e||{}},i}get useLegacy(){return this._useLegacy}set useLegacy(t){this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext}get disableAutoPause(){return!this._webAudioContext.autoPause}set disableAutoPause(t){this._webAudioContext.autoPause=!t}remove(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this}get volumeAll(){return this._context.volume}set volumeAll(t){this._context.volume=t,this._context.refresh()}get speedAll(){return this._context.speed}set speedAll(t){this._context.speed=t,this._context.refresh()}togglePauseAll(){return this._context.togglePause()}pauseAll(){return this._context.paused=!0,this._context.refreshPaused(),this}resumeAll(){return this._context.paused=!1,this._context.refreshPaused(),this}toggleMuteAll(){return this._context.toggleMute()}muteAll(){return this._context.muted=!0,this._context.refresh(),this}unmuteAll(){return this._context.muted=!1,this._context.refresh(),this}removeAll(){for(let t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this}stopAll(){for(let t in this._sounds)this._sounds[t].stop();return this}exists(t,e=!1){let i=!!this._sounds[t];return e&&console.assert(i,`No sound matching alias '${t}'.`),i}isPlaying(){for(let t in this._sounds)if(this._sounds[t].isPlaying)return!0;return!1}find(t){return this.exists(t,!0),this._sounds[t]}play(t,e){return this.find(t).play(e)}stop(t){return this.find(t).stop()}pause(t){return this.find(t).pause()}resume(t){return this.find(t).resume()}volume(t,e){let i=this.find(t);return e!==void 0&&(i.volume=e),i.volume}speed(t,e){let i=this.find(t);return e!==void 0&&(i.speed=e),i.speed}duration(t){return this.find(t).duration}close(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this}};yt();yt();var HP=t=>{var r;let e=t.src,i=(r=t==null?void 0:t.alias)==null?void 0:r[0];return(!i||t.src===i)&&(i=gi.basename(e,gi.extname(e))),i},oj={extension:I.Asset,detection:{test:async()=>!0,add:async t=>[...t,...Ng.filter(e=>Hg[e])],remove:async t=>t.filter(e=>t.includes(e))},loader:{name:"sound",extension:{type:[I.LoadParser],priority:er.High},test(t){let e=gi.extname(t).slice(1);return!!Hg[e]||ij.some(i=>t.startsWith(`data:${i}`))},async load(t,e){let i=await new Promise((r,s)=>co.from({...e.data,url:t,preload:!0,loaded(a,l){var c,h;a?s(a):r(l),(h=(c=e.data)==null?void 0:c.loaded)==null||h.call(c,a,l)}}));return li().add(HP(e),i),i},async unload(t,e){li().remove(HP(e))}}};ke.add(oj);var ht=YY(new GN),lj="0.10.23",Cp="repeat";Vt.DistortionFilter,Vt.EqualizerFilter,Vt.MonoFilter,Vt.ReverbFilter,Vt.StereoFilter,Vt.StreamFilter,Vt.TelephoneFilter;var uj=["webm","mp4","ogv","mov","avi","wmv","flv","mkv","3gp","mpg","mpeg","m4v","f4v","m2v","asf","vob","ts","m2ts","mts","divx","xvid","rm","rmvb","dat","swf","mpv","mxf","vcd","svcd","dvd","dv","3g2","m2p","m2ts","m2v","m4v","mpe","mpg","mpv2","ogm","qt","rm","ts","vob","wmv","xvid","flv","mkv","mov","mp4","webm","avi","ogv","m4v","f4v","m2v","asf","vob","ts","m2ts","mts","divx","xvid","rm","rmvb","dat","swf","mpv","mxf","vcd","svcd","dvd","dv","3g2","m2p","m2ts","m2v","m4v","mpe","mpg","mpv2","ogm","qt","rm","ts","vob","wmv","xvid","flv","mkv","mov","mp4","webm","avi","ogv","m4v","f4v","m2v","asf","vob"],an="__game_layer__",Vg="Container",W2="ImageContainer",LN="Image",zg="Sprite",Xg="Text",kN="Video",fw={CURRENT_DIALOGUE_MEMORY_KEY:"___current_dialogue_memory___",LAST_DIALOGUE_ADDED_IN_STEP_MEMORY_KEY:"___last_dialogue_added_in_step_memory___",CURRENT_MENU_OPTIONS_MEMORY_KEY:"___current_menu_options_memory___",LAST_MENU_OPTIONS_ADDED_IN_STEP_MEMORY_KEY:"___last_menu_options_added_in_step_memory___",CURRENT_INPUT_VALUE_MEMORY_KEY:"_input_value_",LAST_INPUT_ADDED_IN_STEP_MEMORY_KEY:"___last_input_added_in_step_memory___",CURRENT_INPUT_INFO_MEMORY_KEY:"___current_input_info_memory___",CHARACTER_CATEGORY_KEY:"___character___",FLAGS_CATEGORY_KEY:"___flags___",ADD_NEXT_DIALOG_TEXT_INTO_THE_CURRENT_DIALOG_FLAG_KEY:"___glue___",OPENED_LABELS_COUNTER_KEY:"___opened_labels_counter___",ALL_CHOICES_MADE_KEY:"___all_choices_made___",CURRENT_STEP_TIMES_COUNTER_KEY:"___current_step_times_counter___",TEMP_STORAGE_KEY:"___temp_storage___",TEMP_STORAGE_DEADLINES_KEY:"___temp_storage_deadlines___"},fe;(t=>(t.log=(e,...i)=>console.log(`[PixiVN] ${e}`,...i),t.warn=(e,...i)=>console.warn(`[PixiVN] ${e}`,...i),t.error=(e,...i)=>console.error(`[PixiVN] ${e}`,...i),t.info=(e,...i)=>console.info(`[PixiVN] ${e}`,...i)))(fe||(fe={}));var K2={};function VP(t){return function(e){Bo(e,t)}}function Bo(t,e){e||(e=t.name),K2[e]&&fe.warn(`CanvasElement ${e} already registered`),t.prototype.pixivnId=e,K2[e]=t}function cj(t){try{let e=K2[t];if(!e){fe.error(`CanvasElement ${t} not found, did you forget to register it with the canvasComponentDecorator?`);return}return new e,e}catch(e){fe.error(`Error while getting CanvasElement ${t}`,e);return}}yt();var IN={};_n(IN,{addImage:()=>r1,addImageCointainer:()=>i1,addVideo:()=>s1,clearAllGameDatas:()=>n6,createExportableElement:()=>Ft,getSaveData:()=>a6,getSaveJson:()=>jj,getTexture:()=>Zl,loadImage:()=>Uj,loadSaveData:()=>o6,loadSaveJson:()=>qj,loadVideo:()=>Hj,moveIn:()=>zj,moveOut:()=>_w,pushIn:()=>Yj,pushOut:()=>s6,removeWithDissolve:()=>Gh,removeWithDissolveTransition:()=>Gh,removeWithFade:()=>qP,removeWithFadeTransition:()=>qP,shakeEffect:()=>kj,showImage:()=>Nj,showImageContainer:()=>Ij,showVideo:()=>Vj,showWithDissolve:()=>n1,showWithDissolveTransition:()=>n1,showWithFade:()=>jP,showWithFadeTransition:()=>jP,zoomIn:()=>Xj,zoomOut:()=>r6});var UN={};_n(UN,{FadeAlphaTicker:()=>tu,MoveTicker:()=>cn,RotateTicker:()=>t1,TickerBase:()=>Su,ZoomTicker:()=>Fh});yt();var NN={};_n(NN,{canvasComponentDecorator:()=>VP,canvasElementDecorator:()=>VP,eventDecorator:()=>fj,getAllCharacters:()=>dj,getCharacterById:()=>hj,getLabelById:()=>ln,newLabel:()=>pj,saveCharacter:()=>pw,saveLabel:()=>mj,tickerDecorator:()=>bd});var Yg={};function pw(t){if(Array.isArray(t)){t.forEach(e=>pw(e));return}Yg[t.id]&&fe.info(`Character id ${t.id} already exists, it will be overwritten`),Yg[t.id]=t}function hj(t){try{let e=Yg[t];if(!e){fe.error(`Character ${t} not found, did you forget to register it with the saveCharacter?`);return}return e}catch(e){fe.error(`Error while getting Character ${t}`,e);return}}function dj(){return Object.values(Yg)}var jg={};function fj(t){return function(e){t||(t=e.name),jg[t]&&fe.info(`Event ${t} already exists, it will be overwritten`),e.prototype.id=t,jg[t]=e}}function HN(t){try{let e=jg[t];if(!e){fe.error(`Event ${t} not found, did you forget to register it with the eventDecorator?`);return}return new e,e}catch(e){fe.error(`Error while getting Event ${t}`,e);return}}function mw(t){try{let e=jg[t];if(!e){fe.error(`Event ${t} not found, did you forget to register it with the eventDecorator?`);return}return new e}catch(e){fe.error(`Error while getting Event ${t}`,e);return}}var qg={};function pj(t,e,i){qg[t]&&fe.info(`Label ${t} already exists, it will be overwritten`);let r=new p_(t,e,i);return qg[t]=r,r}function ln(t){let e=qg[t];if(!e){fe.error(`Label ${t} not found`);return}return e}function mj(t){qg[t.id]=t}var $2={};function bd(t){return function(e){t||(t=e.name),$2[t]&&fe.info(`Ticker ${t} already exists, it will be overwritten`),e.prototype.id=t,$2[t]=e}}function Rp(t,e,i,r){try{let s=$2[t];if(!s){fe.error(`Ticker ${t} not found, did you forget to register it with the tickerDecorator?`);return}return new s(e,i,r)}catch(s){fe.error(`Error while getting Ticker ${t}`,s);return}}yt();function d_(t){var e;return(t instanceof yi||t instanceof ji)&&t.haveEmptyTexture?!1:!(t instanceof Yi&&((e=t.texture)==null?void 0:e.label)=="EMPTY")}function f_(t,e,i){let{limit:r}=i;t[e]===void 0||!i||t[e]===r||(typeof t[e]=="number"?i.type==="linear"?t[e]=U0(t[e],i):i.type==="exponential"&&(t[e]=N0(t[e],i)):t[e]!==void 0&&typeof t[e]=="object"&&t[e].haveOwnProperty("x")&&t[e].haveOwnProperty("y")&&typeof t[e].x=="number"&&typeof t[e].y=="number"&&(i.type==="linear"?(t[e].x=U0(t[e].x,i),t[e].y=U0(t[e].y,i)):i.type==="exponential"&&(t[e].x=N0(t[e].x,i),t[e].y=N0(t[e].y,i))))}function U0(t,e){let{limit:i,amt:r}=e;return i!==void 0&&(t>i&&r>0||t<i&&r<0)?i:t+r}function N0(t,e){let{limit:i}=e;return i!==void 0&&(t>i&&e.percentage>0||t<i&&e.percentage<0)?i:t+t*e.percentage}var VN={};_n(VN,{GameStepManager:()=>t6,GameStorageManager:()=>i6,GameWindowManager:()=>ZN,canvas:()=>ae,narration:()=>Ds,sound:()=>Au,storage:()=>be});function zN(){let t=window.location.pathname+window.location.hash;return t.includes("#")&&(t=t.split("#")[1]),t}yt();yt();async function XN(t){let e=gj(t.pixivnId);if(e)await e.setMemory(t);else throw new Error("[PixiVN] The element "+t.pixivnId+" could not be created");return e}function gj(t){try{let e=cj(t);return e?new e:void 0}catch(e){fe.error(`Error while getting CanvasElement ${t}`,e);return}}yt();yt();function zP(t,e){let i=t.source.label;return{url:i,alias:e===i?void 0:e}}function Z2(t){if(ge.cache.has(t)){let e=ge.get(t);e&&e instanceof ve&&(t=e.source.label)}return!!t.match(new RegExp(`(${uj.join("|")})$`))}yt();async function Zl(t){if(t!=="EMPTY"){if(!t){fe.error("Texture not found",t);return}if(ge.cache.has(t)){let e=ge.get(t);if(e)return e}return ge.load(t).then(e=>{if(!e){fe.error("Texture not found",t);return}if(!(e instanceof ve)){fe.error("File not is a file",t);return}return e}).catch(e=>{fe.error("Error loading file",e)})}}function XP(t,e){if(!(t instanceof Object))return t;fe.warn(`Text.style.${e} is a FillGradient or FillPattern, this is not supported yet.`,t)}function yj(t){return{align:t.align,breakWords:t.breakWords,dropShadow:t.dropShadow,fill:XP(t.stroke,"fill"),fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontVariant:t.fontVariant,fontWeight:t.fontWeight,leading:t.leading,letterSpacing:t.letterSpacing,lineHeight:t.lineHeight,padding:t.padding,stroke:XP(t.stroke,"stroke"),textBaseline:t.textBaseline,trim:t.trim,whiteSpace:t.whiteSpace,wordWrap:t.wordWrap,wordWrapWidth:t.wordWrapWidth}}function YN(t){return"memory"in t?t.memory:t instanceof Tu?jN(t):t instanceof Yi?gw(t):xd(t)}function xd(t,e){let i=Vg,r=(e==null?void 0:e.childrenExport)||!1;t.hasOwnProperty("pixivnId")&&(i=t.pixivnId);let s=[];return r&&t.children.sort((a,l)=>t.getChildIndex(a)-t.getChildIndex(l)).forEach(a=>{s.push(YN(a))}),{pixivnId:i,elements:s,width:t.width,height:t.height,isRenderGroup:t.isRenderGroup,blendMode:t.blendMode,tint:t.tint,alpha:t.alpha,angle:t.angle,renderable:t.renderable,rotation:t.rotation,scale:{x:t.scale.x,y:t.scale.y},pivot:{x:t.pivot.x,y:t.pivot.y},position:{x:t.position.x,y:t.position.y},skew:{x:t.skew.x,y:t.skew.y},visible:t.visible,x:t.x,y:t.y,boundsArea:t.boundsArea,cursor:t.cursor,eventMode:t.eventMode,interactive:t.interactive,interactiveChildren:t.interactiveChildren,hitArea:t.hitArea}}function gw(t){let e=xd(t),i=e.pixivnId??zg,r={};"onEvents"in t&&(r=t.onEvents);let s;return"textureAlias"in t?s=zP(t.texture,t.textureAlias):s=zP(t.texture),{...e,pixivnId:i,textureData:s,anchor:{x:t.anchor.x,y:t.anchor.y},roundPixels:t.roundPixels,onEvents:r}}function jN(t){let e=xd(t),i=e.pixivnId??Xg,r={};return"onEvents"in t&&(r=t.onEvents),{...e,pixivnId:i,anchor:{x:t.anchor.x,y:t.anchor.y},text:t.text,resolution:t.resolution,style:yj(t.style),roundPixels:t.roundPixels,onEvents:r}}var Ph=class extends Lt{constructor(e){super(e);me(this,"pixivnId",Vg);me(this,"_onEvents",{});this.pixivnId=this.constructor.prototype.pixivnId||Vg}get memory(){return xd(this,{childrenExport:!0})}set memory(e){}async setMemory(e){return this.memory=e,await this.importChildren(e),await Ql(this,e)}async importChildren(e){for(let i=0;i<e.elements.length;i++){let r=e.elements[i],s=await XN(r);this.addChild(s)}}get onEvents(){return this._onEvents}onEvent(e,i){let r=i.prototype.id,s=mw(r);return this._onEvents[e]=r,s?super.on(e,()=>{s.fn(e,this)}):fe.error(`Event ${r} not found`),this}on(e,i,r){return super.on(e,i,r)}};Bo(Ph,Vg);async function Ql(t,e,i){let r=(i==null?void 0:i.ignoreScale)||!1,s=i==null?void 0:i.end;"isRenderGroup"in e&&e.isRenderGroup!==void 0&&(t.isRenderGroup=e.isRenderGroup),"blendMode"in e&&e.blendMode!==void 0&&(t.blendMode=e.blendMode),"tint"in e&&e.tint!==void 0&&(t.tint=e.tint),"alpha"in e&&e.alpha!==void 0&&(t.alpha=e.alpha),"angle"in e&&e.angle!==void 0&&(t.angle=e.angle),"renderable"in e&&e.renderable!==void 0&&(t.renderable=e.renderable),"rotation"in e&&e.rotation!==void 0&&(t.rotation=e.rotation),!r&&"scale"in e&&e.scale!==void 0&&(typeof e.scale=="number"?t.scale.set(e.scale,e.scale):t.scale.set(e.scale.x,e.scale.y)),"pivot"in e&&e.pivot!==void 0&&(typeof e.pivot=="number"?t.pivot.set(e.pivot,e.pivot):t.pivot.set(e.pivot.x,e.pivot.y)),"position"in e&&e.position!==void 0&&t.position.set(e.position.x,e.position.y),"skew"in e&&e.skew!==void 0&&t.skew.set(e.skew.x,e.skew.y),"visible"in e&&e.visible!==void 0&&(t.visible=e.visible),"x"in e&&e.x!==void 0&&(t.x=e.x),"y"in e&&e.y!==void 0&&(t.y=e.y),"boundsArea"in e&&e.boundsArea!==void 0&&(t.boundsArea=e.boundsArea),"cursor"in e&&e.cursor!==void 0&&(t.cursor=e.cursor),"eventMode"in e&&e.eventMode!==void 0&&(t.eventMode=e.eventMode),"interactive"in e&&e.interactive!==void 0&&(t.interactive=e.interactive),"interactiveChildren"in e&&e.interactiveChildren!==void 0&&(t.interactiveChildren=e.interactiveChildren),"hitArea"in e&&e.hitArea!==void 0&&(t.hitArea=e.hitArea),s&&await s(),r||("width"in e&&e.width!==void 0&&(t.width=e.width),"height"in e&&e.height!==void 0&&(t.height=e.height))}yt();function Jl(t,e,i,r,s,a=0){return r=r*(s?-1:1),t==="width"?e*(ae.screen.width-i)+r+a*i+(s?i:0):e*(ae.screen.height-i)+r+a*i+(s?i:0)}function na(t,e,i,r,s,a=0){return r=r*(s?-1:1),t==="width"?(e-r-a*i-(s?i:0))/(ae.screen.width-i):(e-r-a*i-(s?i:0))/(ae.screen.height-i)}function eu(t,e){return t==="width"?e*ae.screen.width:e*ae.screen.height}function aa(t,e){return t==="width"?e/ae.screen.width:e/ae.screen.height}function wi(t,e){if(e=e%360,e<0&&(e+=360),e===0)return{x:t.x,y:t.y};if(e===90)return{x:-t.y,y:t.x};if(e===180)return{x:-t.x,y:-t.y};if(e===270)return{x:t.y,y:-t.x};if(e>0&&e<90){let i=e*Math.PI/180,r=Math.cos(i),s=Math.sin(i);return{x:t.x*r-t.y*s,y:t.x*s+t.y*r}}else if(e>90&&e<180){let i=(e-90)*Math.PI/180,r=Math.cos(i),s=Math.sin(i);return{x:-t.y*s-t.x*r,y:t.y*r-t.x*s}}else if(e>180&&e<270){let i=(e-180)*Math.PI/180,r=Math.cos(i),s=Math.sin(i);return{x:-t.x*r+t.y*s,y:-t.x*s-t.y*r}}else if(e>270&&e<360){let i=(e-270)*Math.PI/180,r=Math.cos(i),s=Math.sin(i);return{x:t.y*s-t.x*r,y:-t.y*r-t.x*s}}return{x:0,y:0}}function qN(t,e){if(e=e%360,e<0&&(e+=360),e===0)return{x:t.x,y:t.y};if(e===90)return{x:t.y,y:-t.x};if(e===180)return{x:-t.x,y:-t.y};if(e===270)return{x:-t.y,y:t.x};if(e>0&&e<90){let i=e*Math.PI/180,r=Math.cos(i),s=Math.sin(i);return{x:t.x*r+t.y*s,y:-t.x*s+t.y*r}}else if(e>90&&e<180){let i=(e-90)*Math.PI/180,r=Math.cos(i),s=Math.sin(i);return{x:t.y*r-t.x*s,y:-t.y*s-t.x*r}}else if(e>180&&e<270){let i=(e-180)*Math.PI/180,r=Math.cos(i),s=Math.sin(i);return{x:-t.x*r-t.y*s,y:t.x*s-t.y*r}}else if(e>270&&e<360){let i=(e-270)*Math.PI/180,r=Math.cos(i),s=Math.sin(i);return{x:-t.y*r+t.x*s,y:t.y*s+t.x*r}}return{x:0,y:0}}function no(t){let e=t.width,i=t.height,r=t.angle%360;return r<0&&(r+=360),r===0||r===180?e:r===90||r===270?i:Math.abs(e*Math.cos(r*Math.PI/180))+Math.abs(i*Math.sin(r*Math.PI/180))}function ao(t){let e=t.width,i=t.height,r=t.angle%360;return r<0&&(r+=360),r===0||r===180?i:r===90||r===270?e:Math.abs(i*Math.cos(r*Math.PI/180))+Math.abs(e*Math.sin(r*Math.PI/180))}yt();function Dh(t){return t&&(typeof t.align!="number"&&(t.xAlign!=null&&(t.align===void 0?(t.align={x:t.xAlign},delete t.xAlign):(t.align.x=t.xAlign,delete t.xAlign)),t.yAlign!=null&&(t.align===void 0?(t.align={y:t.yAlign},delete t.yAlign):(t.align.y=t.yAlign,delete t.yAlign))),typeof t.percentagePosition!="number"&&(t.xPercentagePosition!=null&&(t.percentagePosition===void 0?(t.percentagePosition={x:t.xPercentagePosition},delete t.xPercentagePosition):(t.percentagePosition.x=t.xPercentagePosition,delete t.xPercentagePosition)),t.yPercentagePosition!=null&&(t.percentagePosition===void 0?(t.percentagePosition={y:t.yPercentagePosition},delete t.yPercentagePosition):(t.percentagePosition.y=t.yPercentagePosition,delete t.yPercentagePosition))),t)}var ji=class extends Ph{constructor(e,i=[]){e=Dh(e);let r,s,a;e&&"anchor"in e&&(e==null?void 0:e.anchor)!==void 0&&(a=e.anchor,delete e.anchor),e&&"align"in e&&(e==null?void 0:e.align)!==void 0&&(r=e.align,delete e.align),e&&"percentagePosition"in e&&(e==null?void 0:e.percentagePosition)!==void 0&&(s=e.percentagePosition,delete e.percentagePosition);super(e);me(this,"pixivnId",W2);me(this,"_loadIsStarted",!1);me(this,"_anchor");me(this,"_align");me(this,"_percentagePosition");e=Dh(e),i&&i.forEach(l=>{let c;Z2(l)?c=new gn(void 0,l):c=new yi(void 0,l),this.addChild(c)}),a&&(this.anchor=a),r&&(this.align=r),s&&(this.percentagePosition=s)}get memory(){return{...super.memory,pixivnId:W2,anchor:this._anchor,align:this._align,percentagePosition:this._percentagePosition,loadIsStarted:this._loadIsStarted}}set memory(e){}async setMemory(e){this.memory=e,await this.importChildren(e),await WN(this,e),this.reloadAnchor(),this.reloadPosition()}get loadIsStarted(){return this._loadIsStarted}async load(){this._loadIsStarted=!0;let e=Array(this.children.length);for(let i=0;i<this.children.length;i++)e[i]=this.children[i].load();return Promise.all(e).then(()=>{this._loadIsStarted=!1,this.reloadAnchor(),this.reloadPosition()}).catch(i=>{this._loadIsStarted=!1,fe.error("Error into ImageContainer.load()",i)})}get texture(){return this.children.length>0?this.children[0].texture:new ve}get haveEmptyTexture(){return this.children.some(e=>e.texture._source.label==="EMPTY")}get anchor(){let e=super.pivot.x/this.width,i=super.pivot.y/this.height;return{x:e,y:i}}set anchor(e){typeof e=="number"?this._anchor={x:e,y:e}:this._anchor=e,this.reloadAnchor()}reloadAnchor(){this._anchor&&super.pivot.set(this._anchor.x*this.width,this._anchor.y*this.height)}get pivot(){return super.pivot}set pivot(e){this._anchor=void 0,super.pivot=e}set align(e){this._percentagePosition=void 0,this._align===void 0&&(this._align={}),typeof e=="number"?(this._align.x=e,this._align.y=e):(e.x!==void 0&&(this._align.x=e.x),e.y!==void 0&&(this._align.y=e.y)),this.reloadPosition()}get align(){let e=wi(this.pivot,this.angle),i=wi(this.scale,this.angle);return{x:na("width",this.x,no(this),e.x,i.x<0,this.anchor.x),y:na("height",this.y,ao(this),e.y,i.y<0,this.anchor.y)}}set xAlign(e){this._percentagePosition&&(this._percentagePosition=void 0),this._align===void 0&&(this._align={}),this._align.x=e,this.reloadPosition()}get xAlign(){let e=wi(this.pivot,this.angle),i=wi(this.scale,this.angle);return na("width",this.x,no(this),e.x,i.x<0,this.anchor.x)}set yAlign(e){this._percentagePosition&&(this._percentagePosition=void 0),this._align===void 0&&(this._align={}),this._align.y=e,this.reloadPosition()}get yAlign(){let e=wi(this.pivot,this.angle),i=wi(this.scale,this.angle);return na("height",this.y,ao(this),e.y,i.y<0,this.anchor.y)}set percentagePosition(e){this._align=void 0,this._percentagePosition===void 0&&(this._percentagePosition={}),typeof e=="number"?(this._percentagePosition.x=e,this._percentagePosition.y=e):(e.x!==void 0&&(this._percentagePosition.x=e.x),e.y!==void 0&&(this._percentagePosition.y=e.y)),this.reloadPosition()}get percentagePosition(){return{x:aa("width",this.x),y:aa("height",this.y)}}set xPercentagePosition(e){this._align&&(this._align=void 0),this._percentagePosition===void 0&&(this._percentagePosition={}),this._percentagePosition.x=e,this.reloadPosition()}get xPercentagePosition(){return aa("width",this.x)}set yPercentagePosition(e){this._align&&(this._align=void 0),this._percentagePosition===void 0&&(this._percentagePosition={}),this._percentagePosition.y=e,this.reloadPosition()}get yPercentagePosition(){return aa("height",this.y)}get positionType(){return this._align?"align":this._percentagePosition?"percentage":"pixel"}get positionInfo(){return this._align?{x:this._align.x||0,y:this._align.y||0,type:"align"}:this._percentagePosition?{x:this._percentagePosition.x||0,y:this._percentagePosition.y||0,type:"percentage"}:{x:this.x,y:this.y,type:"pixel"}}set positionInfo(e){e.type==="align"?this.align={x:e.x,y:e.y}:e.type==="percentage"?this.percentagePosition={x:e.x,y:e.y}:this.position.set(e.x,e.y)}reloadPosition(){if(this._align){let e=wi(this.pivot,this.angle),i=wi(this.scale,this.angle);this._align.x!==void 0&&(super.x=Jl("width",this._align.x,no(this),e.x,i.x<0)),this._align.y!==void 0&&(super.y=Jl("height",this._align.y,ao(this),e.y,i.y<0))}else this._percentagePosition&&(this._percentagePosition.x!==void 0&&(super.x=eu("width",this._percentagePosition.x)),this._percentagePosition.y!==void 0&&(super.y=eu("height",this._percentagePosition.y)))}get position(){return super.position}set position(e){this._align=void 0,this._percentagePosition=void 0,super.position=e}get x(){return super.x}set x(e){this._align=void 0,this._percentagePosition=void 0,super.x=e}get y(){return super.y}set y(e){this._align=void 0,this._percentagePosition=void 0,super.y=e}};Bo(ji,W2);async function WN(t,e,i){e=Dh(e),Ql(t,e,{...i,end:async()=>{"anchor"in e&&e.anchor!==void 0&&(t.anchor=e.anchor),"align"in e&&e.align!==void 0&&(t.align=e.align),"percentagePosition"in e&&e.percentagePosition!==void 0&&(t.percentagePosition=e.percentagePosition),"loadIsStarted"in e&&e.loadIsStarted&&await t.load()}})}yt();var Oh=class KN extends Yi{constructor(i){super(i);me(this,"pixivnId",zg);me(this,"_textureAlias");me(this,"_onEvents",{});this.pixivnId=this.constructor.prototype.pixivnId||zg}get textureAlias(){return this._textureAlias?this._textureAlias:this.texture.source.label}set textureAlias(i){this._textureAlias=i}get memory(){return gw(this)}set memory(i){}async setMemory(i){return this.memory=i,await yw(this,i)}get onEvents(){return this._onEvents}onEvent(i,r){let s=r.prototype.id,a=mw(s);return this._onEvents[i]=s,a?(super.on(i,()=>{a.fn(i,this)}),this.interactive||(this.interactive=!0,this.eventMode="dynamic")):fe.error(`Event ${s} not found`),this}on(i,r,s){return super.on(i,r,s)}static from(i,r){let s=Yi.from(i,r),a=new KN;return a.texture=s.texture,a}};Bo(Oh,zg);async function yw(t,e,i){let r=(i==null?void 0:i.ignoreTexture)||!1;if(await Ql(t,e),!r){if("textureImage"in e&&e.textureImage&&e.textureImage.image){let a=await Zl(e.textureImage.image);a&&(t.texture=a)}if("textureData"in e&&(e.textureData.alias&&(t.textureAlias=e.textureData.alias),e.textureData.url!=="EMPTY")){let a=e.textureData.url;e.textureData.alias&&ge.resolver.hasKey(e.textureData.alias)&&(a=e.textureData.alias);let l=await Zl(a);l&&(t.texture=l)}}let s=i==null?void 0:i.half;if(s&&await s(),"anchor"in e&&e.anchor!==void 0&&(typeof e.anchor=="number"?t.anchor.set(e.anchor,e.anchor):t.anchor.set(e.anchor.x,e.anchor.y)),"roundPixels"in e&&e.roundPixels!==void 0&&(t.roundPixels=e.roundPixels),"onEvents"in e)for(let a in e.onEvents){let l=e.onEvents[a],c=HN(l);c&&t.onEvent(a,c)}}yt();var Wg=class extends Tu{constructor(e){super(e);me(this,"pixivnId",Xg);me(this,"_onEvents",{});this.pixivnId=this.constructor.prototype.pixivnId||Xg}get memory(){return jN(this)}set memory(e){}async setMemory(e){return this.memory=e,await $N(this,e)}get onEvents(){return this._onEvents}onEvent(e,i){let r=i.prototype.id,s=mw(r);return this._onEvents[e]=r,s?(super.on(e,()=>{s.fn(e,this)}),this.interactive||(this.interactive=!0,this.eventMode="dynamic")):fe.error(`Event ${r} not found`),this}on(e,i,r){return super.on(e,i,r)}};Bo(Wg,Xg);async function $N(t,e){if(await Ql(t,e),"anchor"in e&&e.anchor!==void 0&&(typeof e.anchor=="number"?t.anchor.set(e.anchor,e.anchor):t.anchor.set(e.anchor.x,e.anchor.y)),"text"in e&&e.text!==void 0&&(t.text=e.text),"resolution"in e&&e.resolution!==void 0&&(t.resolution=e.resolution),"style"in e&&e.style!==void 0&&(t.style=e.style),"roundPixels"in e&&e.roundPixels!==void 0&&(t.roundPixels=e.roundPixels),"onEvents"in e)for(let i in e.onEvents){let r=e.onEvents[i],s=HN(r);s&&t.onEvent(i,s)}}var Su=class{constructor(t,e,i){me(this,"id","ticker_id_not_set");me(this,"args");me(this,"duration");me(this,"priority");this.args=t,this.duration=e,this.priority=i,this.id=this.constructor.prototype.id}fn(t,e,i,r){throw new Error("[PixiVN] The method TickerBase.fn() must be overridden")}onEndOfTicker(t,e,i){let r="aliasToRemoveAfter"in i&&i.aliasToRemoveAfter||[];typeof r=="string"&&(r=[r]);let s="tickerAliasToResume"in i&&i.tickerAliasToResume||[];typeof s=="string"&&(s=[s]),ae.onEndOfTicker(e,{aliasToRemoveAfter:r,tickerAliasToResume:s})}};function Ft(t){try{if(typeof t>"u")return t;let e=JSON.stringify(t);return JSON.parse(e)}catch(e){throw fe.error("Error creating exportable element",t,e),new Error("[PixiVN] Error creating exportable element")}}var Uc="aliasToRemoveAfter";async function _j(t){var e;let i={importPixi:!1,...t};i.app&&(i.renderer=i.app.renderer,i.stage=i.app.stage),i.importPixi&&!i.pixi&&(i.pixi=await Promise.resolve().then(()=>(yt(),wN))),window.__PIXI_DEVTOOLS__={...window.__PIXI_DEVTOOLS__||{},app:i.app,stage:i.stage,renderer:i.renderer,extensions:[...((e=window.__PIXI_DEVTOOLS__)==null?void 0:e.extensions)||[],...i.extensions||[]],plugins:{}}}var vj=ho(RN());yt();function bj(){console.info(`
 _______   _            _    _   ____   ____  ____  _____  
|_   __ \\ (_)          (_)  | | |_  _| |_  _||_   \\|_   _| 
  | |__) |__   _   __  __   \\_|   \\ \\   / /    |   \\ | |   
  |  ___/[  | [ \\ [  ][  |         \\ \\ / /     | |\\ \\| |   
 _| |_    | |  > '  <  | |          \\ ' /     _| |_\\   |_  
|_____|  [___][__]\`\\_][___]          \\_/     |_____|\\____| 

`)}var xj={extension:{type:"sceneProperties",name:"additional-positions"},testNode(t){return t instanceof yi||t instanceof gn||t instanceof ji},testProp(t){switch(t){case"xAlign":case"yAlign":case"xPercentagePosition":case"yPercentagePosition":case"positionType":return!0;default:return!1}},setProperty(t,e,i){if(t instanceof yi||t instanceof gn||t instanceof ji)switch(e){case"xAlign":t.xAlign=i/100;break;case"yAlign":t.yAlign=i/100;break;case"xPercentagePosition":t.xPercentagePosition=i/100;break;case"yPercentagePosition":t.yPercentagePosition=i/100;break}},getProperties(t){return[{value:t.positionType,prop:"positionType",entry:{section:"Transform",type:"text",label:"Position Type"}},{value:t.xAlign*100,prop:"xAlign",entry:{section:"Transform",type:"range",label:"X Align",tooltip:"0% is left, 100% is right",options:{min:0,max:100}}},{value:t.yAlign*100,prop:"yAlign",entry:{section:"Transform",type:"range",label:"Y Align",tooltip:"0% is top, 100% is bottom",options:{min:0,max:100}}},{value:t.xPercentagePosition*100,prop:"xPercentagePosition",entry:{section:"Transform",type:"range",label:"X Percentage Position",tooltip:"0% is left, 100% is right",options:{min:0,max:100}}},{value:t.yPercentagePosition*100,prop:"yPercentagePosition",entry:{section:"Transform",type:"range",label:"Y Percentage Position",tooltip:"0% is top, 100% is bottom",options:{min:0,max:100}}}]}},Tj=xj,Se,ce=(Se=class{constructor(){}static get app(){if(!Se._app)throw new Error("[PixiVN] CanvasManagerStatic.app is undefined");return Se._app}static get gameLayer(){let e=this.app.stage.getChildByLabel(an);return e||(e=new Lt,e.label=an,this.app.stage.addChild(e)),e}static async initialize(e,i,r,s,a){return Se.canvasWidth=i,Se.canvasHeight=r,Se._app=new Rg,Se.app.init({resolution:window.devicePixelRatio||1,autoDensity:!0,width:i,height:r,...s}).then(()=>{let{app:l=Se.app,extensions:c=[],...h}=a||{};_j({app:l,extensions:[Tj,...c],...h}),Se._isInitialized=!0,Se.addCanvasIntoHTMLElement(e),window.addEventListener("resize",Se.resize),Se.resize(),Se.gameLayer,bj()})}static addCanvasIntoHTMLElement(e){Se._isInitialized?e.appendChild(Se.app.canvas):fe.error("GameWindowManager is not initialized")}static initializeHTMLLayout(e){let i=document.createElement("div");i.style.position="absolute",i.style.pointerEvents="none",e.appendChild(i),Se.htmlLayout=i,Se.resize()}static get screenScale(){let e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return Math.min(e/Se.canvasWidth,i/Se.canvasHeight)}static get screenWidth(){return Math.floor(Se.screenScale*Se.canvasWidth)}static get screenHeight(){return Math.floor(Se.screenScale*Se.canvasHeight)}static get horizontalMargin(){return(Math.max(document.documentElement.clientWidth,window.innerWidth||0)-Se.screenWidth)/2}static get verticalMargin(){return(Math.max(document.documentElement.clientHeight,window.innerHeight||0)-Se.screenHeight)/2}static resize(){if(Se._isInitialized){let e=Se.app.canvas.style;e.width=`${Se.screenWidth}px`,e.height=`${Se.screenHeight}px`,e.marginLeft=`${Se.horizontalMargin}px`,e.marginRight=`${Se.horizontalMargin}px`,e.marginTop=`${Se.verticalMargin}px`,e.marginBottom=`${Se.verticalMargin}px`}Se.htmlLayout&&(Se.htmlLayout.style.width=`${Se.screenWidth}px`,Se.htmlLayout.style.height=`${Se.screenHeight}px`,Se.htmlLayout.style.marginLeft=`${Se.horizontalMargin}px`,Se.htmlLayout.style.marginRight=`${Se.horizontalMargin}px`,Se.htmlLayout.style.marginTop=`${Se.verticalMargin}px`,Se.htmlLayout.style.marginBottom=`${Se.verticalMargin}px`)}static get childrenAliasesOrder(){return Se.gameLayer.children.filter(e=>e.label).sort((e,i)=>Se.gameLayer.getChildIndex(e)-Se.gameLayer.getChildIndex(i)).map(e=>e.label)}static get currentTickersWithoutCreatedBySteps(){return Object.fromEntries(Object.entries(Se._currentTickers).filter(([e,i])=>!i.createdByTicketSteps))}static generateTickerId(e){try{return(0,vj.default)(JSON.stringify(e)).toString()+"_"+Math.random().toString(36).substring(7)}catch(i){throw new Error(`[PixiVN] Error to generate ticker id: ${i}`)}}static addTickerTimeoutInfo(e,i,r,s){typeof e=="string"&&(e=[e]),Se._currentTickersTimeouts[r]={aliases:e,ticker:i,canBeDeletedBeforeEnd:s}}static removeTickerTimeoutInfo(e){typeof e!="string"&&(e=e.toString()),Se._currentTickersTimeouts[e]&&delete Se._currentTickersTimeouts[e]}static removeTickerTimeout(e){typeof e!="string"&&(e=e.toString()),clearTimeout(Number(e)),Se.removeTickerTimeoutInfo(e)}static removeTickerTimeoutsByAlias(e,i){Object.entries(Se._currentTickersTimeouts).forEach(([r,s])=>{let a=s.aliases.filter(l=>l!==e);if(a.length===0){let l=s.canBeDeletedBeforeEnd;(!i||l)&&Se.removeTickerTimeout(r)}else Se._currentTickersTimeouts[r].aliases=a})}},me(Se,"_app"),me(Se,"htmlLayout"),me(Se,"canvasWidth",300),me(Se,"canvasHeight",300),me(Se,"_isInitialized",!1),me(Se,"_currentTickers",{}),me(Se,"_currentTickersSequence",{}),me(Se,"_currentTickersTimeouts",{}),me(Se,"_tickersToCompleteOnStepEnd",{tikersIds:[],stepAlias:[]}),me(Se,"_tickersOnPause",{}),Se),ZN=class{get app(){return ce.app}get gameLayer(){return ce.gameLayer}get isInitialized(){return ce._isInitialized}get htmlLayout(){return ce.htmlLayout}set htmlLayout(t){ce.htmlLayout=t}get canvasWidth(){return ce.canvasWidth}get canvasHeight(){return ce.canvasHeight}set canvasWidth(t){ce.canvasWidth=t}set canvasHeight(t){ce.canvasHeight=t}get screen(){return this.app.screen}async initialize(t,e,i,r,s){if(typeof e=="number"&&typeof i=="number")return await ce.initialize(t,e,i,r,s);if(typeof e!="number"&&typeof i!="number")return await ce.initialize(t,e.width,e.height,e,i);throw new Error("Invalid parameters")}initializeHTMLLayout(t){return ce.initializeHTMLLayout(t)}get children(){return ce.gameLayer.children}async copyCanvasElementProperty(t,e){if(typeof e=="string"){let i=this.find(e);if(i)e=i;else{fe.error(`Canvas element ${e} not found`);return}}if(typeof t=="string"){let i=this.find(t);if(i)t=i;else{fe.error(`Canvas element ${t} not found`);return}}t instanceof Lt&&(t=t.memory),"isRenderGroup"in t&&delete t.isRenderGroup,"scale"in t&&delete t.scale,"visible"in t&&delete t.visible,"boundsArea"in t&&delete t.boundsArea,"text"in t&&delete t.text,"resolution"in t&&delete t.resolution,"style"in t&&delete t.style,"height"in t&&delete t.height,"width"in t&&delete t.width,e instanceof gn?await c6(e,t,{ignoreTexture:!0}):e instanceof yi?await vw(e,t,{ignoreTexture:!0}):e instanceof Oh?await yw(e,t,{ignoreTexture:!0}):e instanceof Wg?await $N(e,t):e instanceof ji?await WN(e,t):e instanceof Lt&&await Ql(e,t)}transferTickers(t,e,i="move"){ce._currentTickersSequence[t]&&(i==="move"||i==="duplicate")&&(ce._currentTickersSequence[e]=Ft(ce._currentTickersSequence[t])),Object.entries(ce._currentTickers).forEach(([r,s])=>{var a;if(((a=s.createdByTicketSteps)==null?void 0:a.canvasElementAlias)===t&&this.removeTicker(r),s.canvasElementAliases.includes(t)&&(i==="move"?s.canvasElementAliases=s.canvasElementAliases.map(l=>l===t?e:l):i==="duplicate"&&s.canvasElementAliases.find(l=>l===t)&&s.canvasElementAliases.push(e),s.args.hasOwnProperty(Uc))){let l=s.args.aliasToRemoveAfter;typeof l=="string"&&(l=[l]),Array.isArray(l)&&(i==="move"?s.args.aliasToRemoveAfter=l.map(c=>c===t?e:c):i==="duplicate"&&l.find(c=>c===t)&&(s.args.aliasToRemoveAfter=[...l,e]))}}),Object.values(ce._currentTickersTimeouts).forEach(r=>{r.aliases.includes(t)&&(i==="move"?r.aliases=r.aliases.map(s=>s===t?e:s):i==="duplicate"&&r.aliases.find(s=>s===t)&&r.aliases.push(e))}),ce._currentTickersSequence[e]&&Object.keys(ce._currentTickersSequence[e]).forEach(r=>{this.runTickersSequence(e,r)}),i==="duplicate"&&ce._currentTickersSequence[t]&&Object.keys(ce._currentTickersSequence[t]).forEach(r=>{this.runTickersSequence(t,r)})}add(t,e,i={}){if(t===an){fe.error(`The alias ${an} is reserved`);return}let r=this.find(t),s=i==null?void 0:i.ignoreOldStyle;r&&!s&&this.copyCanvasElementProperty(r,e);let a=i.zIndex;r&&!this.gameLayer.children.includes(r)?fe.error(`The canvas element ${t} exist in the memory but it is not on the canvas, so the zIndex is not set`):r&&(a===void 0&&(a=this.gameLayer.getChildIndex(r)),this.remove(t,{ignoreTickers:!0})),a!==void 0?(e.label=t,this.gameLayer.addChildAt(e,a)):(e.label=t,this.gameLayer.addChild(e))}addCanvasElement(t,e){this.add(t,e)}remove(t,e={}){if(t===an){fe.error(`The alias ${an} is reserved`);return}let i=e.ignoreTickers;typeof t=="string"&&(t=[t]),t.forEach(r=>{this.gameLayer.getChildrenByLabel(r).forEach(s=>{this.gameLayer.removeChild(s),!i&&this.unlinkComponentFromTicker(r)})})}removeCanvasElement(t){this.remove(t)}find(t){if(t===an)return this.gameLayer;let e=this.gameLayer.getChildByLabel(t);if(e)return e}getCanvasElement(t){return this.find(t)}canvasElementIsOnCanvas(t){return this.gameLayer.children.includes(t)}removeAll(){this.gameLayer.removeChildren(),this.removeAllTickers()}editAlias(t,e,i={}){let r=this.find(t);r&&(r.label=e),!i.ignoreTickers&&this.transferTickers(t,e,"move")}get currentTickers(){return ce._currentTickers}get currentTickersList(){return Object.values(ce._currentTickers)}get currentTickersSteps(){return ce._currentTickersSequence}addTicker(t,e){let i=e.id;if(typeof t=="string"&&(t=[t]),!Rp(i,e.args,e.duration,e.priority)){fe.error(`Ticker ${i} not found`);return}let r={fn:()=>{},id:i,args:Ft(e.args),canvasElementAliases:t,priority:e.priority,duration:e.duration,onEndOfTicker:()=>{}},s=ce.generateTickerId(r);if(this.pushTicker(s,r,e),this.pushEndOfTicker(s,r,e),e.duration){let a=setTimeout(()=>{ce.removeTickerTimeoutInfo(a),ce._currentTickersTimeouts[a.toString()]&&this.onEndOfTicker(s,{aliasToRemoveAfter:Uc in e.args?e.args.aliasToRemoveAfter||[]:[],tickerAliasToResume:"tickerAliasToResume"in e.args?e.args.tickerAliasToResume||[]:[],ignoreTickerSteps:!0})},e.duration*1e3);ce.addTickerTimeoutInfo(t,i,a.toString(),!0)}return s}pushTicker(t,e,i){ce._currentTickers[t]=e,e.fn=r=>{let s=ce._currentTickers[t];if(s){let a=s.canvasElementAliases;if(e.createdByTicketSteps){if(this.isTickerPaused(e.createdByTicketSteps.canvasElementAlias,e.createdByTicketSteps.id))return}else a=a.filter(l=>!this.isTickerPaused(l,t));i==null||i.fn(r,s.args,a,t)}},this.app.ticker.add(e.fn,void 0,e.priority)}pushEndOfTicker(t,e,i){e.onEndOfTicker=()=>{i.onEndOfTicker(e.canvasElementAliases,t,e.args)}}addTickersSteps(t,e,i=0){return this.addTickersSequence(t,e,i)}addTickersSequence(t,e,i=0){if(e.length==0){fe.warn("The steps of the tickers is empty");return}t in ce._currentTickersSequence||(ce._currentTickersSequence[t]={});let r={currentStepNumber:i,steps:e.map(a=>a===Cp||a.hasOwnProperty("type")&&a.type==="pause"?a:{ticker:a.id,args:Ft(a.args),duration:a.duration})},s=ce.generateTickerId(r);return ce._currentTickersSequence[t][s]=r,this.runTickersSequence(t,s),s}runTickersSequence(t,e){if(!ce._currentTickersSequence[t]||!ce._currentTickersSequence[t][e])return;let i=ce._currentTickersSequence[t][e].steps[ce._currentTickersSequence[t][e].currentStepNumber];if(i===Cp&&(i=ce._currentTickersSequence[t][e].steps[0],ce._currentTickersSequence[t][e].currentStepNumber=0,i===Cp)){fe.error("TikersSteps has a RepeatType in the first step");return}if(i.hasOwnProperty("type")&&i.type==="pause"){let c=setTimeout(()=>{let h=ce._currentTickersTimeouts[c.toString()];h&&h.aliases.forEach(f=>{this.nextTickerStep(f,e)}),ce.removeTickerTimeoutInfo(c)},i.duration*1e3);ce.addTickerTimeoutInfo(t,"steps",c.toString(),!1);return}let r=Rp(i.ticker,i.args,i.duration,i.priority);if(!r){fe.error(`Ticker ${i.ticker} not found`);return}let s=r.id,a={fn:()=>{},id:s,args:Ft(r.args),canvasElementAliases:[t],priority:r.priority,duration:r.duration,createdByTicketSteps:{canvasElementAlias:t,id:e},onEndOfTicker:()=>{}},l=ce.generateTickerId(a);if(this.pushTicker(l,a,r),r.duration){let c=setTimeout(()=>{let h=ce._currentTickersTimeouts[c.toString()];h&&(this.onEndOfTicker(l,{aliasToRemoveAfter:Uc in r.args?r.args.aliasToRemoveAfter||[]:[],tickerAliasToResume:"tickerAliasToResume"in r.args?r.args.tickerAliasToResume||[]:[],ignoreTickerSteps:!0}),h.aliases.forEach(f=>{this.nextTickerStep(f,e)})),ce.removeTickerTimeoutInfo(c)},r.duration*1e3);ce.addTickerTimeoutInfo(t,s,c.toString(),!1)}}nextTickerStep(t,e){if(ce._currentTickersSequence[t]&&ce._currentTickersSequence[t][e]){let i=ce._currentTickersSequence[t][e];i.currentStepNumber+1<i.steps.length?(i.currentStepNumber++,ce._currentTickersSequence[t][e]=i,this.runTickersSequence(t,e)):e&&ce._currentTickersSequence[t]&&ce._currentTickersSequence[t][e]&&(delete ce._currentTickersSequence[t][e],Object.entries(ce._currentTickers).forEach(([r,s])=>{var a;((a=s.createdByTicketSteps)==null?void 0:a.canvasElementAlias)===t&&s.createdByTicketSteps.id===e&&this.removeTicker(r)}))}}onEndOfTicker(t,e){let i=ce._currentTickers[t],r=e.ignoreTickerSteps||!1;this.remove(e.aliasToRemoveAfter),this.resumeTicker(e.tickerAliasToResume),i&&(this.removeTicker(t),!r&&i.duration==null&&i.createdByTicketSteps&&this.nextTickerStep(i.createdByTicketSteps.canvasElementAlias,i.createdByTicketSteps.id))}unlinkComponentFromTicker(t,e){if(typeof t=="string"&&(t=[t]),!e){t.forEach(r=>{Object.entries(ce._currentTickers).forEach(([s,a])=>{a.canvasElementAliases.includes(r)&&(a.canvasElementAliases.length===1?this.removeTicker(s):a.canvasElementAliases=a.canvasElementAliases.filter(l=>l!==r))}),ce._currentTickersSequence[r]&&delete ce._currentTickersSequence[r],ce.removeTickerTimeoutsByAlias(r,!1)});return}let i;typeof e=="string"?i=e:e instanceof Su?i=e.id:i=e.prototype.id,t.forEach(r=>{ce._currentTickersSequence[r]&&Object.entries(ce._currentTickersSequence[r]).forEach(([s,a])=>{a.steps.find(l=>typeof l=="object"&&"ticker"in l&&l.ticker===i)&&delete ce._currentTickersSequence[r][s]})}),Object.entries(ce._currentTickers).forEach(([r,s])=>{s.id===i&&(ce._currentTickers[r].canvasElementAliases=s.canvasElementAliases.filter(a=>!t.includes(a)))}),Object.entries(ce._currentTickersTimeouts).forEach(([r,s])=>{s.ticker===i&&s.canBeDeletedBeforeEnd&&(ce._currentTickersTimeouts[r].aliases=s.aliases.filter(a=>!t.includes(a)))}),this.removeTickersWithoutAssociatedCanvasElement()}removeTickersWithoutAssociatedCanvasElement(){Object.entries(ce._currentTickers).forEach(([t,e])=>{e.canvasElementAliases=e.canvasElementAliases.filter(i=>this.find(i)),e.canvasElementAliases.length===0&&this.onEndOfTicker(t,{aliasToRemoveAfter:Uc in e.args?e.args.aliasToRemoveAfter:[],tickerAliasToResume:"tickerAliasToResume"in e.args?e.args.tickerAliasToResume:[],ignoreTickerSteps:!0})}),Object.entries(ce._currentTickersSequence).forEach(([t,e])=>{e===void 0&&delete ce._currentTickersSequence[t]}),Object.entries(ce._currentTickersTimeouts).forEach(([t,{aliases:e}])=>{e.length===0&&ce.removeTickerTimeout(t)})}removeAllTickers(){ce._currentTickersSequence={},Object.keys(ce._currentTickers).forEach(t=>{this.removeTicker(t)}),ce._currentTickers={};for(let t in ce._currentTickersTimeouts)ce.removeTickerTimeout(t);ce._tickersToCompleteOnStepEnd={tikersIds:[],stepAlias:[]},ce._tickersOnPause={}}removeTicker(t){typeof t=="string"&&(t=[t]),t.forEach(e=>{let i=ce._currentTickers[e];if(i){if(i.args.hasOwnProperty(Uc)){let r=i.args.aliasToRemoveAfter;this.remove(r)}this.app.ticker.remove(i.fn),delete ce._currentTickers[e]}})}putOnPauseTicker(t,e={}){this.pauseTicker(t,e)}pauseTicker(t,e={}){let i=ce._tickersOnPause[t];if(!i){ce._tickersOnPause[t]=e;return}e.tickerIdsExcluded&&(i.tickerIdsExcluded?ce._tickersOnPause[t].tickerIdsExcluded=[...i.tickerIdsExcluded,...e.tickerIdsExcluded]:ce._tickersOnPause[t].tickerIdsExcluded=e.tickerIdsExcluded),e.tickerIdsIncluded&&(i.tickerIdsIncluded?ce._tickersOnPause[t].tickerIdsIncluded=[...i.tickerIdsIncluded,...e.tickerIdsIncluded]:ce._tickersOnPause[t].tickerIdsIncluded=e.tickerIdsIncluded)}resumeTickerPaused(t){this.resumeTicker(t)}resumeTicker(t){typeof t=="string"&&(t=[t]),t.forEach(e=>{delete ce._tickersOnPause[e]})}isTickerPaused(t,e){let i=ce._tickersOnPause[t];if(i){if(e){if("tickerIdsIncluded"in i&&i.tickerIdsIncluded)return i.tickerIdsIncluded.includes(e);if("tickerIdsExcluded"in i&&i.tickerIdsExcluded)return!i.tickerIdsExcluded.includes(e)}return!0}return!1}completeTickerOnStepEnd(t){t.alias?ce._tickersToCompleteOnStepEnd.stepAlias.push({id:t.id,alias:t.alias}):ce._tickersToCompleteOnStepEnd.tikersIds.push({id:t.id})}forceCompletionOfTicker(t,e){if(e){let i=ce._currentTickersSequence[e];i&&i[t]&&(i[t].steps.includes(Cp)?fe.error(`The ticker alias: ${e} id: ${t} contains a RepeatType, so it can't be forced to complete`,i[t]):i[t].steps.forEach(r=>{if(typeof r=="object"&&"ticker"in r){let s=Rp(r.ticker,r.args,r.duration,r.priority);s&&s.onEndOfTicker([e],t,r.args)}}))}else{let i=ce._currentTickers[t];i&&i.onEndOfTicker()}}addLayer(t,e){if(t===an){fe.error(`The alias ${an} is reserved`);return}return e.label=t,ce.app.stage.addChild(e)}getLayer(t){return ce.app.stage.getChildByLabel(t)}removeLayer(t){ce.app.stage.getChildrenByLabel(t)}async extractImage(){return(await this.app.renderer.extract.image(this.gameLayer)).src}clear(){this.removeAll()}exportJson(){return JSON.stringify(this.export())}export(){let t={};return this.children.forEach(e=>{e.label&&(t[e.label]=YN(e))}),{tickers:Ft(ce.currentTickersWithoutCreatedBySteps),tickersSteps:Ft(ce._currentTickersSequence),elements:Ft(t),stage:Ft(xd(this.gameLayer)),elementAliasesOrder:Ft(ce.childrenAliasesOrder),tickersOnPause:Ft(ce._tickersOnPause),tickersToCompleteOnStepEnd:Ft(ce._tickersToCompleteOnStepEnd)}}async importJson(t){await this.import(JSON.parse(t))}async import(t){try{let e={};if(t.hasOwnProperty("elementAliasesOrder")&&t.hasOwnProperty("elements")){let i=t.elements,r=t.elementAliasesOrder,s=r.filter(l=>i[l]).map(l=>XN(i[l])),a=await Promise.all(s);this.clear(),a.forEach((l,c)=>{let h=r[c];this.add(h,l),ce.childrenAliasesOrder.push(h)})}else{fe.error("The data does not have the properties elementAliasesOrder and elements");return}if(t.hasOwnProperty("stage")&&t.hasOwnProperty("stage")?Ql(this.gameLayer,t.stage,{ignoreScale:!0}):fe.error("The data does not have the properties stage"),t.hasOwnProperty("tickers")){let i=t.tickers;Object.entries(i).forEach(([r,s])=>{let a=s.canvasElementAliases,l=Rp(s.id,s.args,s.duration,s.priority);if(l){let c=this.addTicker(a,l);c&&(e[r]=c)}else fe.error(`Ticker ${s.id} not found`)})}if(t.hasOwnProperty("tickersSteps")){let i=t.tickersSteps;Object.entries(i).forEach(([r,s])=>{ce._currentTickersSequence[r]=s,Object.keys(s).forEach(a=>{this.runTickersSequence(r,a)})})}if(t.hasOwnProperty("tickersOnPause")){let i=t.tickersOnPause;Object.keys(i).forEach(r=>{let s=i[r];"tickerIdsExcluded"in s&&s.tickerIdsExcluded&&(i[r].tickerIdsExcluded=s.tickerIdsExcluded.map(a=>e[a]||a)),"tickerIdsIncluded"in s&&s.tickerIdsIncluded&&(i[r].tickerIdsIncluded=s.tickerIdsIncluded.map(a=>e[a]||a))}),ce._tickersOnPause=i}if(t.hasOwnProperty("tickersToCompleteOnStepEnd")){let i=t.tickersToCompleteOnStepEnd,r=i.tikersIds.map(a=>({id:e[a.id]||a.id})),s=i.stepAlias.map(a=>({id:a.id,alias:a.alias}));ce._tickersToCompleteOnStepEnd={tikersIds:r,stepAlias:s}}}catch(e){fe.error("Error importing data",e)}}},Sj={Date:!0,RegExp:!0,String:!0,Number:!0};function QN(t,e,i={cyclesFix:!0},r=[]){var c,h;let s=[],a=Array.isArray(t);for(let f in t){let p=t[f],g=a?+f:f;if(!(f in e)){s.push({type:"REMOVE",path:[g],oldValue:t[f]});continue}let y=e[f],v=typeof p=="object"&&typeof y=="object"&&Array.isArray(p)===Array.isArray(y);p&&y&&v&&!Sj[(h=(c=Object.getPrototypeOf(p))==null?void 0:c.constructor)==null?void 0:h.name]&&(!i.cyclesFix||!r.includes(p))?s.push.apply(s,QN(p,y,i,i.cyclesFix?r.concat([p]):[]).map(x=>(x.path.unshift(g),x))):p!==y&&!(Number.isNaN(p)&&Number.isNaN(y))&&!(v&&(isNaN(p)?p+""==y+"":+p==+y))&&s.push({path:[g],type:"CHANGE",value:y,oldValue:p})}let l=Array.isArray(e);for(let f in e)f in t||s.push({type:"CREATE",path:[l?+f:f],value:e[f]});return s}var Q2="close",Aj=ho(RN()),JN=class{constructor(t,e){me(this,"_id");me(this,"_onStepStart");me(this,"_onLoadingLabel");me(this,"_onStepEnd");me(this,"_choiseIndex");this._id=t,this._onStepStart=e==null?void 0:e.onStepStart,this._onLoadingLabel=e==null?void 0:e.onLoadingLabel,this._onStepEnd=e==null?void 0:e.onStepEnd,this._choiseIndex=e==null?void 0:e.choiseIndex}get id(){return this._id}getCorrespondingStepsNumber(t){if(t.length===0)return 0;let e=0;return t.forEach((i,r)=>{this.getStepSha1(r)===i&&(e=r)}),e}get onStepStart(){return async(t,e)=>{if(this._onLoadingLabel&&t===0&&await this._onLoadingLabel(t,e),this._onStepStart)return await this._onStepStart(t,e)}}get onLoadingLabel(){return this._onLoadingLabel}get onStepEnd(){return this._onStepEnd}get choiseIndex(){return this._choiseIndex}},p_=class extends JN{constructor(e,i,r){super(e,r);me(this,"_steps");this._steps=i}get steps(){return typeof this._steps=="function"?this._steps():this._steps}getStepSha1(e){if(e<0||e>=this.steps.length)return fe.warn("stepSha not found, setting to ERROR"),"error";try{let i=this.steps[e];return(0,Aj.default)(i.toString().toLocaleLowerCase()).toString()}catch(i){return fe.warn("stepSha not found, setting to ERROR",i),"error"}}},J2="__close-label-id__";function ch(t){return new p_(J2,[],{choiseIndex:t})}var e6=class{constructor(t,e,i,r){me(this,"text");me(this,"_label");me(this,"type");me(this,"oneTime");me(this,"onlyHaveNoChoice");me(this,"autoSelect");me(this,"props",{});this.text=t,this._label=e,this.type=(r==null?void 0:r.type)||"call",this.oneTime=(r==null?void 0:r.oneTime)||!1,this.onlyHaveNoChoice=(r==null?void 0:r.onlyHaveNoChoice)||!1,this.autoSelect=(r==null?void 0:r.autoSelect)||!1,i&&(this.props=i)}get label(){let t=this._label;if(typeof t=="string"){let e=ln(t);e?t=e:(fe.error(`Label ${t} not found, so it will be closed`),t=ch())}return t}},e1=class{constructor(t,e){me(this,"label",ch());me(this,"text");me(this,"closeCurrentLabel");me(this,"type",Q2);me(this,"oneTime");me(this,"onlyHaveNoChoice");me(this,"autoSelect");me(this,"props",{});this.text=t,this.closeCurrentLabel=(e==null?void 0:e.closeCurrentLabel)||!1,this.oneTime=(e==null?void 0:e.oneTime)||!1,this.onlyHaveNoChoice=(e==null?void 0:e.onlyHaveNoChoice)||!1,this.autoSelect=(e==null?void 0:e.autoSelect)||!1}};function Ej(t,e){let i=Ft(t);return e.length>1&&"type"in e[0]&&(e=e.reverse()),e.forEach(r=>{"type"in r?wj(i,r):Cj(i,r)}),i}function wj(t,e){let i=t;e.path&&e.path.length>0?e.path.forEach((r,s)=>{if(e.path&&s===e.path.length-1)switch(e.type){case"CHANGE":case"REMOVE":i[r]=e.oldValue;break;case"CREATE":Array.isArray(i)&&typeof r=="number"?i.splice(r,1):delete i[r];break}else i=i[r]}):fe.warn("No path found, skipping diff",e)}function Cj(t,e){let i=t;e.path&&e.path.length>0?e.path.forEach((r,s)=>{if(e.path&&s===e.path.length-1){if(e.kind==="E"||e.kind==="D")i[r]=e.lhs;else if(e.kind==="N")Number.isInteger(r)?Array.isArray(i)&&i.splice(r,1):typeof r=="string"&&delete i[r];else if(e.kind==="A"){let a=e.index;e.item.kind==="N"?i[r].splice(a,1):e.item.kind==="E"||e.item.kind==="D"?i[r][a]=e.item.lhs:e.item.kind==="A"?fe.warn("Nested array found, skipping diff",e):fe.warn("No array found, skipping diff",e)}}else i=i[r]}):fe.warn("No path found, skipping diff",e)}var Re,_e=(Re=class{constructor(){}static get allOpenedLabels(){return be.getVariable(be.keysSystem.OPENED_LABELS_COUNTER_KEY)||{}}static set allOpenedLabels(e){be.setVariable(be.keysSystem.OPENED_LABELS_COUNTER_KEY,e)}static getCurrentStepTimesCounterData(e=""){let i=Re.currentLabelStepIndex;if(i===null)return fe.error("currentLabelStepIndex is null"),null;let r=`${i}${e}`,s=Re.currentLabelId,a=Re._currentLabel;if(!s||i===null||!a)return fe.error("currentLabelId or currentLabelStepIndex is null or currentLabel not found"),null;let l=a.getStepSha1(i)||"error",c=be.getVariable(be.keysSystem.CURRENT_STEP_TIMES_COUNTER_KEY)||{};return c[s]||(c[s]={}),(!c[s][r]||c[s][r].stepSha1!=l)&&(c[s][r]={stepSha1:l}),c[s][r]}static setCurrentStepTimesCounterData(e="",i){let r=Re.currentLabelStepIndex,s=r+e,a=Re.currentLabelId;if(!a||r===null){fe.error("currentLabelId or currentLabelStepIndex is null");return}let l=be.getVariable(be.keysSystem.CURRENT_STEP_TIMES_COUNTER_KEY)||{};l[a]||(l[a]={}),l[a][s]=i,be.setVariable(be.keysSystem.CURRENT_STEP_TIMES_COUNTER_KEY,l)}static getCurrentStepTimesCounter(e=""){let i=Re._lastStepIndex,r=Re.getCurrentStepTimesCounterData(e);if(!r)return fe.error("getCurrentStepTimesCounter obj is null"),0;let s=r.lastStepIndexs||[];return s.find(a=>a===i)||(s.push(i),r.lastStepIndexs=s,Re.setCurrentStepTimesCounterData(e,r)),s.length}static getRandomNumber(e,i,r={}){let s=r.nestedId||"";if(r.onceOnly){let a=Re.getCurrentStepTimesCounterData(s);if(!a)return;let l=a.usedRandomNumbers||{},c=Array.from({length:i-e+1},(p,g)=>g+e).filter(p=>{var g;return!((g=l[`${e}-${i}`])!=null&&g.includes(p))});if(c.length===0)return;let h=Math.floor(Math.random()*c.length),f=c[h];return l[`${e}-${i}`]||(l[`${e}-${i}`]=[]),l[`${e}-${i}`].push(f),a.usedRandomNumbers=l,Re.setCurrentStepTimesCounterData(s,a),f}return Math.floor(Math.random()*(i-e+1))+e}static resetCurrentStepTimesCounter(e=""){let i=Re.currentLabelStepIndex,r=i+e,s=Re.currentLabelId;if(!s||i===null){fe.error("currentLabelId or currentLabelStepIndex is null");return}let a=be.getVariable(be.keysSystem.CURRENT_STEP_TIMES_COUNTER_KEY)||{};a[s]||(a[s]={}),a[s][r]={lastStepIndexs:[],stepSha1:""},be.setVariable(be.keysSystem.CURRENT_STEP_TIMES_COUNTER_KEY,a)}static get allChoicesMade(){return be.getVariable(be.keysSystem.ALL_CHOICES_MADE_KEY)||[]}static set allChoicesMade(e){be.setVariable(be.keysSystem.ALL_CHOICES_MADE_KEY,e)}static increaseLastStepIndex(){Re._lastStepIndex++}static get _currentLabel(){if(Re.currentLabelId)return ln(Re.currentLabelId)}static get currentLabelId(){if(Re._openedLabels.length>0)return Re._openedLabels[Re._openedLabels.length-1].label}static get currentLabelStepIndex(){return Re._openedLabels.length>0?Re._openedLabels[Re._openedLabels.length-1].currentStepIndex:null}static get lastHistoryStep(){return Re._stepsHistory.length>0?Re._stepsHistory[Re._stepsHistory.length-1]:null}static get originalStepData(){return Re._originalStepData?Ft(Re._originalStepData):{path:"",storage:{},canvas:{elementAliasesOrder:[],elements:{},stage:{},tickers:{},tickersSteps:{},tickersOnPause:{},tickersToCompleteOnStepEnd:{tikersIds:[],stepAlias:[]}},sound:{soundAliasesOrder:[],soundsPlaying:{},playInStepIndex:{},filters:void 0},labelIndex:-1,openedLabels:[]}}static set originalStepData(e){Re._originalStepData=Ft(e)}static addLabelHistory(e,i){var l,c;let r=Re.allOpenedLabels,s=((l=Re.allOpenedLabels[e])==null?void 0:l.biggestStep)||0,a=((c=Re.allOpenedLabels[e])==null?void 0:c.openCount)||0;(!s||s<i)&&(r[e]={biggestStep:i,openCount:a},Re.allOpenedLabels=r)}static addChoicesMade(e,i,r,s){let a=Re.allChoicesMade,l=a.findIndex(c=>c.labelId===e&&c.stepIndex===i&&c.choiceIndex===s&&c.stepSha1===r);l<0?a.push({labelId:e,stepIndex:i,choiceIndex:s,stepSha1:r,madeTimes:1}):a[l].madeTimes++,Re.allChoicesMade=a}static pushNewLabel(e){var a,l;if(!ln(e))throw new Error(`[PixiVN] Label ${e} not found`);Re._openedLabels.push({label:e,currentStepIndex:0});let i=Re.allOpenedLabels,r=((a=Re.allOpenedLabels[e])==null?void 0:a.biggestStep)||0,s=((l=Re.allOpenedLabels[e])==null?void 0:l.openCount)||0;i[e]={biggestStep:r,openCount:s+1},Re.allOpenedLabels=i}static increaseCurrentStepIndex(){if(Re._openedLabels.length>0){let e=Re._openedLabels[Re._openedLabels.length-1];Re._openedLabels[Re._openedLabels.length-1]={...e,currentStepIndex:e.currentStepIndex+1}}}static restoreLastLabelList(){Re._openedLabels=Re.originalStepData.openedLabels}static goBackInternal(e,i){if(e<=0||Re._stepsHistory.length==0)return i;let r=Re.lastHistoryStep;if(r!=null&&r.diff)try{let s=Ej(i,r.diff);return Re._lastStepIndex=r.index,Re._stepsHistory.pop(),Re.goBackInternal(e-1,s)}catch(s){return fe.error("Error applying diff",s),i}else return fe.error("You can't go back, there is no step to go back"),i}},me(Re,"_stepsHistory",[]),me(Re,"stepsRunning",0),me(Re,"goNextRequests",0),me(Re,"cleanSteps",!1),me(Re,"choiseMadeTemp"),me(Re,"stepLimitSaved",20),me(Re,"_lastStepIndex",0),me(Re,"_openedLabels",[]),me(Re,"_originalStepData"),Re),Ze,Zt=(Ze=class{constructor(){}static get keysSystem(){return fw}static get tempStorage(){return Ze.storage.get(Ze.keysSystem.TEMP_STORAGE_KEY)||{}}static set tempStorage(e){Ze.storage.set(Ze.keysSystem.TEMP_STORAGE_KEY,e)}static get tempStorageDeadlines(){return Ze.storage.get(Ze.keysSystem.TEMP_STORAGE_DEADLINES_KEY)||{}}static set tempStorageDeadlines(e){Ze.storage.set(Ze.keysSystem.TEMP_STORAGE_DEADLINES_KEY,e)}static getTempVariable(e){if(Ze.tempStorage.hasOwnProperty(e))return Ft(Ze.tempStorage[e])}static clearOldTempVariables(e){let i=Ze.tempStorage,r=Ze.tempStorageDeadlines;if(e===0)i={},r={};else for(let s in r)r[s]<e&&(delete i[s],delete r[s]);Ze.tempStorage=i,Ze.tempStorageDeadlines=r}static setVariable(e,i){if(Ze.storage.has(e.toLowerCase())&&Ze.storage.delete(e.toLowerCase()),i==null){Ze.storage.delete(e);return}Ze.storage.set(e,i)}static getVariable(e){let i=Ze.getTempVariable(e);return i!==void 0?i:(!Ze.storage.has(e)&&Ze.storage.has(e.toLowerCase())&&(e=e.toLowerCase()),Ft(Ze.storage.get(e)))}static removeVariable(e){!Ze.storage.has(e)&&Ze.storage.has(e.toLowerCase())&&(e=e.toLowerCase()),Ze.storage.delete(e)}static setFlag(e,i){let r=Ze.getVariable(Ze.keysSystem.FLAGS_CATEGORY_KEY)||[];if(i)r.includes(e)||r.push(e);else{let s=r.indexOf(e);s>-1&&r.splice(s,1)}Ze.setVariable(Ze.keysSystem.FLAGS_CATEGORY_KEY,r)}static getFlag(e){return(Ze.getVariable(Ze.keysSystem.FLAGS_CATEGORY_KEY)||[]).includes(e)}},me(Ze,"storage",new Map),me(Ze,"startingStorage",[]),Ze),t6=class{constructor(t,e,i){me(this,"onGameEnd");me(this,"onStepError");this.getCurrentStepData=t,this.restoreFromHistoryStep=e,this.forceCompletionOfTicker=i}get stepsHistory(){return _e._stepsHistory}get currentStepTimesCounter(){return _e.getCurrentStepTimesCounter()}set currentStepTimesCounter(t){_e.resetCurrentStepTimesCounter()}getRandomNumber(t,e,i={}){return _e.getRandomNumber(t,e,i)}get lastStepIndex(){return _e._lastStepIndex}get openedLabels(){return _e._openedLabels}get currentLabel(){return _e._currentLabel}addStepHistory(t,e){let i=this.getCurrentStepData();if(_e.originalStepData&&_e.originalStepData.openedLabels.length===i.openedLabels.length)try{let s=JSON.stringify(_e.originalStepData.openedLabels),a=JSON.stringify(i.openedLabels);if(s===a&&_e.originalStepData.path===i.path&&_e.originalStepData.labelIndex===i.labelIndex)return}catch(s){fe.error("Error comparing openedLabels",s)}let r=QN(_e.originalStepData,i);if(r){let s,a,l;be.getVariable(be.keysSystem.LAST_DIALOGUE_ADDED_IN_STEP_MEMORY_KEY)===this.lastStepIndex&&(s=this.dialogue),be.getVariable(be.keysSystem.LAST_MENU_OPTIONS_ADDED_IN_STEP_MEMORY_KEY)===this.lastStepIndex&&(a=be.getVariable(be.keysSystem.CURRENT_MENU_OPTIONS_MEMORY_KEY)),be.getVariable(be.keysSystem.LAST_INPUT_ADDED_IN_STEP_MEMORY_KEY)===this.lastStepIndex&&(l=be.getVariable(be.keysSystem.CURRENT_INPUT_VALUE_MEMORY_KEY)),this.stepsHistory.push({diff:r,currentLabel:_e.currentLabelId,dialoge:s,choices:a,stepSha1:t,index:this.lastStepIndex,labelStepIndex:_e.currentLabelStepIndex,choiceIndexMade:e,inputValue:l,alreadyMadeChoices:this.alreadyCurrentStepMadeChoices}),_e.originalStepData=i}_e.increaseLastStepIndex()}closeCurrentLabel(){if(!_e.currentLabelId){fe.warn("No label to close");return}if(!this.currentLabel){fe.error("currentLabel not found");return}_e._openedLabels.pop(),Zt.clearOldTempVariables(this.openedLabels.length)}closeAllLabels(){for(;_e._openedLabels.length>0;)this.closeCurrentLabel(),Zt.clearOldTempVariables(this.openedLabels.length)}get narrativeHistory(){let t=[];return this.stepsHistory.forEach(e=>{let i=e.dialoge,r=e.choices,s=e.inputValue;if(t.length>0&&t[t.length-1].choices&&!t[t.length-1].playerMadeChoice&&e.currentLabel){let a=t[t.length-1].choices;if(a){let l=!1;e.choiceIndexMade!==void 0&&a.length>e.choiceIndexMade&&(a[e.choiceIndexMade].isResponse=!0,l=!0),t[t.length-1].playerMadeChoice=l,t[t.length-1].choices=a}}if(s&&t.length>0&&(t[t.length-1].inputValue=s),i||r){let a=r==null?void 0:r.map((l,c)=>{let h=!1;return l.oneTime&&e.alreadyMadeChoices&&e.alreadyMadeChoices.includes(c)&&(h=!0),{text:l.text,type:l.type,isResponse:!1,hidden:h}});if(a&&a.every(l=>l.hidden)){let l=a.find(c=>c.hidden===!1);l&&(l.hidden=!1)}t.push({dialoge:i,playerMadeChoice:!1,choices:a,stepIndex:e.index})}}),t}removeNarrativeHistory(t){t?this.stepsHistory.splice(0,t):_e._stepsHistory=[]}isLabelAlreadyCompleted(t){var r;let e;typeof t=="string"?e=t:e=t.id;let i=((r=_e.allOpenedLabels[e])==null?void 0:r.biggestStep)||0;if(i){let s=ln(e);if(s)return s.steps.length<=i}return!1}get alreadyCurrentStepMadeChoicesObj(){let t=_e.currentLabelStepIndex,e=this.currentLabel;if(t===null||!e)return;let i=e.getStepSha1(t);return i||(fe.warn("stepSha not found, setting to ERROR"),i="error"),_e.allChoicesMade.filter(r=>r.labelId===(e==null?void 0:e.id)&&r.stepIndex===t&&r.stepSha1===i)}get alreadyCurrentStepMadeChoices(){var t;return(t=this.alreadyCurrentStepMadeChoicesObj)==null?void 0:t.map(e=>e.choiceIndex)}get isCurrentStepAlreadyOpened(){var e;let t=_e.currentLabelId;if(t){let i=((e=_e.allOpenedLabels[t])==null?void 0:e.openCount)||0;if(_e.currentLabelStepIndex&&i>=_e.currentLabelStepIndex)return!0}return!1}getTimesLabelOpened(t){var e;return((e=_e.allOpenedLabels[t])==null?void 0:e.openCount)||0}getTimesChoiceMade(t){var e,i;return((i=(e=this.alreadyCurrentStepMadeChoicesObj)==null?void 0:e.find(r=>r.choiceIndex===t))==null?void 0:i.madeTimes)||0}addCurrentStepToHistory(){let t=_e.currentLabelStepIndex;if(t===null){fe.error("currentLabelStepIndex is null");return}let e=_e._currentLabel;if(!e){fe.error("currentLabel not found");return}e.steps.length>t&&this.addStepHistory("dev")}getCanGoNext(t){let e=(t==null?void 0:t.showWarn)||!1,i=this.choiceMenuOptions;return i&&i.length>0?(e&&fe.warn("The player must make a choice"),!1):this.isRequiredInput?(e&&fe.warn("The player must enter a value"),!1):!0}get canGoNext(){return _e.stepsRunning!==0?!1:this.getCanGoNext()}async goNext(t,e={}){let{runNow:i=!1}=e;if(!(!i&&!this.getCanGoNext({showWarn:!0}))){if(!i&&_e.stepsRunning!==0){_e.goNextRequests++;return}return this.currentLabel&&this.currentLabel.onStepEnd&&await this.currentLabel.onStepEnd(_e.currentLabelStepIndex||0,this.currentLabel),_e.stepsRunning===0&&this.forceCompletionOfTicker(),_e.increaseCurrentStepIndex(),await this.runCurrentStep(t,e)}}async runCurrentStep(t,e={}){let{choiseMade:i}=e;if(_e.currentLabelId){let r=_e.currentLabelStepIndex;if(r===null){fe.error("currentLabelStepIndex is null");return}let s=_e._currentLabel;if(!s){fe.error("currentLabel not found");return}if(s.steps.length>r){let a=s.onStepStart;if(a)try{await a(r,s)}catch(h){fe.error("Error running onStepStart",h),this.onStepError&&this.onStepError(h,t);return}let l=s.steps[r],c=s.getStepSha1(r);c||(fe.warn("stepSha not found, setting to ERROR"),c="error");try{_e.stepsRunning++;let h=await l(t,{labelId:s.id}),f=this.choiceMenuOptions;if((f==null?void 0:f.length)===1&&f[0].autoSelect){let p=f[0];h=await this.selectChoice(p,t)}if(i!==void 0&&this.stepsHistory.length>0){let p=this.stepsHistory[this.stepsHistory.length-1],g=p.stepSha1;g||(fe.warn("stepSha not found, setting to ERROR"),g="error"),_e.addChoicesMade(p.currentLabel||"error",typeof p.labelStepIndex=="number"?p.labelStepIndex:-1,p.stepSha1||"error",i),_e.choiseMadeTemp=i}return _e.stepsRunning--,_e.stepsRunning===0&&(_e.addLabelHistory(s.id,r),this.addStepHistory(c,_e.choiseMadeTemp),_e.choiseMadeTemp=void 0,_e.goNextRequests>0)?(_e.goNextRequests--,await this.goNext(t)):h}catch(h){_e.stepsRunning>0&&_e.stepsRunning--,fe.error("Error running step",h),this.onStepError&&this.onStepError(h,t);return}}else{if(this.openedLabels.length>1)return this.closeCurrentLabel(),await this.goNext(t,e);if(this.openedLabels.length===1)return _e.restoreLastLabelList(),this.onGameEnd?await this.onGameEnd(t,{labelId:"end"}):void 0}}else if(this.openedLabels.length===0){if(_e.restoreLastLabelList(),this.onGameEnd)return await this.onGameEnd(t,{labelId:"end"});fe.error("The end of the game is not managed, so the game is blocked. Read this documentation to know how to manage the end of the game: https://pixi-vn.web.app/start/other-narrative-features.html#how-manage-the-end-of-the-game");return}else fe.error("currentLabelId not found")}async callLabel(t,e){let i,r;typeof t=="string"?r=t:(r=t.id,typeof t.choiseIndex=="number"&&(i=t.choiseIndex));try{if(r===J2){let a={label:ch(i),text:"",closeCurrentLabel:!1,type:"close",oneTime:!1,onlyHaveNoChoice:!1,autoSelect:!1,props:{}};return this.closeChoiceMenu(a,e)}let s=ln(r);if(!s)throw new Error(`[PixiVN] Label ${r} not found`);this.currentLabel&&this.currentLabel.onStepEnd&&await this.currentLabel.onStepEnd(_e.currentLabelStepIndex||0,this.currentLabel),_e.pushNewLabel(s.id)}catch(s){fe.error("Error calling label",s);return}return await this.runCurrentStep(e,{choiseMade:i})}async jumpLabel(t,e){this.closeCurrentLabel();let i,r;typeof t=="string"?r=t:(r=t.id,typeof t.choiseIndex=="number"&&(i=t.choiseIndex));try{if(r===J2){let a={label:ch(i),text:"",closeCurrentLabel:!1,type:"close",oneTime:!1,onlyHaveNoChoice:!1,autoSelect:!1,props:{}};return this.closeChoiceMenu(a,e)}let s=ln(r);if(!s)throw new Error(`[PixiVN] Label ${r} not found`);this.currentLabel&&this.currentLabel.onStepEnd&&await this.currentLabel.onStepEnd(_e.currentLabelStepIndex||0,this.currentLabel),_e.pushNewLabel(s.id)}catch(s){fe.error("Error jumping label",s);return}return await this.runCurrentStep(e,{choiseMade:i})}async selectChoice(t,e){if(this.choiceMenuOptions=void 0,t.type=="call")return await this.callLabel(t.label,{...t.props,...e});if(t.type=="jump")return await this.jumpLabel(t.label,{...t.props,...e});if(t.type=="close")return await this.closeChoiceMenu(t,{...t.props,...e});throw new Error(`[PixiVN] Type ${t.type} not found`)}async closeChoiceMenu(t,e){let i=t.label,r;return typeof i.choiseIndex=="number"&&(r=i.choiseIndex),t.closeCurrentLabel&&this.closeCurrentLabel(),this.goNext(e,{choiseMade:r})}get stepLimitSaved(){return _e.stepLimitSaved}set stepLimitSaved(t){_e.stepLimitSaved=t}async goBack(t,e=1){if(e<=0){fe.warn("The parameter steps must be greater than 0");return}if(this.stepsHistory.length<=1){fe.warn("You can't go back, there is no step to go back");return}let i=_e.goBackInternal(e,_e.originalStepData);i?await this.restoreFromHistoryStep(i,t):fe.error("Error going back")}get canGoBack(){var t;return _e._stepsHistory.length<=1?!1:!!((t=_e.lastHistoryStep)!=null&&t.diff)}async blockGoBack(){_e.stepsRunning===0&&this.stepsHistory.length>1&&(this.stepsHistory[this.stepsHistory.length-1]={...this.stepsHistory[this.stepsHistory.length-1],diff:void 0})}get dialogue(){return be.getVariable(be.keysSystem.CURRENT_DIALOGUE_MEMORY_KEY)}set dialogue(t){if(!t){be.setVariable(be.keysSystem.CURRENT_DIALOGUE_MEMORY_KEY,void 0);return}let e="",i,r;if(typeof t=="string"?(e=t,r=new Ml(e,i)):Array.isArray(t)?(e=t.join(),r=new Ml(e,i)):t instanceof Ml?r=t:(Array.isArray(t.text)?e=t.text.join():e=t.text,t.character&&(typeof t.character=="string"?i=t.character:i=t.character.id),r=new Ml(e,i)),this.dialogGlue){let s=be.getVariable(be.keysSystem.CURRENT_DIALOGUE_MEMORY_KEY);s&&(r.text=`${s.text}${r.text}`,r.character=r.character||s.character),this.dialogGlue=!1}be.setVariable(be.keysSystem.CURRENT_DIALOGUE_MEMORY_KEY,r),be.setVariable(be.keysSystem.LAST_DIALOGUE_ADDED_IN_STEP_MEMORY_KEY,this.lastStepIndex)}get choiceMenuOptions(){let t=be.getVariable(be.keysSystem.CURRENT_MENU_OPTIONS_MEMORY_KEY);if(t){let e=[],i=[];t.forEach((s,a)=>{if(s.type===Q2){let c=ch(a),h=new e1(s.text,{closeCurrentLabel:s.closeCurrentLabel,oneTime:s.oneTime,onlyHaveNoChoice:s.onlyHaveNoChoice,autoSelect:s.autoSelect});h.label=c,e.push(h);return}let l=ln(s.label);if(l){let c=new p_(l.id,l.steps,{onStepStart:l.onStepStart,choiseIndex:a});e.push(new e6(s.text,c,s.props,{type:s.type,oneTime:s.oneTime,onlyHaveNoChoice:s.onlyHaveNoChoice,autoSelect:s.autoSelect}))}});let r=this.alreadyCurrentStepMadeChoices;if(e=e.filter((s,a)=>s.oneTime&&r&&r.includes(a)?!1:s.onlyHaveNoChoice?(i.push(s),!1):!0),e.length>0)return e;if(i.length>0)return[i[0]]}}set choiceMenuOptions(t){if(!t){be.setVariable(be.keysSystem.CURRENT_MENU_OPTIONS_MEMORY_KEY,void 0);return}let e=t.map(i=>i instanceof e1?{text:i.text,type:Q2,closeCurrentLabel:i.closeCurrentLabel,oneTime:i.oneTime,onlyHaveNoChoice:i.onlyHaveNoChoice,autoSelect:i.autoSelect}:{...i,label:i.label.id});be.setVariable(be.keysSystem.CURRENT_MENU_OPTIONS_MEMORY_KEY,e),be.setVariable(be.keysSystem.LAST_MENU_OPTIONS_ADDED_IN_STEP_MEMORY_KEY,this.lastStepIndex)}get dialogGlue(){return be.getFlag(be.keysSystem.ADD_NEXT_DIALOG_TEXT_INTO_THE_CURRENT_DIALOG_FLAG_KEY)}set dialogGlue(t){be.setFlag(be.keysSystem.ADD_NEXT_DIALOG_TEXT_INTO_THE_CURRENT_DIALOG_FLAG_KEY,t)}get inputValue(){return be.getVariable(be.keysSystem.CURRENT_INPUT_VALUE_MEMORY_KEY)}set inputValue(t){this.removeInputRequest(),be.setVariable(be.keysSystem.CURRENT_INPUT_VALUE_MEMORY_KEY,t),be.setVariable(be.keysSystem.LAST_INPUT_ADDED_IN_STEP_MEMORY_KEY,this.lastStepIndex)}get isRequiredInput(){var t;return((t=be.getVariable(be.keysSystem.CURRENT_INPUT_INFO_MEMORY_KEY))==null?void 0:t.isRequired)||!1}get inputType(){var t;return(t=be.getVariable(be.keysSystem.CURRENT_INPUT_INFO_MEMORY_KEY))==null?void 0:t.type}requestInput(t,e){t.isRequired=!0,be.setVariable(be.keysSystem.CURRENT_INPUT_INFO_MEMORY_KEY,t),e!==void 0?be.setVariable(be.keysSystem.CURRENT_INPUT_VALUE_MEMORY_KEY,e):be.removeVariable(be.keysSystem.CURRENT_INPUT_VALUE_MEMORY_KEY)}removeInputRequest(){be.removeVariable(be.keysSystem.CURRENT_INPUT_INFO_MEMORY_KEY),be.removeVariable(be.keysSystem.CURRENT_INPUT_VALUE_MEMORY_KEY)}clear(){_e._stepsHistory=[],_e._openedLabels=[],_e._lastStepIndex=0,_e._originalStepData=void 0}exportJson(){return JSON.stringify(this.export())}export(){let t=this.stepsHistory.length-this.stepLimitSaved;return{stepsHistory:this.stepsHistory.map((e,i)=>({diff:t>i?void 0:e.diff,...e})),openedLabels:_e._openedLabels,lastStepIndex:this.lastStepIndex,originalStepData:_e._originalStepData}}async importJson(t){await this.import(JSON.parse(t))}async import(t){this.clear();try{if(t.hasOwnProperty("stepsHistory")?_e._stepsHistory=t.stepsHistory:fe.warn("Could not import stepsHistory data, so will be ignored"),t.hasOwnProperty("openedLabels")?_e._openedLabels=t.openedLabels:fe.warn("Could not import openedLabels data, so will be ignored"),t.hasOwnProperty("lastStepIndex")?_e._lastStepIndex=t.lastStepIndex:fe.warn("Could not import lastStepIndex data, so will be ignored"),t.hasOwnProperty("originalStepData")?_e._originalStepData=t.originalStepData:fe.warn("Could not import originalStepData data, so will be ignored"),this.currentLabel&&this.currentLabel.onLoadingLabel){await this.currentLabel.onLoadingLabel(_e.currentLabelStepIndex||0,this.currentLabel);for(let e=0;e<this.openedLabels.length;e++){let i=this.openedLabels[e],r=ln(i.label);r&&r.onLoadingLabel&&await r.onLoadingLabel(i.currentStepIndex,r)}}}catch(e){fe.error("Error importing data",e)}}};function Mp(t){let e=[];for(let i of t)i.type==="TelephoneFilter"?e.push(new Vt.TelephoneFilter):i.type==="StreamFilter"?e.push(new Vt.StreamFilter):i.type==="StereoFilter"?e.push(new Vt.StereoFilter(i.pan)):i.type==="ReverbFilter"?e.push(new Vt.ReverbFilter(i.seconds,i.decay,i.reverse)):i.type==="MonoFilter"?e.push(new Vt.MonoFilter):i.type==="EqualizerFilter"?e.push(new Vt.EqualizerFilter(i.f32,i.f64,i.f125,i.f250,i.f500,i.f1k,i.f2k,i.f4k,i.f8k,i.f16k)):i.type==="DistortionFilter"?e.push(new Vt.DistortionFilter(i.amount)):fe.error("Unknown sound filter type");return e}function YP(t){if(!t)return;let e=[];for(let i of t)i instanceof Vt.TelephoneFilter?e.push({type:"TelephoneFilter"}):i instanceof Vt.StreamFilter?e.push({type:"StreamFilter"}):i instanceof Vt.StereoFilter?e.push({type:"StereoFilter",pan:i.pan}):i instanceof Vt.ReverbFilter?e.push({type:"ReverbFilter",seconds:i.seconds,decay:i.decay,reverse:i.reverse}):i instanceof Vt.MonoFilter?e.push({type:"MonoFilter"}):i instanceof Vt.EqualizerFilter?e.push({type:"EqualizerFilter",f32:i.f32,f64:i.f64,f125:i.f125,f250:i.f250,f500:i.f500,f1k:i.f1k,f2k:i.f2k,f4k:i.f4k,f8k:i.f8k,f16k:i.f16k}):i instanceof Vt.DistortionFilter?e.push({type:"DistortionFilter",amount:i.amount}):fe.error("Unknown sound filter type");return e}var zc,Ke=(zc=class{constructor(){}},me(zc,"soundAliasesOrder",[]),me(zc,"soundsPlaying",{}),me(zc,"sounds",{}),zc),Rj=class extends GN{constructor(t){super(),this.narration=t}get context(){return ht.context}get filtersAll(){return ht.filtersAll}set filtersAll(t){ht.filtersAll=t.filter(e=>!(e instanceof Vt.Filter))}get supported(){return ht.supported}getOptions(t,e){let i;return typeof t=="string"?i={url:t}:Array.isArray(t)?i={url:t}:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?i={source:t}:i=t,i={...i,...e||{}},i}add(t,e){if(typeof t=="object")throw new Error("[PixiVN] The method add(map: SoundSourceMap, globalOptions?: Options) is deprecated. Use add(alias: string, options: Options | string | ArrayBuffer | AudioBuffer | HTMLAudioElement | Sound): Sound; instead.");this.exists(t)&&this.remove(t),e instanceof co&&(e=e.options);let i;if(e instanceof a1)i=e;else{let r=this.getOptions(e||{});i=a1.from(r)}return i.alias=t,!Ke.soundAliasesOrder.includes(t)&&Ke.soundAliasesOrder.push(t),Ke.sounds[t]=i,ht.add(t,i),i}get useLegacy(){return ht.useLegacy}set useLegacy(t){ht.useLegacy=t}get disableAutoPause(){return ht.disableAutoPause}set disableAutoPause(t){ht.disableAutoPause=t}remove(t){return Ke.soundAliasesOrder=Ke.soundAliasesOrder.filter(e=>e!==t),delete Ke.soundsPlaying[t],delete Ke.sounds[t],ht.remove(t)}get volumeAll(){return ht.volumeAll}set volumeAll(t){ht.volumeAll=t}get speedAll(){return ht.speedAll}set speedAll(t){ht.speedAll=t}togglePauseAll(){return ht.togglePauseAll()}pauseAll(){return ht.pauseAll()}resumeAll(){return ht.resumeAll()}toggleMuteAll(){return ht.toggleMuteAll()}muteAll(){return ht.muteAll()}unmuteAll(){return ht.unmuteAll()}removeAll(){return Ke.soundAliasesOrder=[],Ke.soundsPlaying={},Ke.sounds={},ht.removeAll()}stopAll(){for(let t in Ke.sounds)Ke.sounds[t].stop();return Ke.soundsPlaying={},ht.stopAll()}exists(t,e){return ht.exists(t,e)||t in Ke.sounds}isPlaying(){return ht.isPlaying()}find(t){let e=Ke.sounds[t];return e||(e=ht.find(t),e&&(Ke.sounds[t]=e),e)}play(t,e){if(!this.exists(t))throw new Error("[PixiVN] The alias is not found in the sound library.");return Ke.soundsPlaying[t]={stepIndex:this.narration.lastStepIndex,options:e,paused:!1},ht.play(t,e)}stop(t){return delete Ke.soundsPlaying[t],ht.stop(t)}pause(t){let e=Ke.soundsPlaying[t];if(!e)throw new Error("[PixiVN] The alias is not found in the playInStepIndex.");return Ke.soundsPlaying[t]={...e,paused:!0},ht.pause(t)}resume(t){let e=Ke.soundsPlaying[t];if(!e)throw new Error("[PixiVN] The alias is not found in the playInStepIndex.");return Ke.soundsPlaying[t]={options:e.options,stepIndex:this.narration.lastStepIndex,paused:!1},ht.resume(t)}volume(t,e){return ht.volume(t,e)}speed(t,e){return ht.speed(t,e)}duration(t){return ht.duration(t)}close(){return ht.close()}clear(){this.stopAll()}exportJson(){return JSON.stringify(this.export())}export(){let t={};for(let e in Ke.soundsPlaying){let i=Ke.soundsPlaying[e],r=this.find(e);r&&(t[e]={...i,sound:{options:{...r.options,autoPlay:r.autoPlay,loop:r.loop,preload:r.preload,singleInstance:r.singleInstance,url:r.options.url,volume:r.options.volume},filters:YP(r.media.filters)}})}return{soundsPlaying:t,soundAliasesOrder:Ke.soundAliasesOrder,filters:YP(this.filtersAll)}}removeOldSoundAndExport(){return this.export()}importJson(t){this.import(JSON.parse(t))}import(t,e=this.narration.lastStepIndex){this.clear();try{if(t.hasOwnProperty("soundAliasesOrder"))Ke.soundAliasesOrder=t.soundAliasesOrder;else{fe.error("The data does not have the properties soundAliasesOrder");return}if(t.hasOwnProperty("filters")){let i=t.filters;i&&(this.filtersAll=Mp(i))}if(t.hasOwnProperty("playInStepIndex")){let i=t.playInStepIndex;i&&(Ke.soundsPlaying=i)}if(t.hasOwnProperty("sounds")){let i=t.sounds;for(let r in i){let s=i[r],a=!1,l=this.add(r,{...s.options,autoPlay:!1});if(r in Ke.soundsPlaying){let c=Ke.soundsPlaying[r];(s.options.loop||c.options&&typeof c.options=="object"&&c.options.loop||c.stepIndex===e)&&(a=!0),s.filters&&(l.filters=Mp(s.filters)),a&&l.play()}}}if(t.hasOwnProperty("soundsPlaying")){let i=t.soundsPlaying;for(let r in i){let s=i[r];Ke.soundsPlaying[r]={paused:s.paused,stepIndex:s.stepIndex,options:s.options};let a=i[r].sound,l=!1,c;if(this.exists(r)?(c=this.find(r),a.options.url=c.options.url,a.options.volume=c.options.volume,c.options=a.options,c.autoPlay=!1,c.filters=a.filters?Mp(a.filters):[]):c=this.add(r,{...a.options,autoPlay:!1}),r in Ke.soundsPlaying){let h=Ke.soundsPlaying[r];(a.options.loop||h.options&&typeof h.options=="object"&&h.options.loop||h.stepIndex===e)&&(l=!0),a.filters&&(c.filters=Mp(a.filters)),l&&c.play()}}}else{fe.error("The data does not have the properties soundsPlaying");return}}catch(i){fe.error("Error importing data",i)}}},i6=class{constructor(t){this.narration=t}get storage(){return Zt.storage}get keysSystem(){return fw}set startingStorage(t){let e=[];Object.entries(t).forEach(([i,r])=>{e.push({key:i,value:r})}),Zt.startingStorage=e}setVariable(t,e){return Zt.setVariable(t,e)}getVariable(t){return Zt.getVariable(t)}removeVariable(t){return Zt.removeVariable(t)}setTempVariable(t,e){let i=Zt.tempStorage,r=Zt.tempStorageDeadlines;if(Zt.getTempVariable(t.toLowerCase())!==void 0&&this.removeTempVariable(t.toLowerCase()),e==null){this.removeTempVariable(t);return}else i[t]=e,r.hasOwnProperty(t)||(r[t]=this.narration.openedLabels.length);Zt.tempStorage=i,Zt.tempStorageDeadlines=r}removeTempVariable(t){let e=Zt.tempStorage,i=Zt.tempStorageDeadlines;!e.hasOwnProperty(t)&&e.hasOwnProperty(t.toLowerCase())&&(t=t.toLowerCase()),e.hasOwnProperty(t)&&(delete e[t],delete i[t]),Zt.tempStorage=e,Zt.tempStorageDeadlines=i}setFlag(t,e){return Zt.setFlag(t,e)}getFlag(t){return Zt.getFlag(t)}clear(){this.storage.clear(),Zt.startingStorage.forEach(({key:t,value:e})=>{this.storage.set(t,e)})}exportJson(){return JSON.stringify(this.export())}export(){let t=[];return[...this.storage.keys()].forEach(e=>{t.push({key:e,value:this.storage.get(e)})}),Ft(t)}importJson(t){this.import(JSON.parse(t))}import(t){this.clear();try{t?Array.isArray(t)?t.forEach(e=>{this.storage.set(e.key,e.value)}):Object.entries(t).forEach(([e,i])=>{this.storage.set(e,i)}):fe.warn("No storage data found")}catch(e){fe.error("Error importing data",e)}}},Mj=()=>({path:zN(),storage:be.export(),canvas:ae.export(),sound:Au.removeOldSoundAndExport(),labelIndex:_e.currentLabelStepIndex||0,openedLabels:Ft(_e._openedLabels)}),Bj=async(t,e)=>{_e._originalStepData=t,_e._openedLabels=Ft(t.openedLabels),be.import(Ft(t.storage)),await ae.import(Ft(t.canvas)),Au.import(Ft(t.sound),_e._lastStepIndex-1),e(t.path)},Pj=()=>{ce._tickersToCompleteOnStepEnd.tikersIds.forEach(({id:t})=>{ae.forceCompletionOfTicker(t)}),ce._tickersToCompleteOnStepEnd.stepAlias.forEach(({alias:t,id:e})=>{ae.forceCompletionOfTicker(e,t)}),ce._tickersToCompleteOnStepEnd={tikersIds:[],stepAlias:[]}},Ds=new t6(Mj,Bj,Pj),Au=new Rj(Ds),be=new i6(Ds),ae=new ZN,Dj=5,tu=class extends Su{constructor(t={},e,i){super(t,e,i)}fn(t,e,i,r){e.speed===void 0&&(e.duration===void 0?e.speed=Dj:e.speed=600/(e.duration*60));let{type:s="hide",startOnlyIfHaveTexture:a,speedProgression:l}=e,c=this.speedConvert(e.speed),h=this.getLimit(e);s==="hide"&&h<0&&(h=0),s==="show"&&h>1&&(h=1),i.filter(f=>{let p=ae.find(f);return!(!p||a&&!d_(p))}).forEach(f=>{let p=ae.find(f);if(p&&p instanceof Lt){if(s==="show"&&p.alpha<h?p.alpha+=c*t.deltaTime:s==="hide"&&p.alpha>h&&(p.alpha-=c*t.deltaTime),s==="show"&&p.alpha>=h){this.onEndOfTicker(f,r,e);return}else if(s==="hide"&&p.alpha<=h){this.onEndOfTicker(f,r,e);return}if(c<1e-5&&!(l&&l.type=="linear"&&l.amt!=0)){fe.warn("The speed of the FadeAlphaTicker must be greater than 0."),this.onEndOfTicker(f,r,e,{editAlpha:!1});return}}}),l&&f_(e,"speed",l)}onEndOfTicker(t,e,i,r={editAlpha:!0}){typeof t=="string"&&(t=[t]),t.forEach(s=>{let a=ae.find(s);if(a&&r.editAlpha){let l=this.getLimit(i);a.alpha=l}}),super.onEndOfTicker(t,e,i)}getLimit(t){let{type:e="hide",limit:i=e==="hide"?0:1}=t;return i}speedConvert(t){return t/600}};tu=ny([bd()],tu);yt();var Oj=10;function Fj(t,e){let i=Ft(t.destination);if(i.type==="align"){let r,s;e instanceof Yi&&(r=e.anchor.x,s=e.anchor.y);let a=wi(e.pivot,e.angle),l=wi(e.scale,e.angle);i.x=Jl("width",i.x,no(e),a.x,l.x<0,r),i.y=Jl("height",i.y,ao(e),a.y,l.y<0,s)}return i.type==="percentage"&&(i.x=eu("width",i.x),i.y=eu("height",i.y)),i}var cn=class extends Su{fn(t,e,i,r){e.speed===void 0&&(e.speed=Oj);let{speed:s,startOnlyIfHaveTexture:a,speedProgression:l}=e;i.filter(c=>{let h=ae.find(c);return!(!h||a&&!d_(h))}).forEach(c=>{let h=ae.find(c);if(h&&h instanceof Lt){let f=Fj(e,h),p=f.x-h.x,g=f.y-h.y,y=p>0?1:-1,v=g>0?1:-1,x,A;if(typeof s=="number"){let S=this.speedConvert(s);p===0||g===0?x=A=S:(x=Math.abs(p/(p+g))*S,A=Math.abs(g/(p+g))*S)}else x=this.speedConvert(s.x),A=this.speedConvert(s.y);if(x>0){h.x+=y*x*t.deltaTime;let S=f.x-h.x;(y<0&&S>0||y>0&&S<0)&&(h.x=f.x)}if(A>0){h.y+=v*A*t.deltaTime;let S=f.y-h.y;(v<0&&S>0||v>0&&S<0)&&(h.y=f.y)}if(h.x==f.x&&h.y==f.y){this.onEndOfTicker(c,r,e);return}else if(x<1e-5&&A<1e-5&&!(l&&l.type=="linear"&&l.amt!=0)){fe.warn("The speed of the MoveTicker must be greater than 0."),this.onEndOfTicker(c,r,e,{editPosition:!1});return}}}),l&&f_(e,"speed",l)}onEndOfTicker(t,e,i,r={editPosition:!0}){typeof t=="string"&&(t=[t]),t.forEach(s=>{let a=ae.find(s);if(a){let l=i.destination;r.editPosition&&(a instanceof yi||a instanceof ji?a.positionInfo=l:(a.x=l.x,a.y=l.y))}}),super.onEndOfTicker(t,e,i)}speedConvert(t){return t*(66/400)}};cn=ny([bd()],cn);yt();var Gj=1,t1=class extends Su{constructor(t={},e,i){super(t,e,i)}fn(t,e,i,r){e.speed===void 0&&(e.speed=Gj);let{clockwise:s=!0,speedProgression:a,limit:l}=e,c=this.speedConvert(e.speed);i.filter(h=>{let f=ae.find(h);return!(!f||e.startOnlyIfHaveTexture&&!d_(f))}).forEach(h=>{let f=ae.find(h);if(f&&f instanceof Lt&&(s?f.rotation+=c*t.deltaTime:f.rotation-=c*t.deltaTime,l!==void 0&&(s&&f.angle>=l?(f.angle=l,this.onEndOfTicker(h,r,e)):!s&&f.angle<=l&&(f.angle=l,this.onEndOfTicker(h,r,e))),c<1e-5&&!(a&&a.type=="linear"&&a.amt!=0))){fe.warn("The speed of the RotateTicker must be greater than 0."),this.onEndOfTicker(h,r,e,{editRotation:!1});return}}),a&&f_(e,"speed",a)}onEndOfTicker(t,e,i,r={editRotation:!0}){let{limit:s}=i;typeof t=="string"&&(t=[t]),t.forEach(a=>{let l=ae.find(a);l&&r.editRotation&&s!==void 0&&(l.angle=s)}),super.onEndOfTicker(t,e,i)}speedConvert(t){return t/100}};t1=ny([bd()],t1);yt();var Lj=10,Fh=class extends Su{constructor(t={},e,i){super(t,e,i)}fn(t,e,i,r){e.speed===void 0&&(e.speed=Lj);let{speed:s,type:a="zoom",startOnlyIfHaveTexture:l,speedProgression:c}=e,h,f;typeof s=="number"?(h=this.speedConvert(s),f=this.speedConvert(s)):(h=this.speedConvert(s.x),f=this.speedConvert(s.y));let p=this.getLimit(e);i.filter(g=>{let y=ae.find(g);return!(!y||l&&!d_(y))}).forEach(g=>{let y=ae.find(g);if(y&&y instanceof Lt){if(a==="zoom"&&(y.scale.x<p.x||y.scale.y<p.y)?(y.scale.x+=h*t.deltaTime,y.scale.y+=f*t.deltaTime):a==="unzoom"&&(y.scale.x>p.x||y.scale.y>p.y)&&(y.scale.x-=h*t.deltaTime,y.scale.y-=f*t.deltaTime),a==="zoom"){if(y.scale.x>p.x&&(y.scale.x=p.x),y.scale.y>p.y&&(y.scale.y=p.y),y.scale.x>=p.x&&y.scale.y>=p.y){this.onEndOfTicker(g,r,e);return}}else if(a==="unzoom"&&(y.scale.x<p.x&&(y.scale.x=p.x),y.scale.y<p.y&&(y.scale.y=p.y),y.scale.x<=p.x&&y.scale.y<=p.y)){this.onEndOfTicker(g,r,e);return}if((h<1e-5&&f<1e-5||h<1e-5&&y.scale.y==p.y||f<1e-5&&y.scale.x==p.x)&&!(c&&c.type=="linear"&&c.amt!=0)){fe.warn("The speed of the ZoomTicker must be greater than 0."),this.onEndOfTicker(g,r,e,{editScale:!1});return}}}),c&&f_(e,"speed",c)}speedConvert(t){return t/600}onEndOfTicker(t,e,i,r={editScale:!0}){let{isZoomInOut:s}=i;typeof t=="string"&&(t=[t]),t.forEach(a=>{let l=ae.find(a);if(l){if(r.editScale){let c=this.getLimit(i);l.scale.x=c.x,l.scale.y=c.y}if(s){let{pivot:c,position:h}=s;l.pivot=c.x,l.position=h}}}),super.onEndOfTicker(t,e,i)}getLimit(t){let{type:e="zoom",limit:i}=t,r=e==="zoom"?1/0:0,s=e==="zoom"?1/0:0;return i&&(typeof i=="number"?(r=i,s=i):(r=i.x,s=i.y)),{x:r,y:s}}};Fh=ny([bd()],Fh);async function kj(t,e={},i){let r=ae.find(t);if(!r){fe.error(`The element with the alias ${t} does not exist. So the shake effect can't be applied.`);return}let s={x:r.position.x,y:r.position.y},a=e.speed||20,l=e.speedProgression||void 0,c=e.startOnlyIfHaveTexture||!1,h=e.type||"horizontal",f=e.maximumShockSize||10,p=(e.shocksNumber||10)-1;if(p<2){fe.error("The number of shocks must be at least 3.");return}let g=Math.floor(p/2),y=Math.ceil(p/2),v=[];for(let S=0;S<g;S++){let w={x:s.x,y:s.y},E=f*(S+1)/g;h==="horizontal"?S%2!==0?w.x=s.x+E:w.x=s.x-E:S%2!==0?w.y=s.y+E:w.y=s.y-E,v.push(new cn({destination:w,speed:a,speedProgression:l,startOnlyIfHaveTexture:c},void 0,i))}let x=g%2===0;for(let S=y;S>0;S--){let w={x:s.x,y:s.y},E=f*(S+1)/(y-1);h==="horizontal"?S%2===0&&!x||S%2!==0&&x?w.x=s.x-E:w.x=s.x+E:S%2===0&&!x||S%2!==0&&x?w.y=s.y-E:w.y=s.y+E,v.push(new cn({destination:w,speed:a,speedProgression:l,startOnlyIfHaveTexture:c},void 0,i))}v.push(new cn({destination:s,speed:a,speedProgression:l,startOnlyIfHaveTexture:c,tickerAliasToResume:t},void 0,i));let A=ae.addTickersSequence(t,v);A&&(ae.completeTickerOnStepEnd({id:A,alias:t}),ae.pauseTicker(t,{tickerIdsExcluded:[A]}))}function i1(t,e,i){let r=new ji(i,e);return ae.add(t,r),r}async function Ij(t,e,i){let r=new ji(i,e);return await r.load(),ae.add(t,r),r}yt();function r1(t,e,i){if(!e)if(ge.resolver.hasKey(t))e=t;else throw new Error(`The image ${t} does not exist in the cache.`);let r=new yi(i,e);return ae.add(t,r),r}async function Uj(t){if(!Array.isArray(t))return[t];let e=Array(t.length);for(let i=0;i<t.length;i++)e[i]=Zl(t[i].textureAlias);return Promise.all(e).then(i=>i.map((r,s)=>r?(t[s].texture=r,t[s]):(t[s].load(),t[s])))}async function Nj(t,e,i){if(!e)if(ge.resolver.hasKey(t))e=t;else throw new Error(`The image ${t} does not exist in the cache.`);let r=new yi(i,e);return await r.load(),ae.add(t,r),r}yt();function s1(t,e,i){if(!e)if(ge.resolver.hasKey(t))e=t;else throw new Error(`The video ${t} does not exist in the cache.`);let r=new gn(i,e);return ae.add(t,r),r}async function Hj(t){if(!Array.isArray(t))return[t];let e=Array(t.length);for(let i=0;i<t.length;i++)e[i]=Zl(t[i].textureAlias);return Promise.all(e).then(i=>i.map((r,s)=>r?(t[s].texture=r,t[s]):(t[s].load(),t[s])))}async function Vj(t,e,i){if(!e)if(ge.resolver.hasKey(t))e=t;else throw new Error(`The video ${t} does not exist in the cache.`);let r=new gn(i,e);return await r.load(),ae.add(t,r),r}function Td(t,e){if(typeof e=="string")return Z2(e)?s1(t,e):r1(t,e);if(Array.isArray(e))return i1(t,e);if(typeof e=="object"&&"value"in e&&"options"in e){if(typeof e.value=="string")return Z2(e.value)?s1(t,e.value,e.options):r1(t,e.value,e.options);if(Array.isArray(e.value))return i1(t,e.value,e.options)}return ae.add(t,e),e}async function n1(t,e,i={},r){let{mustBeCompletedBeforeNextStep:s=!0,tickerAliasToResume:a=[]}=i,l=[];e||(e=t),typeof a=="string"&&(a=[a]);let c;if(ae.find(t)&&(c=t+"_temp_disolve",ae.editAlias(t,c)),e=Td(t,e),c&&ae.copyCanvasElementProperty(c,t),c&&ae.transferTickers(c,t,"duplicate"),e.alpha=0,c){let p=Gh(c,i,r);p&&(l.push(...p),ae.pauseTicker(c,{tickerIdsIncluded:p}),a.push(c))}let h=new tu({...i,type:"show",tickerAliasToResume:a,startOnlyIfHaveTexture:!0},void 0,r),f=ae.addTicker(t,h);if(f&&(s&&ae.completeTickerOnStepEnd({id:f}),l.push(f)),(e instanceof yi||e instanceof ji)&&e.haveEmptyTexture&&await e.load(),l.length>0)return l}function Gh(t,e={},i){let{mustBeCompletedBeforeNextStep:r=!0,aliasToRemoveAfter:s=[]}=e;typeof t=="string"&&(t=[t]),typeof s=="string"&&(s=[s]),s.push(...t);let a=new tu({...e,type:"hide",aliasToRemoveAfter:s,startOnlyIfHaveTexture:!0},void 0,i),l=ae.addTicker(t,a);if(l)return r&&ae.completeTickerOnStepEnd({id:l}),[l]}async function jP(t,e,i={},r){let{mustBeCompletedBeforeNextStep:s=!0,aliasToRemoveAfter:a=[]}=i,l=[];if(e||(e=t),typeof a=="string"&&(a=[a]),!ae.find(t))return n1(t,e,i,r);let c=t+"_temp_fade";ae.editAlias(t,c),a.push(c),e=Td(t,e),c&&ae.copyCanvasElementProperty(c,t),c&&ae.transferTickers(c,t,"duplicate"),e.alpha=0;let h=Gh(c,{...i,tickerAliasToResume:t},r);h&&l.push(...h);let f=new tu({...i,type:"show",startOnlyIfHaveTexture:!0,aliasToRemoveAfter:a},void 0,r),p=ae.addTicker(t,f);if(p&&(s&&ae.completeTickerOnStepEnd({id:p}),l.push(p),ae.pauseTicker(t,{tickerIdsIncluded:[p]})),(e instanceof yi||e instanceof ji)&&e.haveEmptyTexture&&await e.load(),l.length>0)return l}function qP(t,e={},i){return Gh(t,e,i)}async function zj(t,e,i={},r){let{direction:s="right",mustBeCompletedBeforeNextStep:a=!0,tickerAliasToResume:l=[],aliasToRemoveAfter:c=[],removeOldComponentWithMoveOut:h}=i,f=[];e||(e=t),typeof l=="string"&&(l=[l]),typeof c=="string"&&(c=[c]);let p;ae.find(t)&&(p=t+"_temp_movein",ae.editAlias(t,p)),e=Td(t,e),p&&ae.copyCanvasElementProperty(p,t),p&&ae.transferTickers(p,t,"move");let g;e instanceof yi||e instanceof ji?g=e.positionInfo:g={x:e.x,y:e.y,type:"pixel"};let y;switch(p&&(h?(y=_w(p,i,r),y&&(f.push(...y),l.push(p))):c.push(p)),(e instanceof yi||e instanceof ji)&&e.haveEmptyTexture&&await e.load(),p&&ae.pauseTicker(p,{tickerIdsIncluded:y}),s){case"up":e.y=ae.canvasHeight+e.height;break;case"down":e.y=-e.height;break;case"left":e.x=ae.canvasWidth+e.width;break;case"right":e.x=-e.width;break}l.push(t);let v=new cn({...i,tickerAliasToResume:l,aliasToRemoveAfter:c,destination:g,startOnlyIfHaveTexture:!0},void 0,r),x=ae.addTicker(t,v);if(x&&(ae.pauseTicker(t,{tickerIdsExcluded:[x]}),a&&ae.completeTickerOnStepEnd({id:x}),f.push(x)),f.length>0)return f}function _w(t,e={},i){let{direction:r="right",mustBeCompletedBeforeNextStep:s=!0,aliasToRemoveAfter:a=[]}=e;typeof a=="string"&&(a=[a]),a.push(t);let l=ae.find(t);if(!l){fe.warn("The canvas component is not found.");return}let c={x:l.x,y:l.y};switch(r){case"up":c.y=-l.height;break;case"down":c.y=ae.canvasHeight+l.height;break;case"left":c.x=-l.width;break;case"right":c.x=ae.canvasWidth+l.width;break}let h=new cn({...e,destination:c,startOnlyIfHaveTexture:!0,aliasToRemoveAfter:a},void 0,i),f=ae.addTicker(t,h);if(f)return ae.pauseTicker(t,{tickerIdsExcluded:[f]}),s&&ae.completeTickerOnStepEnd({id:f}),[f]}async function Xj(t,e,i={},r){let{direction:s="right",mustBeCompletedBeforeNextStep:a=!0,tickerAliasToResume:l=[],aliasToRemoveAfter:c=[]}=i,h=[];e||(e=t),typeof l=="string"&&(l=[l]),typeof c=="string"&&(c=[c]);let f,p=ae.find(t);p&&(f=t+"_temp_zoom",ae.editAlias(t,f)),e=Td(t,e),f&&ae.copyCanvasElementProperty(f,t),f&&ae.transferTickers(f,t,"move"),s=="up"?(e.pivot.y=ae.canvasHeight-e.y,e.pivot.x=ae.canvasWidth/2-e.x,e.y=ae.canvasHeight,e.x=ae.canvasWidth/2):s=="down"?(e.pivot.y=0-e.y,e.pivot.x=ae.canvasWidth/2-e.x,e.y=0,e.x=ae.canvasWidth/2):s=="left"?(e.pivot.x=ae.canvasWidth-e.x,e.pivot.y=ae.canvasHeight/2-e.y,e.x=ae.canvasWidth,e.y=ae.canvasHeight/2):s=="right"&&(e.pivot.x=0-e.x,e.pivot.y=ae.canvasHeight/2-e.y,e.x=0,e.y=ae.canvasHeight/2),e.pivot=qN(e.pivot,e.angle),e.scale.set(0);let g=p?{pivot:{x:p.pivot.x,y:p.pivot.y},position:{x:p.x,y:p.y}}:void 0;if(f){if(i.removeOldComponentWithZoomOut){let x=r6(f,i,r);x&&(h.push(...x),l.push(f))}else c.push(f);ae.pauseTicker(f)}l.push(t);let y=new Fh({...i,tickerAliasToResume:l,aliasToRemoveAfter:c,startOnlyIfHaveTexture:!0,type:"zoom",limit:1,isZoomInOut:g},void 0,r),v=ae.addTicker(t,y);if(v&&(ae.pauseTicker(t,{tickerIdsExcluded:[v]}),a&&ae.completeTickerOnStepEnd({id:v}),h.push(v)),(e instanceof yi||e instanceof ji)&&e.haveEmptyTexture&&await e.load(),h.length>0)return h}function r6(t,e={},i){let{direction:r="right",mustBeCompletedBeforeNextStep:s=!0,aliasToRemoveAfter:a=[]}=e;typeof a=="string"&&(a=[a]),a.push(t);let l=ae.find(t);if(!l){fe.warn("The canvas component is not found.");return}r=="up"?(l.pivot.y=ae.canvasHeight-l.y,l.pivot.x=ae.canvasWidth/2-l.x,l.y=ae.canvasHeight,l.x=ae.canvasWidth/2):r=="down"?(l.pivot.y=0-l.y,l.pivot.x=ae.canvasWidth/2-l.x,l.y=0,l.x=ae.canvasWidth/2):r=="left"?(l.pivot.x=ae.canvasWidth-l.x,l.pivot.y=ae.canvasHeight/2-l.y,l.x=ae.canvasWidth,l.y=ae.canvasHeight/2):r=="right"&&(l.pivot.x=0-l.x,l.pivot.y=ae.canvasHeight/2-l.y,l.x=0,l.y=ae.canvasHeight/2),l.pivot=qN(l.pivot,l.angle),l.scale.set(1);let c=new Fh({...e,startOnlyIfHaveTexture:!0,type:"unzoom",limit:0,aliasToRemoveAfter:a},void 0,i),h=ae.addTicker(t,c);if(h)return ae.pauseTicker(t,{tickerIdsExcluded:[h]}),s&&ae.completeTickerOnStepEnd({id:h}),[h]}async function Yj(t,e,i={},r){let{direction:s="right",mustBeCompletedBeforeNextStep:a=!0,tickerAliasToResume:l=[]}=i,c=[];e||(e=t),typeof l=="string"&&(l=[l]);let h;ae.find(t)&&(h=t+"_temp_push",ae.editAlias(t,h)),e=Td(t,e),h&&ae.copyCanvasElementProperty(h,t),h&&ae.transferTickers(h,t,"move");let f;if((e instanceof yi||e instanceof ji)&&e.haveEmptyTexture?f=e.positionInfo:f={x:e.x,y:e.y,type:"pixel"},s=="up"?e.y=-ae.canvasHeight+e.y:s=="down"?e.y=ae.canvasHeight+e.y:s=="left"?e.x=-ae.canvasWidth+e.x:s=="right"&&(e.x=ae.canvasWidth+e.x),h){let y=s6(h,{...i,direction:s=="up"?"down":s=="down"?"up":s=="left"?"right":"left"},r);y&&c.push(...y)}l.push(t);let p=new cn({...i,tickerAliasToResume:l,startOnlyIfHaveTexture:!0,destination:f},void 0,r),g=ae.addTicker(t,p);if(g&&(ae.pauseTicker(t,{tickerIdsExcluded:[g]}),a&&ae.completeTickerOnStepEnd({id:g}),c.push(g)),(e instanceof yi||e instanceof ji)&&e.haveEmptyTexture&&await e.load(),c.length>0)return c}function s6(t,e={direction:"right"},i){return _w(t,e,i)}function n6(){be.clear(),ae.clear(),Au.clear(),Ds.clear()}function a6(){return{pixivn_version:lj,stepData:Ds.export(),storageData:be.export(),canvasData:ae.export(),soundData:Au.export(),path:zN()}}function jj(){let t=a6();return JSON.stringify(t)}async function o6(t,e){await Ds.import(t.stepData),be.import(t.storageData),await ae.import(t.canvasData),Au.import(t.soundData),e(t.path)}async function qj(t,e){await o6(Wj(t),e)}function Wj(t){return JSON.parse(t)}var yi=class l6 extends Oh{constructor(i,r){i=Dh(i);let s,a;i&&"align"in i&&(i==null?void 0:i.align)!==void 0&&(s=i.align,delete i.align),i&&"percentagePosition"in i&&(i==null?void 0:i.percentagePosition)!==void 0&&(a=i.percentagePosition,delete i.percentagePosition);super(i);me(this,"pixivnId",LN);me(this,"_loadIsStarted",!1);me(this,"_align");me(this,"_percentagePosition");r&&(this.textureAlias=r),s&&(this.align=s),a&&(this.percentagePosition=a)}get memory(){return{...gw(this),pixivnId:this.pixivnId,align:this._align,percentagePosition:this._percentagePosition,loadIsStarted:this._loadIsStarted}}set memory(i){}async setMemory(i){this.memory=i,await vw(this,i),this.reloadPosition()}static from(i,r){let s=Yi.from(i,r),a=new l6;return a.texture=s.texture,a}get loadIsStarted(){return this._loadIsStarted}async load(){return this._loadIsStarted=!0,Zl(this.textureAlias).then(i=>{this._loadIsStarted=!1,i&&(this.texture=i)}).catch(i=>{this._loadIsStarted=!1,fe.error("Error into ImageSprite.load()",i)})}set texture(i){super.texture=i,this.reloadPosition()}get texture(){return super.texture}get haveEmptyTexture(){return this.texture._source.label==="EMPTY"}set align(i){this._percentagePosition=void 0,this._align===void 0&&(this._align={}),typeof i=="number"?(this._align.x=i,this._align.y=i):(i.x!==void 0&&(this._align.x=i.x),i.y!==void 0&&(this._align.y=i.y)),this.reloadPosition()}get align(){let i=wi(this.pivot,this.angle),r=wi(this.scale,this.angle);return{x:na("width",this.x,no(this),i.x,r.x<0,this.anchor.x),y:na("height",this.y,ao(this),i.y,r.y<0,this.anchor.y)}}set xAlign(i){this._percentagePosition=void 0,this._align===void 0&&(this._align={}),this._align.x=i,this.reloadPosition()}get xAlign(){let i=wi(this.pivot,this.angle),r=wi(this.scale,this.angle);return na("width",this.x,no(this),i.x,r.x<0,this.anchor.x)}set yAlign(i){this._percentagePosition=void 0,this._align===void 0&&(this._align={}),this._align.y=i,this.reloadPosition()}get yAlign(){let i=wi(this.pivot,this.angle),r=wi(this.scale,this.angle);return na("height",this.y,ao(this),i.y,r.y<0,this.anchor.y)}set percentagePosition(i){this._align=void 0,this._percentagePosition===void 0&&(this._percentagePosition={}),typeof i=="number"?(this._percentagePosition.x=i,this._percentagePosition.y=i):(i.x!==void 0&&(this._percentagePosition.x=i.x),i.y!==void 0&&(this._percentagePosition.y=i.y)),this.reloadPosition()}get percentagePosition(){return{x:aa("width",this.x),y:aa("height",this.y)}}get xPercentagePosition(){return aa("width",this.x)}set xPercentagePosition(i){this._align=void 0,this._percentagePosition===void 0&&(this._percentagePosition={}),this._percentagePosition.x=i,this.reloadPosition()}get yPercentagePosition(){return aa("height",this.y)}set yPercentagePosition(i){this._align=void 0,this._percentagePosition===void 0&&(this._percentagePosition={}),this._percentagePosition.y=i,this.reloadPosition()}get positionType(){return this._align?"align":this._percentagePosition?"percentage":"pixel"}get positionInfo(){return this._align?{x:this._align.x||0,y:this._align.y||0,type:"align"}:this._percentagePosition?{x:this._percentagePosition.x||0,y:this._percentagePosition.y||0,type:"percentage"}:{x:this.x,y:this.y,type:"pixel"}}set positionInfo(i){i.type==="align"?this.align={x:i.x,y:i.y}:i.type==="percentage"?this.percentagePosition={x:i.x,y:i.y}:this.position.set(i.x,i.y)}reloadPosition(){if(this._align){let i=wi(this.pivot,this.angle),r=wi(this.scale,this.angle);this._align.x!==void 0&&(super.x=Jl("width",this._align.x,no(this),i.x,r.x<0,this.anchor.x)),this._align.y!==void 0&&(super.y=Jl("height",this._align.y,ao(this),i.y,r.y<0,this.anchor.y))}else this._percentagePosition&&(this._percentagePosition.x!==void 0&&(super.x=eu("width",this._percentagePosition.x)),this._percentagePosition.y!==void 0&&(super.y=eu("height",this._percentagePosition.y)))}get position(){return super.position}set position(i){this._align=void 0,this._percentagePosition=void 0,super.position=i}get x(){return super.x}set x(i){this._align=void 0,this._percentagePosition=void 0,super.x=i}get y(){return super.y}set y(i){this._align=void 0,this._percentagePosition=void 0,super.y=i}};Bo(yi,LN);async function vw(t,e,i){let r=(i==null?void 0:i.ignoreTexture)||!1;return e=Dh(e),await yw(t,e,{half:async()=>{"align"in e&&e.align!==void 0&&(t.align=e.align),"percentagePosition"in e&&e.percentagePosition!==void 0&&(t.percentagePosition=e.percentagePosition),r||"imageLink"in e&&e.imageLink!==void 0&&(t.textureAlias=e.imageLink),"loadIsStarted"in e&&e.loadIsStarted&&await t.load()},ignoreTexture:i==null?void 0:i.ignoreTexture})}var gn=class u6 extends yi{constructor(i,r){let s,a,l;i&&"loop"in i&&(i==null?void 0:i.loop)!==void 0&&(s=i.loop,delete i.loop),i&&"paused"in i&&(i==null?void 0:i.paused)!==void 0&&(a=i.paused,delete i.paused),i&&"currentTime"in i&&(i==null?void 0:i.currentTime)!==void 0&&(l=i.currentTime,delete i.currentTime);super(i,r);me(this,"pixivnId",kN);me(this,"_looop",!1);me(this,"_paused",!1);me(this,"_currentTime",0);s&&(this.loop=s),a&&(this.paused=a),l&&(this.currentTime=l)}get memory(){return{...super.memory,pixivnId:this.pixivnId,loop:this.loop,paused:this._paused,currentTime:this.currentTime}}set memory(i){}async setMemory(i){return this.memory=i,await c6(this,i)}static from(i,r){let s=Yi.from(i,r),a=new u6;return a.texture=s.texture,a}async load(){await super.load(),this.loop=this._looop,this.currentTime=this._currentTime,this.paused=this._paused}get loop(){var i,r,s;return((s=(r=(i=this.texture)==null?void 0:i.source)==null?void 0:r.resource)==null?void 0:s.loop)||!1}set loop(i){var r,s;this._looop=i,(s=(r=this.texture)==null?void 0:r.source)!=null&&s.resource&&(this.texture.source.resource.loop=i)}get paused(){var i,r,s;return((s=(r=(i=this.texture)==null?void 0:i.source)==null?void 0:r.resource)==null?void 0:s.paused)||!1}set paused(i){i?this.pause():this.play()}pause(){var i,r;this._paused=!0,(r=(i=this.texture)==null?void 0:i.source)!=null&&r.resource&&this.texture.source.resource.pause()}play(){var i,r;this._paused=!1,(r=(i=this.texture)==null?void 0:i.source)!=null&&r.resource&&this.texture.source.resource.play()}get currentTime(){var i,r,s;return((s=(r=(i=this.texture)==null?void 0:i.source)==null?void 0:r.resource)==null?void 0:s.currentTime)||0}set currentTime(i){var s,a;let r=this.duration;r&&i>=r&&(i=0),this._currentTime=i,(a=(s=this.texture)==null?void 0:s.source)!=null&&a.resource&&(this.texture.source.resource.currentTime=i)}restart(){this.currentTime=0}get duration(){var i,r;if((r=(i=this.texture)==null?void 0:i.source)!=null&&r.resource)return this.texture.source.resource.duration||0}};Bo(gn,kN);async function c6(t,e,i){await vw(t,e,{ignoreTexture:i==null?void 0:i.ignoreTexture}),"loop"in e&&e.loop!==void 0&&(t.loop=e.loop),"currentTime"in e&&e.currentTime!==void 0&&(t.currentTime=e.currentTime),"paused"in e&&e.paused!==void 0&&(t.paused=e.paused)}yt();var WP=class extends Lt{constructor(){super(...arguments);me(this,"pixivnId","canvas_element_id_not_set")}get memory(){throw new Error("[PixiVN] The method CanvasBaseItem.memory must be overridden")}set memory(e){throw new Error("[PixiVN] The method CanvasBaseItems.memory must be overridden")}setMemory(e){throw new Error("[PixiVN] The method CanvasBaseItems.memory must be overridden")}},Kj=class{constructor(){me(this,"id","event_id_not_set");this.id=this.constructor.prototype.id}fn(t,e){throw new Error("[PixiVN] The method CanvasEvent.fn() must be overridden")}},h6=class{constructor(t,e){me(this,"_id");me(this,"categoryId");this.categoryId=t,this._id=e}get id(){return this._id}setStorageProperty(t,e){let i=Zt.getVariable(this.categoryId);i||(i={}),i.hasOwnProperty(this.id)||(i[this.id]={}),e==null?i[this.id].hasOwnProperty(t)&&delete i[this.id][t]:i[this.id]={...i[this.id],[t]:e},Object.keys(i[this.id]).length===0&&delete i[this.id],Zt.setVariable(this.categoryId,i)}getStorageProperty(t,e=this.id){let i=Zt.getVariable(this.categoryId);if(i&&i.hasOwnProperty(e)&&i[e].hasOwnProperty(t))return i[e][t]}},$j="@",bw=class extends h6{constructor(e,i=""){super(fw.CHARACTER_CATEGORY_KEY,e+(i?$j+i:""));me(this,"sourceId");this.sourceId=e}getStorageProperty(e){let i=super.getStorageProperty(e);return i===void 0&&(i=super.getStorageProperty(e,this.sourceId)),i}},Zj=class extends bw{constructor(e,i){super(typeof e=="string"?e:e.id,typeof e=="string"?"":e.emotion);me(this,"defaultName");me(this,"defaultSurname");me(this,"defaultAge");me(this,"_icon");me(this,"_color");this.defaultName=i.name,this.defaultSurname=i.surname,this.defaultAge=i.age,this._icon=i.icon,this._color=i.color}get name(){return this.getStorageProperty("name")||this.defaultName||this.id}set name(e){this.setStorageProperty("name",e)}get surname(){return this.getStorageProperty("surname")||this.defaultSurname}set surname(e){this.setStorageProperty("surname",e)}get age(){return this.getStorageProperty("age")||this.defaultAge}set age(e){this.setStorageProperty("age",e)}get icon(){return this._icon}get color(){return this._color}},Ml=class{constructor(t,e,i={}){me(this,"text","");me(this,"character");me(this,"oltherParams",{});typeof t=="string"?(this.text=t,typeof e=="string"?this.character=e:this.character=e==null?void 0:e.id,this.oltherParams=i):(this.text=t.text,t.character&&(this.character=t.character),this.oltherParams=t.oltherParams||{})}export(){return{text:this.text,character:this.character,oltherParams:this.oltherParams}}},a1=class d6 extends co{constructor(){super(...arguments);me(this,"alias")}pause(){if(!this.alias)throw new Error("[PixiVN] The alias is not defined.");let i=Ke.soundsPlaying[this.alias];if(!i)throw new Error("[PixiVN] The alias is not found in the playInStepIndex.");return Ke.soundsPlaying[this.alias]={...i,paused:!0},super.pause()}resume(){if(!this.alias)throw new Error("[PixiVN] The alias is not defined.");let i=Ke.soundsPlaying[this.alias];if(!i)throw new Error("[PixiVN] The alias is not found in the playInStepIndex.");return Ke.soundsPlaying[this.alias]={options:i.options,stepIndex:Ds.lastStepIndex,paused:!1},super.resume()}destroy(){return this.alias&&delete Ke.soundsPlaying[this.alias],super.destroy()}stop(){if(!this.alias)throw new Error("[PixiVN] The alias is not defined.");return delete Ke.soundsPlaying[this.alias],super.stop()}play(i){if(typeof i=="string"&&(this.alias=i),!this.alias)throw new Error("[PixiVN] The alias is not defined.");return Ke.soundsPlaying[this.alias]={stepIndex:Ds.lastStepIndex,options:i,paused:!1},super.play(i)}static from(i){let r=co.from(i);return new d6(r.media,r.options)}};yt();({...MN,...UN,...NN,...IN,...VN});var H0={exports:{}},Nc={},V0={exports:{}},z0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KP;function Qj(){return KP||(KP=1,function(t){function e(W,te){var P=W.length;W.push(te);e:for(;0<P;){var D=P-1>>>1,O=W[D];if(0<s(O,te))W[D]=te,W[P]=O,P=D;else break e}}function i(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var te=W[0],P=W.pop();if(P!==te){W[0]=P;e:for(var D=0,O=W.length,Q=O>>>1;D<Q;){var X=2*(D+1)-1,re=W[X],ie=X+1,he=W[ie];if(0>s(re,P))ie<O&&0>s(he,re)?(W[D]=he,W[ie]=P,D=ie):(W[D]=re,W[X]=P,D=X);else if(ie<O&&0>s(he,P))W[D]=he,W[ie]=P,D=ie;else break e}}return te}function s(W,te){var P=W.sortIndex-te.sortIndex;return P!==0?P:W.id-te.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var h=[],f=[],p=1,g=null,y=3,v=!1,x=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function B(W){for(var te=i(f);te!==null;){if(te.callback===null)r(f);else if(te.startTime<=W)r(f),te.sortIndex=te.expirationTime,e(h,te);else break;te=i(f)}}function G(W){if(A=!1,B(W),!x)if(i(h)!==null)x=!0,pe();else{var te=i(f);te!==null&&Ae(G,te.startTime-W)}}var U=!1,H=-1,j=5,Z=-1;function q(){return!(t.unstable_now()-Z<j)}function L(){if(U){var W=t.unstable_now();Z=W;var te=!0;try{e:{x=!1,A&&(A=!1,w(H),H=-1),v=!0;var P=y;try{t:{for(B(W),g=i(h);g!==null&&!(g.expirationTime>W&&q());){var D=g.callback;if(typeof D=="function"){g.callback=null,y=g.priorityLevel;var O=D(g.expirationTime<=W);if(W=t.unstable_now(),typeof O=="function"){g.callback=O,B(W),te=!0;break t}g===i(h)&&r(h),B(W)}else r(h);g=i(h)}if(g!==null)te=!0;else{var Q=i(f);Q!==null&&Ae(G,Q.startTime-W),te=!1}}break e}finally{g=null,y=P,v=!1}te=void 0}}finally{te?N():U=!1}}}var N;if(typeof E=="function")N=function(){E(L)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,le=se.port2;se.port1.onmessage=L,N=function(){le.postMessage(null)}}else N=function(){S(L,0)};function pe(){U||(U=!0,N())}function Ae(W,te){H=S(function(){W(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,pe())},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return i(h)},t.unstable_next=function(W){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var P=y;y=te;try{return W()}finally{y=P}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,te){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var P=y;y=W;try{return te()}finally{y=P}},t.unstable_scheduleCallback=function(W,te,P){var D=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?D+P:D):P=D,W){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=P+O,W={id:p++,callback:te,priorityLevel:W,startTime:P,expirationTime:O,sortIndex:-1},P>D?(W.sortIndex=P,e(f,W),i(h)===null&&W===i(f)&&(A?(w(H),H=-1):A=!0,Ae(G,P-D))):(W.sortIndex=O,e(h,W),x||v||(x=!0,pe())),W},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(W){var te=y;return function(){var P=y;y=te;try{return W.apply(this,arguments)}finally{y=P}}}}(z0)),z0}var $P;function Jj(){return $P||($P=1,V0.exports=Qj()),V0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZP;function eq(){if(ZP)return Nc;ZP=1;var t=Jj(),e=nz(),i=az();function r(n){var o="https://react.dev/errors/"+n;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var a=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),G=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function H(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var j=Symbol.for("react.client.reference");function Z(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===j?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case h:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case A:return"Suspense";case S:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case v:return(n.displayName||"Context")+".Provider";case y:return(n._context.displayName||"Context")+".Consumer";case x:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case w:return o=n.displayName||null,o!==null?o:Z(n.type)||"Memo";case E:o=n._payload,n=n._init;try{return Z(n(o))}catch{}}return null}var q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=Object.assign,N,se;function le(n){if(N===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);N=o&&o[1]||"",se=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+N+n+se}var pe=!1;function Ae(n,o){if(!n||pe)return"";pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ne){var J=ne}Reflect.construct(n,[],de)}else{try{de.call()}catch(ne){J=ne}n.call(de.prototype)}}else{try{throw Error()}catch(ne){J=ne}(de=n())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ne){if(ne&&J&&typeof ne.stack=="string")return[ne.stack,J.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=d.DetermineComponentFrameRoot(),T=_[0],R=_[1];if(T&&R){var F=T.split(`
`),z=R.split(`
`);for(m=d=0;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;for(;m<z.length&&!z[m].includes("DetermineComponentFrameRoot");)m++;if(d===F.length||m===z.length)for(d=F.length-1,m=z.length-1;1<=d&&0<=m&&F[d]!==z[m];)m--;for(;1<=d&&0<=m;d--,m--)if(F[d]!==z[m]){if(d!==1||m!==1)do if(d--,m--,0>m||F[d]!==z[m]){var oe=`
`+F[d].replace(" at new "," at ");return n.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",n.displayName)),oe}while(1<=d&&0<=m);break}}}finally{pe=!1,Error.prepareStackTrace=u}return(u=n?n.displayName||n.name:"")?le(u):""}function W(n){switch(n.tag){case 26:case 27:case 5:return le(n.type);case 16:return le("Lazy");case 13:return le("Suspense");case 19:return le("SuspenseList");case 0:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function te(n){try{var o="";do o+=W(n),n=n.return;while(n);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function P(n){var o=n,u=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(u=o.return),n=o.return;while(n)}return o.tag===3?u:null}function D(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function O(n){if(P(n)!==n)throw Error(r(188))}function Q(n){var o=n.alternate;if(!o){if(o=P(n),o===null)throw Error(r(188));return o!==n?null:n}for(var u=n,d=o;;){var m=u.return;if(m===null)break;var _=m.alternate;if(_===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===u)return O(m),n;if(_===d)return O(m),o;_=_.sibling}throw Error(r(188))}if(u.return!==d.return)u=m,d=_;else{for(var T=!1,R=m.child;R;){if(R===u){T=!0,u=m,d=_;break}if(R===d){T=!0,d=m,u=_;break}R=R.sibling}if(!T){for(R=_.child;R;){if(R===u){T=!0,u=_,d=m;break}if(R===d){T=!0,d=_,u=m;break}R=R.sibling}if(!T)throw Error(r(189))}}if(u.alternate!==d)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?n:o}function X(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n;for(n=n.child;n!==null;){if(o=X(n),o!==null)return o;n=n.sibling}return null}var re=Array.isArray,ie=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},xe=[],we=-1;function Ye(n){return{current:n}}function Ee(n){0>we||(n.current=xe[we],xe[we]=null,we--)}function Te(n,o){we++,xe[we]=n.current,n.current=o}var it=Ye(null),Ge=Ye(null),at=Ye(null),Ot=Ye(null);function ft(n,o){switch(Te(at,o),Te(Ge,n),Te(it,null),n=o.nodeType,n){case 9:case 11:o=(o=o.documentElement)&&(o=o.namespaceURI)?tM(o):0;break;default:if(n=n===8?o.parentNode:o,o=n.tagName,n=n.namespaceURI)n=tM(n),o=iM(n,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Ee(it),Te(it,o)}function vi(){Ee(it),Ee(Ge),Ee(at)}function Fe(n){n.memoizedState!==null&&Te(Ot,n);var o=it.current,u=iM(o,n.type);o!==u&&(Te(Ge,n),Te(it,u))}function qe(n){Ge.current===n&&(Ee(it),Ee(Ge)),Ot.current===n&&(Ee(Ot),bc._currentValue=he)}var An=Object.prototype.hasOwnProperty,Sr=t.unstable_scheduleCallback,En=t.unstable_cancelCallback,_t=t.unstable_shouldYield,di=t.unstable_requestPaint,bi=t.unstable_now,Ru=t.unstable_getCurrentPriorityLevel,Do=t.unstable_ImmediatePriority,Oo=t.unstable_UserBlockingPriority,Is=t.unstable_NormalPriority,Cd=t.unstable_LowPriority,Mu=t.unstable_IdlePriority,Bu=t.log,Fo=t.unstable_setDisableYieldValue,Us=null,ki=null;function Rd(n){if(ki&&typeof ki.onCommitFiberRoot=="function")try{ki.onCommitFiberRoot(Us,n,void 0,(n.current.flags&128)===128)}catch{}}function Zr(n){if(typeof Bu=="function"&&Fo(n),ki&&typeof ki.setStrictMode=="function")try{ki.setStrictMode(Us,n)}catch{}}var Ri=Math.clz32?Math.clz32:Pu,wn=Math.log,Md=Math.LN2;function Pu(n){return n>>>=0,n===0?32:31-(wn(n)/Md|0)|0}var va=128,Go=4194304;function C(n){var o=n&42;if(o!==0)return o;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function M(n,o){var u=n.pendingLanes;if(u===0)return 0;var d=0,m=n.suspendedLanes,_=n.pingedLanes,T=n.warmLanes;n=n.finishedLanes!==0;var R=u&134217727;return R!==0?(u=R&~m,u!==0?d=C(u):(_&=R,_!==0?d=C(_):n||(T=R&~T,T!==0&&(d=C(T))))):(R=u&~m,R!==0?d=C(R):_!==0?d=C(_):n||(T=u&~T,T!==0&&(d=C(T)))),d===0?0:o!==0&&o!==d&&(o&m)===0&&(m=d&-d,T=o&-o,m>=T||m===32&&(T&4194176)!==0)?o:d}function k(n,o){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&o)===0}function ee(n,o){switch(n){case 1:case 2:case 4:case 8:return o+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ye(){var n=va;return va<<=1,(va&4194176)===0&&(va=128),n}function Ne(){var n=Go;return Go<<=1,(Go&62914560)===0&&(Go=4194304),n}function xt(n){for(var o=[],u=0;31>u;u++)o.push(n);return o}function vt(n,o){n.pendingLanes|=o,o!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ar(n,o,u,d,m,_){var T=n.pendingLanes;n.pendingLanes=u,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=u,n.entangledLanes&=u,n.errorRecoveryDisabledLanes&=u,n.shellSuspendCounter=0;var R=n.entanglements,F=n.expirationTimes,z=n.hiddenUpdates;for(u=T&~u;0<u;){var oe=31-Ri(u),de=1<<oe;R[oe]=0,F[oe]=-1;var J=z[oe];if(J!==null)for(z[oe]=null,oe=0;oe<J.length;oe++){var ne=J[oe];ne!==null&&(ne.lane&=-536870913)}u&=~de}d!==0&&Qr(n,d,0),_!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=_&~(T&~o))}function Qr(n,o,u){n.pendingLanes|=o,n.suspendedLanes&=~o;var d=31-Ri(o);n.entangledLanes|=o,n.entanglements[d]=n.entanglements[d]|1073741824|u&4194218}function Er(n,o){var u=n.entangledLanes|=o;for(n=n.entanglements;u;){var d=31-Ri(u),m=1<<d;m&o|n[d]&o&&(n[d]|=o),u&=~m}}function ba(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ms(){var n=ie.p;return n!==0?n:(n=window.event,n===void 0?32:bM(n.type))}function Ns(n,o){var u=ie.p;try{return ie.p=n,o()}finally{ie.p=u}}var Ii=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Ii,qt="__reactProps$"+Ii,wr="__reactContainer$"+Ii,Lo="__reactEvents$"+Ii,Cn="__reactListeners$"+Ii,Bd="__reactHandles$"+Ii,Jw="__reactResources$"+Ii,Du="__reactMarker$"+Ii;function b_(n){delete n[Rt],delete n[qt],delete n[Lo],delete n[Cn],delete n[Bd]}function xa(n){var o=n[Rt];if(o)return o;for(var u=n.parentNode;u;){if(o=u[wr]||u[Rt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(n=nM(n);n!==null;){if(u=n[Rt])return u;n=nM(n)}return o}n=u,u=n.parentNode}return null}function ko(n){if(n=n[Rt]||n[wr]){var o=n.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return n}return null}function Ou(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n.stateNode;throw Error(r(33))}function Io(n){var o=n[Jw];return o||(o=n[Jw]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function xi(n){n[Du]=!0}var e3=new Set,t3={};function Ta(n,o){Uo(n,o),Uo(n+"Capture",o)}function Uo(n,o){for(t3[n]=o,n=0;n<o.length;n++)e3.add(o[n])}var Hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$H=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),i3={},r3={};function ZH(n){return An.call(r3,n)?!0:An.call(i3,n)?!1:$H.test(n)?r3[n]=!0:(i3[n]=!0,!1)}function Pd(n,o,u){if(ZH(o))if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":n.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(o);return}}n.setAttribute(o,""+u)}}function Dd(n,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttribute(o,""+u)}}function Vs(n,o,u,d){if(d===null)n.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(u);return}n.setAttributeNS(o,u,""+d)}}function Cr(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function s3(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function QH(n){var o=s3(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o),d=""+n[o];if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,_=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return m.call(this)},set:function(T){d=""+T,_.call(this,T)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function Od(n){n._valueTracker||(n._valueTracker=QH(n))}function n3(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return n&&(d=s3(n)?n.checked?"true":"false":n.value),n=d,n!==u?(o.setValue(n),!0):!1}function Fd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var JH=/[\n"\\]/g;function Rr(n){return n.replace(JH,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function x_(n,o,u,d,m,_,T,R){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),o!=null?T==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+Cr(o)):n.value!==""+Cr(o)&&(n.value=""+Cr(o)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),o!=null?T_(n,T,Cr(o)):u!=null?T_(n,T,Cr(u)):d!=null&&n.removeAttribute("value"),m==null&&_!=null&&(n.defaultChecked=!!_),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?n.name=""+Cr(R):n.removeAttribute("name")}function a3(n,o,u,d,m,_,T,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.type=_),o!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||o!=null))return;u=u!=null?""+Cr(u):"",o=o!=null?""+Cr(o):u,R||o===n.value||(n.value=o),n.defaultValue=o}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=R?n.checked:!!d,n.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T)}function T_(n,o,u){o==="number"&&Fd(n.ownerDocument)===n||n.defaultValue===""+u||(n.defaultValue=""+u)}function No(n,o,u,d){if(n=n.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<n.length;u++)m=o.hasOwnProperty("$"+n[u].value),n[u].selected!==m&&(n[u].selected=m),m&&d&&(n[u].defaultSelected=!0)}else{for(u=""+Cr(u),o=null,m=0;m<n.length;m++){if(n[m].value===u){n[m].selected=!0,d&&(n[m].defaultSelected=!0);return}o!==null||n[m].disabled||(o=n[m])}o!==null&&(o.selected=!0)}}function o3(n,o,u){if(o!=null&&(o=""+Cr(o),o!==n.value&&(n.value=o),u==null)){n.defaultValue!==o&&(n.defaultValue=o);return}n.defaultValue=u!=null?""+Cr(u):""}function l3(n,o,u,d){if(o==null){if(d!=null){if(u!=null)throw Error(r(92));if(re(d)){if(1<d.length)throw Error(r(93));d=d[0]}u=d}u==null&&(u=""),o=u}u=Cr(o),n.defaultValue=u,d=n.textContent,d===u&&d!==""&&d!==null&&(n.value=d)}function Ho(n,o){if(o){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=o;return}}n.textContent=o}var eV=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function u3(n,o,u){var d=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?n.setProperty(o,""):o==="float"?n.cssFloat="":n[o]="":d?n.setProperty(o,u):typeof u!="number"||u===0||eV.has(o)?o==="float"?n.cssFloat=u:n[o]=(""+u).trim():n[o]=u+"px"}function c3(n,o,u){if(o!=null&&typeof o!="object")throw Error(r(62));if(n=n.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var m in o)d=o[m],o.hasOwnProperty(m)&&u[m]!==d&&u3(n,m,d)}else for(var _ in o)o.hasOwnProperty(_)&&u3(n,_,o[_])}function S_(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tV=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),iV=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gd(n){return iV.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var A_=null;function E_(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vo=null,zo=null;function h3(n){var o=ko(n);if(o&&(n=o.stateNode)){var u=n[qt]||null;e:switch(n=o.stateNode,o.type){case"input":if(x_(n,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Rr(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==n&&d.form===n.form){var m=d[qt]||null;if(!m)throw Error(r(90));x_(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<u.length;o++)d=u[o],d.form===n.form&&n3(d)}break e;case"textarea":o3(n,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&No(n,!!u.multiple,o,!1)}}}var w_=!1;function d3(n,o,u){if(w_)return n(o,u);w_=!0;try{var d=n(o);return d}finally{if(w_=!1,(Vo!==null||zo!==null)&&(vf(),Vo&&(o=Vo,n=zo,zo=Vo=null,h3(o),n)))for(o=0;o<n.length;o++)h3(n[o])}}function Fu(n,o){var u=n.stateNode;if(u===null)return null;var d=u[qt]||null;if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(r(231,o,typeof u));return u}var C_=!1;if(Hs)try{var Gu={};Object.defineProperty(Gu,"passive",{get:function(){C_=!0}}),window.addEventListener("test",Gu,Gu),window.removeEventListener("test",Gu,Gu)}catch{C_=!1}var Rn=null,R_=null,Ld=null;function f3(){if(Ld)return Ld;var n,o=R_,u=o.length,d,m="value"in Rn?Rn.value:Rn.textContent,_=m.length;for(n=0;n<u&&o[n]===m[n];n++);var T=u-n;for(d=1;d<=T&&o[u-d]===m[_-d];d++);return Ld=m.slice(n,1<d?1-d:void 0)}function kd(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function Id(){return!0}function p3(){return!1}function sr(n){function o(u,d,m,_,T){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(u=n[R],this[R]=u?u(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Id:p3,this.isPropagationStopped=p3,this}return L(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Id)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Id)},persist:function(){},isPersistent:Id}),o}var Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ud=sr(Sa),Lu=L({},Sa,{view:0,detail:0}),rV=sr(Lu),M_,B_,ku,Nd=L({},Lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:D_,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ku&&(ku&&n.type==="mousemove"?(M_=n.screenX-ku.screenX,B_=n.screenY-ku.screenY):B_=M_=0,ku=n),M_)},movementY:function(n){return"movementY"in n?n.movementY:B_}}),m3=sr(Nd),sV=L({},Nd,{dataTransfer:0}),nV=sr(sV),aV=L({},Lu,{relatedTarget:0}),P_=sr(aV),oV=L({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),lV=sr(oV),uV=L({},Sa,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),cV=sr(uV),hV=L({},Sa,{data:0}),g3=sr(hV),dV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mV(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=pV[n])?!!o[n]:!1}function D_(){return mV}var gV=L({},Lu,{key:function(n){if(n.key){var o=dV[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=kd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?fV[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:D_,charCode:function(n){return n.type==="keypress"?kd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?kd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),yV=sr(gV),_V=L({},Nd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y3=sr(_V),vV=L({},Lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:D_}),bV=sr(vV),xV=L({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),TV=sr(xV),SV=L({},Nd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),AV=sr(SV),EV=L({},Sa,{newState:0,oldState:0}),wV=sr(EV),CV=[9,13,27,32],O_=Hs&&"CompositionEvent"in window,Iu=null;Hs&&"documentMode"in document&&(Iu=document.documentMode);var RV=Hs&&"TextEvent"in window&&!Iu,_3=Hs&&(!O_||Iu&&8<Iu&&11>=Iu),v3=" ",b3=!1;function x3(n,o){switch(n){case"keyup":return CV.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T3(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xo=!1;function MV(n,o){switch(n){case"compositionend":return T3(o);case"keypress":return o.which!==32?null:(b3=!0,v3);case"textInput":return n=o.data,n===v3&&b3?null:n;default:return null}}function BV(n,o){if(Xo)return n==="compositionend"||!O_&&x3(n,o)?(n=f3(),Ld=R_=Rn=null,Xo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return _3&&o.locale!=="ko"?null:o.data;default:return null}}var PV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function S3(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!PV[n.type]:o==="textarea"}function A3(n,o,u,d){Vo?zo?zo.push(d):zo=[d]:Vo=d,o=Af(o,"onChange"),0<o.length&&(u=new Ud("onChange","change",null,u,d),n.push({event:u,listeners:o}))}var Uu=null,Nu=null;function DV(n){$R(n,0)}function Hd(n){var o=Ou(n);if(n3(o))return n}function E3(n,o){if(n==="change")return o}var w3=!1;if(Hs){var F_;if(Hs){var G_="oninput"in document;if(!G_){var C3=document.createElement("div");C3.setAttribute("oninput","return;"),G_=typeof C3.oninput=="function"}F_=G_}else F_=!1;w3=F_&&(!document.documentMode||9<document.documentMode)}function R3(){Uu&&(Uu.detachEvent("onpropertychange",M3),Nu=Uu=null)}function M3(n){if(n.propertyName==="value"&&Hd(Nu)){var o=[];A3(o,Nu,n,E_(n)),d3(DV,o)}}function OV(n,o,u){n==="focusin"?(R3(),Uu=o,Nu=u,Uu.attachEvent("onpropertychange",M3)):n==="focusout"&&R3()}function FV(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hd(Nu)}function GV(n,o){if(n==="click")return Hd(o)}function LV(n,o){if(n==="input"||n==="change")return Hd(o)}function kV(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var ur=typeof Object.is=="function"?Object.is:kV;function Hu(n,o){if(ur(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var u=Object.keys(n),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!An.call(o,m)||!ur(n[m],o[m]))return!1}return!0}function B3(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function P3(n,o){var u=B3(n);n=0;for(var d;u;){if(u.nodeType===3){if(d=n+u.textContent.length,n<=o&&d>=o)return{node:u,offset:o-n};n=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=B3(u)}}function D3(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?D3(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function O3(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var o=Fd(n.document);o instanceof n.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)n=o.contentWindow;else break;o=Fd(n.document)}return o}function L_(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}function IV(n,o){var u=O3(o);o=n.focusedElem;var d=n.selectionRange;if(u!==o&&o&&o.ownerDocument&&D3(o.ownerDocument.documentElement,o)){if(d!==null&&L_(o)){if(n=d.start,u=d.end,u===void 0&&(u=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(u,o.value.length);else if(u=(n=o.ownerDocument||document)&&n.defaultView||window,u.getSelection){u=u.getSelection();var m=o.textContent.length,_=Math.min(d.start,m);d=d.end===void 0?_:Math.min(d.end,m),!u.extend&&_>d&&(m=d,d=_,_=m),m=P3(o,_);var T=P3(o,d);m&&T&&(u.rangeCount!==1||u.anchorNode!==m.node||u.anchorOffset!==m.offset||u.focusNode!==T.node||u.focusOffset!==T.offset)&&(n=n.createRange(),n.setStart(m.node,m.offset),u.removeAllRanges(),_>d?(u.addRange(n),u.extend(T.node,T.offset)):(n.setEnd(T.node,T.offset),u.addRange(n)))}}for(n=[],u=o;u=u.parentNode;)u.nodeType===1&&n.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)u=n[o],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var UV=Hs&&"documentMode"in document&&11>=document.documentMode,Yo=null,k_=null,Vu=null,I_=!1;function F3(n,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;I_||Yo==null||Yo!==Fd(d)||(d=Yo,"selectionStart"in d&&L_(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Vu&&Hu(Vu,d)||(Vu=d,d=Af(k_,"onSelect"),0<d.length&&(o=new Ud("onSelect","select",null,o,u),n.push({event:o,listeners:d}),o.target=Yo)))}function Aa(n,o){var u={};return u[n.toLowerCase()]=o.toLowerCase(),u["Webkit"+n]="webkit"+o,u["Moz"+n]="moz"+o,u}var jo={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionrun:Aa("Transition","TransitionRun"),transitionstart:Aa("Transition","TransitionStart"),transitioncancel:Aa("Transition","TransitionCancel"),transitionend:Aa("Transition","TransitionEnd")},U_={},G3={};Hs&&(G3=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function Ea(n){if(U_[n])return U_[n];if(!jo[n])return n;var o=jo[n],u;for(u in o)if(o.hasOwnProperty(u)&&u in G3)return U_[n]=o[u];return n}var L3=Ea("animationend"),k3=Ea("animationiteration"),I3=Ea("animationstart"),NV=Ea("transitionrun"),HV=Ea("transitionstart"),VV=Ea("transitioncancel"),U3=Ea("transitionend"),N3=new Map,H3="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Jr(n,o){N3.set(n,o),Ta(o,[n])}var Mr=[],qo=0,N_=0;function Vd(){for(var n=qo,o=N_=qo=0;o<n;){var u=Mr[o];Mr[o++]=null;var d=Mr[o];Mr[o++]=null;var m=Mr[o];Mr[o++]=null;var _=Mr[o];if(Mr[o++]=null,d!==null&&m!==null){var T=d.pending;T===null?m.next=m:(m.next=T.next,T.next=m),d.pending=m}_!==0&&V3(u,m,_)}}function zd(n,o,u,d){Mr[qo++]=n,Mr[qo++]=o,Mr[qo++]=u,Mr[qo++]=d,N_|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function H_(n,o,u,d){return zd(n,o,u,d),Xd(n)}function Mn(n,o){return zd(n,null,null,o),Xd(n)}function V3(n,o,u){n.lanes|=u;var d=n.alternate;d!==null&&(d.lanes|=u);for(var m=!1,_=n.return;_!==null;)_.childLanes|=u,d=_.alternate,d!==null&&(d.childLanes|=u),_.tag===22&&(n=_.stateNode,n===null||n._visibility&1||(m=!0)),n=_,_=_.return;m&&o!==null&&n.tag===3&&(_=n.stateNode,m=31-Ri(u),_=_.hiddenUpdates,n=_[m],n===null?_[m]=[o]:n.push(o),o.lane=u|536870912)}function Xd(n){if(50<fc)throw fc=0,qv=null,Error(r(185));for(var o=n.return;o!==null;)n=o,o=n.return;return n.tag===3?n.stateNode:null}var Wo={},z3=new WeakMap;function Br(n,o){if(typeof n=="object"&&n!==null){var u=z3.get(n);return u!==void 0?u:(o={value:n,source:o,stack:te(o)},z3.set(n,o),o)}return{value:n,source:o,stack:te(o)}}var Ko=[],$o=0,Yd=null,jd=0,Pr=[],Dr=0,wa=null,zs=1,Xs="";function Ca(n,o){Ko[$o++]=jd,Ko[$o++]=Yd,Yd=n,jd=o}function X3(n,o,u){Pr[Dr++]=zs,Pr[Dr++]=Xs,Pr[Dr++]=wa,wa=n;var d=zs;n=Xs;var m=32-Ri(d)-1;d&=~(1<<m),u+=1;var _=32-Ri(o)+m;if(30<_){var T=m-m%5;_=(d&(1<<T)-1).toString(32),d>>=T,m-=T,zs=1<<32-Ri(o)+m|u<<m|d,Xs=_+n}else zs=1<<_|u<<m|d,Xs=n}function V_(n){n.return!==null&&(Ca(n,1),X3(n,1,0))}function z_(n){for(;n===Yd;)Yd=Ko[--$o],Ko[$o]=null,jd=Ko[--$o],Ko[$o]=null;for(;n===wa;)wa=Pr[--Dr],Pr[Dr]=null,Xs=Pr[--Dr],Pr[Dr]=null,zs=Pr[--Dr],Pr[Dr]=null}var Wi=null,Mi=null,pt=!1,es=null,gs=!1,X_=Error(r(519));function Ra(n){var o=Error(r(418,""));throw Yu(Br(o,n)),X_}function Y3(n){var o=n.stateNode,u=n.type,d=n.memoizedProps;switch(o[Rt]=n,o[qt]=d,u){case"dialog":ot("cancel",o),ot("close",o);break;case"iframe":case"object":case"embed":ot("load",o);break;case"video":case"audio":for(u=0;u<mc.length;u++)ot(mc[u],o);break;case"source":ot("error",o);break;case"img":case"image":case"link":ot("error",o),ot("load",o);break;case"details":ot("toggle",o);break;case"input":ot("invalid",o),a3(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Od(o);break;case"select":ot("invalid",o);break;case"textarea":ot("invalid",o),l3(o,d.value,d.defaultValue,d.children),Od(o)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||d.suppressHydrationWarning===!0||eM(o.textContent,u)?(d.popover!=null&&(ot("beforetoggle",o),ot("toggle",o)),d.onScroll!=null&&ot("scroll",o),d.onScrollEnd!=null&&ot("scrollend",o),d.onClick!=null&&(o.onclick=Ef),o=!0):o=!1,o||Ra(n)}function j3(n){for(Wi=n.return;Wi;)switch(Wi.tag){case 3:case 27:gs=!0;return;case 5:case 13:gs=!1;return;default:Wi=Wi.return}}function zu(n){if(n!==Wi)return!1;if(!pt)return j3(n),pt=!0,!1;var o=!1,u;if((u=n.tag!==3&&n.tag!==27)&&((u=n.tag===5)&&(u=n.type,u=!(u!=="form"&&u!=="button")||cb(n.type,n.memoizedProps)),u=!u),u&&(o=!0),o&&Mi&&Ra(n),j3(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,o=0;n;){if(n.nodeType===8)if(u=n.data,u==="/$"){if(o===0){Mi=is(n.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;n=n.nextSibling}Mi=null}}else Mi=Wi?is(n.stateNode.nextSibling):null;return!0}function Xu(){Mi=Wi=null,pt=!1}function Yu(n){es===null?es=[n]:es.push(n)}var ju=Error(r(460)),q3=Error(r(474)),Y_={then:function(){}};function W3(n){return n=n.status,n==="fulfilled"||n==="rejected"}function qd(){}function K3(n,o,u){switch(u=n[u],u===void 0?n.push(o):u!==o&&(o.then(qd,qd),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,n===ju?Error(r(483)):n;default:if(typeof o.status=="string")o.then(qd,qd);else{if(n=Bt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=o,n.status="pending",n.then(function(d){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=d}},function(d){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,n===ju?Error(r(483)):n}throw qu=o,ju}}var qu=null;function $3(){if(qu===null)throw Error(r(459));var n=qu;return qu=null,n}var Zo=null,Wu=0;function Wd(n){var o=Wu;return Wu+=1,Zo===null&&(Zo=[]),K3(Zo,n,o)}function Ku(n,o){o=o.props.ref,n.ref=o!==void 0?o:null}function Kd(n,o){throw o.$$typeof===a?Error(r(525)):(n=Object.prototype.toString.call(o),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)))}function Z3(n){var o=n._init;return o(n._payload)}function Q3(n){function o(Y,V){if(n){var K=Y.deletions;K===null?(Y.deletions=[V],Y.flags|=16):K.push(V)}}function u(Y,V){if(!n)return null;for(;V!==null;)o(Y,V),V=V.sibling;return null}function d(Y){for(var V=new Map;Y!==null;)Y.key!==null?V.set(Y.key,Y):V.set(Y.index,Y),Y=Y.sibling;return V}function m(Y,V){return Y=Hn(Y,V),Y.index=0,Y.sibling=null,Y}function _(Y,V,K){return Y.index=K,n?(K=Y.alternate,K!==null?(K=K.index,K<V?(Y.flags|=33554434,V):K):(Y.flags|=33554434,V)):(Y.flags|=1048576,V)}function T(Y){return n&&Y.alternate===null&&(Y.flags|=33554434),Y}function R(Y,V,K,ue){return V===null||V.tag!==6?(V=Uv(K,Y.mode,ue),V.return=Y,V):(V=m(V,K),V.return=Y,V)}function F(Y,V,K,ue){var Ce=K.type;return Ce===h?oe(Y,V,K.props.children,ue,K.key):V!==null&&(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===E&&Z3(Ce)===V.type)?(V=m(V,K.props),Ku(V,K),V.return=Y,V):(V=pf(K.type,K.key,K.props,null,Y.mode,ue),Ku(V,K),V.return=Y,V)}function z(Y,V,K,ue){return V===null||V.tag!==4||V.stateNode.containerInfo!==K.containerInfo||V.stateNode.implementation!==K.implementation?(V=Nv(K,Y.mode,ue),V.return=Y,V):(V=m(V,K.children||[]),V.return=Y,V)}function oe(Y,V,K,ue,Ce){return V===null||V.tag!==7?(V=Ia(K,Y.mode,ue,Ce),V.return=Y,V):(V=m(V,K),V.return=Y,V)}function de(Y,V,K){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Uv(""+V,Y.mode,K),V.return=Y,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case l:return K=pf(V.type,V.key,V.props,null,Y.mode,K),Ku(K,V),K.return=Y,K;case c:return V=Nv(V,Y.mode,K),V.return=Y,V;case E:var ue=V._init;return V=ue(V._payload),de(Y,V,K)}if(re(V)||H(V))return V=Ia(V,Y.mode,K,null),V.return=Y,V;if(typeof V.then=="function")return de(Y,Wd(V),K);if(V.$$typeof===v)return de(Y,hf(Y,V),K);Kd(Y,V)}return null}function J(Y,V,K,ue){var Ce=V!==null?V.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ce!==null?null:R(Y,V,""+K,ue);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case l:return K.key===Ce?F(Y,V,K,ue):null;case c:return K.key===Ce?z(Y,V,K,ue):null;case E:return Ce=K._init,K=Ce(K._payload),J(Y,V,K,ue)}if(re(K)||H(K))return Ce!==null?null:oe(Y,V,K,ue,null);if(typeof K.then=="function")return J(Y,V,Wd(K),ue);if(K.$$typeof===v)return J(Y,V,hf(Y,K),ue);Kd(Y,K)}return null}function ne(Y,V,K,ue,Ce){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Y=Y.get(K)||null,R(V,Y,""+ue,Ce);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case l:return Y=Y.get(ue.key===null?K:ue.key)||null,F(V,Y,ue,Ce);case c:return Y=Y.get(ue.key===null?K:ue.key)||null,z(V,Y,ue,Ce);case E:var $e=ue._init;return ue=$e(ue._payload),ne(Y,V,K,ue,Ce)}if(re(ue)||H(ue))return Y=Y.get(K)||null,oe(V,Y,ue,Ce,null);if(typeof ue.then=="function")return ne(Y,V,K,Wd(ue),Ce);if(ue.$$typeof===v)return ne(Y,V,K,hf(V,ue),Ce);Kd(V,ue)}return null}function Me(Y,V,K,ue){for(var Ce=null,$e=null,Oe=V,Ie=V=0,Ai=null;Oe!==null&&Ie<K.length;Ie++){Oe.index>Ie?(Ai=Oe,Oe=null):Ai=Oe.sibling;var mt=J(Y,Oe,K[Ie],ue);if(mt===null){Oe===null&&(Oe=Ai);break}n&&Oe&&mt.alternate===null&&o(Y,Oe),V=_(mt,V,Ie),$e===null?Ce=mt:$e.sibling=mt,$e=mt,Oe=Ai}if(Ie===K.length)return u(Y,Oe),pt&&Ca(Y,Ie),Ce;if(Oe===null){for(;Ie<K.length;Ie++)Oe=de(Y,K[Ie],ue),Oe!==null&&(V=_(Oe,V,Ie),$e===null?Ce=Oe:$e.sibling=Oe,$e=Oe);return pt&&Ca(Y,Ie),Ce}for(Oe=d(Oe);Ie<K.length;Ie++)Ai=ne(Oe,Y,Ie,K[Ie],ue),Ai!==null&&(n&&Ai.alternate!==null&&Oe.delete(Ai.key===null?Ie:Ai.key),V=_(Ai,V,Ie),$e===null?Ce=Ai:$e.sibling=Ai,$e=Ai);return n&&Oe.forEach(function(Wn){return o(Y,Wn)}),pt&&Ca(Y,Ie),Ce}function je(Y,V,K,ue){if(K==null)throw Error(r(151));for(var Ce=null,$e=null,Oe=V,Ie=V=0,Ai=null,mt=K.next();Oe!==null&&!mt.done;Ie++,mt=K.next()){Oe.index>Ie?(Ai=Oe,Oe=null):Ai=Oe.sibling;var Wn=J(Y,Oe,mt.value,ue);if(Wn===null){Oe===null&&(Oe=Ai);break}n&&Oe&&Wn.alternate===null&&o(Y,Oe),V=_(Wn,V,Ie),$e===null?Ce=Wn:$e.sibling=Wn,$e=Wn,Oe=Ai}if(mt.done)return u(Y,Oe),pt&&Ca(Y,Ie),Ce;if(Oe===null){for(;!mt.done;Ie++,mt=K.next())mt=de(Y,mt.value,ue),mt!==null&&(V=_(mt,V,Ie),$e===null?Ce=mt:$e.sibling=mt,$e=mt);return pt&&Ca(Y,Ie),Ce}for(Oe=d(Oe);!mt.done;Ie++,mt=K.next())mt=ne(Oe,Y,Ie,mt.value,ue),mt!==null&&(n&&mt.alternate!==null&&Oe.delete(mt.key===null?Ie:mt.key),V=_(mt,V,Ie),$e===null?Ce=mt:$e.sibling=mt,$e=mt);return n&&Oe.forEach(function(iz){return o(Y,iz)}),pt&&Ca(Y,Ie),Ce}function $t(Y,V,K,ue){if(typeof K=="object"&&K!==null&&K.type===h&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case l:e:{for(var Ce=K.key;V!==null;){if(V.key===Ce){if(Ce=K.type,Ce===h){if(V.tag===7){u(Y,V.sibling),ue=m(V,K.props.children),ue.return=Y,Y=ue;break e}}else if(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===E&&Z3(Ce)===V.type){u(Y,V.sibling),ue=m(V,K.props),Ku(ue,K),ue.return=Y,Y=ue;break e}u(Y,V);break}else o(Y,V);V=V.sibling}K.type===h?(ue=Ia(K.props.children,Y.mode,ue,K.key),ue.return=Y,Y=ue):(ue=pf(K.type,K.key,K.props,null,Y.mode,ue),Ku(ue,K),ue.return=Y,Y=ue)}return T(Y);case c:e:{for(Ce=K.key;V!==null;){if(V.key===Ce)if(V.tag===4&&V.stateNode.containerInfo===K.containerInfo&&V.stateNode.implementation===K.implementation){u(Y,V.sibling),ue=m(V,K.children||[]),ue.return=Y,Y=ue;break e}else{u(Y,V);break}else o(Y,V);V=V.sibling}ue=Nv(K,Y.mode,ue),ue.return=Y,Y=ue}return T(Y);case E:return Ce=K._init,K=Ce(K._payload),$t(Y,V,K,ue)}if(re(K))return Me(Y,V,K,ue);if(H(K)){if(Ce=H(K),typeof Ce!="function")throw Error(r(150));return K=Ce.call(K),je(Y,V,K,ue)}if(typeof K.then=="function")return $t(Y,V,Wd(K),ue);if(K.$$typeof===v)return $t(Y,V,hf(Y,K),ue);Kd(Y,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,V!==null&&V.tag===6?(u(Y,V.sibling),ue=m(V,K),ue.return=Y,Y=ue):(u(Y,V),ue=Uv(K,Y.mode,ue),ue.return=Y,Y=ue),T(Y)):u(Y,V)}return function(Y,V,K,ue){try{Wu=0;var Ce=$t(Y,V,K,ue);return Zo=null,Ce}catch(Oe){if(Oe===ju)throw Oe;var $e=Lr(29,Oe,null,Y.mode);return $e.lanes=ue,$e.return=Y,$e}finally{}}}var Ma=Q3(!0),J3=Q3(!1),Qo=Ye(null),$d=Ye(0);function eC(n,o){n=tn,Te($d,n),Te(Qo,o),tn=n|o.baseLanes}function j_(){Te($d,tn),Te(Qo,Qo.current)}function q_(){tn=$d.current,Ee(Qo),Ee($d)}var Or=Ye(null),ys=null;function Bn(n){var o=n.alternate;Te(fi,fi.current&1),Te(Or,n),ys===null&&(o===null||Qo.current!==null||o.memoizedState!==null)&&(ys=n)}function tC(n){if(n.tag===22){if(Te(fi,fi.current),Te(Or,n),ys===null){var o=n.alternate;o!==null&&o.memoizedState!==null&&(ys=n)}}else Pn()}function Pn(){Te(fi,fi.current),Te(Or,Or.current)}function Ys(n){Ee(Or),ys===n&&(ys=null),Ee(fi)}var fi=Ye(0);function Zd(n){for(var o=n;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var zV=typeof AbortController<"u"?AbortController:function(){var n=[],o=this.signal={aborted:!1,addEventListener:function(u,d){n.push(d)}};this.abort=function(){o.aborted=!0,n.forEach(function(u){return u()})}},XV=t.unstable_scheduleCallback,YV=t.unstable_NormalPriority,pi={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function W_(){return{controller:new zV,data:new Map,refCount:0}}function $u(n){n.refCount--,n.refCount===0&&XV(YV,function(){n.controller.abort()})}var Zu=null,K_=0,Jo=0,el=null;function jV(n,o){if(Zu===null){var u=Zu=[];K_=0,Jo=tb(),el={status:"pending",value:void 0,then:function(d){u.push(d)}}}return K_++,o.then(iC,iC),o}function iC(){if(--K_===0&&Zu!==null){el!==null&&(el.status="fulfilled");var n=Zu;Zu=null,Jo=0,el=null;for(var o=0;o<n.length;o++)(0,n[o])()}}function qV(n,o){var u=[],d={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return n.then(function(){d.status="fulfilled",d.value=o;for(var m=0;m<u.length;m++)(0,u[m])(o)},function(m){for(d.status="rejected",d.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),d}var rC=q.S;q.S=function(n,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&jV(n,o),rC!==null&&rC(n,o)};var Ba=Ye(null);function $_(){var n=Ba.current;return n!==null?n:Bt.pooledCache}function Qd(n,o){o===null?Te(Ba,Ba.current):Te(Ba,o.pool)}function sC(){var n=$_();return n===null?null:{parent:pi._currentValue,pool:n}}var Dn=0,We=null,Tt=null,si=null,Jd=!1,tl=!1,Pa=!1,ef=0,Qu=0,il=null,WV=0;function ii(){throw Error(r(321))}function Z_(n,o){if(o===null)return!1;for(var u=0;u<o.length&&u<n.length;u++)if(!ur(n[u],o[u]))return!1;return!0}function Q_(n,o,u,d,m,_){return Dn=_,We=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,q.H=n===null||n.memoizedState===null?Da:On,Pa=!1,_=u(d,m),Pa=!1,tl&&(_=aC(o,u,d,m)),nC(n),_}function nC(n){q.H=_s;var o=Tt!==null&&Tt.next!==null;if(Dn=0,si=Tt=We=null,Jd=!1,Qu=0,il=null,o)throw Error(r(300));n===null||Ti||(n=n.dependencies,n!==null&&cf(n)&&(Ti=!0))}function aC(n,o,u,d){We=n;var m=0;do{if(tl&&(il=null),Qu=0,tl=!1,25<=m)throw Error(r(301));if(m+=1,si=Tt=null,n.updateQueue!=null){var _=n.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}q.H=Oa,_=o(u,d)}while(tl);return _}function KV(){var n=q.H,o=n.useState()[0];return o=typeof o.then=="function"?Ju(o):o,n=n.useState()[0],(Tt!==null?Tt.memoizedState:null)!==n&&(We.flags|=1024),o}function J_(){var n=ef!==0;return ef=0,n}function ev(n,o,u){o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~u}function tv(n){if(Jd){for(n=n.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Jd=!1}Dn=0,si=Tt=We=null,tl=!1,Qu=ef=0,il=null}function nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return si===null?We.memoizedState=si=n:si=si.next=n,si}function ni(){if(Tt===null){var n=We.alternate;n=n!==null?n.memoizedState:null}else n=Tt.next;var o=si===null?We.memoizedState:si.next;if(o!==null)si=o,Tt=n;else{if(n===null)throw We.alternate===null?Error(r(467)):Error(r(310));Tt=n,n={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},si===null?We.memoizedState=si=n:si=si.next=n}return si}var tf;tf=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Ju(n){var o=Qu;return Qu+=1,il===null&&(il=[]),n=K3(il,n,o),o=We,(si===null?o.memoizedState:si.next)===null&&(o=o.alternate,q.H=o===null||o.memoizedState===null?Da:On),n}function rf(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ju(n);if(n.$$typeof===v)return Ui(n)}throw Error(r(438,String(n)))}function iv(n){var o=null,u=We.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var d=We.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=tf(),We.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(n),d=0;d<n;d++)u[d]=G;return o.index++,u}function js(n,o){return typeof o=="function"?o(n):o}function sf(n){var o=ni();return rv(o,Tt,n)}function rv(n,o,u){var d=n.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=u;var m=n.baseQueue,_=d.pending;if(_!==null){if(m!==null){var T=m.next;m.next=_.next,_.next=T}o.baseQueue=m=_,d.pending=null}if(_=n.baseState,m===null)n.memoizedState=_;else{o=m.next;var R=T=null,F=null,z=o,oe=!1;do{var de=z.lane&-536870913;if(de!==z.lane?(lt&de)===de:(Dn&de)===de){var J=z.revertLane;if(J===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),de===Jo&&(oe=!0);else if((Dn&J)===J){z=z.next,J===Jo&&(oe=!0);continue}else de={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},F===null?(R=F=de,T=_):F=F.next=de,We.lanes|=J,Vn|=J;de=z.action,Pa&&u(_,de),_=z.hasEagerState?z.eagerState:u(_,de)}else J={lane:de,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},F===null?(R=F=J,T=_):F=F.next=J,We.lanes|=de,Vn|=de;z=z.next}while(z!==null&&z!==o);if(F===null?T=_:F.next=R,!ur(_,n.memoizedState)&&(Ti=!0,oe&&(u=el,u!==null)))throw u;n.memoizedState=_,n.baseState=T,n.baseQueue=F,d.lastRenderedState=_}return m===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function sv(n){var o=ni(),u=o.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=n;var d=u.dispatch,m=u.pending,_=o.memoizedState;if(m!==null){u.pending=null;var T=m=m.next;do _=n(_,T.action),T=T.next;while(T!==m);ur(_,o.memoizedState)||(Ti=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,d]}function oC(n,o,u){var d=We,m=ni(),_=pt;if(_){if(u===void 0)throw Error(r(407));u=u()}else u=o();var T=!ur((Tt||m).memoizedState,u);if(T&&(m.memoizedState=u,Ti=!0),m=m.queue,ov(cC.bind(null,d,m,n),[n]),m.getSnapshot!==o||T||si!==null&&si.memoizedState.tag&1){if(d.flags|=2048,rl(9,uC.bind(null,d,m,u,o),{destroy:void 0},null),Bt===null)throw Error(r(349));_||(Dn&60)!==0||lC(d,o,u)}return u}function lC(n,o,u){n.flags|=16384,n={getSnapshot:o,value:u},o=We.updateQueue,o===null?(o=tf(),We.updateQueue=o,o.stores=[n]):(u=o.stores,u===null?o.stores=[n]:u.push(n))}function uC(n,o,u,d){o.value=u,o.getSnapshot=d,hC(o)&&dC(n)}function cC(n,o,u){return u(function(){hC(o)&&dC(n)})}function hC(n){var o=n.getSnapshot;n=n.value;try{var u=o();return!ur(n,u)}catch{return!0}}function dC(n){var o=Mn(n,2);o!==null&&Ki(o,n,2)}function nv(n){var o=nr();if(typeof n=="function"){var u=n;if(n=u(),Pa){Zr(!0);try{u()}finally{Zr(!1)}}}return o.memoizedState=o.baseState=n,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:n},o}function fC(n,o,u,d){return n.baseState=u,rv(n,Tt,typeof d=="function"?d:js)}function $V(n,o,u,d,m){if(of(n))throw Error(r(485));if(n=o.action,n!==null){var _={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){_.listeners.push(T)}};q.T!==null?u(!0):_.isTransition=!1,d(_),u=o.pending,u===null?(_.next=o.pending=_,pC(o,_)):(_.next=u.next,o.pending=u.next=_)}}function pC(n,o){var u=o.action,d=o.payload,m=n.state;if(o.isTransition){var _=q.T,T={};q.T=T;try{var R=u(m,d),F=q.S;F!==null&&F(T,R),mC(n,o,R)}catch(z){av(n,o,z)}finally{q.T=_}}else try{_=u(m,d),mC(n,o,_)}catch(z){av(n,o,z)}}function mC(n,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){gC(n,o,d)},function(d){return av(n,o,d)}):gC(n,o,u)}function gC(n,o,u){o.status="fulfilled",o.value=u,yC(o),n.state=u,o=n.pending,o!==null&&(u=o.next,u===o?n.pending=null:(u=u.next,o.next=u,pC(n,u)))}function av(n,o,u){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=u,yC(o),o=o.next;while(o!==d)}n.action=null}function yC(n){n=n.listeners;for(var o=0;o<n.length;o++)(0,n[o])()}function _C(n,o){return o}function vC(n,o){if(pt){var u=Bt.formState;if(u!==null){e:{var d=We;if(pt){if(Mi){t:{for(var m=Mi,_=gs;m.nodeType!==8;){if(!_){m=null;break t}if(m=is(m.nextSibling),m===null){m=null;break t}}_=m.data,m=_==="F!"||_==="F"?m:null}if(m){Mi=is(m.nextSibling),d=m.data==="F!";break e}}Ra(d)}d=!1}d&&(o=u[0])}}return u=nr(),u.memoizedState=u.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_C,lastRenderedState:o},u.queue=d,u=kC.bind(null,We,d),d.dispatch=u,d=nv(!1),_=dv.bind(null,We,!1,d.queue),d=nr(),m={state:o,dispatch:null,action:n,pending:null},d.queue=m,u=$V.bind(null,We,m,_,u),m.dispatch=u,d.memoizedState=n,[o,u,!1]}function bC(n){var o=ni();return xC(o,Tt,n)}function xC(n,o,u){o=rv(n,o,_C)[0],n=sf(js)[0],o=typeof o=="object"&&o!==null&&typeof o.then=="function"?Ju(o):o;var d=ni(),m=d.queue,_=m.dispatch;return u!==d.memoizedState&&(We.flags|=2048,rl(9,ZV.bind(null,m,u),{destroy:void 0},null)),[o,_,n]}function ZV(n,o){n.action=o}function TC(n){var o=ni(),u=Tt;if(u!==null)return xC(o,u,n);ni(),o=o.memoizedState,u=ni();var d=u.queue.dispatch;return u.memoizedState=n,[o,d,!1]}function rl(n,o,u,d){return n={tag:n,create:o,inst:u,deps:d,next:null},o=We.updateQueue,o===null&&(o=tf(),We.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=n.next=n:(d=u.next,u.next=n,n.next=d,o.lastEffect=n),n}function SC(){return ni().memoizedState}function nf(n,o,u,d){var m=nr();We.flags|=n,m.memoizedState=rl(1|o,u,{destroy:void 0},d===void 0?null:d)}function af(n,o,u,d){var m=ni();d=d===void 0?null:d;var _=m.memoizedState.inst;Tt!==null&&d!==null&&Z_(d,Tt.memoizedState.deps)?m.memoizedState=rl(o,u,_,d):(We.flags|=n,m.memoizedState=rl(1|o,u,_,d))}function AC(n,o){nf(8390656,8,n,o)}function ov(n,o){af(2048,8,n,o)}function EC(n,o){return af(4,2,n,o)}function wC(n,o){return af(4,4,n,o)}function CC(n,o){if(typeof o=="function"){n=n();var u=o(n);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function RC(n,o,u){u=u!=null?u.concat([n]):null,af(4,4,CC.bind(null,o,n),u)}function lv(){}function MC(n,o){var u=ni();o=o===void 0?null:o;var d=u.memoizedState;return o!==null&&Z_(o,d[1])?d[0]:(u.memoizedState=[n,o],n)}function BC(n,o){var u=ni();o=o===void 0?null:o;var d=u.memoizedState;if(o!==null&&Z_(o,d[1]))return d[0];if(d=n(),Pa){Zr(!0);try{n()}finally{Zr(!1)}}return u.memoizedState=[d,o],d}function uv(n,o,u){return u===void 0||(Dn&1073741824)!==0?n.memoizedState=o:(n.memoizedState=u,n=DR(),We.lanes|=n,Vn|=n,u)}function PC(n,o,u,d){return ur(u,o)?u:Qo.current!==null?(n=uv(n,u,d),ur(n,o)||(Ti=!0),n):(Dn&42)===0?(Ti=!0,n.memoizedState=u):(n=DR(),We.lanes|=n,Vn|=n,o)}function DC(n,o,u,d,m){var _=ie.p;ie.p=_!==0&&8>_?_:8;var T=q.T,R={};q.T=R,dv(n,!1,o,u);try{var F=m(),z=q.S;if(z!==null&&z(R,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var oe=qV(F,d);ec(n,o,oe,fr(n))}else ec(n,o,d,fr(n))}catch(de){ec(n,o,{then:function(){},status:"rejected",reason:de},fr())}finally{ie.p=_,q.T=T}}function QV(){}function cv(n,o,u,d){if(n.tag!==5)throw Error(r(476));var m=OC(n).queue;DC(n,m,o,he,u===null?QV:function(){return FC(n),u(d)})}function OC(n){var o=n.memoizedState;if(o!==null)return o;o={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:he},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:u},next:null},n.memoizedState=o,n=n.alternate,n!==null&&(n.memoizedState=o),o}function FC(n){var o=OC(n).next.queue;ec(n,o,{},fr())}function hv(){return Ui(bc)}function GC(){return ni().memoizedState}function LC(){return ni().memoizedState}function JV(n){for(var o=n.return;o!==null;){switch(o.tag){case 24:case 3:var u=fr();n=Ln(u);var d=kn(o,n,u);d!==null&&(Ki(d,o,u),rc(d,o,u)),o={cache:W_()},n.payload=o;return}o=o.return}}function e9(n,o,u){var d=fr();u={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},of(n)?IC(o,u):(u=H_(n,o,u,d),u!==null&&(Ki(u,n,d),UC(u,o,d)))}function kC(n,o,u){var d=fr();ec(n,o,u,d)}function ec(n,o,u,d){var m={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(of(n))IC(o,m);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var T=o.lastRenderedState,R=_(T,u);if(m.hasEagerState=!0,m.eagerState=R,ur(R,T))return zd(n,o,m,0),Bt===null&&Vd(),!1}catch{}finally{}if(u=H_(n,o,m,d),u!==null)return Ki(u,n,d),UC(u,o,d),!0}return!1}function dv(n,o,u,d){if(d={lane:2,revertLane:tb(),action:d,hasEagerState:!1,eagerState:null,next:null},of(n)){if(o)throw Error(r(479))}else o=H_(n,u,d,2),o!==null&&Ki(o,n,2)}function of(n){var o=n.alternate;return n===We||o!==null&&o===We}function IC(n,o){tl=Jd=!0;var u=n.pending;u===null?o.next=o:(o.next=u.next,u.next=o),n.pending=o}function UC(n,o,u){if((u&4194176)!==0){var d=o.lanes;d&=n.pendingLanes,u|=d,o.lanes=u,Er(n,u)}}var _s={readContext:Ui,use:rf,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useLayoutEffect:ii,useInsertionEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useSyncExternalStore:ii,useId:ii};_s.useCacheRefresh=ii,_s.useMemoCache=ii,_s.useHostTransitionStatus=ii,_s.useFormState=ii,_s.useActionState=ii,_s.useOptimistic=ii;var Da={readContext:Ui,use:rf,useCallback:function(n,o){return nr().memoizedState=[n,o===void 0?null:o],n},useContext:Ui,useEffect:AC,useImperativeHandle:function(n,o,u){u=u!=null?u.concat([n]):null,nf(4194308,4,CC.bind(null,o,n),u)},useLayoutEffect:function(n,o){return nf(4194308,4,n,o)},useInsertionEffect:function(n,o){nf(4,2,n,o)},useMemo:function(n,o){var u=nr();o=o===void 0?null:o;var d=n();if(Pa){Zr(!0);try{n()}finally{Zr(!1)}}return u.memoizedState=[d,o],d},useReducer:function(n,o,u){var d=nr();if(u!==void 0){var m=u(o);if(Pa){Zr(!0);try{u(o)}finally{Zr(!1)}}}else m=o;return d.memoizedState=d.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},d.queue=n,n=n.dispatch=e9.bind(null,We,n),[d.memoizedState,n]},useRef:function(n){var o=nr();return n={current:n},o.memoizedState=n},useState:function(n){n=nv(n);var o=n.queue,u=kC.bind(null,We,o);return o.dispatch=u,[n.memoizedState,u]},useDebugValue:lv,useDeferredValue:function(n,o){var u=nr();return uv(u,n,o)},useTransition:function(){var n=nv(!1);return n=DC.bind(null,We,n.queue,!0,!1),nr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,o,u){var d=We,m=nr();if(pt){if(u===void 0)throw Error(r(407));u=u()}else{if(u=o(),Bt===null)throw Error(r(349));(lt&60)!==0||lC(d,o,u)}m.memoizedState=u;var _={value:u,getSnapshot:o};return m.queue=_,AC(cC.bind(null,d,_,n),[n]),d.flags|=2048,rl(9,uC.bind(null,d,_,u,o),{destroy:void 0},null),u},useId:function(){var n=nr(),o=Bt.identifierPrefix;if(pt){var u=Xs,d=zs;u=(d&~(1<<32-Ri(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=ef++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=WV++,o=":"+o+"r"+u.toString(32)+":";return n.memoizedState=o},useCacheRefresh:function(){return nr().memoizedState=JV.bind(null,We)}};Da.useMemoCache=iv,Da.useHostTransitionStatus=hv,Da.useFormState=vC,Da.useActionState=vC,Da.useOptimistic=function(n){var o=nr();o.memoizedState=o.baseState=n;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=dv.bind(null,We,!0,u),u.dispatch=o,[n,o]};var On={readContext:Ui,use:rf,useCallback:MC,useContext:Ui,useEffect:ov,useImperativeHandle:RC,useInsertionEffect:EC,useLayoutEffect:wC,useMemo:BC,useReducer:sf,useRef:SC,useState:function(){return sf(js)},useDebugValue:lv,useDeferredValue:function(n,o){var u=ni();return PC(u,Tt.memoizedState,n,o)},useTransition:function(){var n=sf(js)[0],o=ni().memoizedState;return[typeof n=="boolean"?n:Ju(n),o]},useSyncExternalStore:oC,useId:GC};On.useCacheRefresh=LC,On.useMemoCache=iv,On.useHostTransitionStatus=hv,On.useFormState=bC,On.useActionState=bC,On.useOptimistic=function(n,o){var u=ni();return fC(u,Tt,n,o)};var Oa={readContext:Ui,use:rf,useCallback:MC,useContext:Ui,useEffect:ov,useImperativeHandle:RC,useInsertionEffect:EC,useLayoutEffect:wC,useMemo:BC,useReducer:sv,useRef:SC,useState:function(){return sv(js)},useDebugValue:lv,useDeferredValue:function(n,o){var u=ni();return Tt===null?uv(u,n,o):PC(u,Tt.memoizedState,n,o)},useTransition:function(){var n=sv(js)[0],o=ni().memoizedState;return[typeof n=="boolean"?n:Ju(n),o]},useSyncExternalStore:oC,useId:GC};Oa.useCacheRefresh=LC,Oa.useMemoCache=iv,Oa.useHostTransitionStatus=hv,Oa.useFormState=TC,Oa.useActionState=TC,Oa.useOptimistic=function(n,o){var u=ni();return Tt!==null?fC(u,Tt,n,o):(u.baseState=n,[n,u.queue.dispatch])};function fv(n,o,u,d){o=n.memoizedState,u=u(d,o),u=u==null?o:L({},o,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var pv={isMounted:function(n){return(n=n._reactInternals)?P(n)===n:!1},enqueueSetState:function(n,o,u){n=n._reactInternals;var d=fr(),m=Ln(d);m.payload=o,u!=null&&(m.callback=u),o=kn(n,m,d),o!==null&&(Ki(o,n,d),rc(o,n,d))},enqueueReplaceState:function(n,o,u){n=n._reactInternals;var d=fr(),m=Ln(d);m.tag=1,m.payload=o,u!=null&&(m.callback=u),o=kn(n,m,d),o!==null&&(Ki(o,n,d),rc(o,n,d))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var u=fr(),d=Ln(u);d.tag=2,o!=null&&(d.callback=o),o=kn(n,d,u),o!==null&&(Ki(o,n,u),rc(o,n,u))}};function NC(n,o,u,d,m,_,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,_,T):o.prototype&&o.prototype.isPureReactComponent?!Hu(u,d)||!Hu(m,_):!0}function HC(n,o,u,d){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==n&&pv.enqueueReplaceState(o,o.state,null)}function Fa(n,o){var u=o;if("ref"in o){u={};for(var d in o)d!=="ref"&&(u[d]=o[d])}if(n=n.defaultProps){u===o&&(u=L({},u));for(var m in n)u[m]===void 0&&(u[m]=n[m])}return u}var lf=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function VC(n){lf(n)}function zC(n){console.error(n)}function XC(n){lf(n)}function uf(n,o){try{var u=n.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function YC(n,o,u){try{var d=n.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function mv(n,o,u){return u=Ln(u),u.tag=3,u.payload={element:null},u.callback=function(){uf(n,o)},u}function jC(n){return n=Ln(n),n.tag=3,n}function qC(n,o,u,d){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var _=d.value;n.payload=function(){return m(_)},n.callback=function(){YC(o,u,d)}}var T=u.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){YC(o,u,d),typeof m!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var R=d.stack;this.componentDidCatch(d.value,{componentStack:R!==null?R:""})})}function t9(n,o,u,d,m){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=u.alternate,o!==null&&ic(o,u,m,!0),u=Or.current,u!==null){switch(u.tag){case 13:return ys===null?$v():u.alternate===null&&Kt===0&&(Kt=3),u.flags&=-257,u.flags|=65536,u.lanes=m,d===Y_?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([d]):o.add(d),Qv(n,d,m)),!1;case 22:return u.flags|=65536,d===Y_?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([d]):u.add(d)),Qv(n,d,m)),!1}throw Error(r(435,u.tag))}return Qv(n,d,m),$v(),!1}if(pt)return o=Or.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,d!==X_&&(n=Error(r(422),{cause:d}),Yu(Br(n,u)))):(d!==X_&&(o=Error(r(423),{cause:d}),Yu(Br(o,u))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,d=Br(d,u),m=mv(n.stateNode,d,m),Bv(n,m),Kt!==4&&(Kt=2)),!1;var _=Error(r(520),{cause:d});if(_=Br(_,u),hc===null?hc=[_]:hc.push(_),Kt!==4&&(Kt=2),o===null)return!0;d=Br(d,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,n=m&-m,u.lanes|=n,n=mv(u.stateNode,d,n),Bv(u,n),!1;case 1:if(o=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(zn===null||!zn.has(_))))return u.flags|=65536,m&=-m,u.lanes|=m,m=jC(m),qC(m,n,u,d),Bv(u,m),!1}u=u.return}while(u!==null);return!1}var WC=Error(r(461)),Ti=!1;function Bi(n,o,u,d){o.child=n===null?J3(o,null,u,d):Ma(o,n.child,u,d)}function KC(n,o,u,d,m){u=u.render;var _=o.ref;if("ref"in d){var T={};for(var R in d)R!=="ref"&&(T[R]=d[R])}else T=d;return La(o),d=Q_(n,o,u,T,_,m),R=J_(),n!==null&&!Ti?(ev(n,o,m),qs(n,o,m)):(pt&&R&&V_(o),o.flags|=1,Bi(n,o,d,m),o.child)}function $C(n,o,u,d,m){if(n===null){var _=u.type;return typeof _=="function"&&!Iv(_)&&_.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=_,ZC(n,o,_,d,m)):(n=pf(u.type,null,d,o,o.mode,m),n.ref=o.ref,n.return=o,o.child=n)}if(_=n.child,!Av(n,m)){var T=_.memoizedProps;if(u=u.compare,u=u!==null?u:Hu,u(T,d)&&n.ref===o.ref)return qs(n,o,m)}return o.flags|=1,n=Hn(_,d),n.ref=o.ref,n.return=o,o.child=n}function ZC(n,o,u,d,m){if(n!==null){var _=n.memoizedProps;if(Hu(_,d)&&n.ref===o.ref)if(Ti=!1,o.pendingProps=d=_,Av(n,m))(n.flags&131072)!==0&&(Ti=!0);else return o.lanes=n.lanes,qs(n,o,m)}return gv(n,o,u,d,m)}function QC(n,o,u){var d=o.pendingProps,m=d.children,_=(o.stateNode._pendingVisibility&2)!==0,T=n!==null?n.memoizedState:null;if(tc(n,o),d.mode==="hidden"||_){if((o.flags&128)!==0){if(d=T!==null?T.baseLanes|u:u,n!==null){for(m=o.child=n.child,_=0;m!==null;)_=_|m.lanes|m.childLanes,m=m.sibling;o.childLanes=_&~d}else o.childLanes=0,o.child=null;return JC(n,o,d,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},n!==null&&Qd(o,T!==null?T.cachePool:null),T!==null?eC(o,T):j_(),tC(o);else return o.lanes=o.childLanes=536870912,JC(n,o,T!==null?T.baseLanes|u:u,u)}else T!==null?(Qd(o,T.cachePool),eC(o,T),Pn(),o.memoizedState=null):(n!==null&&Qd(o,null),j_(),Pn());return Bi(n,o,m,u),o.child}function JC(n,o,u,d){var m=$_();return m=m===null?null:{parent:pi._currentValue,pool:m},o.memoizedState={baseLanes:u,cachePool:m},n!==null&&Qd(o,null),j_(),tC(o),n!==null&&ic(n,o,d,!0),null}function tc(n,o){var u=o.ref;if(u===null)n!==null&&n.ref!==null&&(o.flags|=2097664);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(n===null||n.ref!==u)&&(o.flags|=2097664)}}function gv(n,o,u,d,m){return La(o),u=Q_(n,o,u,d,void 0,m),d=J_(),n!==null&&!Ti?(ev(n,o,m),qs(n,o,m)):(pt&&d&&V_(o),o.flags|=1,Bi(n,o,u,m),o.child)}function eR(n,o,u,d,m,_){return La(o),o.updateQueue=null,u=aC(o,d,u,m),nC(n),d=J_(),n!==null&&!Ti?(ev(n,o,_),qs(n,o,_)):(pt&&d&&V_(o),o.flags|=1,Bi(n,o,u,_),o.child)}function tR(n,o,u,d,m){if(La(o),o.stateNode===null){var _=Wo,T=u.contextType;typeof T=="object"&&T!==null&&(_=Ui(T)),_=new u(d,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=pv,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=d,_.state=o.memoizedState,_.refs={},Rv(o),T=u.contextType,_.context=typeof T=="object"&&T!==null?Ui(T):Wo,_.state=o.memoizedState,T=u.getDerivedStateFromProps,typeof T=="function"&&(fv(o,u,T,d),_.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(T=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),T!==_.state&&pv.enqueueReplaceState(_,_.state,null),nc(o,d,_,m),sc(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(n===null){_=o.stateNode;var R=o.memoizedProps,F=Fa(u,R);_.props=F;var z=_.context,oe=u.contextType;T=Wo,typeof oe=="object"&&oe!==null&&(T=Ui(oe));var de=u.getDerivedStateFromProps;oe=typeof de=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=o.pendingProps!==R,oe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||z!==T)&&HC(o,_,d,T),Gn=!1;var J=o.memoizedState;_.state=J,nc(o,d,_,m),sc(),z=o.memoizedState,R||J!==z||Gn?(typeof de=="function"&&(fv(o,u,de,d),z=o.memoizedState),(F=Gn||NC(o,u,F,d,J,z,T))?(oe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=z),_.props=d,_.state=z,_.context=T,d=F):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{_=o.stateNode,Mv(n,o),T=o.memoizedProps,oe=Fa(u,T),_.props=oe,de=o.pendingProps,J=_.context,z=u.contextType,F=Wo,typeof z=="object"&&z!==null&&(F=Ui(z)),R=u.getDerivedStateFromProps,(z=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==de||J!==F)&&HC(o,_,d,F),Gn=!1,J=o.memoizedState,_.state=J,nc(o,d,_,m),sc();var ne=o.memoizedState;T!==de||J!==ne||Gn||n!==null&&n.dependencies!==null&&cf(n.dependencies)?(typeof R=="function"&&(fv(o,u,R,d),ne=o.memoizedState),(oe=Gn||NC(o,u,oe,d,J,ne,F)||n!==null&&n.dependencies!==null&&cf(n.dependencies))?(z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,ne,F),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,ne,F)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===n.memoizedProps&&J===n.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&J===n.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ne),_.props=d,_.state=ne,_.context=F,d=oe):(typeof _.componentDidUpdate!="function"||T===n.memoizedProps&&J===n.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&J===n.memoizedState||(o.flags|=1024),d=!1)}return _=d,tc(n,o),d=(o.flags&128)!==0,_||d?(_=o.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,n!==null&&d?(o.child=Ma(o,n.child,null,m),o.child=Ma(o,null,u,m)):Bi(n,o,u,m),o.memoizedState=_.state,n=o.child):n=qs(n,o,m),n}function iR(n,o,u,d){return Xu(),o.flags|=256,Bi(n,o,u,d),o.child}var yv={dehydrated:null,treeContext:null,retryLane:0};function _v(n){return{baseLanes:n,cachePool:sC()}}function vv(n,o,u){return n=n!==null?n.childLanes&~u:0,o&&(n|=kr),n}function rR(n,o,u){var d=o.pendingProps,m=!1,_=(o.flags&128)!==0,T;if((T=_)||(T=n!==null&&n.memoizedState===null?!1:(fi.current&2)!==0),T&&(m=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,n===null){if(pt){if(m?Bn(o):Pn(),pt){var R=Mi,F;if(F=R){e:{for(F=R,R=gs;F.nodeType!==8;){if(!R){R=null;break e}if(F=is(F.nextSibling),F===null){R=null;break e}}R=F}R!==null?(o.memoizedState={dehydrated:R,treeContext:wa!==null?{id:zs,overflow:Xs}:null,retryLane:536870912},F=Lr(18,null,null,0),F.stateNode=R,F.return=o,o.child=F,Wi=o,Mi=null,F=!0):F=!1}F||Ra(o)}if(R=o.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return R.data==="$!"?o.lanes=16:o.lanes=536870912,null;Ys(o)}return R=d.children,d=d.fallback,m?(Pn(),m=o.mode,R=xv({mode:"hidden",children:R},m),d=Ia(d,m,u,null),R.return=o,d.return=o,R.sibling=d,o.child=R,m=o.child,m.memoizedState=_v(u),m.childLanes=vv(n,T,u),o.memoizedState=yv,d):(Bn(o),bv(o,R))}if(F=n.memoizedState,F!==null&&(R=F.dehydrated,R!==null)){if(_)o.flags&256?(Bn(o),o.flags&=-257,o=Tv(n,o,u)):o.memoizedState!==null?(Pn(),o.child=n.child,o.flags|=128,o=null):(Pn(),m=d.fallback,R=o.mode,d=xv({mode:"visible",children:d.children},R),m=Ia(m,R,u,null),m.flags|=2,d.return=o,m.return=o,d.sibling=m,o.child=d,Ma(o,n.child,null,u),d=o.child,d.memoizedState=_v(u),d.childLanes=vv(n,T,u),o.memoizedState=yv,o=m);else if(Bn(o),R.data==="$!"){if(T=R.nextSibling&&R.nextSibling.dataset,T)var z=T.dgst;T=z,d=Error(r(419)),d.stack="",d.digest=T,Yu({value:d,source:null,stack:null}),o=Tv(n,o,u)}else if(Ti||ic(n,o,u,!1),T=(u&n.childLanes)!==0,Ti||T){if(T=Bt,T!==null){if(d=u&-u,(d&42)!==0)d=1;else switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=64;break;case 268435456:d=134217728;break;default:d=0}if(d=(d&(T.suspendedLanes|u))!==0?0:d,d!==0&&d!==F.retryLane)throw F.retryLane=d,Mn(n,d),Ki(T,n,d),WC}R.data==="$?"||$v(),o=Tv(n,o,u)}else R.data==="$?"?(o.flags|=128,o.child=n.child,o=g9.bind(null,n),R._reactRetry=o,o=null):(n=F.treeContext,Mi=is(R.nextSibling),Wi=o,pt=!0,es=null,gs=!1,n!==null&&(Pr[Dr++]=zs,Pr[Dr++]=Xs,Pr[Dr++]=wa,zs=n.id,Xs=n.overflow,wa=o),o=bv(o,d.children),o.flags|=4096);return o}return m?(Pn(),m=d.fallback,R=o.mode,F=n.child,z=F.sibling,d=Hn(F,{mode:"hidden",children:d.children}),d.subtreeFlags=F.subtreeFlags&31457280,z!==null?m=Hn(z,m):(m=Ia(m,R,u,null),m.flags|=2),m.return=o,d.return=o,d.sibling=m,o.child=d,d=m,m=o.child,R=n.child.memoizedState,R===null?R=_v(u):(F=R.cachePool,F!==null?(z=pi._currentValue,F=F.parent!==z?{parent:z,pool:z}:F):F=sC(),R={baseLanes:R.baseLanes|u,cachePool:F}),m.memoizedState=R,m.childLanes=vv(n,T,u),o.memoizedState=yv,d):(Bn(o),u=n.child,n=u.sibling,u=Hn(u,{mode:"visible",children:d.children}),u.return=o,u.sibling=null,n!==null&&(T=o.deletions,T===null?(o.deletions=[n],o.flags|=16):T.push(n)),o.child=u,o.memoizedState=null,u)}function bv(n,o){return o=xv({mode:"visible",children:o},n.mode),o.return=n,n.child=o}function xv(n,o){return MR(n,o,0,null)}function Tv(n,o,u){return Ma(o,n.child,null,u),n=bv(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function sR(n,o,u){n.lanes|=o;var d=n.alternate;d!==null&&(d.lanes|=o),wv(n.return,o,u)}function Sv(n,o,u,d,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=u,_.tailMode=m)}function nR(n,o,u){var d=o.pendingProps,m=d.revealOrder,_=d.tail;if(Bi(n,o,d.children,u),d=fi.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sR(n,u,o);else if(n.tag===19)sR(n,u,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}switch(Te(fi,d),m){case"forwards":for(u=o.child,m=null;u!==null;)n=u.alternate,n!==null&&Zd(n)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),Sv(o,!1,m,u,_);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(n=m.alternate,n!==null&&Zd(n)===null){o.child=m;break}n=m.sibling,m.sibling=u,u=m,m=n}Sv(o,!0,u,null,_);break;case"together":Sv(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function qs(n,o,u){if(n!==null&&(o.dependencies=n.dependencies),Vn|=o.lanes,(u&o.childLanes)===0)if(n!==null){if(ic(n,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(n!==null&&o.child!==n.child)throw Error(r(153));if(o.child!==null){for(n=o.child,u=Hn(n,n.pendingProps),o.child=u,u.return=o;n.sibling!==null;)n=n.sibling,u=u.sibling=Hn(n,n.pendingProps),u.return=o;u.sibling=null}return o.child}function Av(n,o){return(n.lanes&o)!==0?!0:(n=n.dependencies,!!(n!==null&&cf(n)))}function i9(n,o,u){switch(o.tag){case 3:ft(o,o.stateNode.containerInfo),Fn(o,pi,n.memoizedState.cache),Xu();break;case 27:case 5:Fe(o);break;case 4:ft(o,o.stateNode.containerInfo);break;case 10:Fn(o,o.type,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Bn(o),o.flags|=128,null):(u&o.child.childLanes)!==0?rR(n,o,u):(Bn(o),n=qs(n,o,u),n!==null?n.sibling:null);Bn(o);break;case 19:var m=(n.flags&128)!==0;if(d=(u&o.childLanes)!==0,d||(ic(n,o,u,!1),d=(u&o.childLanes)!==0),m){if(d)return nR(n,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Te(fi,fi.current),d)break;return null;case 22:case 23:return o.lanes=0,QC(n,o,u);case 24:Fn(o,pi,n.memoizedState.cache)}return qs(n,o,u)}function aR(n,o,u){if(n!==null)if(n.memoizedProps!==o.pendingProps)Ti=!0;else{if(!Av(n,u)&&(o.flags&128)===0)return Ti=!1,i9(n,o,u);Ti=(n.flags&131072)!==0}else Ti=!1,pt&&(o.flags&1048576)!==0&&X3(o,jd,o.index);switch(o.lanes=0,o.tag){case 16:e:{n=o.pendingProps;var d=o.elementType,m=d._init;if(d=m(d._payload),o.type=d,typeof d=="function")Iv(d)?(n=Fa(d,n),o.tag=1,o=tR(null,o,d,n,u)):(o.tag=0,o=gv(null,o,d,n,u));else{if(d!=null){if(m=d.$$typeof,m===x){o.tag=11,o=KC(null,o,d,n,u);break e}else if(m===w){o.tag=14,o=$C(null,o,d,n,u);break e}}throw o=Z(d)||d,Error(r(306,o,""))}}return o;case 0:return gv(n,o,o.type,o.pendingProps,u);case 1:return d=o.type,m=Fa(d,o.pendingProps),tR(n,o,d,m,u);case 3:e:{if(ft(o,o.stateNode.containerInfo),n===null)throw Error(r(387));var _=o.pendingProps;m=o.memoizedState,d=m.element,Mv(n,o),nc(o,_,null,u);var T=o.memoizedState;if(_=T.cache,Fn(o,pi,_),_!==m.cache&&Cv(o,[pi],u,!0),sc(),_=T.element,m.isDehydrated)if(m={element:_,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=m,o.memoizedState=m,o.flags&256){o=iR(n,o,_,u);break e}else if(_!==d){d=Br(Error(r(424)),o),Yu(d),o=iR(n,o,_,u);break e}else for(Mi=is(o.stateNode.containerInfo.firstChild),Wi=o,pt=!0,es=null,gs=!0,u=J3(o,null,_,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Xu(),_===d){o=qs(n,o,u);break e}Bi(n,o,_,u)}o=o.child}return o;case 26:return tc(n,o),n===null?(u=uM(o.type,null,o.pendingProps,null))?o.memoizedState=u:pt||(u=o.type,n=o.pendingProps,d=wf(at.current).createElement(u),d[Rt]=o,d[qt]=n,Pi(d,u,n),xi(d),o.stateNode=d):o.memoizedState=uM(o.type,n.memoizedProps,o.pendingProps,n.memoizedState),null;case 27:return Fe(o),n===null&&pt&&(d=o.stateNode=aM(o.type,o.pendingProps,at.current),Wi=o,gs=!0,Mi=is(d.firstChild)),d=o.pendingProps.children,n!==null||pt?Bi(n,o,d,u):o.child=Ma(o,null,d,u),tc(n,o),o.child;case 5:return n===null&&pt&&((m=d=Mi)&&(d=D9(d,o.type,o.pendingProps,gs),d!==null?(o.stateNode=d,Wi=o,Mi=is(d.firstChild),gs=!1,m=!0):m=!1),m||Ra(o)),Fe(o),m=o.type,_=o.pendingProps,T=n!==null?n.memoizedProps:null,d=_.children,cb(m,_)?d=null:T!==null&&cb(m,T)&&(o.flags|=32),o.memoizedState!==null&&(m=Q_(n,o,KV,null,null,u),bc._currentValue=m),tc(n,o),Bi(n,o,d,u),o.child;case 6:return n===null&&pt&&((n=u=Mi)&&(u=O9(u,o.pendingProps,gs),u!==null?(o.stateNode=u,Wi=o,Mi=null,n=!0):n=!1),n||Ra(o)),null;case 13:return rR(n,o,u);case 4:return ft(o,o.stateNode.containerInfo),d=o.pendingProps,n===null?o.child=Ma(o,null,d,u):Bi(n,o,d,u),o.child;case 11:return KC(n,o,o.type,o.pendingProps,u);case 7:return Bi(n,o,o.pendingProps,u),o.child;case 8:return Bi(n,o,o.pendingProps.children,u),o.child;case 12:return Bi(n,o,o.pendingProps.children,u),o.child;case 10:return d=o.pendingProps,Fn(o,o.type,d.value),Bi(n,o,d.children,u),o.child;case 9:return m=o.type._context,d=o.pendingProps.children,La(o),m=Ui(m),d=d(m),o.flags|=1,Bi(n,o,d,u),o.child;case 14:return $C(n,o,o.type,o.pendingProps,u);case 15:return ZC(n,o,o.type,o.pendingProps,u);case 19:return nR(n,o,u);case 22:return QC(n,o,u);case 24:return La(o),d=Ui(pi),n===null?(m=$_(),m===null&&(m=Bt,_=W_(),m.pooledCache=_,_.refCount++,_!==null&&(m.pooledCacheLanes|=u),m=_),o.memoizedState={parent:d,cache:m},Rv(o),Fn(o,pi,m)):((n.lanes&u)!==0&&(Mv(n,o),nc(o,null,null,u),sc()),m=n.memoizedState,_=o.memoizedState,m.parent!==d?(m={parent:d,cache:d},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),Fn(o,pi,d)):(d=_.cache,Fn(o,pi,d),d!==m.cache&&Cv(o,[pi],u,!0))),Bi(n,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}var Ev=Ye(null),Ga=null,Ws=null;function Fn(n,o,u){Te(Ev,o._currentValue),o._currentValue=u}function Ks(n){n._currentValue=Ev.current,Ee(Ev)}function wv(n,o,u){for(;n!==null;){var d=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),n===u)break;n=n.return}}function Cv(n,o,u,d){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var _=m.dependencies;if(_!==null){var T=m.child;_=_.firstContext;e:for(;_!==null;){var R=_;_=m;for(var F=0;F<o.length;F++)if(R.context===o[F]){_.lanes|=u,R=_.alternate,R!==null&&(R.lanes|=u),wv(_.return,u,n),d||(T=null);break e}_=R.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(r(341));T.lanes|=u,_=T.alternate,_!==null&&(_.lanes|=u),wv(T,u,n),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===n){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function ic(n,o,u,d){n=null;for(var m=o,_=!1;m!==null;){if(!_){if((m.flags&524288)!==0)_=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var R=m.type;ur(m.pendingProps.value,T.value)||(n!==null?n.push(R):n=[R])}}else if(m===Ot.current){if(T=m.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(bc):n=[bc])}m=m.return}n!==null&&Cv(o,n,u,d),o.flags|=262144}function cf(n){for(n=n.firstContext;n!==null;){if(!ur(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function La(n){Ga=n,Ws=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ui(n){return oR(Ga,n)}function hf(n,o){return Ga===null&&La(n),oR(n,o)}function oR(n,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Ws===null){if(n===null)throw Error(r(308));Ws=o,n.dependencies={lanes:0,firstContext:o},n.flags|=524288}else Ws=Ws.next=o;return u}var Gn=!1;function Rv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mv(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ln(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function kn(n,o,u){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(It&2)!==0){var m=d.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o,o=Xd(n),V3(n,null,u),o}return zd(n,d,o,u),Xd(n)}function rc(n,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194176)!==0)){var d=o.lanes;d&=n.pendingLanes,u|=d,o.lanes=u,Er(n,u)}}function Bv(n,o){var u=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var T={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?m=_=T:_=_.next=T,u=u.next}while(u!==null);_===null?m=_=o:_=_.next=o}else m=_=o;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:d.shared,callbacks:d.callbacks},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=o:n.next=o,u.lastBaseUpdate=o}var Pv=!1;function sc(){if(Pv){var n=el;if(n!==null)throw n}}function nc(n,o,u,d){Pv=!1;var m=n.updateQueue;Gn=!1;var _=m.firstBaseUpdate,T=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var F=R,z=F.next;F.next=null,T===null?_=z:T.next=z,T=F;var oe=n.alternate;oe!==null&&(oe=oe.updateQueue,R=oe.lastBaseUpdate,R!==T&&(R===null?oe.firstBaseUpdate=z:R.next=z,oe.lastBaseUpdate=F))}if(_!==null){var de=m.baseState;T=0,oe=z=F=null,R=_;do{var J=R.lane&-536870913,ne=J!==R.lane;if(ne?(lt&J)===J:(d&J)===J){J!==0&&J===Jo&&(Pv=!0),oe!==null&&(oe=oe.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Me=n,je=R;J=o;var $t=u;switch(je.tag){case 1:if(Me=je.payload,typeof Me=="function"){de=Me.call($t,de,J);break e}de=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=je.payload,J=typeof Me=="function"?Me.call($t,de,J):Me,J==null)break e;de=L({},de,J);break e;case 2:Gn=!0}}J=R.callback,J!==null&&(n.flags|=64,ne&&(n.flags|=8192),ne=m.callbacks,ne===null?m.callbacks=[J]:ne.push(J))}else ne={lane:J,tag:R.tag,payload:R.payload,callback:R.callback,next:null},oe===null?(z=oe=ne,F=de):oe=oe.next=ne,T|=J;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;ne=R,R=ne.next,ne.next=null,m.lastBaseUpdate=ne,m.shared.pending=null}}while(!0);oe===null&&(F=de),m.baseState=F,m.firstBaseUpdate=z,m.lastBaseUpdate=oe,_===null&&(m.shared.lanes=0),Vn|=T,n.lanes=T,n.memoizedState=de}}function lR(n,o){if(typeof n!="function")throw Error(r(191,n));n.call(o)}function uR(n,o){var u=n.callbacks;if(u!==null)for(n.callbacks=null,n=0;n<u.length;n++)lR(u[n],o)}function ac(n,o){try{var u=o.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&n)===n){d=void 0;var _=u.create,T=u.inst;d=_(),T.destroy=d}u=u.next}while(u!==m)}}catch(R){Mt(o,o.return,R)}}function In(n,o,u){try{var d=o.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var _=m.next;d=_;do{if((d.tag&n)===n){var T=d.inst,R=T.destroy;if(R!==void 0){T.destroy=void 0,m=o;var F=u;try{R()}catch(z){Mt(m,F,z)}}}d=d.next}while(d!==_)}}catch(z){Mt(o,o.return,z)}}function cR(n){var o=n.updateQueue;if(o!==null){var u=n.stateNode;try{uR(o,u)}catch(d){Mt(n,n.return,d)}}}function hR(n,o,u){u.props=Fa(n.type,n.memoizedProps),u.state=n.memoizedState;try{u.componentWillUnmount()}catch(d){Mt(n,o,d)}}function ka(n,o){try{var u=n.ref;if(u!==null){var d=n.stateNode;switch(n.tag){case 26:case 27:case 5:var m=d;break;default:m=d}typeof u=="function"?n.refCleanup=u(m):u.current=m}}catch(_){Mt(n,o,_)}}function cr(n,o){var u=n.ref,d=n.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(m){Mt(n,o,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){Mt(n,o,m)}else u.current=null}function dR(n){var o=n.type,u=n.memoizedProps,d=n.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(m){Mt(n,n.return,m)}}function fR(n,o,u){try{var d=n.stateNode;C9(d,n.type,u,o),d[qt]=o}catch(m){Mt(n,n.return,m)}}function pR(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function Dv(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||pR(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ov(n,o,u){var d=n.tag;if(d===5||d===6)n=n.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(n,o):u.insertBefore(n,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(n,u)):(o=u,o.appendChild(n)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ef));else if(d!==4&&d!==27&&(n=n.child,n!==null))for(Ov(n,o,u),n=n.sibling;n!==null;)Ov(n,o,u),n=n.sibling}function df(n,o,u){var d=n.tag;if(d===5||d===6)n=n.stateNode,o?u.insertBefore(n,o):u.appendChild(n);else if(d!==4&&d!==27&&(n=n.child,n!==null))for(df(n,o,u),n=n.sibling;n!==null;)df(n,o,u),n=n.sibling}var $s=!1,Wt=!1,Fv=!1,mR=typeof WeakSet=="function"?WeakSet:Set,Si=null,gR=!1;function r9(n,o){if(n=n.containerInfo,lb=Df,n=O3(n),L_(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var T=0,R=-1,F=-1,z=0,oe=0,de=n,J=null;t:for(;;){for(var ne;de!==u||m!==0&&de.nodeType!==3||(R=T+m),de!==_||d!==0&&de.nodeType!==3||(F=T+d),de.nodeType===3&&(T+=de.nodeValue.length),(ne=de.firstChild)!==null;)J=de,de=ne;for(;;){if(de===n)break t;if(J===u&&++z===m&&(R=T),J===_&&++oe===d&&(F=T),(ne=de.nextSibling)!==null)break;de=J,J=de.parentNode}de=ne}u=R===-1||F===-1?null:{start:R,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(ub={focusedElem:n,selectionRange:u},Df=!1,Si=o;Si!==null;)if(o=Si,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,Si=n;else for(;Si!==null;){switch(o=Si,_=o.alternate,n=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&_!==null){n=void 0,u=o,m=_.memoizedProps,_=_.memoizedState,d=u.stateNode;try{var Me=Fa(u.type,m,u.elementType===u.type);n=d.getSnapshotBeforeUpdate(Me,_),d.__reactInternalSnapshotBeforeUpdate=n}catch(je){Mt(u,u.return,je)}}break;case 3:if((n&1024)!==0){if(n=o.stateNode.containerInfo,u=n.nodeType,u===9)fb(n);else if(u===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":fb(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=o.sibling,n!==null){n.return=o.return,Si=n;break}Si=o.return}return Me=gR,gR=!1,Me}function yR(n,o,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:Qs(n,u),d&4&&ac(5,u);break;case 1:if(Qs(n,u),d&4)if(n=u.stateNode,o===null)try{n.componentDidMount()}catch(R){Mt(u,u.return,R)}else{var m=Fa(u.type,o.memoizedProps);o=o.memoizedState;try{n.componentDidUpdate(m,o,n.__reactInternalSnapshotBeforeUpdate)}catch(R){Mt(u,u.return,R)}}d&64&&cR(u),d&512&&ka(u,u.return);break;case 3:if(Qs(n,u),d&64&&(d=u.updateQueue,d!==null)){if(n=null,u.child!==null)switch(u.child.tag){case 27:case 5:n=u.child.stateNode;break;case 1:n=u.child.stateNode}try{uR(d,n)}catch(R){Mt(u,u.return,R)}}break;case 26:Qs(n,u),d&512&&ka(u,u.return);break;case 27:case 5:Qs(n,u),o===null&&d&4&&dR(u),d&512&&ka(u,u.return);break;case 12:Qs(n,u);break;case 13:Qs(n,u),d&4&&bR(n,u);break;case 22:if(m=u.memoizedState!==null||$s,!m){o=o!==null&&o.memoizedState!==null||Wt;var _=$s,T=Wt;$s=m,(Wt=o)&&!T?Un(n,u,(u.subtreeFlags&8772)!==0):Qs(n,u),$s=_,Wt=T}d&512&&(u.memoizedProps.mode==="manual"?ka(u,u.return):cr(u,u.return));break;default:Qs(n,u)}}function _R(n){var o=n.alternate;o!==null&&(n.alternate=null,_R(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&b_(o)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ai=null,hr=!1;function Zs(n,o,u){for(u=u.child;u!==null;)vR(n,o,u),u=u.sibling}function vR(n,o,u){if(ki&&typeof ki.onCommitFiberUnmount=="function")try{ki.onCommitFiberUnmount(Us,u)}catch{}switch(u.tag){case 26:Wt||cr(u,o),Zs(n,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Wt||cr(u,o);var d=ai,m=hr;for(ai=u.stateNode,Zs(n,o,u),u=u.stateNode,o=u.attributes;o.length;)u.removeAttributeNode(o[0]);b_(u),ai=d,hr=m;break;case 5:Wt||cr(u,o);case 6:m=ai;var _=hr;if(ai=null,Zs(n,o,u),ai=m,hr=_,ai!==null)if(hr)try{n=ai,d=u.stateNode,n.nodeType===8?n.parentNode.removeChild(d):n.removeChild(d)}catch(T){Mt(u,o,T)}else try{ai.removeChild(u.stateNode)}catch(T){Mt(u,o,T)}break;case 18:ai!==null&&(hr?(o=ai,u=u.stateNode,o.nodeType===8?db(o.parentNode,u):o.nodeType===1&&db(o,u),Ac(o)):db(ai,u.stateNode));break;case 4:d=ai,m=hr,ai=u.stateNode.containerInfo,hr=!0,Zs(n,o,u),ai=d,hr=m;break;case 0:case 11:case 14:case 15:Wt||In(2,u,o),Wt||In(4,u,o),Zs(n,o,u);break;case 1:Wt||(cr(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"&&hR(u,o,d)),Zs(n,o,u);break;case 21:Zs(n,o,u);break;case 22:Wt||cr(u,o),Wt=(d=Wt)||u.memoizedState!==null,Zs(n,o,u),Wt=d;break;default:Zs(n,o,u)}}function bR(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ac(n)}catch(u){Mt(o,o.return,u)}}function s9(n){switch(n.tag){case 13:case 19:var o=n.stateNode;return o===null&&(o=n.stateNode=new mR),o;case 22:return n=n.stateNode,o=n._retryCache,o===null&&(o=n._retryCache=new mR),o;default:throw Error(r(435,n.tag))}}function Gv(n,o){var u=s9(n);o.forEach(function(d){var m=y9.bind(null,n,d);u.has(d)||(u.add(d),d.then(m,m))})}function Fr(n,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d],_=n,T=o,R=T;e:for(;R!==null;){switch(R.tag){case 27:case 5:ai=R.stateNode,hr=!1;break e;case 3:ai=R.stateNode.containerInfo,hr=!0;break e;case 4:ai=R.stateNode.containerInfo,hr=!0;break e}R=R.return}if(ai===null)throw Error(r(160));vR(_,T,m),ai=null,hr=!1,_=m.alternate,_!==null&&(_.return=null),m.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)xR(o,n),o=o.sibling}var ts=null;function xR(n,o){var u=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Fr(o,n),Gr(n),d&4&&(In(3,n,n.return),ac(3,n),In(5,n,n.return));break;case 1:Fr(o,n),Gr(n),d&512&&(Wt||u===null||cr(u,u.return)),d&64&&$s&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(u=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var m=ts;if(Fr(o,n),Gr(n),d&512&&(Wt||u===null||cr(u,u.return)),d&4){var _=u!==null?u.memoizedState:null;if(d=n.memoizedState,u===null)if(d===null)if(n.stateNode===null){e:{d=n.type,u=n.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":_=m.getElementsByTagName("title")[0],(!_||_[Du]||_[Rt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=m.createElement(d),m.head.insertBefore(_,m.querySelector("head > title"))),Pi(_,d,u),_[Rt]=n,xi(_),d=_;break e;case"link":var T=dM("link","href",m).get(d+(u.href||""));if(T){for(var R=0;R<T.length;R++)if(_=T[R],_.getAttribute("href")===(u.href==null?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){T.splice(R,1);break t}}_=m.createElement(d),Pi(_,d,u),m.head.appendChild(_);break;case"meta":if(T=dM("meta","content",m).get(d+(u.content||""))){for(R=0;R<T.length;R++)if(_=T[R],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){T.splice(R,1);break t}}_=m.createElement(d),Pi(_,d,u),m.head.appendChild(_);break;default:throw Error(r(468,d))}_[Rt]=n,xi(_),d=_}n.stateNode=d}else fM(m,n.type,n.stateNode);else n.stateNode=hM(m,d,n.memoizedProps);else _!==d?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,d===null?fM(m,n.type,n.stateNode):hM(m,d,n.memoizedProps)):d===null&&n.stateNode!==null&&fR(n,n.memoizedProps,u.memoizedProps)}break;case 27:if(d&4&&n.alternate===null){m=n.stateNode,_=n.memoizedProps;try{for(var F=m.firstChild;F;){var z=F.nextSibling,oe=F.nodeName;F[Du]||oe==="HEAD"||oe==="BODY"||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&F.rel.toLowerCase()==="stylesheet"||m.removeChild(F),F=z}for(var de=n.type,J=m.attributes;J.length;)m.removeAttributeNode(J[0]);Pi(m,de,_),m[Rt]=n,m[qt]=_}catch(Me){Mt(n,n.return,Me)}}case 5:if(Fr(o,n),Gr(n),d&512&&(Wt||u===null||cr(u,u.return)),n.flags&32){m=n.stateNode;try{Ho(m,"")}catch(Me){Mt(n,n.return,Me)}}d&4&&n.stateNode!=null&&(m=n.memoizedProps,fR(n,m,u!==null?u.memoizedProps:m)),d&1024&&(Fv=!0);break;case 6:if(Fr(o,n),Gr(n),d&4){if(n.stateNode===null)throw Error(r(162));d=n.memoizedProps,u=n.stateNode;try{u.nodeValue=d}catch(Me){Mt(n,n.return,Me)}}break;case 3:if(Mf=null,m=ts,ts=Cf(o.containerInfo),Fr(o,n),ts=m,Gr(n),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Ac(o.containerInfo)}catch(Me){Mt(n,n.return,Me)}Fv&&(Fv=!1,TR(n));break;case 4:d=ts,ts=Cf(n.stateNode.containerInfo),Fr(o,n),Gr(n),ts=d;break;case 12:Fr(o,n),Gr(n);break;case 13:Fr(o,n),Gr(n),n.child.flags&8192&&n.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Xv=bi()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Gv(n,d)));break;case 22:if(d&512&&(Wt||u===null||cr(u,u.return)),F=n.memoizedState!==null,z=u!==null&&u.memoizedState!==null,oe=$s,de=Wt,$s=oe||F,Wt=de||z,Fr(o,n),Wt=de,$s=oe,Gr(n),o=n.stateNode,o._current=n,o._visibility&=-3,o._visibility|=o._pendingVisibility&2,d&8192&&(o._visibility=F?o._visibility&-2:o._visibility|1,F&&(o=$s||Wt,u===null||z||o||sl(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))e:for(u=null,o=n;;){if(o.tag===5||o.tag===26||o.tag===27){if(u===null){z=u=o;try{if(m=z.stateNode,F)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=z.stateNode,R=z.memoizedProps.style;var ne=R!=null&&R.hasOwnProperty("display")?R.display:null;T.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Me){Mt(z,z.return,Me)}}}else if(o.tag===6){if(u===null){z=o;try{z.stateNode.nodeValue=F?"":z.memoizedProps}catch(Me){Mt(z,z.return,Me)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break e;for(;o.sibling===null;){if(o.return===null||o.return===n)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=n.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,Gv(n,u))));break;case 19:Fr(o,n),Gr(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Gv(n,d)));break;case 21:break;default:Fr(o,n),Gr(n)}}function Gr(n){var o=n.flags;if(o&2){try{if(n.tag!==27){e:{for(var u=n.return;u!==null;){if(pR(u)){var d=u;break e}u=u.return}throw Error(r(160))}switch(d.tag){case 27:var m=d.stateNode,_=Dv(n);df(n,_,m);break;case 5:var T=d.stateNode;d.flags&32&&(Ho(T,""),d.flags&=-33);var R=Dv(n);df(n,R,T);break;case 3:case 4:var F=d.stateNode.containerInfo,z=Dv(n);Ov(n,z,F);break;default:throw Error(r(161))}}}catch(oe){Mt(n,n.return,oe)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function TR(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var o=n;TR(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),n=n.sibling}}function Qs(n,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)yR(n,o.alternate,o),o=o.sibling}function sl(n){for(n=n.child;n!==null;){var o=n;switch(o.tag){case 0:case 11:case 14:case 15:In(4,o,o.return),sl(o);break;case 1:cr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&hR(o,o.return,u),sl(o);break;case 26:case 27:case 5:cr(o,o.return),sl(o);break;case 22:cr(o,o.return),o.memoizedState===null&&sl(o);break;default:sl(o)}n=n.sibling}}function Un(n,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,m=n,_=o,T=_.flags;switch(_.tag){case 0:case 11:case 15:Un(m,_,u),ac(4,_);break;case 1:if(Un(m,_,u),d=_,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(z){Mt(d,d.return,z)}if(d=_,m=d.updateQueue,m!==null){var R=d.stateNode;try{var F=m.shared.hiddenCallbacks;if(F!==null)for(m.shared.hiddenCallbacks=null,m=0;m<F.length;m++)lR(F[m],R)}catch(z){Mt(d,d.return,z)}}u&&T&64&&cR(_),ka(_,_.return);break;case 26:case 27:case 5:Un(m,_,u),u&&d===null&&T&4&&dR(_),ka(_,_.return);break;case 12:Un(m,_,u);break;case 13:Un(m,_,u),u&&T&4&&bR(m,_);break;case 22:_.memoizedState===null&&Un(m,_,u),ka(_,_.return);break;default:Un(m,_,u)}o=o.sibling}}function Lv(n,o){var u=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),n=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(n=o.memoizedState.cachePool.pool),n!==u&&(n!=null&&n.refCount++,u!=null&&$u(u))}function kv(n,o){n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&$u(n))}function Nn(n,o,u,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)SR(n,o,u,d),o=o.sibling}function SR(n,o,u,d){var m=o.flags;switch(o.tag){case 0:case 11:case 15:Nn(n,o,u,d),m&2048&&ac(9,o);break;case 3:Nn(n,o,u,d),m&2048&&(n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&$u(n)));break;case 12:if(m&2048){Nn(n,o,u,d),n=o.stateNode;try{var _=o.memoizedProps,T=_.id,R=_.onPostCommit;typeof R=="function"&&R(T,o.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(F){Mt(o,o.return,F)}}else Nn(n,o,u,d);break;case 23:break;case 22:_=o.stateNode,o.memoizedState!==null?_._visibility&4?Nn(n,o,u,d):oc(n,o):_._visibility&4?Nn(n,o,u,d):(_._visibility|=4,nl(n,o,u,d,(o.subtreeFlags&10256)!==0)),m&2048&&Lv(o.alternate,o);break;case 24:Nn(n,o,u,d),m&2048&&kv(o.alternate,o);break;default:Nn(n,o,u,d)}}function nl(n,o,u,d,m){for(m=m&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var _=n,T=o,R=u,F=d,z=T.flags;switch(T.tag){case 0:case 11:case 15:nl(_,T,R,F,m),ac(8,T);break;case 23:break;case 22:var oe=T.stateNode;T.memoizedState!==null?oe._visibility&4?nl(_,T,R,F,m):oc(_,T):(oe._visibility|=4,nl(_,T,R,F,m)),m&&z&2048&&Lv(T.alternate,T);break;case 24:nl(_,T,R,F,m),m&&z&2048&&kv(T.alternate,T);break;default:nl(_,T,R,F,m)}o=o.sibling}}function oc(n,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=n,d=o,m=d.flags;switch(d.tag){case 22:oc(u,d),m&2048&&Lv(d.alternate,d);break;case 24:oc(u,d),m&2048&&kv(d.alternate,d);break;default:oc(u,d)}o=o.sibling}}var lc=8192;function al(n){if(n.subtreeFlags&lc)for(n=n.child;n!==null;)AR(n),n=n.sibling}function AR(n){switch(n.tag){case 26:al(n),n.flags&lc&&n.memoizedState!==null&&j9(ts,n.memoizedState,n.memoizedProps);break;case 5:al(n);break;case 3:case 4:var o=ts;ts=Cf(n.stateNode.containerInfo),al(n),ts=o;break;case 22:n.memoizedState===null&&(o=n.alternate,o!==null&&o.memoizedState!==null?(o=lc,lc=16777216,al(n),lc=o):al(n));break;default:al(n)}}function ER(n){var o=n.alternate;if(o!==null&&(n=o.child,n!==null)){o.child=null;do o=n.sibling,n.sibling=null,n=o;while(n!==null)}}function uc(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];Si=d,CR(d,n)}ER(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)wR(n),n=n.sibling}function wR(n){switch(n.tag){case 0:case 11:case 15:uc(n),n.flags&2048&&In(9,n,n.return);break;case 3:uc(n);break;case 12:uc(n);break;case 22:var o=n.stateNode;n.memoizedState!==null&&o._visibility&4&&(n.return===null||n.return.tag!==13)?(o._visibility&=-5,ff(n)):uc(n);break;default:uc(n)}}function ff(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];Si=d,CR(d,n)}ER(n)}for(n=n.child;n!==null;){switch(o=n,o.tag){case 0:case 11:case 15:In(8,o,o.return),ff(o);break;case 22:u=o.stateNode,u._visibility&4&&(u._visibility&=-5,ff(o));break;default:ff(o)}n=n.sibling}}function CR(n,o){for(;Si!==null;){var u=Si;switch(u.tag){case 0:case 11:case 15:In(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:$u(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,Si=d;else e:for(u=n;Si!==null;){d=Si;var m=d.sibling,_=d.return;if(_R(d),d===u){Si=null;break e}if(m!==null){m.return=_,Si=m;break e}Si=_}}}function n9(n,o,u,d){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(n,o,u,d){return new n9(n,o,u,d)}function Iv(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Hn(n,o){var u=n.alternate;return u===null?(u=Lr(n.tag,o,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=o,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&31457280,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,o=n.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u.refCleanup=n.refCleanup,u}function RR(n,o){n.flags&=31457282;var u=n.alternate;return u===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=u.childLanes,n.lanes=u.lanes,n.child=u.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,n.type=u.type,o=u.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n}function pf(n,o,u,d,m,_){var T=0;if(d=n,typeof n=="function")Iv(n)&&(T=1);else if(typeof n=="string")T=X9(n,u,it.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case h:return Ia(u.children,m,_,o);case f:T=8,m|=24;break;case p:return n=Lr(12,u,o,m|2),n.elementType=p,n.lanes=_,n;case A:return n=Lr(13,u,o,m),n.elementType=A,n.lanes=_,n;case S:return n=Lr(19,u,o,m),n.elementType=S,n.lanes=_,n;case B:return MR(u,m,_,o);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case g:case v:T=10;break e;case y:T=9;break e;case x:T=11;break e;case w:T=14;break e;case E:T=16,d=null;break e}T=29,u=Error(r(130,n===null?"null":typeof n,"")),d=null}return o=Lr(T,u,o,m),o.elementType=n,o.type=d,o.lanes=_,o}function Ia(n,o,u,d){return n=Lr(7,n,d,o),n.lanes=u,n}function MR(n,o,u,d){n=Lr(22,n,d,o),n.elementType=B,n.lanes=u;var m={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var _=m._current;if(_===null)throw Error(r(456));if((m._pendingVisibility&2)===0){var T=Mn(_,2);T!==null&&(m._pendingVisibility|=2,Ki(T,_,2))}},attach:function(){var _=m._current;if(_===null)throw Error(r(456));if((m._pendingVisibility&2)!==0){var T=Mn(_,2);T!==null&&(m._pendingVisibility&=-3,Ki(T,_,2))}}};return n.stateNode=m,n}function Uv(n,o,u){return n=Lr(6,n,null,o),n.lanes=u,n}function Nv(n,o,u){return o=Lr(4,n.children!==null?n.children:[],n.key,o),o.lanes=u,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}function Js(n){n.flags|=4}function BR(n,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!pM(o)){if(o=Or.current,o!==null&&((lt&4194176)===lt?ys!==null:(lt&62914560)!==lt&&(lt&536870912)===0||o!==ys))throw qu=Y_,q3;n.flags|=8192}}function mf(n,o){o!==null&&(n.flags|=4),n.flags&16384&&(o=n.tag!==22?Ne():536870912,n.lanes|=o,ll|=o)}function cc(n,o){if(!pt)switch(n.tailMode){case"hidden":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function kt(n){var o=n.alternate!==null&&n.alternate.child===n.child,u=0,d=0;if(o)for(var m=n.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&31457280,d|=m.flags&31457280,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=d,n.childLanes=u,o}function a9(n,o,u){var d=o.pendingProps;switch(z_(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(o),null;case 1:return kt(o),null;case 3:return u=o.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Ks(pi),vi(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(zu(o)?Js(o):n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,es!==null&&(Wv(es),es=null))),kt(o),null;case 26:return u=o.memoizedState,n===null?(Js(o),u!==null?(kt(o),BR(o,u)):(kt(o),o.flags&=-16777217)):u?u!==n.memoizedState?(Js(o),kt(o),BR(o,u)):(kt(o),o.flags&=-16777217):(n.memoizedProps!==d&&Js(o),kt(o),o.flags&=-16777217),null;case 27:qe(o),u=at.current;var m=o.type;if(n!==null&&o.stateNode!=null)n.memoizedProps!==d&&Js(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return kt(o),null}n=it.current,zu(o)?Y3(o):(n=aM(m,d,u),o.stateNode=n,Js(o))}return kt(o),null;case 5:if(qe(o),u=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==d&&Js(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return kt(o),null}if(n=it.current,zu(o))Y3(o);else{switch(m=wf(at.current),n){case 1:n=m.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:n=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":n=m.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":n=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":n=m.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof d.is=="string"?m.createElement("select",{is:d.is}):m.createElement("select"),d.multiple?n.multiple=!0:d.size&&(n.size=d.size);break;default:n=typeof d.is=="string"?m.createElement(u,{is:d.is}):m.createElement(u)}}n[Rt]=o,n[qt]=d;e:for(m=o.child;m!==null;){if(m.tag===5||m.tag===6)n.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===o)break e;for(;m.sibling===null;){if(m.return===null||m.return===o)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}o.stateNode=n;e:switch(Pi(n,u,d),u){case"button":case"input":case"select":case"textarea":n=!!d.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Js(o)}}return kt(o),o.flags&=-16777217,null;case 6:if(n&&o.stateNode!=null)n.memoizedProps!==d&&Js(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(n=at.current,zu(o)){if(n=o.stateNode,u=o.memoizedProps,d=null,m=Wi,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}n[Rt]=o,n=!!(n.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||eM(n.nodeValue,u)),n||Ra(o)}else n=wf(n).createTextNode(d),n[Rt]=o,o.stateNode=n}return kt(o),null;case 13:if(d=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=zu(o),d!==null&&d.dehydrated!==null){if(n===null){if(!m)throw Error(r(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Rt]=o}else Xu(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;kt(o),m=!1}else es!==null&&(Wv(es),es=null),m=!0;if(!m)return o.flags&256?(Ys(o),o):(Ys(o),null)}if(Ys(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=d!==null,n=n!==null&&n.memoizedState!==null,u){d=o.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool);var _=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==m&&(d.flags|=2048)}return u!==n&&u&&(o.child.flags|=8192),mf(o,o.updateQueue),kt(o),null;case 4:return vi(),n===null&&nb(o.stateNode.containerInfo),kt(o),null;case 10:return Ks(o.type),kt(o),null;case 19:if(Ee(fi),m=o.memoizedState,m===null)return kt(o),null;if(d=(o.flags&128)!==0,_=m.rendering,_===null)if(d)cc(m,!1);else{if(Kt!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(_=Zd(n),_!==null){for(o.flags|=128,cc(m,!1),n=_.updateQueue,o.updateQueue=n,mf(o,n),o.subtreeFlags=0,n=u,u=o.child;u!==null;)RR(u,n),u=u.sibling;return Te(fi,fi.current&1|2),o.child}n=n.sibling}m.tail!==null&&bi()>gf&&(o.flags|=128,d=!0,cc(m,!1),o.lanes=4194304)}else{if(!d)if(n=Zd(_),n!==null){if(o.flags|=128,d=!0,n=n.updateQueue,o.updateQueue=n,mf(o,n),cc(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!pt)return kt(o),null}else 2*bi()-m.renderingStartTime>gf&&u!==536870912&&(o.flags|=128,d=!0,cc(m,!1),o.lanes=4194304);m.isBackwards?(_.sibling=o.child,o.child=_):(n=m.last,n!==null?n.sibling=_:o.child=_,m.last=_)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=bi(),o.sibling=null,n=fi.current,Te(fi,d?n&1|2:n&1),o):(kt(o),null);case 22:case 23:return Ys(o),q_(),d=o.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(u&536870912)!==0&&(o.flags&128)===0&&(kt(o),o.subtreeFlags&6&&(o.flags|=8192)):kt(o),u=o.updateQueue,u!==null&&mf(o,u.retryQueue),u=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==u&&(o.flags|=2048),n!==null&&Ee(Ba),null;case 24:return u=null,n!==null&&(u=n.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Ks(pi),kt(o),null;case 25:return null}throw Error(r(156,o.tag))}function o9(n,o){switch(z_(o),o.tag){case 1:return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return Ks(pi),vi(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 26:case 27:case 5:return qe(o),null;case 13:if(Ys(o),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Xu()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return Ee(fi),null;case 4:return vi(),null;case 10:return Ks(o.type),null;case 22:case 23:return Ys(o),q_(),n!==null&&Ee(Ba),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 24:return Ks(pi),null;case 25:return null;default:return null}}function PR(n,o){switch(z_(o),o.tag){case 3:Ks(pi),vi();break;case 26:case 27:case 5:qe(o);break;case 4:vi();break;case 13:Ys(o);break;case 19:Ee(fi);break;case 10:Ks(o.type);break;case 22:case 23:Ys(o),q_(),n!==null&&Ee(Ba);break;case 24:Ks(pi)}}var l9={getCacheForType:function(n){var o=Ui(pi),u=o.data.get(n);return u===void 0&&(u=n(),o.data.set(n,u)),u}},u9=typeof WeakMap=="function"?WeakMap:Map,It=0,Bt=null,rt=null,lt=0,Pt=0,dr=null,en=!1,ol=!1,Hv=!1,tn=0,Kt=0,Vn=0,Ua=0,Vv=0,kr=0,ll=0,hc=null,vs=null,zv=!1,Xv=0,gf=1/0,yf=null,zn=null,_f=!1,Na=null,dc=0,Yv=0,jv=null,fc=0,qv=null;function fr(){if((It&2)!==0&&lt!==0)return lt&-lt;if(q.T!==null){var n=Jo;return n!==0?n:tb()}return ms()}function DR(){kr===0&&(kr=(lt&536870912)===0||pt?ye():536870912);var n=Or.current;return n!==null&&(n.flags|=32),kr}function Ki(n,o,u){(n===Bt&&Pt===2||n.cancelPendingCommit!==null)&&(ul(n,0),rn(n,lt,kr,!1)),vt(n,u),((It&2)===0||n!==Bt)&&(n===Bt&&((It&2)===0&&(Ua|=u),Kt===4&&rn(n,lt,kr,!1)),bs(n))}function OR(n,o,u){if((It&6)!==0)throw Error(r(327));var d=!u&&(o&60)===0&&(o&n.expiredLanes)===0||k(n,o),m=d?d9(n,o):Zv(n,o,!0),_=d;do{if(m===0){ol&&!d&&rn(n,o,0,!1);break}else if(m===6)rn(n,o,0,!en);else{if(u=n.current.alternate,_&&!c9(u)){m=Zv(n,o,!1),_=!1;continue}if(m===2){if(_=o,n.errorRecoveryDisabledLanes&_)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var R=n;m=hc;var F=R.current.memoizedState.isDehydrated;if(F&&(ul(R,T).flags|=256),T=Zv(R,T,!1),T!==2){if(Hv&&!F){R.errorRecoveryDisabledLanes|=_,Ua|=_,m=4;break e}_=vs,vs=m,_!==null&&Wv(_)}m=T}if(_=!1,m!==2)continue}}if(m===1){ul(n,0),rn(n,o,0,!0);break}e:{switch(d=n,m){case 0:case 1:throw Error(r(345));case 4:if((o&4194176)===o){rn(d,o,kr,!en);break e}break;case 2:vs=null;break;case 3:case 5:break;default:throw Error(r(329))}if(d.finishedWork=u,d.finishedLanes=o,(o&62914560)===o&&(_=Xv+300-bi(),10<_)){if(rn(d,o,kr,!en),M(d,0)!==0)break e;d.timeoutHandle=rM(FR.bind(null,d,u,vs,yf,zv,o,kr,Ua,ll,en,2,-0,0),_);break e}FR(d,u,vs,yf,zv,o,kr,Ua,ll,en,0,-0,0)}}break}while(!0);bs(n)}function Wv(n){vs===null?vs=n:vs.push.apply(vs,n)}function FR(n,o,u,d,m,_,T,R,F,z,oe,de,J){var ne=o.subtreeFlags;if((ne&8192||(ne&16785408)===16785408)&&(vc={stylesheets:null,count:0,unsuspend:Y9},AR(o),o=q9(),o!==null)){n.cancelPendingCommit=o(HR.bind(null,n,u,d,m,T,R,F,1,de,J)),rn(n,_,T,!z);return}HR(n,u,d,m,T,R,F,oe,de,J)}function c9(n){for(var o=n;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var m=u[d],_=m.getSnapshot;m=m.value;try{if(!ur(_(),m))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function rn(n,o,u,d){o&=~Vv,o&=~Ua,n.suspendedLanes|=o,n.pingedLanes&=~o,d&&(n.warmLanes|=o),d=n.expirationTimes;for(var m=o;0<m;){var _=31-Ri(m),T=1<<_;d[_]=-1,m&=~T}u!==0&&Qr(n,u,o)}function vf(){return(It&6)===0?(pc(0),!1):!0}function Kv(){if(rt!==null){if(Pt===0)var n=rt.return;else n=rt,Ws=Ga=null,tv(n),Zo=null,Wu=0,n=rt;for(;n!==null;)PR(n.alternate,n),n=n.return;rt=null}}function ul(n,o){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;u!==-1&&(n.timeoutHandle=-1,M9(u)),u=n.cancelPendingCommit,u!==null&&(n.cancelPendingCommit=null,u()),Kv(),Bt=n,rt=u=Hn(n.current,null),lt=o,Pt=0,dr=null,en=!1,ol=k(n,o),Hv=!1,ll=kr=Vv=Ua=Vn=Kt=0,vs=hc=null,zv=!1,(o&8)!==0&&(o|=o&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=o;0<d;){var m=31-Ri(d),_=1<<m;o|=n[m],d&=~_}return tn=o,Vd(),u}function GR(n,o){We=null,q.H=_s,o===ju?(o=$3(),Pt=3):o===q3?(o=$3(),Pt=4):Pt=o===WC?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,dr=o,rt===null&&(Kt=1,uf(n,Br(o,n.current)))}function LR(){var n=q.H;return q.H=_s,n===null?_s:n}function kR(){var n=q.A;return q.A=l9,n}function $v(){Kt=4,en||(lt&4194176)!==lt&&Or.current!==null||(ol=!0),(Vn&134217727)===0&&(Ua&134217727)===0||Bt===null||rn(Bt,lt,kr,!1)}function Zv(n,o,u){var d=It;It|=2;var m=LR(),_=kR();(Bt!==n||lt!==o)&&(yf=null,ul(n,o)),o=!1;var T=Kt;e:do try{if(Pt!==0&&rt!==null){var R=rt,F=dr;switch(Pt){case 8:Kv(),T=6;break e;case 3:case 2:case 6:Or.current===null&&(o=!0);var z=Pt;if(Pt=0,dr=null,cl(n,R,F,z),u&&ol){T=0;break e}break;default:z=Pt,Pt=0,dr=null,cl(n,R,F,z)}}h9(),T=Kt;break}catch(oe){GR(n,oe)}while(!0);return o&&n.shellSuspendCounter++,Ws=Ga=null,It=d,q.H=m,q.A=_,rt===null&&(Bt=null,lt=0,Vd()),T}function h9(){for(;rt!==null;)IR(rt)}function d9(n,o){var u=It;It|=2;var d=LR(),m=kR();Bt!==n||lt!==o?(yf=null,gf=bi()+500,ul(n,o)):ol=k(n,o);e:do try{if(Pt!==0&&rt!==null){o=rt;var _=dr;t:switch(Pt){case 1:Pt=0,dr=null,cl(n,o,_,1);break;case 2:if(W3(_)){Pt=0,dr=null,UR(o);break}o=function(){Pt===2&&Bt===n&&(Pt=7),bs(n)},_.then(o,o);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:W3(_)?(Pt=0,dr=null,UR(o)):(Pt=0,dr=null,cl(n,o,_,7));break;case 5:var T=null;switch(rt.tag){case 26:T=rt.memoizedState;case 5:case 27:var R=rt;if(!T||pM(T)){Pt=0,dr=null;var F=R.sibling;if(F!==null)rt=F;else{var z=R.return;z!==null?(rt=z,bf(z)):rt=null}break t}}Pt=0,dr=null,cl(n,o,_,5);break;case 6:Pt=0,dr=null,cl(n,o,_,6);break;case 8:Kv(),Kt=6;break e;default:throw Error(r(462))}}f9();break}catch(oe){GR(n,oe)}while(!0);return Ws=Ga=null,q.H=d,q.A=m,It=u,rt!==null?0:(Bt=null,lt=0,Vd(),Kt)}function f9(){for(;rt!==null&&!_t();)IR(rt)}function IR(n){var o=aR(n.alternate,n,tn);n.memoizedProps=n.pendingProps,o===null?bf(n):rt=o}function UR(n){var o=n,u=o.alternate;switch(o.tag){case 15:case 0:o=eR(u,o,o.pendingProps,o.type,void 0,lt);break;case 11:o=eR(u,o,o.pendingProps,o.type.render,o.ref,lt);break;case 5:tv(o);default:PR(u,o),o=rt=RR(o,tn),o=aR(u,o,tn)}n.memoizedProps=n.pendingProps,o===null?bf(n):rt=o}function cl(n,o,u,d){Ws=Ga=null,tv(o),Zo=null,Wu=0;var m=o.return;try{if(t9(n,m,o,u,lt)){Kt=1,uf(n,Br(u,n.current)),rt=null;return}}catch(_){if(m!==null)throw rt=m,_;Kt=1,uf(n,Br(u,n.current)),rt=null;return}o.flags&32768?(pt||d===1?n=!0:ol||(lt&536870912)!==0?n=!1:(en=n=!0,(d===2||d===3||d===6)&&(d=Or.current,d!==null&&d.tag===13&&(d.flags|=16384))),NR(o,n)):bf(o)}function bf(n){var o=n;do{if((o.flags&32768)!==0){NR(o,en);return}n=o.return;var u=a9(o.alternate,o,tn);if(u!==null){rt=u;return}if(o=o.sibling,o!==null){rt=o;return}rt=o=n}while(o!==null);Kt===0&&(Kt=5)}function NR(n,o){do{var u=o9(n.alternate,n);if(u!==null){u.flags&=32767,rt=u;return}if(u=n.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(n=n.sibling,n!==null)){rt=n;return}rt=n=u}while(n!==null);Kt=6,rt=null}function HR(n,o,u,d,m,_,T,R,F,z){var oe=q.T,de=ie.p;try{ie.p=2,q.T=null,p9(n,o,u,d,de,m,_,T,R,F,z)}finally{q.T=oe,ie.p=de}}function p9(n,o,u,d,m,_,T,R){do hl();while(Na!==null);if((It&6)!==0)throw Error(r(327));var F=n.finishedWork;if(d=n.finishedLanes,F===null)return null;if(n.finishedWork=null,n.finishedLanes=0,F===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var z=F.lanes|F.childLanes;if(z|=N_,Ar(n,d,z,_,T,R),n===Bt&&(rt=Bt=null,lt=0),(F.subtreeFlags&10256)===0&&(F.flags&10256)===0||_f||(_f=!0,Yv=z,jv=u,_9(Is,function(){return hl(),null})),u=(F.flags&15990)!==0,(F.subtreeFlags&15990)!==0||u?(u=q.T,q.T=null,_=ie.p,ie.p=2,T=It,It|=4,r9(n,F),xR(F,n),IV(ub,n.containerInfo),Df=!!lb,ub=lb=null,n.current=F,yR(n,F.alternate,F),di(),It=T,ie.p=_,q.T=u):n.current=F,_f?(_f=!1,Na=n,dc=d):VR(n,z),z=n.pendingLanes,z===0&&(zn=null),Rd(F.stateNode),bs(n),o!==null)for(m=n.onRecoverableError,F=0;F<o.length;F++)z=o[F],m(z.value,{componentStack:z.stack});return(dc&3)!==0&&hl(),z=n.pendingLanes,(d&4194218)!==0&&(z&42)!==0?n===qv?fc++:(fc=0,qv=n):fc=0,pc(0),null}function VR(n,o){(n.pooledCacheLanes&=o)===0&&(o=n.pooledCache,o!=null&&(n.pooledCache=null,$u(o)))}function hl(){if(Na!==null){var n=Na,o=Yv;Yv=0;var u=ba(dc),d=q.T,m=ie.p;try{if(ie.p=32>u?32:u,q.T=null,Na===null)var _=!1;else{u=jv,jv=null;var T=Na,R=dc;if(Na=null,dc=0,(It&6)!==0)throw Error(r(331));var F=It;if(It|=4,wR(T.current),SR(T,T.current,R,u),It=F,pc(0,!1),ki&&typeof ki.onPostCommitFiberRoot=="function")try{ki.onPostCommitFiberRoot(Us,T)}catch{}_=!0}return _}finally{ie.p=m,q.T=d,VR(n,o)}}return!1}function zR(n,o,u){o=Br(u,o),o=mv(n.stateNode,o,2),n=kn(n,o,2),n!==null&&(vt(n,2),bs(n))}function Mt(n,o,u){if(n.tag===3)zR(n,n,u);else for(;o!==null;){if(o.tag===3){zR(o,n,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(zn===null||!zn.has(d))){n=Br(u,n),u=jC(2),d=kn(o,u,2),d!==null&&(qC(u,d,o,n),vt(d,2),bs(d));break}}o=o.return}}function Qv(n,o,u){var d=n.pingCache;if(d===null){d=n.pingCache=new u9;var m=new Set;d.set(o,m)}else m=d.get(o),m===void 0&&(m=new Set,d.set(o,m));m.has(u)||(Hv=!0,m.add(u),n=m9.bind(null,n,o,u),o.then(n,n))}function m9(n,o,u){var d=n.pingCache;d!==null&&d.delete(o),n.pingedLanes|=n.suspendedLanes&u,n.warmLanes&=~u,Bt===n&&(lt&u)===u&&(Kt===4||Kt===3&&(lt&62914560)===lt&&300>bi()-Xv?(It&2)===0&&ul(n,0):Vv|=u,ll===lt&&(ll=0)),bs(n)}function XR(n,o){o===0&&(o=Ne()),n=Mn(n,o),n!==null&&(vt(n,o),bs(n))}function g9(n){var o=n.memoizedState,u=0;o!==null&&(u=o.retryLane),XR(n,u)}function y9(n,o){var u=0;switch(n.tag){case 13:var d=n.stateNode,m=n.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),XR(n,u)}function _9(n,o){return Sr(n,o)}var xf=null,dl=null,Jv=!1,Tf=!1,eb=!1,Ha=0;function bs(n){n!==dl&&n.next===null&&(dl===null?xf=dl=n:dl=dl.next=n),Tf=!0,Jv||(Jv=!0,b9(v9))}function pc(n,o){if(!eb&&Tf){eb=!0;do for(var u=!1,d=xf;d!==null;){if(n!==0){var m=d.pendingLanes;if(m===0)var _=0;else{var T=d.suspendedLanes,R=d.pingedLanes;_=(1<<31-Ri(42|n)+1)-1,_&=m&~(T&~R),_=_&201326677?_&201326677|1:_?_|2:0}_!==0&&(u=!0,qR(d,_))}else _=lt,_=M(d,d===Bt?_:0),(_&3)===0||k(d,_)||(u=!0,qR(d,_));d=d.next}while(u);eb=!1}}function v9(){Tf=Jv=!1;var n=0;Ha!==0&&(R9()&&(n=Ha),Ha=0);for(var o=bi(),u=null,d=xf;d!==null;){var m=d.next,_=YR(d,o);_===0?(d.next=null,u===null?xf=m:u.next=m,m===null&&(dl=u)):(u=d,(n!==0||(_&3)!==0)&&(Tf=!0)),d=m}pc(n)}function YR(n,o){for(var u=n.suspendedLanes,d=n.pingedLanes,m=n.expirationTimes,_=n.pendingLanes&-62914561;0<_;){var T=31-Ri(_),R=1<<T,F=m[T];F===-1?((R&u)===0||(R&d)!==0)&&(m[T]=ee(R,o)):F<=o&&(n.expiredLanes|=R),_&=~R}if(o=Bt,u=lt,u=M(n,n===o?u:0),d=n.callbackNode,u===0||n===o&&Pt===2||n.cancelPendingCommit!==null)return d!==null&&d!==null&&En(d),n.callbackNode=null,n.callbackPriority=0;if((u&3)===0||k(n,u)){if(o=u&-u,o===n.callbackPriority)return o;switch(d!==null&&En(d),ba(u)){case 2:case 8:u=Oo;break;case 32:u=Is;break;case 268435456:u=Mu;break;default:u=Is}return d=jR.bind(null,n),u=Sr(u,d),n.callbackPriority=o,n.callbackNode=u,o}return d!==null&&d!==null&&En(d),n.callbackPriority=2,n.callbackNode=null,2}function jR(n,o){var u=n.callbackNode;if(hl()&&n.callbackNode!==u)return null;var d=lt;return d=M(n,n===Bt?d:0),d===0?null:(OR(n,d,o),YR(n,bi()),n.callbackNode!=null&&n.callbackNode===u?jR.bind(null,n):null)}function qR(n,o){if(hl())return null;OR(n,o,!0)}function b9(n){B9(function(){(It&6)!==0?Sr(Do,n):n()})}function tb(){return Ha===0&&(Ha=ye()),Ha}function WR(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Gd(""+n)}function KR(n,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,n.id&&u.setAttribute("form",n.id),o.parentNode.insertBefore(u,o),n=new FormData(n),u.parentNode.removeChild(u),n}function x9(n,o,u,d,m){if(o==="submit"&&u&&u.stateNode===m){var _=WR((m[qt]||null).action),T=d.submitter;T&&(o=(o=T[qt]||null)?WR(o.formAction):T.getAttribute("formAction"),o!==null&&(_=o,T=null));var R=new Ud("action","action",null,d,m);n.push({event:R,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ha!==0){var F=T?KR(m,T):new FormData(m);cv(u,{pending:!0,data:F,method:m.method,action:_},null,F)}}else typeof _=="function"&&(R.preventDefault(),F=T?KR(m,T):new FormData(m),cv(u,{pending:!0,data:F,method:m.method,action:_},_,F))},currentTarget:m}]})}}for(var ib=0;ib<H3.length;ib++){var rb=H3[ib],T9=rb.toLowerCase(),S9=rb[0].toUpperCase()+rb.slice(1);Jr(T9,"on"+S9)}Jr(L3,"onAnimationEnd"),Jr(k3,"onAnimationIteration"),Jr(I3,"onAnimationStart"),Jr("dblclick","onDoubleClick"),Jr("focusin","onFocus"),Jr("focusout","onBlur"),Jr(NV,"onTransitionRun"),Jr(HV,"onTransitionStart"),Jr(VV,"onTransitionCancel"),Jr(U3,"onTransitionEnd"),Uo("onMouseEnter",["mouseout","mouseover"]),Uo("onMouseLeave",["mouseout","mouseover"]),Uo("onPointerEnter",["pointerout","pointerover"]),Uo("onPointerLeave",["pointerout","pointerover"]),Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mc));function $R(n,o){o=(o&4)!==0;for(var u=0;u<n.length;u++){var d=n[u],m=d.event;d=d.listeners;e:{var _=void 0;if(o)for(var T=d.length-1;0<=T;T--){var R=d[T],F=R.instance,z=R.currentTarget;if(R=R.listener,F!==_&&m.isPropagationStopped())break e;_=R,m.currentTarget=z;try{_(m)}catch(oe){lf(oe)}m.currentTarget=null,_=F}else for(T=0;T<d.length;T++){if(R=d[T],F=R.instance,z=R.currentTarget,R=R.listener,F!==_&&m.isPropagationStopped())break e;_=R,m.currentTarget=z;try{_(m)}catch(oe){lf(oe)}m.currentTarget=null,_=F}}}}function ot(n,o){var u=o[Lo];u===void 0&&(u=o[Lo]=new Set);var d=n+"__bubble";u.has(d)||(ZR(o,n,2,!1),u.add(d))}function sb(n,o,u){var d=0;o&&(d|=4),ZR(u,n,d,o)}var Sf="_reactListening"+Math.random().toString(36).slice(2);function nb(n){if(!n[Sf]){n[Sf]=!0,e3.forEach(function(u){u!=="selectionchange"&&(A9.has(u)||sb(u,!1,n),sb(u,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[Sf]||(o[Sf]=!0,sb("selectionchange",!1,o))}}function ZR(n,o,u,d){switch(bM(o)){case 2:var m=$9;break;case 8:m=Z9;break;default:m=_b}u=m.bind(null,o,u,n),m=void 0,!C_||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),d?m!==void 0?n.addEventListener(o,u,{capture:!0,passive:m}):n.addEventListener(o,u,!0):m!==void 0?n.addEventListener(o,u,{passive:m}):n.addEventListener(o,u,!1)}function ab(n,o,u,d,m){var _=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var R=d.stateNode.containerInfo;if(R===m||R.nodeType===8&&R.parentNode===m)break;if(T===4)for(T=d.return;T!==null;){var F=T.tag;if((F===3||F===4)&&(F=T.stateNode.containerInfo,F===m||F.nodeType===8&&F.parentNode===m))return;T=T.return}for(;R!==null;){if(T=xa(R),T===null)return;if(F=T.tag,F===5||F===6||F===26||F===27){d=_=T;continue e}R=R.parentNode}}d=d.return}d3(function(){var z=_,oe=E_(u),de=[];e:{var J=N3.get(n);if(J!==void 0){var ne=Ud,Me=n;switch(n){case"keypress":if(kd(u)===0)break e;case"keydown":case"keyup":ne=yV;break;case"focusin":Me="focus",ne=P_;break;case"focusout":Me="blur",ne=P_;break;case"beforeblur":case"afterblur":ne=P_;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=m3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=nV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=bV;break;case L3:case k3:case I3:ne=lV;break;case U3:ne=TV;break;case"scroll":case"scrollend":ne=rV;break;case"wheel":ne=AV;break;case"copy":case"cut":case"paste":ne=cV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=y3;break;case"toggle":case"beforetoggle":ne=wV}var je=(o&4)!==0,$t=!je&&(n==="scroll"||n==="scrollend"),Y=je?J!==null?J+"Capture":null:J;je=[];for(var V=z,K;V!==null;){var ue=V;if(K=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||K===null||Y===null||(ue=Fu(V,Y),ue!=null&&je.push(gc(V,ue,K))),$t)break;V=V.return}0<je.length&&(J=new ne(J,Me,null,u,oe),de.push({event:J,listeners:je}))}}if((o&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",ne=n==="mouseout"||n==="pointerout",J&&u!==A_&&(Me=u.relatedTarget||u.fromElement)&&(xa(Me)||Me[wr]))break e;if((ne||J)&&(J=oe.window===oe?oe:(J=oe.ownerDocument)?J.defaultView||J.parentWindow:window,ne?(Me=u.relatedTarget||u.toElement,ne=z,Me=Me?xa(Me):null,Me!==null&&($t=P(Me),je=Me.tag,Me!==$t||je!==5&&je!==27&&je!==6)&&(Me=null)):(ne=null,Me=z),ne!==Me)){if(je=m3,ue="onMouseLeave",Y="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(je=y3,ue="onPointerLeave",Y="onPointerEnter",V="pointer"),$t=ne==null?J:Ou(ne),K=Me==null?J:Ou(Me),J=new je(ue,V+"leave",ne,u,oe),J.target=$t,J.relatedTarget=K,ue=null,xa(oe)===z&&(je=new je(Y,V+"enter",Me,u,oe),je.target=K,je.relatedTarget=$t,ue=je),$t=ue,ne&&Me)t:{for(je=ne,Y=Me,V=0,K=je;K;K=fl(K))V++;for(K=0,ue=Y;ue;ue=fl(ue))K++;for(;0<V-K;)je=fl(je),V--;for(;0<K-V;)Y=fl(Y),K--;for(;V--;){if(je===Y||Y!==null&&je===Y.alternate)break t;je=fl(je),Y=fl(Y)}je=null}else je=null;ne!==null&&QR(de,J,ne,je,!1),Me!==null&&$t!==null&&QR(de,$t,Me,je,!0)}}e:{if(J=z?Ou(z):window,ne=J.nodeName&&J.nodeName.toLowerCase(),ne==="select"||ne==="input"&&J.type==="file")var Ce=E3;else if(S3(J))if(w3)Ce=LV;else{Ce=FV;var $e=OV}else ne=J.nodeName,!ne||ne.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?z&&S_(z.elementType)&&(Ce=E3):Ce=GV;if(Ce&&(Ce=Ce(n,z))){A3(de,Ce,u,oe);break e}$e&&$e(n,J,z),n==="focusout"&&z&&J.type==="number"&&z.memoizedProps.value!=null&&T_(J,"number",J.value)}switch($e=z?Ou(z):window,n){case"focusin":(S3($e)||$e.contentEditable==="true")&&(Yo=$e,k_=z,Vu=null);break;case"focusout":Vu=k_=Yo=null;break;case"mousedown":I_=!0;break;case"contextmenu":case"mouseup":case"dragend":I_=!1,F3(de,u,oe);break;case"selectionchange":if(UV)break;case"keydown":case"keyup":F3(de,u,oe)}var Oe;if(O_)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Xo?x3(n,u)&&(Ie="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(Ie="onCompositionStart");Ie&&(_3&&u.locale!=="ko"&&(Xo||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Xo&&(Oe=f3()):(Rn=oe,R_="value"in Rn?Rn.value:Rn.textContent,Xo=!0)),$e=Af(z,Ie),0<$e.length&&(Ie=new g3(Ie,n,null,u,oe),de.push({event:Ie,listeners:$e}),Oe?Ie.data=Oe:(Oe=T3(u),Oe!==null&&(Ie.data=Oe)))),(Oe=RV?MV(n,u):BV(n,u))&&(Ie=Af(z,"onBeforeInput"),0<Ie.length&&($e=new g3("onBeforeInput","beforeinput",null,u,oe),de.push({event:$e,listeners:Ie}),$e.data=Oe)),x9(de,n,z,u,oe)}$R(de,o)})}function gc(n,o,u){return{instance:n,listener:o,currentTarget:u}}function Af(n,o){for(var u=o+"Capture",d=[];n!==null;){var m=n,_=m.stateNode;m=m.tag,m!==5&&m!==26&&m!==27||_===null||(m=Fu(n,u),m!=null&&d.unshift(gc(n,m,_)),m=Fu(n,o),m!=null&&d.push(gc(n,m,_))),n=n.return}return d}function fl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function QR(n,o,u,d,m){for(var _=o._reactName,T=[];u!==null&&u!==d;){var R=u,F=R.alternate,z=R.stateNode;if(R=R.tag,F!==null&&F===d)break;R!==5&&R!==26&&R!==27||z===null||(F=z,m?(z=Fu(u,_),z!=null&&T.unshift(gc(u,z,F))):m||(z=Fu(u,_),z!=null&&T.push(gc(u,z,F)))),u=u.return}T.length!==0&&n.push({event:o,listeners:T})}var E9=/\r\n?/g,w9=/\u0000|\uFFFD/g;function JR(n){return(typeof n=="string"?n:""+n).replace(E9,`
`).replace(w9,"")}function eM(n,o){return o=JR(o),JR(n)===o}function Ef(){}function St(n,o,u,d,m,_){switch(u){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Ho(n,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Ho(n,""+d);break;case"className":Dd(n,"class",d);break;case"tabIndex":Dd(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Dd(n,u,d);break;case"style":c3(n,d,_);break;case"data":if(o!=="object"){Dd(n,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||u!=="href")){n.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(u);break}d=Gd(""+d),n.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(o!=="input"&&St(n,o,"name",m.name,m,null),St(n,o,"formEncType",m.formEncType,m,null),St(n,o,"formMethod",m.formMethod,m,null),St(n,o,"formTarget",m.formTarget,m,null)):(St(n,o,"encType",m.encType,m,null),St(n,o,"method",m.method,m,null),St(n,o,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(u);break}d=Gd(""+d),n.setAttribute(u,d);break;case"onClick":d!=null&&(n.onclick=Ef);break;case"onScroll":d!=null&&ot("scroll",n);break;case"onScrollEnd":d!=null&&ot("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=u}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}u=Gd(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(u,""+d):n.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(u,""):n.removeAttribute(u);break;case"capture":case"download":d===!0?n.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(u,d):n.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(u,d):n.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(u):n.setAttribute(u,d);break;case"popover":ot("beforetoggle",n),ot("toggle",n),Pd(n,"popover",d);break;case"xlinkActuate":Vs(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Vs(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Vs(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Vs(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Vs(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Vs(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Vs(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Vs(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Vs(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Pd(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=tV.get(u)||u,Pd(n,u,d))}}function ob(n,o,u,d,m,_){switch(u){case"style":c3(n,d,_);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=u}}break;case"children":typeof d=="string"?Ho(n,d):(typeof d=="number"||typeof d=="bigint")&&Ho(n,""+d);break;case"onScroll":d!=null&&ot("scroll",n);break;case"onScrollEnd":d!=null&&ot("scrollend",n);break;case"onClick":d!=null&&(n.onclick=Ef);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!t3.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),o=u.slice(2,m?u.length-7:void 0),_=n[qt]||null,_=_!=null?_[u]:null,typeof _=="function"&&n.removeEventListener(o,_,m),typeof d=="function")){typeof _!="function"&&_!==null&&(u in n?n[u]=null:n.hasAttribute(u)&&n.removeAttribute(u)),n.addEventListener(o,d,m);break e}u in n?n[u]=d:d===!0?n.setAttribute(u,""):Pd(n,u,d)}}}function Pi(n,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",n),ot("load",n);var d=!1,m=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var T=u[_];if(T!=null)switch(_){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:St(n,o,_,T,u,null)}}m&&St(n,o,"srcSet",u.srcSet,u,null),d&&St(n,o,"src",u.src,u,null);return;case"input":ot("invalid",n);var R=_=T=m=null,F=null,z=null;for(d in u)if(u.hasOwnProperty(d)){var oe=u[d];if(oe!=null)switch(d){case"name":m=oe;break;case"type":T=oe;break;case"checked":F=oe;break;case"defaultChecked":z=oe;break;case"value":_=oe;break;case"defaultValue":R=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,o));break;default:St(n,o,d,oe,u,null)}}a3(n,_,R,F,z,T,m,!1),Od(n);return;case"select":ot("invalid",n),d=T=_=null;for(m in u)if(u.hasOwnProperty(m)&&(R=u[m],R!=null))switch(m){case"value":_=R;break;case"defaultValue":T=R;break;case"multiple":d=R;default:St(n,o,m,R,u,null)}o=_,u=T,n.multiple=!!d,o!=null?No(n,!!d,o,!1):u!=null&&No(n,!!d,u,!0);return;case"textarea":ot("invalid",n),_=m=d=null;for(T in u)if(u.hasOwnProperty(T)&&(R=u[T],R!=null))switch(T){case"value":d=R;break;case"defaultValue":m=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:St(n,o,T,R,u,null)}l3(n,d,m,_),Od(n);return;case"option":for(F in u)if(u.hasOwnProperty(F)&&(d=u[F],d!=null))switch(F){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:St(n,o,F,d,u,null)}return;case"dialog":ot("cancel",n),ot("close",n);break;case"iframe":case"object":ot("load",n);break;case"video":case"audio":for(d=0;d<mc.length;d++)ot(mc[d],n);break;case"image":ot("error",n),ot("load",n);break;case"details":ot("toggle",n);break;case"embed":case"source":case"link":ot("error",n),ot("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in u)if(u.hasOwnProperty(z)&&(d=u[z],d!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:St(n,o,z,d,u,null)}return;default:if(S_(o)){for(oe in u)u.hasOwnProperty(oe)&&(d=u[oe],d!==void 0&&ob(n,o,oe,d,u,void 0));return}}for(R in u)u.hasOwnProperty(R)&&(d=u[R],d!=null&&St(n,o,R,d,u,null))}function C9(n,o,u,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,_=null,T=null,R=null,F=null,z=null,oe=null;for(ne in u){var de=u[ne];if(u.hasOwnProperty(ne)&&de!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":F=de;default:d.hasOwnProperty(ne)||St(n,o,ne,null,d,de)}}for(var J in d){var ne=d[J];if(de=u[J],d.hasOwnProperty(J)&&(ne!=null||de!=null))switch(J){case"type":_=ne;break;case"name":m=ne;break;case"checked":z=ne;break;case"defaultChecked":oe=ne;break;case"value":T=ne;break;case"defaultValue":R=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,o));break;default:ne!==de&&St(n,o,J,ne,d,de)}}x_(n,T,R,F,z,oe,_,m);return;case"select":ne=T=R=J=null;for(_ in u)if(F=u[_],u.hasOwnProperty(_)&&F!=null)switch(_){case"value":break;case"multiple":ne=F;default:d.hasOwnProperty(_)||St(n,o,_,null,d,F)}for(m in d)if(_=d[m],F=u[m],d.hasOwnProperty(m)&&(_!=null||F!=null))switch(m){case"value":J=_;break;case"defaultValue":R=_;break;case"multiple":T=_;default:_!==F&&St(n,o,m,_,d,F)}o=R,u=T,d=ne,J!=null?No(n,!!u,J,!1):!!d!=!!u&&(o!=null?No(n,!!u,o,!0):No(n,!!u,u?[]:"",!1));return;case"textarea":ne=J=null;for(R in u)if(m=u[R],u.hasOwnProperty(R)&&m!=null&&!d.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:St(n,o,R,null,d,m)}for(T in d)if(m=d[T],_=u[T],d.hasOwnProperty(T)&&(m!=null||_!=null))switch(T){case"value":J=m;break;case"defaultValue":ne=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==_&&St(n,o,T,m,d,_)}o3(n,J,ne);return;case"option":for(var Me in u)if(J=u[Me],u.hasOwnProperty(Me)&&J!=null&&!d.hasOwnProperty(Me))switch(Me){case"selected":n.selected=!1;break;default:St(n,o,Me,null,d,J)}for(F in d)if(J=d[F],ne=u[F],d.hasOwnProperty(F)&&J!==ne&&(J!=null||ne!=null))switch(F){case"selected":n.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:St(n,o,F,J,d,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in u)J=u[je],u.hasOwnProperty(je)&&J!=null&&!d.hasOwnProperty(je)&&St(n,o,je,null,d,J);for(z in d)if(J=d[z],ne=u[z],d.hasOwnProperty(z)&&J!==ne&&(J!=null||ne!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,o));break;default:St(n,o,z,J,d,ne)}return;default:if(S_(o)){for(var $t in u)J=u[$t],u.hasOwnProperty($t)&&J!==void 0&&!d.hasOwnProperty($t)&&ob(n,o,$t,void 0,d,J);for(oe in d)J=d[oe],ne=u[oe],!d.hasOwnProperty(oe)||J===ne||J===void 0&&ne===void 0||ob(n,o,oe,J,d,ne);return}}for(var Y in u)J=u[Y],u.hasOwnProperty(Y)&&J!=null&&!d.hasOwnProperty(Y)&&St(n,o,Y,null,d,J);for(de in d)J=d[de],ne=u[de],!d.hasOwnProperty(de)||J===ne||J==null&&ne==null||St(n,o,de,J,d,ne)}var lb=null,ub=null;function wf(n){return n.nodeType===9?n:n.ownerDocument}function tM(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iM(n,o){if(n===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&o==="foreignObject"?0:n}function cb(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var hb=null;function R9(){var n=window.event;return n&&n.type==="popstate"?n===hb?!1:(hb=n,!0):(hb=null,!1)}var rM=typeof setTimeout=="function"?setTimeout:void 0,M9=typeof clearTimeout=="function"?clearTimeout:void 0,sM=typeof Promise=="function"?Promise:void 0,B9=typeof queueMicrotask=="function"?queueMicrotask:typeof sM<"u"?function(n){return sM.resolve(null).then(n).catch(P9)}:rM;function P9(n){setTimeout(function(){throw n})}function db(n,o){var u=o,d=0;do{var m=u.nextSibling;if(n.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(d===0){n.removeChild(m),Ac(o);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=m}while(u);Ac(o)}function fb(n){var o=n.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":fb(u),b_(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}n.removeChild(u)}}function D9(n,o,u,d){for(;n.nodeType===1;){var m=u;if(n.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[Du])switch(o){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(_=n.getAttribute("rel"),_==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(_!==m.rel||n.getAttribute("href")!==(m.href==null?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(_=n.getAttribute("src"),(_!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&_&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(o==="input"&&n.type==="hidden"){var _=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===_)return n}else return n;if(n=is(n.nextSibling),n===null)break}return null}function O9(n,o,u){if(o==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!u||(n=is(n.nextSibling),n===null))return null;return n}function is(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return n}function nM(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return n;o--}else u==="/$"&&o++}n=n.previousSibling}return null}function aM(n,o,u){switch(o=wf(u),n){case"html":if(n=o.documentElement,!n)throw Error(r(452));return n;case"head":if(n=o.head,!n)throw Error(r(453));return n;case"body":if(n=o.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}var Ir=new Map,oM=new Set;function Cf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var sn=ie.d;ie.d={f:F9,r:G9,D:L9,C:k9,L:I9,m:U9,X:H9,S:N9,M:V9};function F9(){var n=sn.f(),o=vf();return n||o}function G9(n){var o=ko(n);o!==null&&o.tag===5&&o.type==="form"?FC(o):sn.r(n)}var pl=typeof document>"u"?null:document;function lM(n,o,u){var d=pl;if(d&&typeof o=="string"&&o){var m=Rr(o);m='link[rel="'+n+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),oM.has(m)||(oM.add(m),n={rel:n,crossOrigin:u,href:o},d.querySelector(m)===null&&(o=d.createElement("link"),Pi(o,"link",n),xi(o),d.head.appendChild(o)))}}function L9(n){sn.D(n),lM("dns-prefetch",n,null)}function k9(n,o){sn.C(n,o),lM("preconnect",n,o)}function I9(n,o,u){sn.L(n,o,u);var d=pl;if(d&&n&&o){var m='link[rel="preload"][as="'+Rr(o)+'"]';o==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+Rr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+Rr(u.imageSizes)+'"]')):m+='[href="'+Rr(n)+'"]';var _=m;switch(o){case"style":_=ml(n);break;case"script":_=gl(n)}Ir.has(_)||(n=L({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:n,as:o},u),Ir.set(_,n),d.querySelector(m)!==null||o==="style"&&d.querySelector(yc(_))||o==="script"&&d.querySelector(_c(_))||(o=d.createElement("link"),Pi(o,"link",n),xi(o),d.head.appendChild(o)))}}function U9(n,o){sn.m(n,o);var u=pl;if(u&&n){var d=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+Rr(d)+'"][href="'+Rr(n)+'"]',_=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=gl(n)}if(!Ir.has(_)&&(n=L({rel:"modulepreload",href:n},o),Ir.set(_,n),u.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(_c(_)))return}d=u.createElement("link"),Pi(d,"link",n),xi(d),u.head.appendChild(d)}}}function N9(n,o,u){sn.S(n,o,u);var d=pl;if(d&&n){var m=Io(d).hoistableStyles,_=ml(n);o=o||"default";var T=m.get(_);if(!T){var R={loading:0,preload:null};if(T=d.querySelector(yc(_)))R.loading=5;else{n=L({rel:"stylesheet",href:n,"data-precedence":o},u),(u=Ir.get(_))&&pb(n,u);var F=T=d.createElement("link");xi(F),Pi(F,"link",n),F._p=new Promise(function(z,oe){F.onload=z,F.onerror=oe}),F.addEventListener("load",function(){R.loading|=1}),F.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Rf(T,o,d)}T={type:"stylesheet",instance:T,count:1,state:R},m.set(_,T)}}}function H9(n,o){sn.X(n,o);var u=pl;if(u&&n){var d=Io(u).hoistableScripts,m=gl(n),_=d.get(m);_||(_=u.querySelector(_c(m)),_||(n=L({src:n,async:!0},o),(o=Ir.get(m))&&mb(n,o),_=u.createElement("script"),xi(_),Pi(_,"link",n),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(m,_))}}function V9(n,o){sn.M(n,o);var u=pl;if(u&&n){var d=Io(u).hoistableScripts,m=gl(n),_=d.get(m);_||(_=u.querySelector(_c(m)),_||(n=L({src:n,async:!0,type:"module"},o),(o=Ir.get(m))&&mb(n,o),_=u.createElement("script"),xi(_),Pi(_,"link",n),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(m,_))}}function uM(n,o,u,d){var m=(m=at.current)?Cf(m):null;if(!m)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ml(u.href),u=Io(m).hoistableStyles,d=u.get(o),d||(d={type:"style",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){n=ml(u.href);var _=Io(m).hoistableStyles,T=_.get(n);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(n,T),(_=m.querySelector(yc(n)))&&!_._p&&(T.instance=_,T.state.loading=5),Ir.has(n)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ir.set(n,u),_||z9(m,n,u,T.state))),o&&d===null)throw Error(r(528,""));return T}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=gl(u),u=Io(m).hoistableScripts,d=u.get(o),d||(d={type:"script",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function ml(n){return'href="'+Rr(n)+'"'}function yc(n){return'link[rel="stylesheet"]['+n+"]"}function cM(n){return L({},n,{"data-precedence":n.precedence,precedence:null})}function z9(n,o,u,d){n.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=n.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Pi(o,"link",u),xi(o),n.head.appendChild(o))}function gl(n){return'[src="'+Rr(n)+'"]'}function _c(n){return"script[async]"+n}function hM(n,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var d=n.querySelector('style[data-href~="'+Rr(u.href)+'"]');if(d)return o.instance=d,xi(d),d;var m=L({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),xi(d),Pi(d,"style",m),Rf(d,u.precedence,n),o.instance=d;case"stylesheet":m=ml(u.href);var _=n.querySelector(yc(m));if(_)return o.state.loading|=4,o.instance=_,xi(_),_;d=cM(u),(m=Ir.get(m))&&pb(d,m),_=(n.ownerDocument||n).createElement("link"),xi(_);var T=_;return T._p=new Promise(function(R,F){T.onload=R,T.onerror=F}),Pi(_,"link",d),o.state.loading|=4,Rf(_,u.precedence,n),o.instance=_;case"script":return _=gl(u.src),(m=n.querySelector(_c(_)))?(o.instance=m,xi(m),m):(d=u,(m=Ir.get(_))&&(d=L({},u),mb(d,m)),n=n.ownerDocument||n,m=n.createElement("script"),xi(m),Pi(m,"link",d),n.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Rf(d,u.precedence,n));return o.instance}function Rf(n,o,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,_=m,T=0;T<d.length;T++){var R=d[T];if(R.dataset.precedence===o)_=R;else if(_!==m)break}_?_.parentNode.insertBefore(n,_.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(n,o.firstChild))}function pb(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.title==null&&(n.title=o.title)}function mb(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.integrity==null&&(n.integrity=o.integrity)}var Mf=null;function dM(n,o,u){if(Mf===null){var d=new Map,m=Mf=new Map;m.set(u,d)}else m=Mf,d=m.get(u),d||(d=new Map,m.set(u,d));if(d.has(n))return d;for(d.set(n,null),u=u.getElementsByTagName(n),m=0;m<u.length;m++){var _=u[m];if(!(_[Du]||_[Rt]||n==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var T=_.getAttribute(o)||"";T=n+T;var R=d.get(T);R?R.push(_):d.set(T,[_])}}return d}function fM(n,o,u){n=n.ownerDocument||n,n.head.insertBefore(u,o==="title"?n.querySelector("head > title"):null)}function X9(n,o,u){if(u===1||o.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return n=o.disabled,typeof o.precedence=="string"&&n==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function pM(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var vc=null;function Y9(){}function j9(n,o,u){if(vc===null)throw Error(r(475));var d=vc;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=ml(u.href),_=n.querySelector(yc(m));if(_){n=_._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(d.count++,d=Bf.bind(d),n.then(d,d)),o.state.loading|=4,o.instance=_,xi(_);return}_=n.ownerDocument||n,u=cM(u),(m=Ir.get(m))&&pb(u,m),_=_.createElement("link"),xi(_);var T=_;T._p=new Promise(function(R,F){T.onload=R,T.onerror=F}),Pi(_,"link",u),o.instance=_}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(o,n),(n=o.state.preload)&&(o.state.loading&3)===0&&(d.count++,o=Bf.bind(d),n.addEventListener("load",o),n.addEventListener("error",o))}}function q9(){if(vc===null)throw Error(r(475));var n=vc;return n.stylesheets&&n.count===0&&gb(n,n.stylesheets),0<n.count?function(o){var u=setTimeout(function(){if(n.stylesheets&&gb(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u)}}:null}function Bf(){if(this.count--,this.count===0){if(this.stylesheets)gb(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Pf=null;function gb(n,o){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Pf=new Map,o.forEach(W9,n),Pf=null,Bf.call(n))}function W9(n,o){if(!(o.state.loading&4)){var u=Pf.get(n);if(u)var d=u.get(null);else{u=new Map,Pf.set(n,u);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<m.length;_++){var T=m[_];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(u.set(T.dataset.precedence,T),d=T)}d&&u.set(null,d)}m=o.instance,T=m.getAttribute("data-precedence"),_=u.get(T)||d,_===d&&u.set(null,m),u.set(T,m),this.count++,d=Bf.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),_?_.parentNode.insertBefore(m,_.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),o.state.loading|=4}}var bc={$$typeof:v,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function K9(n,o,u,d,m,_,T,R){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.hiddenUpdates=xt(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=_,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function mM(n,o,u,d,m,_,T,R,F,z,oe,de){return n=new K9(n,o,u,T,R,F,z,de),o=1,_===!0&&(o|=24),_=Lr(3,null,null,o),n.current=_,_.stateNode=n,o=W_(),o.refCount++,n.pooledCache=o,o.refCount++,_.memoizedState={element:d,isDehydrated:u,cache:o},Rv(_),n}function gM(n){return n?(n=Wo,n):Wo}function yM(n,o,u,d,m,_){m=gM(m),d.context===null?d.context=m:d.pendingContext=m,d=Ln(o),d.payload={element:u},_=_===void 0?null:_,_!==null&&(d.callback=_),u=kn(n,d,o),u!==null&&(Ki(u,n,o),rc(u,n,o))}function _M(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<o?u:o}}function yb(n,o){_M(n,o),(n=n.alternate)&&_M(n,o)}function vM(n){if(n.tag===13){var o=Mn(n,67108864);o!==null&&Ki(o,n,67108864),yb(n,67108864)}}var Df=!0;function $9(n,o,u,d){var m=q.T;q.T=null;var _=ie.p;try{ie.p=2,_b(n,o,u,d)}finally{ie.p=_,q.T=m}}function Z9(n,o,u,d){var m=q.T;q.T=null;var _=ie.p;try{ie.p=8,_b(n,o,u,d)}finally{ie.p=_,q.T=m}}function _b(n,o,u,d){if(Df){var m=vb(d);if(m===null)ab(n,o,d,Of,u),xM(n,d);else if(J9(m,n,o,u,d))d.stopPropagation();else if(xM(n,d),o&4&&-1<Q9.indexOf(n)){for(;m!==null;){var _=ko(m);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var T=C(_.pendingLanes);if(T!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;T;){var F=1<<31-Ri(T);R.entanglements[1]|=F,T&=~F}bs(_),(It&6)===0&&(gf=bi()+500,pc(0))}}break;case 13:R=Mn(_,2),R!==null&&Ki(R,_,2),vf(),yb(_,2)}if(_=vb(d),_===null&&ab(n,o,d,Of,u),_===m)break;m=_}m!==null&&d.stopPropagation()}else ab(n,o,d,null,u)}}function vb(n){return n=E_(n),bb(n)}var Of=null;function bb(n){if(Of=null,n=xa(n),n!==null){var o=P(n);if(o===null)n=null;else{var u=o.tag;if(u===13){if(n=D(o),n!==null)return n;n=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return Of=n,null}function bM(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ru()){case Do:return 2;case Oo:return 8;case Is:case Cd:return 32;case Mu:return 268435456;default:return 32}default:return 32}}var xb=!1,Xn=null,Yn=null,jn=null,xc=new Map,Tc=new Map,qn=[],Q9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xM(n,o){switch(n){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":xc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(o.pointerId)}}function Sc(n,o,u,d,m,_){return n===null||n.nativeEvent!==_?(n={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:_,targetContainers:[m]},o!==null&&(o=ko(o),o!==null&&vM(o)),n):(n.eventSystemFlags|=d,o=n.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),n)}function J9(n,o,u,d,m){switch(o){case"focusin":return Xn=Sc(Xn,n,o,u,d,m),!0;case"dragenter":return Yn=Sc(Yn,n,o,u,d,m),!0;case"mouseover":return jn=Sc(jn,n,o,u,d,m),!0;case"pointerover":var _=m.pointerId;return xc.set(_,Sc(xc.get(_)||null,n,o,u,d,m)),!0;case"gotpointercapture":return _=m.pointerId,Tc.set(_,Sc(Tc.get(_)||null,n,o,u,d,m)),!0}return!1}function TM(n){var o=xa(n.target);if(o!==null){var u=P(o);if(u!==null){if(o=u.tag,o===13){if(o=D(u),o!==null){n.blockedOn=o,Ns(n.priority,function(){if(u.tag===13){var d=fr(),m=Mn(u,d);m!==null&&Ki(m,u,d),yb(u,d)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ff(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var u=vb(n.nativeEvent);if(u===null){u=n.nativeEvent;var d=new u.constructor(u.type,u);A_=d,u.target.dispatchEvent(d),A_=null}else return o=ko(u),o!==null&&vM(o),n.blockedOn=u,!1;o.shift()}return!0}function SM(n,o,u){Ff(n)&&u.delete(o)}function ez(){xb=!1,Xn!==null&&Ff(Xn)&&(Xn=null),Yn!==null&&Ff(Yn)&&(Yn=null),jn!==null&&Ff(jn)&&(jn=null),xc.forEach(SM),Tc.forEach(SM)}function Gf(n,o){n.blockedOn===o&&(n.blockedOn=null,xb||(xb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ez)))}var Lf=null;function AM(n){Lf!==n&&(Lf=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Lf===n&&(Lf=null);for(var o=0;o<n.length;o+=3){var u=n[o],d=n[o+1],m=n[o+2];if(typeof d!="function"){if(bb(d||u)===null)continue;break}var _=ko(u);_!==null&&(n.splice(o,3),o-=3,cv(_,{pending:!0,data:m,method:u.method,action:d},d,m))}}))}function Ac(n){function o(F){return Gf(F,n)}Xn!==null&&Gf(Xn,n),Yn!==null&&Gf(Yn,n),jn!==null&&Gf(jn,n),xc.forEach(o),Tc.forEach(o);for(var u=0;u<qn.length;u++){var d=qn[u];d.blockedOn===n&&(d.blockedOn=null)}for(;0<qn.length&&(u=qn[0],u.blockedOn===null);)TM(u),u.blockedOn===null&&qn.shift();if(u=(n.ownerDocument||n).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var m=u[d],_=u[d+1],T=m[qt]||null;if(typeof _=="function")T||AM(u);else if(T){var R=null;if(_&&_.hasAttribute("formAction")){if(m=_,T=_[qt]||null)R=T.formAction;else if(bb(m)!==null)continue}else R=T.action;typeof R=="function"?u[d+1]=R:(u.splice(d,3),d-=3),AM(u)}}}function Tb(n){this._internalRoot=n}kf.prototype.render=Tb.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(r(409));var u=o.current,d=fr();yM(u,d,n,o,null,null)},kf.prototype.unmount=Tb.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;n.tag===0&&hl(),yM(n.current,2,null,n,null,null),vf(),o[wr]=null}};function kf(n){this._internalRoot=n}kf.prototype.unstable_scheduleHydration=function(n){if(n){var o=ms();n={blockedOn:null,target:n,priority:o};for(var u=0;u<qn.length&&o!==0&&o<qn[u].priority;u++);qn.splice(u,0,n),u===0&&TM(n)}};var EM=e.version;if(EM!=="19.0.0")throw Error(r(527,EM,"19.0.0"));ie.findDOMNode=function(n){var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=Q(o),n=n!==null?X(n):null,n=n===null?null:n.stateNode,n};var tz={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:q,findFiberByHostInstance:xa,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var If=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!If.isDisabled&&If.supportsFiber)try{Us=If.inject(tz),ki=If}catch{}}return Nc.createRoot=function(n,o){if(!s(n))throw Error(r(299));var u=!1,d="",m=VC,_=zC,T=XC,R=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(R=o.unstable_transitionCallbacks)),o=mM(n,1,!1,null,null,u,d,m,_,T,R,null),n[wr]=o.current,nb(n.nodeType===8?n.parentNode:n),new Tb(o)},Nc.hydrateRoot=function(n,o,u){if(!s(n))throw Error(r(299));var d=!1,m="",_=VC,T=zC,R=XC,F=null,z=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(T=u.onCaughtError),u.onRecoverableError!==void 0&&(R=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(F=u.unstable_transitionCallbacks),u.formState!==void 0&&(z=u.formState)),o=mM(n,1,!0,o,u??null,d,m,_,T,R,F,z),o.context=gM(null),u=o.current,d=fr(),m=Ln(d),m.callback=null,kn(u,m,d),o.current.lanes=d,vt(o,d),bs(o),n[wr]=o.current,nb(n),new kf(o)},Nc.version="19.0.0",Nc}var QP;function tq(){if(QP)return H0.exports;QP=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),H0.exports=eq(),H0.exports}var iq=tq();const rq="modulepreload",sq=function(t){return"/shrimp-story/"+t},JP={},f6=function(e,i,r){let s=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(i.map(h=>{if(h=sq(h),h in JP)return;JP[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":rq,f||(g.as="script"),g.crossOrigin="",g.href=h,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((y,v)=>{g.addEventListener("load",y),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},nq=Ve.createContext(null),X0={didCatch:!1,error:null};class aq extends Ve.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=X0}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var i,r,s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];(i=(r=this.props).onReset)===null||i===void 0||i.call(r,{args:a,reason:"imperative-api"}),this.setState(X0)}}componentDidCatch(e,i){var r,s;(r=(s=this.props).onError)===null||r===void 0||r.call(s,e,i)}componentDidUpdate(e,i){const{didCatch:r}=this.state,{resetKeys:s}=this.props;if(r&&i.error!==null&&oq(e.resetKeys,s)){var a,l;(a=(l=this.props).onReset)===null||a===void 0||a.call(l,{next:s,prev:e.resetKeys,reason:"keys"}),this.setState(X0)}}render(){const{children:e,fallbackRender:i,FallbackComponent:r,fallback:s}=this.props,{didCatch:a,error:l}=this.state;let c=e;if(a){const h={error:l,resetErrorBoundary:this.resetErrorBoundary};if(typeof i=="function")c=i(h);else if(r)c=Ve.createElement(r,h);else if(s!==void 0)c=s;else throw l}return Ve.createElement(nq.Provider,{value:{didCatch:a,error:l,resetErrorBoundary:this.resetErrorBoundary}},c)}}function oq(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((i,r)=>!Object.is(i,e[r]))}const lq=(t,e,i)=>{const r=t[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((s,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==i?". Note that variables only represent file names one level deep.":""))))})},ze=t=>typeof t=="string",Hc=()=>{let t,e;const i=new Promise((r,s)=>{t=r,e=s});return i.resolve=t,i.reject=e,i},eD=t=>t==null?"":""+t,uq=(t,e,i)=>{t.forEach(r=>{e[r]&&(i[r]=e[r])})},cq=/###/g,tD=t=>t&&t.indexOf("###")>-1?t.replace(cq,"."):t,iD=t=>!t||ze(t),hh=(t,e,i)=>{const r=ze(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(iD(t))return{};const a=tD(r[s]);!t[a]&&i&&(t[a]=new i),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++s}return iD(t)?{}:{obj:t,k:tD(r[s])}},rD=(t,e,i)=>{const{obj:r,k:s}=hh(t,e,Object);if(r!==void 0||e.length===1){r[s]=i;return}let a=e[e.length-1],l=e.slice(0,e.length-1),c=hh(t,l,Object);for(;c.obj===void 0&&l.length;)a=`${l[l.length-1]}.${a}`,l=l.slice(0,l.length-1),c=hh(t,l,Object),c!=null&&c.obj&&typeof c.obj[`${c.k}.${a}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${a}`]=i},hq=(t,e,i,r)=>{const{obj:s,k:a}=hh(t,e,Object);s[a]=s[a]||[],s[a].push(i)},Kg=(t,e)=>{const{obj:i,k:r}=hh(t,e);if(i&&Object.prototype.hasOwnProperty.call(i,r))return i[r]},dq=(t,e,i)=>{const r=Kg(t,i);return r!==void 0?r:Kg(e,i)},p6=(t,e,i)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ze(t[r])||t[r]instanceof String||ze(e[r])||e[r]instanceof String?i&&(t[r]=e[r]):p6(t[r],e[r],i):t[r]=e[r]);return t},Sl=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var fq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const pq=t=>ze(t)?t.replace(/[&<>"'\/]/g,e=>fq[e]):t;class mq{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const i=this.regExpMap.get(e);if(i!==void 0)return i;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const gq=[" ",",","?","!",";"],yq=new mq(20),_q=(t,e,i)=>{e=e||"",i=i||"";const r=gq.filter(l=>e.indexOf(l)<0&&i.indexOf(l)<0);if(r.length===0)return!0;const s=yq.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let a=!s.test(t);if(!a){const l=t.indexOf(i);l>0&&!s.test(t.substring(0,l))&&(a=!0)}return a},o1=function(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(i);let s=t;for(let a=0;a<r.length;){if(!s||typeof s!="object")return;let l,c="";for(let h=a;h<r.length;++h)if(h!==a&&(c+=i),c+=r[h],l=s[c],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&h<r.length-1)continue;a+=h-a+1;break}s=l}return s},$g=t=>t==null?void 0:t.replace("_","-"),vq={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var i,r;(r=(i=console==null?void 0:console[t])==null?void 0:i.apply)==null||r.call(i,console,e)}};class Zg{constructor(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,i)}init(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=i.prefix||"i18next:",this.logger=e||vq,this.options=i,this.debug=i.debug}log(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return this.forward(i,"log","",!0)}warn(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return this.forward(i,"warn","",!0)}error(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return this.forward(i,"error","")}deprecate(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return this.forward(i,"warn","WARNING DEPRECATED: ",!0)}forward(e,i,r,s){return s&&!this.debug?null:(ze(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[i](e))}create(e){return new Zg(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Zg(this.logger,e)}}var Cs=new Zg;class m_{constructor(){this.observers={}}on(e,i){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(i)||0;this.observers[r].set(i,s+1)}),this}off(e,i){if(this.observers[e]){if(!i){delete this.observers[e];return}this.observers[e].delete(i)}}emit(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(l=>{let[c,h]=l;for(let f=0;f<h;f++)c(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(l=>{let[c,h]=l;for(let f=0;f<h;f++)c.apply(c,[e,...r])})}}class sD extends m_{constructor(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=i,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const i=this.options.ns.indexOf(e);i>-1&&this.options.ns.splice(i,1)}getResource(e,i,r){var f,p;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,i],r&&(Array.isArray(r)?c.push(...r):ze(r)&&a?c.push(...r.split(a)):c.push(r)));const h=Kg(this.data,c);return!h&&!i&&!r&&e.indexOf(".")>-1&&(e=c[0],i=c[1],r=c.slice(2).join(".")),h||!l||!ze(r)?h:o1((p=(f=this.data)==null?void 0:f[e])==null?void 0:p[i],r,a)}addResource(e,i,r,s){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let c=[e,i];r&&(c=c.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(c=e.split("."),s=i,i=c[1]),this.addNamespaces(i),rD(this.data,c,s),a.silent||this.emit("added",e,i,r,s)}addResources(e,i,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const a in r)(ze(r[a])||Array.isArray(r[a]))&&this.addResource(e,i,a,r[a],{silent:!0});s.silent||this.emit("added",e,i,r)}addResourceBundle(e,i,r,s,a){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},c=[e,i];e.indexOf(".")>-1&&(c=e.split("."),s=r,r=i,i=c[1]),this.addNamespaces(i);let h=Kg(this.data,c)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?p6(h,r,a):h={...h,...r},rD(this.data,c,h),l.silent||this.emit("added",e,i,r)}removeResourceBundle(e,i){this.hasResourceBundle(e,i)&&delete this.data[e][i],this.removeNamespaces(i),this.emit("removed",e,i)}hasResourceBundle(e,i){return this.getResource(e,i)!==void 0}getResourceBundle(e,i){return i||(i=this.options.defaultNS),this.getResource(e,i)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const i=this.getDataByLanguage(e);return!!(i&&Object.keys(i)||[]).find(s=>i[s]&&Object.keys(i[s]).length>0)}toJSON(){return this.data}}var m6={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,i,r,s){return t.forEach(a=>{var l;e=((l=this.processors[a])==null?void 0:l.process(e,i,r,s))??e}),e}};const nD={},aD=t=>!ze(t)&&typeof t!="boolean"&&typeof t!="number";class Qg extends m_{constructor(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),uq(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=i,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Cs.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,i);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,i){let r=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=i.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,c=!this.options.userDefinedKeySeparator&&!i.keySeparator&&!this.options.userDefinedNsSeparator&&!i.nsSeparator&&!_q(e,r,s);if(l&&!c){const h=e.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:e,namespaces:ze(a)?[a]:a};const f=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(f[0])>-1)&&(a=f.shift()),e=f.join(s)}return{key:e,namespaces:ze(a)?[a]:a}}translate(e,i,r){if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],i),h=c[c.length-1],f=i.lng||this.language,p=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((f==null?void 0:f.toLowerCase())==="cimode"){if(p){const N=i.nsSeparator||this.options.nsSeparator;return s?{res:`${h}${N}${l}`,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:`${h}${N}${l}`}return s?{res:l,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:l}const g=this.resolve(e,i);let y=g==null?void 0:g.res;const v=(g==null?void 0:g.usedKey)||l,x=(g==null?void 0:g.exactUsedKey)||l,A=["[object Number]","[object Function]","[object RegExp]"],S=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,E=i.count!==void 0&&!ze(i.count),B=Qg.hasDefaultValue(i),G=E?this.pluralResolver.getSuffix(f,i.count,i):"",U=i.ordinal&&E?this.pluralResolver.getSuffix(f,i.count,{ordinal:!1}):"",H=E&&!i.ordinal&&i.count===0,j=H&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${G}`]||i[`defaultValue${U}`]||i.defaultValue;let Z=y;w&&!y&&B&&(Z=j);const q=aD(Z),L=Object.prototype.toString.apply(Z);if(w&&Z&&q&&A.indexOf(L)<0&&!(ze(S)&&Array.isArray(Z))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const N=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,Z,{...i,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return s?(g.res=N,g.usedParams=this.getUsedParamsDetails(i),g):N}if(a){const N=Array.isArray(Z),se=N?[]:{},le=N?x:v;for(const pe in Z)if(Object.prototype.hasOwnProperty.call(Z,pe)){const Ae=`${le}${a}${pe}`;B&&!y?se[pe]=this.translate(Ae,{...i,defaultValue:aD(j)?j[pe]:void 0,joinArrays:!1,ns:c}):se[pe]=this.translate(Ae,{...i,joinArrays:!1,ns:c}),se[pe]===Ae&&(se[pe]=Z[pe])}y=se}}else if(w&&ze(S)&&Array.isArray(y))y=y.join(S),y&&(y=this.extendTranslation(y,e,i,r));else{let N=!1,se=!1;!this.isValidLookup(y)&&B&&(N=!0,y=j),this.isValidLookup(y)||(se=!0,y=l);const pe=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&se?void 0:y,Ae=B&&j!==y&&this.options.updateMissing;if(se||N||Ae){if(this.logger.log(Ae?"updateKey":"missingKey",f,h,l,Ae?j:y),a){const D=this.resolve(l,{...i,keySeparator:!1});D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let W=[];const te=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&te&&te[0])for(let D=0;D<te.length;D++)W.push(te[D]);else this.options.saveMissingTo==="all"?W=this.languageUtils.toResolveHierarchy(i.lng||this.language):W.push(i.lng||this.language);const P=(D,O,Q)=>{var re;const X=B&&Q!==y?Q:pe;this.options.missingKeyHandler?this.options.missingKeyHandler(D,h,O,X,Ae,i):(re=this.backendConnector)!=null&&re.saveMissing&&this.backendConnector.saveMissing(D,h,O,X,Ae,i),this.emit("missingKey",D,h,O,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?W.forEach(D=>{const O=this.pluralResolver.getSuffixes(D,i);H&&i[`defaultValue${this.options.pluralSeparator}zero`]&&O.indexOf(`${this.options.pluralSeparator}zero`)<0&&O.push(`${this.options.pluralSeparator}zero`),O.forEach(Q=>{P([D],l+Q,i[`defaultValue${Q}`]||j)})}):P(W,l,j))}y=this.extendTranslation(y,e,i,g,r),se&&y===l&&this.options.appendNamespaceToMissingKey&&(y=`${h}:${l}`),(se||N)&&this.options.parseMissingKeyHandler&&(y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}:${l}`:l,N?y:void 0))}return s?(g.res=y,g.usedParams=this.getUsedParamsDetails(i),g):y}extendTranslation(e,i,r,s,a){var f,p;var l=this;if((f=this.i18nFormat)!=null&&f.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const g=ze(e)&&(((p=r==null?void 0:r.interpolation)==null?void 0:p.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let y;if(g){const x=e.match(this.interpolator.nestingRegexp);y=x&&x.length}let v=r.replace&&!ze(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),e=this.interpolator.interpolate(e,v,r.lng||this.language||s.usedLng,r),g){const x=e.match(this.interpolator.nestingRegexp),A=x&&x.length;y<A&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var x=arguments.length,A=new Array(x),S=0;S<x;S++)A[S]=arguments[S];return(a==null?void 0:a[0])===A[0]&&!r.context?(l.logger.warn(`It seems you are nesting recursively key: ${A[0]} in key: ${i[0]}`),null):l.translate(...A,i)},r)),r.interpolation&&this.interpolator.reset()}const c=r.postProcess||this.options.postProcess,h=ze(c)?[c]:c;return e!=null&&(h!=null&&h.length)&&r.applyPostProcessor!==!1&&(e=m6.handle(h,e,i,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,s,a,l,c;return ze(e)&&(e=[e]),e.forEach(h=>{if(this.isValidLookup(r))return;const f=this.extractFromKey(h,i),p=f.key;s=p;let g=f.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const y=i.count!==void 0&&!ze(i.count),v=y&&!i.ordinal&&i.count===0,x=i.context!==void 0&&(ze(i.context)||typeof i.context=="number")&&i.context!=="",A=i.lngs?i.lngs:this.languageUtils.toResolveHierarchy(i.lng||this.language,i.fallbackLng);g.forEach(S=>{var w,E;this.isValidLookup(r)||(c=S,!nD[`${A[0]}-${S}`]&&((w=this.utils)!=null&&w.hasLoadedNamespace)&&!((E=this.utils)!=null&&E.hasLoadedNamespace(c))&&(nD[`${A[0]}-${S}`]=!0,this.logger.warn(`key "${s}" for languages "${A.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),A.forEach(B=>{var H;if(this.isValidLookup(r))return;l=B;const G=[p];if((H=this.i18nFormat)!=null&&H.addLookupKeys)this.i18nFormat.addLookupKeys(G,p,B,S,i);else{let j;y&&(j=this.pluralResolver.getSuffix(B,i.count,i));const Z=`${this.options.pluralSeparator}zero`,q=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(G.push(p+j),i.ordinal&&j.indexOf(q)===0&&G.push(p+j.replace(q,this.options.pluralSeparator)),v&&G.push(p+Z)),x){const L=`${p}${this.options.contextSeparator}${i.context}`;G.push(L),y&&(G.push(L+j),i.ordinal&&j.indexOf(q)===0&&G.push(L+j.replace(q,this.options.pluralSeparator)),v&&G.push(L+Z))}}let U;for(;U=G.pop();)this.isValidLookup(r)||(a=U,r=this.getResource(B,S,U,i))}))})}),{res:r,usedKey:s,exactUsedKey:a,usedLng:l,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,i,r){var a;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(a=this.i18nFormat)!=null&&a.getResource?this.i18nFormat.getResource(e,i,r,s):this.resourceStore.getResource(e,i,r,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ze(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const a of i)delete s[a]}return s}static hasDefaultValue(e){const i="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&i===r.substring(0,i.length)&&e[r]!==void 0)return!0;return!1}}class oD{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Cs.create("languageUtils")}getScriptPartFromCode(e){if(e=$g(e),!e||e.indexOf("-")<0)return null;const i=e.split("-");return i.length===2||(i.pop(),i[i.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(i.join("-"))}getLanguagePartFromCode(e){if(e=$g(e),!e||e.indexOf("-")<0)return e;const i=e.split("-");return this.formatLanguageCode(i[0])}formatLanguageCode(e){if(ze(e)&&e.indexOf("-")>-1){let i;try{i=Intl.getCanonicalLocales(e)[0]}catch{}return i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let i;return e.forEach(r=>{if(i)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(i=s)}),!i&&this.options.supportedLngs&&e.forEach(r=>{if(i)return;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return i=s;i=this.options.supportedLngs.find(a=>{if(a===s)return a;if(!(a.indexOf("-")<0&&s.indexOf("-")<0)&&(a.indexOf("-")>0&&s.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===s||a.indexOf(s)===0&&s.length>1))return a})}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}getFallbackCodes(e,i){if(!e)return[];if(typeof e=="function"&&(e=e(i)),ze(e)&&(e=[e]),Array.isArray(e))return e;if(!i)return e.default||[];let r=e[i];return r||(r=e[this.getScriptPartFromCode(i)]),r||(r=e[this.formatLanguageCode(i)]),r||(r=e[this.getLanguagePartFromCode(i)]),r||(r=e.default),r||[]}toResolveHierarchy(e,i){const r=this.getFallbackCodes(i||this.options.fallbackLng||[],e),s=[],a=l=>{l&&(this.isSupportedCode(l)?s.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return ze(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):ze(e)&&a(this.formatLanguageCode(e)),r.forEach(l=>{s.indexOf(l)<0&&a(this.formatLanguageCode(l))}),s}}const lD={zero:0,one:1,two:2,few:3,many:4,other:5},uD={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class bq{constructor(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=i,this.logger=Cs.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,i){this.rules[e]=i}clearCache(){this.pluralRulesCache={}}getRule(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=$g(e==="dev"?"en":e),s=i.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:s});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let l;try{l=new Intl.PluralRules(r,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),uD;if(!e.match(/-|_/))return uD;const h=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(h,i)}return this.pluralRulesCache[a]=l,l}needsPlural(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,i);return r||(r=this.getRule("dev",i)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(s=>`${i}${s}`)}getSuffixes(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,i);return r||(r=this.getRule("dev",i)),r?r.resolvedOptions().pluralCategories.sort((s,a)=>lD[s]-lD[a]).map(s=>`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(i)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",i,r))}}const cD=function(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=dq(t,e,i);return!a&&s&&ze(i)&&(a=o1(t,i,r),a===void 0&&(a=o1(e,i,r))),a},Y0=t=>t.replace(/\$/g,"$$$$");class xq{constructor(){var i;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Cs.create("interpolator"),this.options=e,this.format=((i=e==null?void 0:e.interpolation)==null?void 0:i.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:i,escapeValue:r,useRawValueToEscape:s,prefix:a,prefixEscaped:l,suffix:c,suffixEscaped:h,formatSeparator:f,unescapeSuffix:p,unescapePrefix:g,nestingPrefix:y,nestingPrefixEscaped:v,nestingSuffix:x,nestingSuffixEscaped:A,nestingOptionsSeparator:S,maxReplaces:w,alwaysFormat:E}=e.interpolation;this.escape=i!==void 0?i:pq,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=a?Sl(a):l||"{{",this.suffix=c?Sl(c):h||"}}",this.formatSeparator=f||",",this.unescapePrefix=p?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=y?Sl(y):v||Sl("$t("),this.nestingSuffix=x?Sl(x):A||Sl(")"),this.nestingOptionsSeparator=S||",",this.maxReplaces=w||1e3,this.alwaysFormat=E!==void 0?E:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(i,r)=>(i==null?void 0:i.source)===r?(i.lastIndex=0,i):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,i,r,s){var v;let a,l,c;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=x=>{if(x.indexOf(this.formatSeparator)<0){const E=cD(i,h,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,r,{...s,...i,interpolationkey:x}):E}const A=x.split(this.formatSeparator),S=A.shift().trim(),w=A.join(this.formatSeparator).trim();return this.format(cD(i,h,S,this.options.keySeparator,this.options.ignoreJSONStructure),w,r,{...s,...i,interpolationkey:S})};this.resetRegExp();const p=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,g=((v=s==null?void 0:s.interpolation)==null?void 0:v.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>Y0(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?Y0(this.escape(x)):Y0(x)}].forEach(x=>{for(c=0;a=x.regex.exec(e);){const A=a[1].trim();if(l=f(A),l===void 0)if(typeof p=="function"){const w=p(e,a,s);l=ze(w)?w:""}else if(s&&Object.prototype.hasOwnProperty.call(s,A))l="";else if(g){l=a[0];continue}else this.logger.warn(`missed to pass in variable ${A} for interpolating ${e}`),l="";else!ze(l)&&!this.useRawValueToEscape&&(l=eD(l));const S=x.safeValue(l);if(e=e.replace(a[0],S),g?(x.regex.lastIndex+=l.length,x.regex.lastIndex-=a[0].length):x.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,a,l;const c=(h,f)=>{const p=this.nestingOptionsSeparator;if(h.indexOf(p)<0)return h;const g=h.split(new RegExp(`${p}[ ]*{`));let y=`{${g[1]}`;h=g[0],y=this.interpolate(y,l);const v=y.match(/'/g),x=y.match(/"/g);(((v==null?void 0:v.length)??0)%2===0&&!x||x.length%2!==0)&&(y=y.replace(/'/g,'"'));try{l=JSON.parse(y),f&&(l={...f,...l})}catch(A){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,A),`${h}${p}${y}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,h};for(;s=this.nestingRegexp.exec(e);){let h=[];l={...r},l=l.replace&&!ze(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;let f=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const p=s[1].split(this.formatSeparator).map(g=>g.trim());s[1]=p.shift(),h=p,f=!0}if(a=i(c.call(this,s[1].trim(),l),l),a&&s[0]===e&&!ze(a))return a;ze(a)||(a=eD(a)),a||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),a=""),f&&(a=h.reduce((p,g)=>this.format(p,g,r.lng,{...r,interpolationkey:s[1].trim()}),a.trim())),e=e.replace(s[0],a),this.regexp.lastIndex=0}return e}}const Tq=t=>{let e=t.toLowerCase().trim();const i={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?i.currency||(i.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?i.range||(i.range=s.trim()):s.split(";").forEach(l=>{if(l){const[c,...h]=l.split(":"),f=h.join(":").trim().replace(/^'+|'+$/g,""),p=c.trim();i[p]||(i[p]=f),f==="false"&&(i[p]=!1),f==="true"&&(i[p]=!0),isNaN(f)||(i[p]=parseInt(f,10))}})}return{formatName:e,formatOptions:i}},Al=t=>{const e={};return(i,r,s)=>{let a=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(a={...a,[s.interpolationkey]:void 0});const l=r+JSON.stringify(a);let c=e[l];return c||(c=t($g(r),s),e[l]=c),c(i)}};class Sq{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Cs.create("formatter"),this.options=e,this.formats={number:Al((i,r)=>{const s=new Intl.NumberFormat(i,{...r});return a=>s.format(a)}),currency:Al((i,r)=>{const s=new Intl.NumberFormat(i,{...r,style:"currency"});return a=>s.format(a)}),datetime:Al((i,r)=>{const s=new Intl.DateTimeFormat(i,{...r});return a=>s.format(a)}),relativetime:Al((i,r)=>{const s=new Intl.RelativeTimeFormat(i,{...r});return a=>s.format(a,r.range||"day")}),list:Al((i,r)=>{const s=new Intl.ListFormat(i,{...r});return a=>s.format(a)})},this.init(e)}init(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=i.interpolation.formatSeparator||","}add(e,i){this.formats[e.toLowerCase().trim()]=i}addCached(e,i){this.formats[e.toLowerCase().trim()]=Al(i)}format(e,i,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=i.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(c=>c.indexOf(")")>-1)){const c=a.findIndex(h=>h.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,c)].join(this.formatSeparator)}return a.reduce((c,h)=>{var g;const{formatName:f,formatOptions:p}=Tq(h);if(this.formats[f]){let y=c;try{const v=((g=s==null?void 0:s.formatParams)==null?void 0:g[s.interpolationkey])||{},x=v.locale||v.lng||s.locale||s.lng||r;y=this.formats[f](c,x,{...p,...s,...v})}catch(v){this.logger.warn(v)}return y}else this.logger.warn(`there was no format function for ${f}`);return c},e)}}const Aq=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Eq extends m_{constructor(e,i,r){var a,l;let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=i,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Cs.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(l=(a=this.backend)==null?void 0:a.init)==null||l.call(a,r,s.backend,s)}queueLoad(e,i,r,s){const a={},l={},c={},h={};return e.forEach(f=>{let p=!0;i.forEach(g=>{const y=`${f}|${g}`;!r.reload&&this.store.hasResourceBundle(f,g)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?l[y]===void 0&&(l[y]=!0):(this.state[y]=1,p=!1,l[y]===void 0&&(l[y]=!0),a[y]===void 0&&(a[y]=!0),h[g]===void 0&&(h[g]=!0)))}),p||(c[f]=!0)}),(Object.keys(a).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(a),pending:Object.keys(l),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(h)}}loaded(e,i,r){const s=e.split("|"),a=s[0],l=s[1];i&&this.emit("failedLoading",a,l,i),!i&&r&&this.store.addResourceBundle(a,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=i?-1:2,i&&r&&(this.state[e]=0);const c={};this.queue.forEach(h=>{hq(h.loaded,[a],l),Aq(h,e),i&&h.errors.push(i),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(f=>{c[f]||(c[f]={});const p=h.loaded[f];p.length&&p.forEach(g=>{c[f][g]===void 0&&(c[f][g]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(h=>!h.done)}read(e,i,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:i,fcName:r,tried:s,wait:a,callback:l});return}this.readingCalls++;const c=(f,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(f&&p&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,i,r,s+1,a*2,l)},a);return}l(f,p)},h=this.backend[r].bind(this.backend);if(h.length===2){try{const f=h(e,i);f&&typeof f.then=="function"?f.then(p=>c(null,p)).catch(c):c(null,f)}catch(f){c(f)}return}return h(e,i,c)}prepareLoading(e,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();ze(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ze(i)&&(i=[i]);const a=this.queueLoad(e,i,r,s);if(!a.toLoad.length)return a.pending.length||s(),null;a.toLoad.forEach(l=>{this.loadOne(l)})}load(e,i,r){this.prepareLoading(e,i,{},r)}reload(e,i,r){this.prepareLoading(e,i,{reload:!0},r)}loadOne(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),s=r[0],a=r[1];this.read(s,a,"read",void 0,void 0,(l,c)=>{l&&this.logger.warn(`${i}loading namespace ${a} for language ${s} failed`,l),!l&&c&&this.logger.log(`${i}loaded namespace ${a} for language ${s}`,c),this.loaded(e,l,c)})}saveMissing(e,i,r,s,a){var h,f,p,g,y;let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((f=(h=this.services)==null?void 0:h.utils)!=null&&f.hasLoadedNamespace&&!((g=(p=this.services)==null?void 0:p.utils)!=null&&g.hasLoadedNamespace(i))){this.logger.warn(`did not save key "${r}" as the namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((y=this.backend)!=null&&y.create){const v={...l,isUpdate:a},x=this.backend.create.bind(this.backend);if(x.length<6)try{let A;x.length===5?A=x(e,i,r,s,v):A=x(e,i,r,s),A&&typeof A.then=="function"?A.then(S=>c(null,S)).catch(c):c(null,A)}catch(A){c(A)}else x(e,i,r,s,c,v)}!e||!e[0]||this.store.addResource(e[0],i,r,s)}}}const hD=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ze(t[1])&&(e.defaultValue=t[1]),ze(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const i=t[3]||t[2];Object.keys(i).forEach(r=>{e[r]=i[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),dD=t=>{var e,i;return ze(t.ns)&&(t.ns=[t.ns]),ze(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ze(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((i=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:i.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Bp=()=>{},wq=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(i=>{typeof t[i]=="function"&&(t[i]=t[i].bind(t))})};class Lh extends m_{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(super(),this.options=dD(e),this.services={},this.logger=Cs,this.modules={external:[]},wq(this),i&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,i),this;setTimeout(()=>{this.init(e,i)},0)}}init(){var e=this;let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof i=="function"&&(r=i,i={}),i.defaultNS==null&&i.ns&&(ze(i.ns)?i.defaultNS=i.ns:i.ns.indexOf("translation")<0&&(i.defaultNS=i.ns[0]));const s=hD();this.options={...s,...this.options,...dD(i)},this.options.interpolation={...s.interpolation,...this.options.interpolation},i.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=i.keySeparator),i.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=i.nsSeparator);const a=p=>p?typeof p=="function"?new p:p:null;if(!this.options.isClone){this.modules.logger?Cs.init(a(this.modules.logger),this.options):Cs.init(null,this.options);let p;this.modules.formatter?p=this.modules.formatter:p=Sq;const g=new oD(this.options);this.store=new sD(this.options.resources,this.options);const y=this.services;y.logger=Cs,y.resourceStore=this.store,y.languageUtils=g,y.pluralResolver=new bq(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),p&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(y.formatter=a(p),y.formatter.init(y,this.options),this.options.interpolation.format=y.formatter.format.bind(y.formatter)),y.interpolator=new xq(this.options),y.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},y.backendConnector=new Eq(a(this.modules.backend),y.resourceStore,y,this.options),y.backendConnector.on("*",function(v){for(var x=arguments.length,A=new Array(x>1?x-1:0),S=1;S<x;S++)A[S-1]=arguments[S];e.emit(v,...A)}),this.modules.languageDetector&&(y.languageDetector=a(this.modules.languageDetector),y.languageDetector.init&&y.languageDetector.init(y,this.options.detection,this.options)),this.modules.i18nFormat&&(y.i18nFormat=a(this.modules.i18nFormat),y.i18nFormat.init&&y.i18nFormat.init(this)),this.translator=new Qg(this.services,this.options),this.translator.on("*",function(v){for(var x=arguments.length,A=new Array(x>1?x-1:0),S=1;S<x;S++)A[S-1]=arguments[S];e.emit(v,...A)}),this.modules.external.forEach(v=>{v.init&&v.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Bp),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.length>0&&p[0]!=="dev"&&(this.options.lng=p[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(p=>{this[p]=function(){return e.store[p](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(p=>{this[p]=function(){return e.store[p](...arguments),e}});const h=Hc(),f=()=>{const p=(g,y)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(y),r(g,y)};if(this.languages&&!this.isInitialized)return p(null,this.t.bind(this));this.changeLanguage(this.options.lng,p)};return this.options.resources||!this.options.initAsync?f():setTimeout(f,0),h}loadResources(e){var a,l;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bp;const s=ze(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const c=[],h=f=>{if(!f||f==="cimode")return;this.services.languageUtils.toResolveHierarchy(f).forEach(g=>{g!=="cimode"&&c.indexOf(g)<0&&c.push(g)})};s?h(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>h(p)),(l=(a=this.options.preload)==null?void 0:a.forEach)==null||l.call(a,f=>h(f)),this.services.backendConnector.load(c,this.options.ns,f=>{!f&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(f)})}else r(null)}reloadResources(e,i,r){const s=Hc();return typeof e=="function"&&(r=e,e=void 0),typeof i=="function"&&(r=i,i=void 0),e||(e=this.languages),i||(i=this.options.ns),r||(r=Bp),this.services.backendConnector.reload(e,i,a=>{s.resolve(),r(a)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&m6.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let i=0;i<this.languages.length;i++){const r=this.languages[i];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,i){var r=this;this.isLanguageChangingTo=e;const s=Hc();this.emit("languageChanging",e);const a=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},l=(h,f)=>{f?(a(f),this.translator.changeLanguage(f),this.isLanguageChangingTo=void 0,this.emit("languageChanged",f),this.logger.log("languageChanged",f)):this.isLanguageChangingTo=void 0,s.resolve(function(){return r.t(...arguments)}),i&&i(h,function(){return r.t(...arguments)})},c=h=>{var p,g;!e&&!h&&this.services.languageDetector&&(h=[]);const f=ze(h)?h:this.services.languageUtils.getBestMatchFromCodes(h);f&&(this.language||a(f),this.translator.language||this.translator.changeLanguage(f),(g=(p=this.services.languageDetector)==null?void 0:p.cacheUserLanguage)==null||g.call(p,f)),this.loadResources(f,y=>{l(y,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),s}getFixedT(e,i,r){var s=this;const a=function(l,c){let h;if(typeof c!="object"){for(var f=arguments.length,p=new Array(f>2?f-2:0),g=2;g<f;g++)p[g-2]=arguments[g];h=s.options.overloadTranslationOptionHandler([l,c].concat(p))}else h={...c};h.lng=h.lng||a.lng,h.lngs=h.lngs||a.lngs,h.ns=h.ns||a.ns,h.keyPrefix!==""&&(h.keyPrefix=h.keyPrefix||r||a.keyPrefix);const y=s.options.keySeparator||".";let v;return h.keyPrefix&&Array.isArray(l)?v=l.map(x=>`${h.keyPrefix}${y}${x}`):v=h.keyPrefix?`${h.keyPrefix}${y}${l}`:l,s.t(v,h)};return ze(e)?a.lng=e:a.lngs=e,a.ns=i,a.keyPrefix=r,a}t(){var s;for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(s=this.translator)==null?void 0:s.translate(...i)}exists(){var s;for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(s=this.translator)==null?void 0:s.exists(...i)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=i.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(c,h)=>{const f=this.services.backendConnector.state[`${c}|${h}`];return f===-1||f===0||f===2};if(i.precheck){const c=i.precheck(this,l);if(c!==void 0)return c}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!s||l(a,e)))}loadNamespaces(e,i){const r=Hc();return this.options.ns?(ze(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),i&&i(s)}),r):(i&&i(),Promise.resolve())}loadLanguages(e,i){const r=Hc();ze(e)&&(e=[e]);const s=this.options.preload||[],a=e.filter(l=>s.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return a.length?(this.options.preload=s.concat(a),this.loadResources(l=>{r.resolve(),i&&i(l)}),r):(i&&i(),Promise.resolve())}dir(e){var s,a;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";const i=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((a=this.services)==null?void 0:a.languageUtils)||new oD(hD());return i.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return new Lh(e,i)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bp;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},a=new Lh(s);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(c=>{a[c]=this[c]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const c=Object.keys(this.store.data).reduce((h,f)=>(h[f]={...this.store.data[f]},Object.keys(h[f]).reduce((p,g)=>(p[g]={...h[f][g]},p),{})),{});a.store=new sD(c,s),a.services.resourceStore=a.store}return a.translator=new Qg(a.services,s),a.translator.on("*",function(c){for(var h=arguments.length,f=new Array(h>1?h-1:0),p=1;p<h;p++)f[p-1]=arguments[p];a.emit(c,...f)}),a.init(s,i),a.translator.options=s,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Fi=Lh.createInstance();Fi.createInstance=Lh.createInstance;Fi.createInstance;Fi.dir;Fi.init;Fi.loadResources;Fi.reloadResources;Fi.use;Fi.changeLanguage;Fi.getFixedT;Fi.t;Fi.exists;Fi.setDefaultNamespace;Fi.hasLoadedNamespace;Fi.loadNamespaces;Fi.loadLanguages;function Cq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rq(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oz(r.key),r)}}function Mq(t,e,i){return e&&Rq(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}var g6=[],Bq=g6.forEach,Pq=g6.slice;function Dq(t){return Bq.call(Pq.call(arguments,1),function(e){if(e)for(var i in e)t[i]===void 0&&(t[i]=e[i])}),t}function Oq(t){return t?typeof t=="function"?new t:t:null}function Fq(){return{handleEmptyResourcesAsFailed:!0,cacheHitMode:"none"}}function fD(t,e,i,r){var s=t.read.bind(t);if(s.length===2){try{var a=s(e,i);a&&typeof a.then=="function"?a.then(function(l){return r(null,l)}).catch(r):r(null,a)}catch(l){r(l)}return}s(e,i,r)}var y6=function(){function t(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Cq(this,t),this.backends=[],this.type="backend",this.allOptions=r,this.init(e,i)}return Mq(t,[{key:"init",value:function(i){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=i,this.options=Dq(s,this.options||{},Fq()),this.allOptions=a,this.options.backends&&this.options.backends.forEach(function(l,c){r.backends[c]=r.backends[c]||Oq(l),r.backends[c].init(i,r.options.backendOptions&&r.options.backendOptions[c]||{},a)}),this.services&&this.options.reloadInterval&&setInterval(function(){return r.reload()},this.options.reloadInterval)}},{key:"read",value:function(i,r,s){var a=this,l=this.backends.length,c=function f(p){if(p>=l)return s(new Error("non of the backend loaded data",!0));var g=p===l-1,y=a.options.handleEmptyResourcesAsFailed&&!g?0:-1,v=a.backends[p];v.read?fD(v,i,r,function(x,A,S){if(!x&&A&&Object.keys(A).length>y){if(s(null,A,p),h(p-1,A),v.save&&a.options.cacheHitMode&&["refresh","refreshAndUpdateStore"].indexOf(a.options.cacheHitMode)>-1){if(S&&a.options.refreshExpirationTime&&S+a.options.refreshExpirationTime>Date.now())return;var w=a.backends[p+1];w&&w.read&&fD(w,i,r,function(E,B){E||B&&(Object.keys(B).length<=y||(h(p,B),a.options.cacheHitMode==="refreshAndUpdateStore"&&a.services&&a.services.resourceStore&&a.services.resourceStore.addResourceBundle(i,r,B)))})}}else f(p+1)}):f(p+1)},h=function f(p,g){if(!(p<0)){var y=a.backends[p];y.save&&y.save(i,r,g),f(p-1,g)}};c(0)}},{key:"create",value:function(i,r,s,a){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){},c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.backends.forEach(function(h){if(h.create){var f=h.create.bind(h);if(f.length<6){try{var p;f.length===5?p=f(i,r,s,a,c):p=f(i,r,s,a),p&&typeof p.then=="function"?p.then(function(g){return l(null,g)}).catch(l):l(null,p)}catch(g){l(g)}return}f(i,r,s,a,l,c)}})}},{key:"reload",value:function(){var i=this,r=this.services,s=r.backendConnector,a=r.languageUtils,l=r.logger,c=s.language;if(!(c&&c.toLowerCase()==="cimode")){var h=[],f=function(g){var y=a.toResolveHierarchy(g);y.forEach(function(v){h.indexOf(v)<0&&h.push(v)})};f(c),this.allOptions.preload&&this.allOptions.preload.forEach(function(p){return f(p)}),h.forEach(function(p){i.allOptions.ns.forEach(function(g){s.read(p,g,"read",null,null,function(y,v){y&&l.warn("loading namespace ".concat(g," for language ").concat(p," failed"),y),!y&&v&&l.log("loaded namespace ".concat(g," for language ").concat(p),v),s.loaded("".concat(p,"|").concat(g),y,v)})})})}}}]),t}();y6.type="backend";var Gq=function(e){return{type:"backend",init:function(r,s,a){},read:function(r,s,a){if(typeof e=="function"){if(e.length<3){try{var l=e(r,s);l&&typeof l.then=="function"?l.then(function(c){return a(null,c&&c.default||c)}).catch(a):a(null,l)}catch(c){a(c)}return}e(r,s,a);return}a(null,e&&e[r]&&e[r][s])}}};const Lq=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,kq={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Iq=t=>kq[t],Uq=t=>t.replace(Lq,Iq);let l1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Uq};const Nq=(t={})=>{l1={...l1,...t}},NQ=()=>l1;let _6;const Hq=t=>{_6=t},HQ=()=>_6,Vq={type:"3rdParty",init(t){Nq(t.options.react),Hq(t)}},zq=()=>{var e;let t=navigator.language||"en";return(e=t==null?void 0:t.toLocaleLowerCase())==null?void 0:e.split("-")[0]},Xq=()=>{Fi.isInitialized||Fi.use(y6).use(Vq).init({debug:!1,fallbackLng:"en",lng:zq(),interpolation:{escapeValue:!1},load:"currentOnly",backend:{backends:[Gq(async(t,e)=>(await lq(Object.assign({"./locales/strings_en.json":()=>f6(()=>import("./strings_en-BtOJ1ICg.js"),[])}),`./locales/strings_${t}.json`,3))[e])]}})},v6=Ve.createContext({});function Yq(t){const e=Ve.useRef(null);return e.current===null&&(e.current=t()),e.current}const xw=typeof window<"u",jq=xw?Ve.useLayoutEffect:Ve.useEffect,Tw=Ve.createContext(null),b6=Ve.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function qq(t=!0){const e=Ve.useContext(Tw);if(e===null)return[!0,null];const{isPresent:i,onExitComplete:r,register:s}=e,a=Ve.useId();Ve.useEffect(()=>{if(t)return s(a)},[t]);const l=Ve.useCallback(()=>t&&r&&r(a),[a,r,t]);return!i&&r?[!1,l]:[!0]}const _r=t=>t;let x6=_r;const Wq={useManualTiming:!1},Pp=["read","resolveKeyframes","update","preRender","render","postRender"],pD={value:null};function Kq(t,e){let i=new Set,r=new Set,s=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},h=0;function f(g){l.has(g)&&(p.schedule(g),t()),h++,g(c)}const p={schedule:(g,y=!1,v=!1)=>{const A=v&&s?i:r;return y&&l.add(g),A.has(g)||A.add(g),g},cancel:g=>{r.delete(g),l.delete(g)},process:g=>{if(c=g,s){a=!0;return}s=!0,[i,r]=[r,i],i.forEach(f),e&&pD.value&&pD.value.frameloop[e].push(h),h=0,i.clear(),s=!1,a&&(a=!1,p.process(g))}};return p}const $q=40;function T6(t,e){let i=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>i=!0,l=Pp.reduce((w,E)=>(w[E]=Kq(a,e?E:void 0),w),{}),{read:c,resolveKeyframes:h,update:f,preRender:p,render:g,postRender:y}=l,v=()=>{const w=performance.now();i=!1,s.delta=r?1e3/60:Math.max(Math.min(w-s.timestamp,$q),1),s.timestamp=w,s.isProcessing=!0,c.process(s),h.process(s),f.process(s),p.process(s),g.process(s),y.process(s),s.isProcessing=!1,i&&e&&(r=!1,t(v))},x=()=>{i=!0,r=!0,s.isProcessing||t(v)};return{schedule:Pp.reduce((w,E)=>{const B=l[E];return w[E]=(G,U=!1,H=!1)=>(i||x(),B.schedule(G,U,H)),w},{}),cancel:w=>{for(let E=0;E<Pp.length;E++)l[Pp[E]].cancel(w)},state:s,steps:l}}const{schedule:Dt,cancel:oa,state:Di,steps:j0}=T6(typeof requestAnimationFrame<"u"?requestAnimationFrame:_r,!0),S6=Ve.createContext({strict:!1}),mD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},iu={};for(const t in mD)iu[t]={isEnabled:e=>mD[t].some(i=>!!e[i])};function Zq(t){for(const e in t)iu[e]={...iu[e],...t[e]}}const Qq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Jg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Qq.has(t)}let A6=t=>!Jg(t);function Jq(t){t&&(A6=e=>e.startsWith("on")?!Jg(e):t(e))}try{Jq(require("@emotion/is-prop-valid").default)}catch{}function eW(t,e,i){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(A6(s)||i===!0&&Jg(s)||!e&&!Jg(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function tW(t){if(typeof Proxy>"u")return t;const e=new Map,i=(...r)=>t(...r);return new Proxy(i,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const g_=Ve.createContext({});function y_(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function kh(t){return typeof t=="string"||Array.isArray(t)}const Sw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Aw=["initial",...Sw];function __(t){return y_(t.animate)||Aw.some(e=>kh(t[e]))}function E6(t){return!!(__(t)||t.variants)}function iW(t,e){if(__(t)){const{initial:i,animate:r}=t;return{initial:i===!1||kh(i)?i:void 0,animate:kh(r)?r:void 0}}return t.inherit!==!1?e:{}}function rW(t){const{initial:e,animate:i}=iW(t,Ve.useContext(g_));return Ve.useMemo(()=>({initial:e,animate:i}),[gD(e),gD(i)])}function gD(t){return Array.isArray(t)?t.join(" "):t}const sW=Symbol.for("motionComponentSymbol");function Bl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function nW(t,e,i){return Ve.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),i&&(typeof i=="function"?i(r):Bl(i)&&(i.current=r))},[e])}const{schedule:Ew}=T6(queueMicrotask,!1),ww=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),aW="framerAppearId",w6="data-"+ww(aW),C6=Ve.createContext({});function oW(t,e,i,r,s){var a,l;const{visualElement:c}=Ve.useContext(g_),h=Ve.useContext(S6),f=Ve.useContext(Tw),p=Ve.useContext(b6).reducedMotion,g=Ve.useRef(null);r=r||h.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:c,props:i,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const y=g.current,v=Ve.useContext(C6);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&lW(g.current,i,s,v);const x=Ve.useRef(!1);Ve.useInsertionEffect(()=>{y&&x.current&&y.update(i,f)});const A=i[w6],S=Ve.useRef(!!A&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,A))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,A)));return jq(()=>{y&&(x.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),Ew.render(y.render),S.current&&y.animationState&&y.animationState.animateChanges())}),Ve.useEffect(()=>{y&&(!S.current&&y.animationState&&y.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)===null||w===void 0||w.call(window,A)}),S.current=!1))}),y}function lW(t,e,i,r){const{layoutId:s,layout:a,drag:l,dragConstraints:c,layoutScroll:h,layoutRoot:f}=e;t.projection=new i(t.latestValues,e["data-framer-portal-id"]?void 0:R6(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||c&&Bl(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:h,layoutRoot:f})}function R6(t){if(t)return t.options.allowProjection!==!1?t.projection:R6(t.parent)}function uW({preloadedFeatures:t,createVisualElement:e,useRender:i,useVisualState:r,Component:s}){var a,l;t&&Zq(t);function c(f,p){let g;const y={...Ve.useContext(b6),...f,layoutId:cW(f)},{isStatic:v}=y,x=rW(f),A=r(f,v);if(!v&&xw){hW();const S=dW(y);g=S.MeasureLayout,x.visualElement=oW(s,A,y,e,S.ProjectionNode)}return Vr.jsxs(g_.Provider,{value:x,children:[g&&x.visualElement?Vr.jsx(g,{visualElement:x.visualElement,...y}):null,i(s,f,nW(A,x.visualElement,p),A,v,x.visualElement)]})}c.displayName=`motion.${typeof s=="string"?s:`create(${(l=(a=s.displayName)!==null&&a!==void 0?a:s.name)!==null&&l!==void 0?l:""})`}`;const h=Ve.forwardRef(c);return h[sW]=s,h}function cW({layoutId:t}){const e=Ve.useContext(v6).id;return e&&t!==void 0?e+"-"+t:t}function hW(t,e){Ve.useContext(S6).strict}function dW(t){const{drag:e,layout:i}=iu;if(!e&&!i)return{};const r={...e,...i};return{MeasureLayout:e!=null&&e.isEnabled(t)||i!=null&&i.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const M6=t=>e=>typeof e=="string"&&e.startsWith(t),Cw=M6("--"),fW=M6("var(--"),Rw=t=>fW(t)?pW.test(t.split("/*")[0].trim()):!1,pW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ih={};function mW(t){for(const e in t)Ih[e]=t[e],Cw(e)&&(Ih[e].isCSSVariable=!0)}const Eu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Po=new Set(Eu);function B6(t,{layout:e,layoutId:i}){return Po.has(t)||t.startsWith("origin")||(e||i!==void 0)&&(!!Ih[t]||t==="opacity")}const zi=t=>!!(t&&t.getVelocity),P6=(t,e)=>e&&typeof t=="number"?e.transform(t):t,yn=(t,e,i)=>i>e?e:i<t?t:i,wu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Uh={...wu,transform:t=>yn(0,1,t)},Dp={...wu,default:1},Sd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),$n=Sd("deg"),Rs=Sd("%"),Ue=Sd("px"),gW=Sd("vh"),yW=Sd("vw"),yD={...Rs,parse:t=>Rs.parse(t)/100,transform:t=>Rs.transform(t*100)},_W={borderWidth:Ue,borderTopWidth:Ue,borderRightWidth:Ue,borderBottomWidth:Ue,borderLeftWidth:Ue,borderRadius:Ue,radius:Ue,borderTopLeftRadius:Ue,borderTopRightRadius:Ue,borderBottomRightRadius:Ue,borderBottomLeftRadius:Ue,width:Ue,maxWidth:Ue,height:Ue,maxHeight:Ue,top:Ue,right:Ue,bottom:Ue,left:Ue,padding:Ue,paddingTop:Ue,paddingRight:Ue,paddingBottom:Ue,paddingLeft:Ue,margin:Ue,marginTop:Ue,marginRight:Ue,marginBottom:Ue,marginLeft:Ue,backgroundPositionX:Ue,backgroundPositionY:Ue},vW={rotate:$n,rotateX:$n,rotateY:$n,rotateZ:$n,scale:Dp,scaleX:Dp,scaleY:Dp,scaleZ:Dp,skew:$n,skewX:$n,skewY:$n,distance:Ue,translateX:Ue,translateY:Ue,translateZ:Ue,x:Ue,y:Ue,z:Ue,perspective:Ue,transformPerspective:Ue,opacity:Uh,originX:yD,originY:yD,originZ:Ue},_D={...wu,transform:Math.round},Mw={..._W,...vW,zIndex:_D,size:Ue,fillOpacity:Uh,strokeOpacity:Uh,numOctaves:_D},bW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xW=Eu.length;function TW(t,e,i){let r="",s=!0;for(let a=0;a<xW;a++){const l=Eu[a],c=t[l];if(c===void 0)continue;let h=!0;if(typeof c=="number"?h=c===(l.startsWith("scale")?1:0):h=parseFloat(c)===0,!h||i){const f=P6(c,Mw[l]);if(!h){s=!1;const p=bW[l]||l;r+=`${p}(${f}) `}i&&(e[l]=f)}}return r=r.trim(),i?r=i(e,s?"":r):s&&(r="none"),r}function Bw(t,e,i){const{style:r,vars:s,transformOrigin:a}=t;let l=!1,c=!1;for(const h in e){const f=e[h];if(Po.has(h)){l=!0;continue}else if(Cw(h)){s[h]=f;continue}else{const p=P6(f,Mw[h]);h.startsWith("origin")?(c=!0,a[h]=p):r[h]=p}}if(e.transform||(l||i?r.transform=TW(e,t.transform,i):r.transform&&(r.transform="none")),c){const{originX:h="50%",originY:f="50%",originZ:p=0}=a;r.transformOrigin=`${h} ${f} ${p}`}}const Pw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function D6(t,e,i){for(const r in e)!zi(e[r])&&!B6(r,i)&&(t[r]=e[r])}function SW({transformTemplate:t},e){return Ve.useMemo(()=>{const i=Pw();return Bw(i,e,t),Object.assign({},i.vars,i.style)},[e])}function AW(t,e){const i=t.style||{},r={};return D6(r,i,t),Object.assign(r,SW(t,e)),r}function EW(t,e){const i={},r=AW(t,e);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=r,i}const wW=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Dw(t){return typeof t!="string"||t.includes("-")?!1:!!(wW.indexOf(t)>-1||/[A-Z]/u.test(t))}const CW={offset:"stroke-dashoffset",array:"stroke-dasharray"},RW={offset:"strokeDashoffset",array:"strokeDasharray"};function MW(t,e,i=1,r=0,s=!0){t.pathLength=1;const a=s?CW:RW;t[a.offset]=Ue.transform(-r);const l=Ue.transform(e),c=Ue.transform(i);t[a.array]=`${l} ${c}`}function vD(t,e,i){return typeof t=="string"?t:Ue.transform(e+i*t)}function BW(t,e,i){const r=vD(e,t.x,t.width),s=vD(i,t.y,t.height);return`${r} ${s}`}function Ow(t,{attrX:e,attrY:i,attrScale:r,originX:s,originY:a,pathLength:l,pathSpacing:c=1,pathOffset:h=0,...f},p,g){if(Bw(t,f,g),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:v,dimensions:x}=t;y.transform&&(x&&(v.transform=y.transform),delete y.transform),x&&(s!==void 0||a!==void 0||v.transform)&&(v.transformOrigin=BW(x,s!==void 0?s:.5,a!==void 0?a:.5)),e!==void 0&&(y.x=e),i!==void 0&&(y.y=i),r!==void 0&&(y.scale=r),l!==void 0&&MW(y,l,c,h,!1)}const O6=()=>({...Pw(),attrs:{}}),Fw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function PW(t,e,i,r){const s=Ve.useMemo(()=>{const a=O6();return Ow(a,e,Fw(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};D6(a,t.style,t),s.style={...a,...s.style}}return s}function DW(t=!1){return(i,r,s,{latestValues:a},l)=>{const h=(Dw(i)?PW:EW)(r,a,l,i),f=eW(r,typeof i=="string",t),p=i!==Ve.Fragment?{...f,...h,ref:s}:{},{children:g}=r,y=Ve.useMemo(()=>zi(g)?g.get():g,[g]);return Ve.createElement(i,{...p,children:y})}}function bD(t){const e=[{},{}];return t==null||t.values.forEach((i,r)=>{e[0][r]=i.get(),e[1][r]=i.getVelocity()}),e}function Gw(t,e,i,r){if(typeof e=="function"){const[s,a]=bD(r);e=e(i!==void 0?i:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=bD(r);e=e(i!==void 0?i:t.custom,s,a)}return e}const u1=t=>Array.isArray(t),OW=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),FW=t=>u1(t)?t[t.length-1]||0:t;function tm(t){const e=zi(t)?t.get():t;return OW(e)?e.toValue():e}function GW({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:i},r,s,a){const l={latestValues:LW(r,s,a,t),renderState:e()};return i&&(l.onMount=c=>i({props:r,current:c,...l}),l.onUpdate=c=>i(c)),l}const F6=t=>(e,i)=>{const r=Ve.useContext(g_),s=Ve.useContext(Tw),a=()=>GW(t,e,r,s);return i?a():Yq(a)};function LW(t,e,i,r){const s={},a=r(t,{});for(const y in a)s[y]=tm(a[y]);let{initial:l,animate:c}=t;const h=__(t),f=E6(t);e&&f&&!h&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let p=i?i.initial===!1:!1;p=p||l===!1;const g=p?c:l;if(g&&typeof g!="boolean"&&!y_(g)){const y=Array.isArray(g)?g:[g];for(let v=0;v<y.length;v++){const x=Gw(t,y[v]);if(x){const{transitionEnd:A,transition:S,...w}=x;for(const E in w){let B=w[E];if(Array.isArray(B)){const G=p?B.length-1:0;B=B[G]}B!==null&&(s[E]=B)}for(const E in A)s[E]=A[E]}}}return s}function Lw(t,e,i){var r;const{style:s}=t,a={};for(const l in s)(zi(s[l])||e.style&&zi(e.style[l])||B6(l,t)||((r=i==null?void 0:i.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[l]=s[l]);return a}const kW={useVisualState:F6({scrapeMotionValuesFromProps:Lw,createRenderState:Pw})};function G6(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function L6(t,{style:e,vars:i},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const a in i)t.style.setProperty(a,i[a])}const k6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function I6(t,e,i,r){L6(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(k6.has(s)?s:ww(s),e.attrs[s])}function U6(t,e,i){const r=Lw(t,e,i);for(const s in t)if(zi(t[s])||zi(e[s])){const a=Eu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}const xD=["x","y","width","height","cx","cy","r"],IW={useVisualState:F6({scrapeMotionValuesFromProps:U6,createRenderState:O6,onUpdate:({props:t,prevProps:e,current:i,renderState:r,latestValues:s})=>{if(!i)return;let a=!!t.drag;if(!a){for(const c in s)if(Po.has(c)){a=!0;break}}if(!a)return;let l=!e;if(e)for(let c=0;c<xD.length;c++){const h=xD[c];t[h]!==e[h]&&(l=!0)}l&&Dt.read(()=>{G6(i,r),Dt.render(()=>{Ow(r,s,Fw(i.tagName),t.transformTemplate),I6(i,r)})})}})};function UW(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...Dw(r)?IW:kW,preloadedFeatures:t,useRender:DW(s),createVisualElement:e,Component:r};return uW(l)}}function Nh(t,e,i){const r=t.getProps();return Gw(r,e,i!==void 0?i:r.custom,t)}function kw(t,e){return t?t[e]||t.default||t:void 0}const N6=new Set(["width","height","top","left","right","bottom",...Eu]);function Iw(t,e){t.indexOf(e)===-1&&t.push(e)}function Uw(t,e){const i=t.indexOf(e);i>-1&&t.splice(i,1)}class Nw{constructor(){this.subscriptions=[]}add(e){return Iw(this.subscriptions,e),()=>Uw(this.subscriptions,e)}notify(e,i,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,i,r);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(e,i,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function H6(t,e){return e?t*(1e3/e):0}let im;function NW(){im=void 0}const Ms={now:()=>(im===void 0&&Ms.set(Di.isProcessing||Wq.useManualTiming?Di.timestamp:performance.now()),im),set:t=>{im=t,queueMicrotask(NW)}},TD=30,HW=t=>!isNaN(parseFloat(t));class VW{constructor(e,i={}){this.version="12.5.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const a=Ms.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=i.owner}setCurrent(e){this.current=e,this.updatedAt=Ms.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=HW(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,i){this.events[e]||(this.events[e]=new Nw);const r=this.events[e].add(i);return e==="change"?()=>{r(),Dt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,i){this.passiveEffect=e,this.stopPassiveEffect=i}set(e,i=!0){!i||!this.passiveEffect?this.updateAndNotify(e,i):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,i,r){this.set(i),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,i=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ms.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>TD)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,TD);return H6(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(e){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=e(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hh(t,e){return new VW(t,e)}function zW(t,e,i){t.hasValue(e)?t.getValue(e).set(i):t.addValue(e,Hh(i))}function XW(t,e){const i=Nh(t,e);let{transitionEnd:r={},transition:s={},...a}=i||{};a={...a,...r};for(const l in a){const c=FW(a[l]);zW(t,l,c)}}function YW(t){return!!(zi(t)&&t.add)}function c1(t,e){const i=t.getValue("willChange");if(YW(i))return i.add(e)}function V6(t){return t.props[w6]}function Hw(t){let e;return()=>(e===void 0&&(e=t()),e)}const jW=Hw(()=>window.ScrollTimeline!==void 0);class qW{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,i){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=i}attachTimeline(e,i){const r=this.animations.map(s=>{if(jW()&&s.attachTimeline)return s.attachTimeline(e);if(typeof i=="function")return i(s)});return()=>{r.forEach((s,a)=>{s&&s(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let i=0;i<this.animations.length;i++)e=Math.max(e,this.animations[i].duration);return e}runAll(e){this.animations.forEach(i=>i[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class WW extends qW{then(e,i){return Promise.all(this.animations).then(e).catch(i)}}const hn=t=>t*1e3,dn=t=>t/1e3;function Vw(t){return typeof t=="function"}function SD(t,e){t.timeline=e,t.onfinish=null}const zw=t=>Array.isArray(t)&&typeof t[0]=="number",KW={linearEasing:void 0};function $W(t,e){const i=Hw(t);return()=>{var r;return(r=KW[e])!==null&&r!==void 0?r:i()}}const ey=$W(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ru=(t,e,i)=>{const r=e-t;return r===0?1:(i-t)/r},z6=(t,e,i=10)=>{let r="";const s=Math.max(Math.round(e/i),2);for(let a=0;a<s;a++)r+=t(ru(0,s-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function X6(t){return!!(typeof t=="function"&&ey()||!t||typeof t=="string"&&(t in h1||ey())||zw(t)||Array.isArray(t)&&t.every(X6))}const Jc=([t,e,i,r])=>`cubic-bezier(${t}, ${e}, ${i}, ${r})`,h1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Jc([0,.65,.55,1]),circOut:Jc([.55,0,1,.45]),backIn:Jc([.31,.01,.66,-.59]),backOut:Jc([.33,1.53,.69,.99])};function Y6(t,e){if(t)return typeof t=="function"&&ey()?z6(t,e):zw(t)?Jc(t):Array.isArray(t)?t.map(i=>Y6(i,e)||h1.easeOut):h1[t]}const j6=(t,e,i)=>(((1-3*i+3*e)*t+(3*i-6*e))*t+3*e)*t,ZW=1e-7,QW=12;function JW(t,e,i,r,s){let a,l,c=0;do l=e+(i-e)/2,a=j6(l,r,s)-t,a>0?i=l:e=l;while(Math.abs(a)>ZW&&++c<QW);return l}function Ad(t,e,i,r){if(t===e&&i===r)return _r;const s=a=>JW(a,0,1,t,i);return a=>a===0||a===1?a:j6(s(a),e,r)}const q6=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,W6=t=>e=>1-t(1-e),K6=Ad(.33,1.53,.69,.99),Xw=W6(K6),$6=q6(Xw),Z6=t=>(t*=2)<1?.5*Xw(t):.5*(2-Math.pow(2,-10*(t-1))),Yw=t=>1-Math.sin(Math.acos(t)),Q6=W6(Yw),J6=q6(Yw),eH=t=>/^0[^.\s]+$/u.test(t);function eK(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||eH(t):!0}const dh=t=>Math.round(t*1e5)/1e5,jw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tK(t){return t==null}const iK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qw=(t,e)=>i=>!!(typeof i=="string"&&iK.test(i)&&i.startsWith(t)||e&&!tK(i)&&Object.prototype.hasOwnProperty.call(i,e)),tH=(t,e,i)=>r=>{if(typeof r!="string")return r;const[s,a,l,c]=r.match(jw);return{[t]:parseFloat(s),[e]:parseFloat(a),[i]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},rK=t=>yn(0,255,t),q0={...wu,transform:t=>Math.round(rK(t))},ro={test:qw("rgb","red"),parse:tH("red","green","blue"),transform:({red:t,green:e,blue:i,alpha:r=1})=>"rgba("+q0.transform(t)+", "+q0.transform(e)+", "+q0.transform(i)+", "+dh(Uh.transform(r))+")"};function sK(t){let e="",i="",r="",s="";return t.length>5?(e=t.substring(1,3),i=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),i=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,i+=i,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(i,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const d1={test:qw("#"),parse:sK,transform:ro.transform},Pl={test:qw("hsl","hue"),parse:tH("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:i,alpha:r=1})=>"hsla("+Math.round(t)+", "+Rs.transform(dh(e))+", "+Rs.transform(dh(i))+", "+dh(Uh.transform(r))+")"},Hi={test:t=>ro.test(t)||d1.test(t)||Pl.test(t),parse:t=>ro.test(t)?ro.parse(t):Pl.test(t)?Pl.parse(t):d1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ro.transform(t):Pl.transform(t)},nK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function aK(t){var e,i;return isNaN(t)&&typeof t=="string"&&(((e=t.match(jw))===null||e===void 0?void 0:e.length)||0)+(((i=t.match(nK))===null||i===void 0?void 0:i.length)||0)>0}const iH="number",rH="color",oK="var",lK="var(",AD="${}",uK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vh(t){const e=t.toString(),i=[],r={color:[],number:[],var:[]},s=[];let a=0;const c=e.replace(uK,h=>(Hi.test(h)?(r.color.push(a),s.push(rH),i.push(Hi.parse(h))):h.startsWith(lK)?(r.var.push(a),s.push(oK),i.push(h)):(r.number.push(a),s.push(iH),i.push(parseFloat(h))),++a,AD)).split(AD);return{values:i,split:c,indexes:r,types:s}}function sH(t){return Vh(t).values}function nH(t){const{split:e,types:i}=Vh(t),r=e.length;return s=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],s[l]!==void 0){const c=i[l];c===iH?a+=dh(s[l]):c===rH?a+=Hi.transform(s[l]):a+=s[l]}return a}}const cK=t=>typeof t=="number"?0:t;function hK(t){const e=sH(t);return nH(t)(e.map(cK))}const la={test:aK,parse:sH,createTransformer:nH,getAnimatableNone:hK},dK=new Set(["brightness","contrast","saturate","opacity"]);function fK(t){const[e,i]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=i.match(jw)||[];if(!r)return t;const s=i.replace(r,"");let a=dK.has(e)?1:0;return r!==i&&(a*=100),e+"("+a+s+")"}const pK=/\b([a-z-]*)\(.*?\)/gu,f1={...la,getAnimatableNone:t=>{const e=t.match(pK);return e?e.map(fK).join(" "):t}},mK={...Mw,color:Hi,backgroundColor:Hi,outlineColor:Hi,fill:Hi,stroke:Hi,borderColor:Hi,borderTopColor:Hi,borderRightColor:Hi,borderBottomColor:Hi,borderLeftColor:Hi,filter:f1,WebkitFilter:f1},aH=t=>mK[t];function oH(t,e){let i=aH(t);return i!==f1&&(i=la),i.getAnimatableNone?i.getAnimatableNone(e):void 0}const gK=new Set(["auto","none","0"]);function yK(t,e,i){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!gK.has(a)&&Vh(a).values.length&&(s=t[r]),r++}if(s&&i)for(const a of e)t[a]=oH(i,s)}const so=t=>t*180/Math.PI,p1=t=>{const e=so(Math.atan2(t[1],t[0]));return m1(e)},_K={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:p1,rotateZ:p1,skewX:t=>so(Math.atan(t[1])),skewY:t=>so(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},m1=t=>(t=t%360,t<0&&(t+=360),t),ED=p1,wD=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),CD=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),vK={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:wD,scaleY:CD,scale:t=>(wD(t)+CD(t))/2,rotateX:t=>m1(so(Math.atan2(t[6],t[5]))),rotateY:t=>m1(so(Math.atan2(-t[2],t[0]))),rotateZ:ED,rotate:ED,skewX:t=>so(Math.atan(t[4])),skewY:t=>so(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function RD(t){return t.includes("scale")?1:0}function g1(t,e){if(!t||t==="none")return RD(e);const i=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(i)r=vK,s=i;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=_K,s=c}if(!s)return RD(e);const a=r[e],l=s[1].split(",").map(xK);return typeof a=="function"?a(l):l[a]}const bK=(t,e)=>{const{transform:i="none"}=getComputedStyle(t);return g1(i,e)};function xK(t){return parseFloat(t.trim())}const MD=t=>t===wu||t===Ue,TK=new Set(["x","y","z"]),SK=Eu.filter(t=>!TK.has(t));function AK(t){const e=[];return SK.forEach(i=>{const r=t.getValue(i);r!==void 0&&(e.push([i,r.get()]),r.set(i.startsWith("scale")?1:0))}),e}const su={width:({x:t},{paddingLeft:e="0",paddingRight:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),height:({y:t},{paddingTop:e="0",paddingBottom:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>g1(e,"x"),y:(t,{transform:e})=>g1(e,"y")};su.translateX=su.x;su.translateY=su.y;const oo=new Set;let y1=!1,_1=!1;function lH(){if(_1){const t=Array.from(oo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),i=new Map;e.forEach(r=>{const s=AK(r);s.length&&(i.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=i.get(r);s&&s.forEach(([a,l])=>{var c;(c=r.getValue(a))===null||c===void 0||c.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}_1=!1,y1=!1,oo.forEach(t=>t.complete()),oo.clear()}function uH(){oo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(_1=!0)})}function EK(){uH(),lH()}class Ww{constructor(e,i,r,s,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=i,this.name=r,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(oo.add(this),y1||(y1=!0,Dt.read(uH),Dt.resolveKeyframes(lH))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:i,element:r,motionValue:s}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const l=s==null?void 0:s.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&i){const h=r.readValue(i,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),s&&l===void 0&&s.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),oo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,oo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const cH=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),wK=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function CK(t){const e=wK.exec(t);if(!e)return[,];const[,i,r,s]=e;return[`--${i??r}`,s]}function hH(t,e,i=1){const[r,s]=CK(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return cH(l)?parseFloat(l):l}return Rw(s)?hH(s,e,i+1):s}const dH=t=>e=>e.test(t),RK={test:t=>t==="auto",parse:t=>t},fH=[wu,Ue,Rs,$n,yW,gW,RK],BD=t=>fH.find(dH(t));class pH extends Ww{constructor(e,i,r,s,a){super(e,i,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:i,name:r}=this;if(!i||!i.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),Rw(f))){const p=hH(f,i.current);p!==void 0&&(e[h]=p),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!N6.has(r)||e.length!==2)return;const[s,a]=e,l=BD(s),c=BD(a);if(l!==c)if(MD(l)&&MD(c))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:i}=this,r=[];for(let s=0;s<e.length;s++)eK(e[s])&&r.push(s);r.length&&yK(e,r,i)}measureInitialState(){const{element:e,unresolvedKeyframes:i,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=su[r](e.measureViewportBox(),window.getComputedStyle(e.current)),i[0]=this.measuredOrigin;const s=i[i.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:i,name:r,unresolvedKeyframes:s}=this;if(!i||!i.current)return;const a=i.getValue(r);a&&a.jump(this.measuredOrigin,!1);const l=s.length-1,c=s[l];s[l]=su[r](i.measureViewportBox(),window.getComputedStyle(i.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([h,f])=>{i.getValue(h).set(f)}),this.resolveNoneKeyframes()}}const PD=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(la.test(t)||t==="0")&&!t.startsWith("url("));function MK(t){const e=t[0];if(t.length===1)return!0;for(let i=0;i<t.length;i++)if(t[i]!==e)return!0}function BK(t,e,i,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=PD(s,e),c=PD(a,e);return!l||!c?!1:MK(t)||(i==="spring"||Vw(i))&&r}const PK=t=>t!==null;function v_(t,{repeat:e,repeatType:i="loop"},r){const s=t.filter(PK),a=e&&i!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const DK=40;class mH{constructor({autoplay:e=!0,delay:i=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ms.now(),this.options={autoplay:e,delay:i,type:r,repeat:s,repeatDelay:a,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>DK?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&EK(),this._resolved}onKeyframesResolved(e,i){this.resolvedAt=Ms.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:a,delay:l,onComplete:c,onUpdate:h,isGenerator:f}=this.options;if(!f&&!BK(e,r,s,a))if(l)this.options.duration=0;else{h&&h(v_(e,this.options,i)),c&&c(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,i);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:i,...p},this.onPostResolved())}onPostResolved(){}then(e,i){return this.currentFinishedPromise.then(e,i)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const v1=2e4;function gH(t){let e=0;const i=50;let r=t.next(e);for(;!r.done&&e<v1;)e+=i,r=t.next(e);return e>=v1?1/0:e}const zt=(t,e,i)=>t+(e-t)*i;function W0(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*6*i:i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function OK({hue:t,saturation:e,lightness:i,alpha:r}){t/=360,e/=100,i/=100;let s=0,a=0,l=0;if(!e)s=a=l=i;else{const c=i<.5?i*(1+e):i+e-i*e,h=2*i-c;s=W0(h,c,t+1/3),a=W0(h,c,t),l=W0(h,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function ty(t,e){return i=>i>0?e:t}const K0=(t,e,i)=>{const r=t*t,s=i*(e*e-r)+r;return s<0?0:Math.sqrt(s)},FK=[d1,ro,Pl],GK=t=>FK.find(e=>e.test(t));function DD(t){const e=GK(t);if(!e)return!1;let i=e.parse(t);return e===Pl&&(i=OK(i)),i}const OD=(t,e)=>{const i=DD(t),r=DD(e);if(!i||!r)return ty(t,e);const s={...i};return a=>(s.red=K0(i.red,r.red,a),s.green=K0(i.green,r.green,a),s.blue=K0(i.blue,r.blue,a),s.alpha=zt(i.alpha,r.alpha,a),ro.transform(s))},LK=(t,e)=>i=>e(t(i)),Ed=(...t)=>t.reduce(LK),b1=new Set(["none","hidden"]);function kK(t,e){return b1.has(t)?i=>i<=0?t:e:i=>i>=1?e:t}function IK(t,e){return i=>zt(t,e,i)}function Kw(t){return typeof t=="number"?IK:typeof t=="string"?Rw(t)?ty:Hi.test(t)?OD:HK:Array.isArray(t)?yH:typeof t=="object"?Hi.test(t)?OD:UK:ty}function yH(t,e){const i=[...t],r=i.length,s=t.map((a,l)=>Kw(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)i[l]=s[l](a);return i}}function UK(t,e){const i={...t,...e},r={};for(const s in i)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Kw(t[s])(t[s],e[s]));return s=>{for(const a in r)i[a]=r[a](s);return i}}function NK(t,e){var i;const r=[],s={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],c=t.indexes[l][s[l]],h=(i=t.values[c])!==null&&i!==void 0?i:0;r[a]=h,s[l]++}return r}const HK=(t,e)=>{const i=la.createTransformer(e),r=Vh(t),s=Vh(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?b1.has(t)&&!s.values.length||b1.has(e)&&!r.values.length?kK(t,e):Ed(yH(NK(r,s),s.values),i):ty(t,e)};function _H(t,e,i){return typeof t=="number"&&typeof e=="number"&&typeof i=="number"?zt(t,e,i):Kw(t)(t,e)}const VK=5;function vH(t,e,i){const r=Math.max(e-VK,0);return H6(i-t(r),e-r)}const Qt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},FD=.001;function zK({duration:t=Qt.duration,bounce:e=Qt.bounce,velocity:i=Qt.velocity,mass:r=Qt.mass}){let s,a,l=1-e;l=yn(Qt.minDamping,Qt.maxDamping,l),t=yn(Qt.minDuration,Qt.maxDuration,dn(t)),l<1?(s=f=>{const p=f*l,g=p*t,y=p-i,v=x1(f,l),x=Math.exp(-g);return FD-y/v*x},a=f=>{const g=f*l*t,y=g*i+i,v=Math.pow(l,2)*Math.pow(f,2)*t,x=Math.exp(-g),A=x1(Math.pow(f,2),l);return(-s(f)+FD>0?-1:1)*((y-v)*x)/A}):(s=f=>{const p=Math.exp(-f*t),g=(f-i)*t+1;return-.001+p*g},a=f=>{const p=Math.exp(-f*t),g=(i-f)*(t*t);return p*g});const c=5/t,h=YK(s,a,c);if(t=hn(t),isNaN(h))return{stiffness:Qt.stiffness,damping:Qt.damping,duration:t};{const f=Math.pow(h,2)*r;return{stiffness:f,damping:l*2*Math.sqrt(r*f),duration:t}}}const XK=12;function YK(t,e,i){let r=i;for(let s=1;s<XK;s++)r=r-t(r)/e(r);return r}function x1(t,e){return t*Math.sqrt(1-e*e)}const jK=["duration","bounce"],qK=["stiffness","damping","mass"];function GD(t,e){return e.some(i=>t[i]!==void 0)}function WK(t){let e={velocity:Qt.velocity,stiffness:Qt.stiffness,damping:Qt.damping,mass:Qt.mass,isResolvedFromDuration:!1,...t};if(!GD(t,qK)&&GD(t,jK))if(t.visualDuration){const i=t.visualDuration,r=2*Math.PI/(i*1.2),s=r*r,a=2*yn(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Qt.mass,stiffness:s,damping:a}}else{const i=zK(t);e={...e,...i,mass:Qt.mass},e.isResolvedFromDuration=!0}return e}function bH(t=Qt.visualDuration,e=Qt.bounce){const i=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=i;const a=i.keyframes[0],l=i.keyframes[i.keyframes.length-1],c={done:!1,value:a},{stiffness:h,damping:f,mass:p,duration:g,velocity:y,isResolvedFromDuration:v}=WK({...i,velocity:-dn(i.velocity||0)}),x=y||0,A=f/(2*Math.sqrt(h*p)),S=l-a,w=dn(Math.sqrt(h/p)),E=Math.abs(S)<5;r||(r=E?Qt.restSpeed.granular:Qt.restSpeed.default),s||(s=E?Qt.restDelta.granular:Qt.restDelta.default);let B;if(A<1){const U=x1(w,A);B=H=>{const j=Math.exp(-A*w*H);return l-j*((x+A*w*S)/U*Math.sin(U*H)+S*Math.cos(U*H))}}else if(A===1)B=U=>l-Math.exp(-w*U)*(S+(x+w*S)*U);else{const U=w*Math.sqrt(A*A-1);B=H=>{const j=Math.exp(-A*w*H),Z=Math.min(U*H,300);return l-j*((x+A*w*S)*Math.sinh(Z)+U*S*Math.cosh(Z))/U}}const G={calculatedDuration:v&&g||null,next:U=>{const H=B(U);if(v)c.done=U>=g;else{let j=0;A<1&&(j=U===0?hn(x):vH(B,U,H));const Z=Math.abs(j)<=r,q=Math.abs(l-H)<=s;c.done=Z&&q}return c.value=c.done?l:H,c},toString:()=>{const U=Math.min(gH(G),v1),H=z6(j=>G.next(U*j).value,U,30);return U+"ms "+H}};return G}function LD({keyframes:t,velocity:e=0,power:i=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:h,restDelta:f=.5,restSpeed:p}){const g=t[0],y={done:!1,value:g},v=Z=>c!==void 0&&Z<c||h!==void 0&&Z>h,x=Z=>c===void 0?h:h===void 0||Math.abs(c-Z)<Math.abs(h-Z)?c:h;let A=i*e;const S=g+A,w=l===void 0?S:l(S);w!==S&&(A=w-g);const E=Z=>-A*Math.exp(-Z/r),B=Z=>w+E(Z),G=Z=>{const q=E(Z),L=B(Z);y.done=Math.abs(q)<=f,y.value=y.done?w:L};let U,H;const j=Z=>{v(y.value)&&(U=Z,H=bH({keyframes:[y.value,x(y.value)],velocity:vH(B,Z,y.value),damping:s,stiffness:a,restDelta:f,restSpeed:p}))};return j(0),{calculatedDuration:null,next:Z=>{let q=!1;return!H&&U===void 0&&(q=!0,G(Z),j(Z)),U!==void 0&&Z>=U?H.next(Z-U):(!q&&G(Z),y)}}}const KK=Ad(.42,0,1,1),$K=Ad(0,0,.58,1),xH=Ad(.42,0,.58,1),ZK=t=>Array.isArray(t)&&typeof t[0]!="number",QK={linear:_r,easeIn:KK,easeInOut:xH,easeOut:$K,circIn:Yw,circInOut:J6,circOut:Q6,backIn:Xw,backInOut:$6,backOut:K6,anticipate:Z6},kD=t=>{if(zw(t)){x6(t.length===4);const[e,i,r,s]=t;return Ad(e,i,r,s)}else if(typeof t=="string")return QK[t];return t};function JK(t,e,i){const r=[],s=i||_H,a=t.length-1;for(let l=0;l<a;l++){let c=s(t[l],t[l+1]);if(e){const h=Array.isArray(e)?e[l]||_r:e;c=Ed(h,c)}r.push(c)}return r}function e$(t,e,{clamp:i=!0,ease:r,mixer:s}={}){const a=t.length;if(x6(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=JK(e,r,s),h=c.length,f=p=>{if(l&&p<t[0])return e[0];let g=0;if(h>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const y=ru(t[g],t[g+1],p);return c[g](y)};return i?p=>f(yn(t[0],t[a-1],p)):f}function t$(t,e){const i=t[t.length-1];for(let r=1;r<=e;r++){const s=ru(0,e,r);t.push(zt(i,1,s))}}function i$(t){const e=[0];return t$(e,t.length-1),e}function r$(t,e){return t.map(i=>i*e)}function s$(t,e){return t.map(()=>e||xH).splice(0,t.length-1)}function iy({duration:t=300,keyframes:e,times:i,ease:r="easeInOut"}){const s=ZK(r)?r.map(kD):kD(r),a={done:!1,value:e[0]},l=r$(i&&i.length===e.length?i:i$(e),t),c=e$(l,e,{ease:Array.isArray(s)?s:s$(e,s)});return{calculatedDuration:t,next:h=>(a.value=c(h),a.done=h>=t,a)}}const n$=t=>{const e=({timestamp:i})=>t(i);return{start:()=>Dt.update(e,!0),stop:()=>oa(e),now:()=>Di.isProcessing?Di.timestamp:Ms.now()}},a$={decay:LD,inertia:LD,tween:iy,keyframes:iy,spring:bH},o$=t=>t/100;class $w extends mH{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:i,motionValue:r,element:s,keyframes:a}=this.options,l=(s==null?void 0:s.KeyframeResolver)||Ww,c=(h,f)=>this.onKeyframesResolved(h,f);this.resolver=new l(a,c,i,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=this.options,c=Vw(i)?i:a$[i]||iy;let h,f;c!==iy&&typeof e[0]!="number"&&(h=Ed(o$,_H(e[0],e[1])),e=[0,100]);const p=c({...this.options,keyframes:e});a==="mirror"&&(f=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=gH(p));const{calculatedDuration:g}=p,y=g+s,v=y*(r+1)-s;return{generator:p,mirroredGenerator:f,mapPercentToKeyframes:h,calculatedDuration:g,resolvedDuration:y,totalDuration:v}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,i=!1){const{resolved:r}=this;if(!r){const{keyframes:Z}=this.options;return{done:!0,value:Z[Z.length-1]}}const{finalKeyframe:s,generator:a,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:h,calculatedDuration:f,totalDuration:p,resolvedDuration:g}=r;if(this.startTime===null)return a.next(0);const{delay:y,repeat:v,repeatType:x,repeatDelay:A,onUpdate:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),i?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const w=this.currentTime-y*(this.speed>=0?1:-1),E=this.speed>=0?w<0:w>p;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let B=this.currentTime,G=a;if(v){const Z=Math.min(this.currentTime,p)/g;let q=Math.floor(Z),L=Z%1;!L&&Z>=1&&(L=1),L===1&&q--,q=Math.min(q,v+1),!!(q%2)&&(x==="reverse"?(L=1-L,A&&(L-=A/g)):x==="mirror"&&(G=l)),B=yn(0,1,L)*g}const U=E?{done:!1,value:h[0]}:G.next(B);c&&(U.value=c(U.value));let{done:H}=U;!E&&f!==null&&(H=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return j&&s!==void 0&&(U.value=v_(h,this.options,s)),S&&S(U.value),j&&this.finish(),U}get duration(){const{resolved:e}=this;return e?dn(e.calculatedDuration):0}get time(){return dn(this.currentTime)}set time(e){e=hn(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const i=this.playbackSpeed!==e;this.playbackSpeed=e,i&&(this.time=dn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=n$,onPlay:i,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),i&&i();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const l$=new Set(["opacity","clipPath","filter","transform"]);function u$(t,e,i,{delay:r=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:c="easeInOut",times:h}={}){const f={[e]:i};h&&(f.offset=h);const p=Y6(c,s);return Array.isArray(p)&&(f.easing=p),t.animate(f,{delay:r,duration:s,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"})}const c$=Hw(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ry=10,h$=2e4;function d$(t){return Vw(t.type)||t.type==="spring"||!X6(t.ease)}function f$(t,e){const i=new $w({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let a=0;for(;!r.done&&a<h$;)r=i.sample(a),s.push(r.value),a+=ry;return{times:void 0,keyframes:s,duration:a-ry,ease:"linear"}}const TH={anticipate:Z6,backInOut:$6,circInOut:J6};function p$(t){return t in TH}class ID extends mH{constructor(e){super(e);const{name:i,motionValue:r,element:s,keyframes:a}=this.options;this.resolver=new pH(a,(l,c)=>this.onKeyframesResolved(l,c),i,r,s),this.resolver.scheduleResolve()}initPlayback(e,i){let{duration:r=300,times:s,ease:a,type:l,motionValue:c,name:h,startTime:f}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof a=="string"&&ey()&&p$(a)&&(a=TH[a]),d$(this.options)){const{onComplete:g,onUpdate:y,motionValue:v,element:x,...A}=this.options,S=f$(e,A);e=S.keyframes,e.length===1&&(e[1]=e[0]),r=S.duration,s=S.times,a=S.ease,l="keyframes"}const p=u$(c.owner.current,h,e,{...this.options,duration:r,times:s,ease:a});return p.startTime=f??this.calcStartTime(),this.pendingTimeline?(SD(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:g}=this.options;c.set(v_(e,this.options,i)),g&&g(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:r,times:s,type:l,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:i}=e;return dn(i)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:i}=e;return dn(i.currentTime||0)}set time(e){const{resolved:i}=this;if(!i)return;const{animation:r}=i;r.currentTime=hn(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:i}=e;return i.playbackRate}set speed(e){const{resolved:i}=this;if(!i)return;const{animation:r}=i;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:i}=e;return i.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:i}=e;return i.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:i}=this;if(!i)return _r;const{animation:r}=i;SD(r,e)}return _r}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.playState==="finished"&&this.updateFinishedPromise(),i.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:i,keyframes:r,duration:s,type:a,ease:l,times:c}=e;if(i.playState==="idle"||i.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:p,onComplete:g,element:y,...v}=this.options,x=new $w({...v,keyframes:r,duration:s,type:a,ease:l,times:c,isGenerator:!0}),A=hn(this.time);f.setWithVelocity(x.sample(A-ry).value,x.sample(A).value,ry)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:i,name:r,repeatDelay:s,repeatType:a,damping:l,type:c}=e;if(!i||!i.owner||!(i.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=i.owner.getProps();return c$()&&r&&l$.has(r)&&!h&&!f&&!s&&a!=="mirror"&&l!==0&&c!=="inertia"}}const m$={type:"spring",stiffness:500,damping:25,restSpeed:10},g$=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),y$={type:"keyframes",duration:.8},_$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},v$=(t,{keyframes:e})=>e.length>2?y$:Po.has(t)?t.startsWith("scale")?g$(e[1]):m$:_$;function b$({when:t,delay:e,delayChildren:i,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:c,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const Zw=(t,e,i,r={},s,a)=>l=>{const c=kw(r,t)||{},h=c.delay||r.delay||0;let{elapsed:f=0}=r;f=f-hn(h);let p={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:y=>{e.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:s};b$(c)||(p={...p,...v$(t,p)}),p.duration&&(p.duration=hn(p.duration)),p.repeatDelay&&(p.repeatDelay=hn(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),p.allowFlatten=!c.type&&!c.ease,g&&!a&&e.get()!==void 0){const y=v_(p.keyframes,c);if(y!==void 0)return Dt.update(()=>{p.onUpdate(y),p.onComplete()}),new WW([])}return!a&&ID.supports(p)?new ID(p):new $w(p)};function x$({protectedKeys:t,needsAnimating:e},i){const r=t.hasOwnProperty(i)&&e[i]!==!0;return e[i]=!1,r}function SH(t,e,{delay:i=0,transitionOverride:r,type:s}={}){var a;let{transition:l=t.getDefaultTransition(),transitionEnd:c,...h}=e;r&&(l=r);const f=[],p=s&&t.animationState&&t.animationState.getState()[s];for(const g in h){const y=t.getValue(g,(a=t.latestValues[g])!==null&&a!==void 0?a:null),v=h[g];if(v===void 0||p&&x$(p,g))continue;const x={delay:i,...kw(l||{},g)};let A=!1;if(window.MotionHandoffAnimation){const w=V6(t);if(w){const E=window.MotionHandoffAnimation(w,g,Dt);E!==null&&(x.startTime=E,A=!0)}}c1(t,g),y.start(Zw(g,y,v,t.shouldReduceMotion&&N6.has(g)?{type:!1}:x,t,A));const S=y.animation;S&&f.push(S)}return c&&Promise.all(f).then(()=>{Dt.update(()=>{c&&XW(t,c)})}),f}function T1(t,e,i={}){var r;const s=Nh(t,e,i.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=s||{};i.transitionOverride&&(a=i.transitionOverride);const l=s?()=>Promise.all(SH(t,s,i)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:y}=a;return T$(t,e,p+f,g,y,i)}:()=>Promise.resolve(),{when:h}=a;if(h){const[f,p]=h==="beforeChildren"?[l,c]:[c,l];return f().then(()=>p())}else return Promise.all([l(),c(i.delay)])}function T$(t,e,i=0,r=0,s=1,a){const l=[],c=(t.variantChildren.size-1)*r,h=s===1?(f=0)=>f*r:(f=0)=>c-f*r;return Array.from(t.variantChildren).sort(S$).forEach((f,p)=>{f.notify("AnimationStart",e),l.push(T1(f,e,{...a,delay:i+h(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(l)}function S$(t,e){return t.sortNodePosition(e)}function A$(t,e,i={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>T1(t,a,i));r=Promise.all(s)}else if(typeof e=="string")r=T1(t,e,i);else{const s=typeof e=="function"?Nh(t,e,i.custom):e;r=Promise.all(SH(t,s,i))}return r.then(()=>{t.notify("AnimationComplete",e)})}function AH(t,e){if(!Array.isArray(e))return!1;const i=e.length;if(i!==t.length)return!1;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}const E$=Aw.length;function EH(t){if(!t)return;if(!t.isControllingVariants){const i=t.parent?EH(t.parent)||{}:{};return t.props.initial!==void 0&&(i.initial=t.props.initial),i}const e={};for(let i=0;i<E$;i++){const r=Aw[i],s=t.props[r];(kh(s)||s===!1)&&(e[r]=s)}return e}const w$=[...Sw].reverse(),C$=Sw.length;function R$(t){return e=>Promise.all(e.map(({animation:i,options:r})=>A$(t,i,r)))}function M$(t){let e=R$(t),i=UD(),r=!0;const s=h=>(f,p)=>{var g;const y=Nh(t,p,h==="exit"?(g=t.presenceContext)===null||g===void 0?void 0:g.custom:void 0);if(y){const{transition:v,transitionEnd:x,...A}=y;f={...f,...A,...x}}return f};function a(h){e=h(t)}function l(h){const{props:f}=t,p=EH(t.parent)||{},g=[],y=new Set;let v={},x=1/0;for(let S=0;S<C$;S++){const w=w$[S],E=i[w],B=f[w]!==void 0?f[w]:p[w],G=kh(B),U=w===h?E.isActive:null;U===!1&&(x=S);let H=B===p[w]&&B!==f[w]&&G;if(H&&r&&t.manuallyAnimateOnMount&&(H=!1),E.protectedKeys={...v},!E.isActive&&U===null||!B&&!E.prevProp||y_(B)||typeof B=="boolean")continue;const j=B$(E.prevProp,B);let Z=j||w===h&&E.isActive&&!H&&G||S>x&&G,q=!1;const L=Array.isArray(B)?B:[B];let N=L.reduce(s(w),{});U===!1&&(N={});const{prevResolvedValues:se={}}=E,le={...se,...N},pe=te=>{Z=!0,y.has(te)&&(q=!0,y.delete(te)),E.needsAnimating[te]=!0;const P=t.getValue(te);P&&(P.liveStyle=!1)};for(const te in le){const P=N[te],D=se[te];if(v.hasOwnProperty(te))continue;let O=!1;u1(P)&&u1(D)?O=!AH(P,D):O=P!==D,O?P!=null?pe(te):y.add(te):P!==void 0&&y.has(te)?pe(te):E.protectedKeys[te]=!0}E.prevProp=B,E.prevResolvedValues=N,E.isActive&&(v={...v,...N}),r&&t.blockInitialAnimation&&(Z=!1),Z&&(!(H&&j)||q)&&g.push(...L.map(te=>({animation:te,options:{type:w}})))}if(y.size){const S={};if(typeof f.initial!="boolean"){const w=Nh(t,Array.isArray(f.initial)?f.initial[0]:f.initial);w&&w.transition&&(S.transition=w.transition)}y.forEach(w=>{const E=t.getBaseTarget(w),B=t.getValue(w);B&&(B.liveStyle=!0),S[w]=E??null}),g.push({animation:S})}let A=!!g.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(A=!1),r=!1,A?e(g):Promise.resolve()}function c(h,f){var p;if(i[h].isActive===f)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(y=>{var v;return(v=y.animationState)===null||v===void 0?void 0:v.setActive(h,f)}),i[h].isActive=f;const g=l(h);for(const y in i)i[y].protectedKeys={};return g}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>i,reset:()=>{i=UD(),r=!0}}}function B$(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!AH(e,t):!1}function Wa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function UD(){return{animate:Wa(!0),whileInView:Wa(),whileHover:Wa(),whileTap:Wa(),whileDrag:Wa(),whileFocus:Wa(),exit:Wa()}}class _a{constructor(e){this.isMounted=!1,this.node=e}update(){}}class P$ extends _a{constructor(e){super(e),e.animationState||(e.animationState=M$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();y_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:i}=this.node.prevProps||{};e!==i&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let D$=0;class O$ extends _a{constructor(){super(...arguments),this.id=D$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);i&&!e&&s.then(()=>{i(this.id)})}mount(){const{register:e,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const F$={animation:{Feature:P$},exit:{Feature:O$}},ns={x:!1,y:!1};function wH(){return ns.x||ns.y}function G$(t){return t==="x"||t==="y"?ns[t]?null:(ns[t]=!0,()=>{ns[t]=!1}):ns.x||ns.y?null:(ns.x=ns.y=!0,()=>{ns.x=ns.y=!1})}function zh(t,e,i,r={passive:!0}){return t.addEventListener(e,i,r),()=>t.removeEventListener(e,i)}const Qw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function wd(t){return{point:{x:t.pageX,y:t.pageY}}}const L$=t=>e=>Qw(e)&&t(e,wd(e));function fh(t,e,i,r){return zh(t,e,L$(i),r)}function CH({top:t,left:e,right:i,bottom:r}){return{x:{min:e,max:i},y:{min:t,max:r}}}function k$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function I$(t,e){if(!e)return t;const i=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:i.y,left:i.x,bottom:r.y,right:r.x}}const RH=1e-4,U$=1-RH,N$=1+RH,MH=.01,H$=0-MH,V$=0+MH;function Ji(t){return t.max-t.min}function z$(t,e,i){return Math.abs(t-e)<=i}function ND(t,e,i,r=.5){t.origin=r,t.originPoint=zt(e.min,e.max,t.origin),t.scale=Ji(i)/Ji(e),t.translate=zt(i.min,i.max,t.origin)-t.originPoint,(t.scale>=U$&&t.scale<=N$||isNaN(t.scale))&&(t.scale=1),(t.translate>=H$&&t.translate<=V$||isNaN(t.translate))&&(t.translate=0)}function ph(t,e,i,r){ND(t.x,e.x,i.x,r?r.originX:void 0),ND(t.y,e.y,i.y,r?r.originY:void 0)}function HD(t,e,i){t.min=i.min+e.min,t.max=t.min+Ji(e)}function X$(t,e,i){HD(t.x,e.x,i.x),HD(t.y,e.y,i.y)}function VD(t,e,i){t.min=e.min-i.min,t.max=t.min+Ji(e)}function mh(t,e,i){VD(t.x,e.x,i.x),VD(t.y,e.y,i.y)}const zD=()=>({translate:0,scale:1,origin:0,originPoint:0}),Dl=()=>({x:zD(),y:zD()}),XD=()=>({min:0,max:0}),ri=()=>({x:XD(),y:XD()});function Hr(t){return[t("x"),t("y")]}function $0(t){return t===void 0||t===1}function S1({scale:t,scaleX:e,scaleY:i}){return!$0(t)||!$0(e)||!$0(i)}function Qa(t){return S1(t)||BH(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function BH(t){return YD(t.x)||YD(t.y)}function YD(t){return t&&t!=="0%"}function sy(t,e,i){const r=t-i,s=e*r;return i+s}function jD(t,e,i,r,s){return s!==void 0&&(t=sy(t,s,r)),sy(t,i,r)+e}function A1(t,e=0,i=1,r,s){t.min=jD(t.min,e,i,r,s),t.max=jD(t.max,e,i,r,s)}function PH(t,{x:e,y:i}){A1(t.x,e.translate,e.scale,e.originPoint),A1(t.y,i.translate,i.scale,i.originPoint)}const qD=.999999999999,WD=1.0000000000001;function Y$(t,e,i,r=!1){const s=i.length;if(!s)return;e.x=e.y=1;let a,l;for(let c=0;c<s;c++){a=i[c],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Fl(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,PH(t,l)),r&&Qa(a.latestValues)&&Fl(t,a.latestValues))}e.x<WD&&e.x>qD&&(e.x=1),e.y<WD&&e.y>qD&&(e.y=1)}function Ol(t,e){t.min=t.min+e,t.max=t.max+e}function KD(t,e,i,r,s=.5){const a=zt(t.min,t.max,s);A1(t,e,i,a,r)}function Fl(t,e){KD(t.x,e.x,e.scaleX,e.scale,e.originX),KD(t.y,e.y,e.scaleY,e.scale,e.originY)}function DH(t,e){return CH(I$(t.getBoundingClientRect(),e))}function j$(t,e,i){const r=DH(t,i),{scroll:s}=e;return s&&(Ol(r.x,s.offset.x),Ol(r.y,s.offset.y)),r}const OH=({current:t})=>t?t.ownerDocument.defaultView:null,$D=(t,e)=>Math.abs(t-e);function q$(t,e){const i=$D(t.x,e.x),r=$D(t.y,e.y);return Math.sqrt(i**2+r**2)}class FH{constructor(e,i,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Q0(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,v=q$(g.offset,{x:0,y:0})>=3;if(!y&&!v)return;const{point:x}=g,{timestamp:A}=Di;this.history.push({...x,timestamp:A});const{onStart:S,onMove:w}=this.handlers;y||(S&&S(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Z0(y,this.transformPagePoint),Dt.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:v,onSessionEnd:x,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Q0(g.type==="pointercancel"?this.lastMoveEventInfo:Z0(y,this.transformPagePoint),this.history);this.startEvent&&v&&v(g,S),x&&x(g,S)},!Qw(e))return;this.dragSnapToOrigin=a,this.handlers=i,this.transformPagePoint=r,this.contextWindow=s||window;const l=wd(e),c=Z0(l,this.transformPagePoint),{point:h}=c,{timestamp:f}=Di;this.history=[{...h,timestamp:f}];const{onSessionStart:p}=i;p&&p(e,Q0(c,this.history)),this.removeListeners=Ed(fh(this.contextWindow,"pointermove",this.handlePointerMove),fh(this.contextWindow,"pointerup",this.handlePointerUp),fh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),oa(this.updatePoint)}}function Z0(t,e){return e?{point:e(t.point)}:t}function ZD(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Q0({point:t},e){return{point:t,delta:ZD(t,GH(e)),offset:ZD(t,W$(e)),velocity:K$(e,.1)}}function W$(t){return t[0]}function GH(t){return t[t.length-1]}function K$(t,e){if(t.length<2)return{x:0,y:0};let i=t.length-1,r=null;const s=GH(t);for(;i>=0&&(r=t[i],!(s.timestamp-r.timestamp>hn(e)));)i--;if(!r)return{x:0,y:0};const a=dn(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function $$(t,{min:e,max:i},r){return e!==void 0&&t<e?t=r?zt(e,t,r.min):Math.max(t,e):i!==void 0&&t>i&&(t=r?zt(i,t,r.max):Math.min(t,i)),t}function QD(t,e,i){return{min:e!==void 0?t.min+e:void 0,max:i!==void 0?t.max+i-(t.max-t.min):void 0}}function Z$(t,{top:e,left:i,bottom:r,right:s}){return{x:QD(t.x,i,s),y:QD(t.y,e,r)}}function JD(t,e){let i=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([i,r]=[r,i]),{min:i,max:r}}function Q$(t,e){return{x:JD(t.x,e.x),y:JD(t.y,e.y)}}function J$(t,e){let i=.5;const r=Ji(t),s=Ji(e);return s>r?i=ru(e.min,e.max-r,t.min):r>s&&(i=ru(t.min,t.max-s,e.min)),yn(0,1,i)}function eZ(t,e){const i={};return e.min!==void 0&&(i.min=e.min-t.min),e.max!==void 0&&(i.max=e.max-t.min),i}const E1=.35;function tZ(t=E1){return t===!1?t=0:t===!0&&(t=E1),{x:eO(t,"left","right"),y:eO(t,"top","bottom")}}function eO(t,e,i){return{min:tO(t,e),max:tO(t,i)}}function tO(t,e){return typeof t=="number"?t:t[e]||0}const iZ=new WeakMap;class rZ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ri(),this.visualElement=e}start(e,{snapToCursor:i=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(wd(p).point)},a=(p,g)=>{const{drag:y,dragPropagation:v,onDragStart:x}=this.getProps();if(y&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=G$(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Hr(S=>{let w=this.getAxisMotionValue(S).get()||0;if(Rs.test(w)){const{projection:E}=this.visualElement;if(E&&E.layout){const B=E.layout.layoutBox[S];B&&(w=Ji(B)*(parseFloat(w)/100))}}this.originPoint[S]=w}),x&&Dt.postRender(()=>x(p,g)),c1(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},l=(p,g)=>{const{dragPropagation:y,dragDirectionLock:v,onDirectionLock:x,onDrag:A}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:S}=g;if(v&&this.currentDirection===null){this.currentDirection=sZ(S),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",g.point,S),this.updateAxis("y",g.point,S),this.visualElement.render(),A&&A(p,g)},c=(p,g)=>this.stop(p,g),h=()=>Hr(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new FH(e,{onSessionStart:s,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:OH(this.visualElement)})}stop(e,i){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&Dt.postRender(()=>a(e,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:i}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(e,i,r){const{drag:s}=this.getProps();if(!r||!Op(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=$$(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var e;const{dragConstraints:i,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;i&&Bl(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&s?this.constraints=Z$(s.layoutBox,i):this.constraints=!1,this.elastic=tZ(r),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Hr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=eZ(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:i}=this.getProps();if(!e||!Bl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=j$(r,s.root,this.visualElement.getTransformPagePoint());let l=Q$(s.layout.layoutBox,a);if(i){const c=i(k$(l));this.hasMutatedConstraints=!!c,c&&(l=CH(c))}return l}startAnimation(e){const{drag:i,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),h=this.constraints||{},f=Hr(p=>{if(!Op(p,i,this.currentDirection))return;let g=h&&h[p]||{};l&&(g={min:0,max:0});const y=s?200:1e6,v=s?40:1e7,x={type:"inertia",velocity:r?e[p]:0,bounceStiffness:y,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(p,x)});return Promise.all(f).then(c)}startAxisValueAnimation(e,i){const r=this.getAxisMotionValue(e);return c1(this.visualElement,e),r.start(Zw(e,r,0,i,this.visualElement,!1))}stopAnimation(){Hr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Hr(e=>{var i;return(i=this.getAxisMotionValue(e).animation)===null||i===void 0?void 0:i.pause()})}getAnimationState(e){var i;return(i=this.getAxisMotionValue(e).animation)===null||i===void 0?void 0:i.state}getAxisMotionValue(e){const i=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[i];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Hr(i=>{const{drag:r}=this.getProps();if(!Op(i,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(i);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[i];a.set(e[i]-zt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:i}=this.getProps(),{projection:r}=this.visualElement;if(!Bl(i)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Hr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const h=c.get();s[l]=J$({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Hr(l=>{if(!Op(l,e,null))return;const c=this.getAxisMotionValue(l),{min:h,max:f}=this.constraints[l];c.set(zt(h,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;iZ.set(this.visualElement,this);const e=this.visualElement.current,i=fh(e,"pointerdown",h=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(h)}),r=()=>{const{dragConstraints:h}=this.getProps();Bl(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Dt.read(r);const l=zh(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Hr(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=h[p].translate,g.set(g.get()+h[p].translate))}),this.visualElement.render())});return()=>{l(),i(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=E1,dragMomentum:c=!0}=e;return{...e,drag:i,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function Op(t,e,i){return(e===!0||e===t)&&(i===null||i===t)}function sZ(t,e=10){let i=null;return Math.abs(t.y)>e?i="y":Math.abs(t.x)>e&&(i="x"),i}class nZ extends _a{constructor(e){super(e),this.removeGroupControls=_r,this.removeListeners=_r,this.controls=new rZ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_r}unmount(){this.removeGroupControls(),this.removeListeners()}}const iO=t=>(e,i)=>{t&&Dt.postRender(()=>t(e,i))};class aZ extends _a{constructor(){super(...arguments),this.removePointerDownListener=_r}onPointerDown(e){this.session=new FH(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:OH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:i,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:iO(e),onStart:iO(i),onMove:r,onEnd:(a,l)=>{delete this.session,s&&Dt.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=fh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const rm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rO(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ue.test(t))t=parseFloat(t);else return t;const i=rO(t,e.target.x),r=rO(t,e.target.y);return`${i}% ${r}%`}},oZ={correct:(t,{treeScale:e,projectionDelta:i})=>{const r=t,s=la.parse(t);if(s.length>5)return r;const a=la.createTransformer(t),l=typeof s[0]!="number"?1:0,c=i.x.scale*e.x,h=i.y.scale*e.y;s[0+l]/=c,s[1+l]/=h;const f=zt(c,h,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),a(s)}};class lZ extends Ve.Component{componentDidMount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;mW(uZ),a&&(i.group&&i.group.add(a),r&&r.register&&s&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),rm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:i,visualElement:r,drag:s,isPresent:a}=this.props,l=r.projection;return l&&(l.isPresent=a,s||e.layoutDependency!==i||i===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||Dt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ew.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function LH(t){const[e,i]=qq(),r=Ve.useContext(v6);return Vr.jsx(lZ,{...t,layoutGroup:r,switchLayoutGroup:Ve.useContext(C6),isPresent:e,safeToRemove:i})}const uZ={borderRadius:{...Vc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vc,borderTopRightRadius:Vc,borderBottomLeftRadius:Vc,borderBottomRightRadius:Vc,boxShadow:oZ};function cZ(t,e,i){const r=zi(t)?t:Hh(t);return r.start(Zw("",r,e,i)),r.animation}function hZ(t){return t instanceof SVGElement&&t.tagName!=="svg"}const dZ=(t,e)=>t.depth-e.depth;class fZ{constructor(){this.children=[],this.isDirty=!1}add(e){Iw(this.children,e),this.isDirty=!0}remove(e){Uw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(dZ),this.isDirty=!1,this.children.forEach(e)}}function pZ(t,e){const i=Ms.now(),r=({timestamp:s})=>{const a=s-i;a>=e&&(oa(r),t(a-e))};return Dt.read(r,!0),()=>oa(r)}const kH=["TopLeft","TopRight","BottomLeft","BottomRight"],mZ=kH.length,sO=t=>typeof t=="string"?parseFloat(t):t,nO=t=>typeof t=="number"||Ue.test(t);function gZ(t,e,i,r,s,a){s?(t.opacity=zt(0,i.opacity!==void 0?i.opacity:1,yZ(r)),t.opacityExit=zt(e.opacity!==void 0?e.opacity:1,0,_Z(r))):a&&(t.opacity=zt(e.opacity!==void 0?e.opacity:1,i.opacity!==void 0?i.opacity:1,r));for(let l=0;l<mZ;l++){const c=`border${kH[l]}Radius`;let h=aO(e,c),f=aO(i,c);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||nO(h)===nO(f)?(t[c]=Math.max(zt(sO(h),sO(f),r),0),(Rs.test(f)||Rs.test(h))&&(t[c]+="%")):t[c]=f}(e.rotate||i.rotate)&&(t.rotate=zt(e.rotate||0,i.rotate||0,r))}function aO(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const yZ=IH(0,.5,Q6),_Z=IH(.5,.95,_r);function IH(t,e,i){return r=>r<t?0:r>e?1:i(ru(t,e,r))}function oO(t,e){t.min=e.min,t.max=e.max}function Nr(t,e){oO(t.x,e.x),oO(t.y,e.y)}function lO(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function uO(t,e,i,r,s){return t-=e,t=sy(t,1/i,r),s!==void 0&&(t=sy(t,1/s,r)),t}function vZ(t,e=0,i=1,r=.5,s,a=t,l=t){if(Rs.test(e)&&(e=parseFloat(e),e=zt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=zt(a.min,a.max,r);t===a&&(c-=e),t.min=uO(t.min,e,i,c,s),t.max=uO(t.max,e,i,c,s)}function cO(t,e,[i,r,s],a,l){vZ(t,e[i],e[r],e[s],e.scale,a,l)}const bZ=["x","scaleX","originX"],xZ=["y","scaleY","originY"];function hO(t,e,i,r){cO(t.x,e,bZ,i?i.x:void 0,r?r.x:void 0),cO(t.y,e,xZ,i?i.y:void 0,r?r.y:void 0)}function dO(t){return t.translate===0&&t.scale===1}function UH(t){return dO(t.x)&&dO(t.y)}function fO(t,e){return t.min===e.min&&t.max===e.max}function TZ(t,e){return fO(t.x,e.x)&&fO(t.y,e.y)}function pO(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function NH(t,e){return pO(t.x,e.x)&&pO(t.y,e.y)}function mO(t){return Ji(t.x)/Ji(t.y)}function gO(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class SZ{constructor(){this.members=[]}add(e){Iw(this.members,e),e.scheduleRender()}remove(e){if(Uw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(e){const i=this.members.findIndex(s=>e===s);if(i===0)return!1;let r;for(let s=i;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,i){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,i&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:i,resumingFrom:r}=e;i.onExitComplete&&i.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function AZ(t,e,i){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,l=(i==null?void 0:i.z)||0;if((s||a||l)&&(r=`translate3d(${s}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),i){const{transformPerspective:f,rotate:p,rotateX:g,rotateY:y,skewX:v,skewY:x}=i;f&&(r=`perspective(${f}px) ${r}`),p&&(r+=`rotate(${p}deg) `),g&&(r+=`rotateX(${g}deg) `),y&&(r+=`rotateY(${y}deg) `),v&&(r+=`skewX(${v}deg) `),x&&(r+=`skewY(${x}deg) `)}const c=t.x.scale*e.x,h=t.y.scale*e.y;return(c!==1||h!==1)&&(r+=`scale(${c}, ${h})`),r||"none"}const J0=["","X","Y","Z"],EZ={visibility:"hidden"},yO=1e3;let wZ=0;function ex(t,e,i,r){const{latestValues:s}=e;s[t]&&(i[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function HH(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const i=V6(e);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",Dt,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&HH(r)}function VH({attachResizeListener:t,defaultParent:e,measureScroll:i,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},c=e==null?void 0:e()){this.id=wZ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(MZ),this.nodes.forEach(FZ),this.nodes.forEach(GZ),this.nodes.forEach(BZ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new fZ)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Nw),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const h=this.eventHandlers.get(l);h&&h.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=hZ(l),this.instance=l;const{layoutId:h,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const y=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=pZ(y,250),rm.hasAnimatedSinceResize&&(rm.hasAnimatedSinceResize=!1,this.nodes.forEach(vO))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||p.getDefaultTransition()||NZ,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=p.getProps(),E=!this.targetLayout||!NH(this.targetLayout,x),B=!y&&v;if(this.options.layoutRoot||this.resumeFrom||B||y&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,B);const G={...kw(A,"layout"),onPlay:S,onComplete:w};(p.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G)}else y||vO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,oa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(LZ),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&HH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:h}=this.options;if(c===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_O);return}this.isUpdating||this.nodes.forEach(DZ),this.isUpdating=!1,this.nodes.forEach(OZ),this.nodes.forEach(CZ),this.nodes.forEach(RZ),this.clearAllSnapshots();const c=Ms.now();Di.delta=yn(0,1e3/60,c-Di.timestamp),Di.timestamp=c,Di.isProcessing=!0,j0.update.process(Di),j0.preRender.process(Di),j0.render.process(Di),Di.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ew.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(PZ),this.sharedNodes.forEach(kZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Dt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Dt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ji(this.snapshot.measuredBox.x)&&!Ji(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ri(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!UH(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&(c||Qa(this.latestValues)||p)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let h=this.removeElementScroll(c);return l&&(h=this.removeTransform(h)),HZ(h),{animationId:this.root.animationId,measuredBox:c,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return ri();const h=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(VZ))){const{scroll:p}=this.root;p&&(Ol(h.x,p.offset.x),Ol(h.y,p.offset.y))}return h}removeElementScroll(l){var c;const h=ri();if(Nr(h,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return h;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:g,options:y}=p;p!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&Nr(h,l),Ol(h.x,g.offset.x),Ol(h.y,g.offset.y))}return h}applyTransform(l,c=!1){const h=ri();Nr(h,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Fl(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Qa(p.latestValues)&&Fl(h,p.latestValues)}return Qa(this.latestValues)&&Fl(h,this.latestValues),h}removeTransform(l){const c=ri();Nr(c,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Qa(f.latestValues))continue;S1(f.latestValues)&&f.updateSnapshot();const p=ri(),g=f.measurePageBox();Nr(p,g),hO(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Qa(this.latestValues)&&hO(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Di.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=Di.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ri(),this.relativeTargetOrigin=ri(),mh(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ri(),this.targetWithTransforms=ri()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),X$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nr(this.target,this.layout.layoutBox),PH(this.target,this.targetDelta)):Nr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ri(),this.relativeTargetOrigin=ri(),mh(this.relativeTargetOrigin,this.target,v.target),Nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||S1(this.parent.latestValues)||BH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Di.timestamp&&(f=!1),f)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;Nr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;Y$(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=ri());const{target:x}=c;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(lO(this.prevProjectionDelta.x,this.projectionDelta.x),lO(this.prevProjectionDelta.y,this.projectionDelta.y)),ph(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!gO(this.projectionDelta.x,this.prevProjectionDelta.x)||!gO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Dl(),this.projectionDelta=Dl(),this.projectionDeltaWithTransform=Dl()}setAnimationOrigin(l,c=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},g=Dl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=ri(),v=h?h.source:void 0,x=this.layout?this.layout.source:void 0,A=v!==x,S=this.getStack(),w=!S||S.members.length<=1,E=!!(A&&!w&&this.options.crossfade===!0&&!this.path.some(UZ));this.animationProgress=0;let B;this.mixTargetDelta=G=>{const U=G/1e3;bO(g.x,l.x,U),bO(g.y,l.y,U),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mh(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),IZ(this.relativeTarget,this.relativeTargetOrigin,y,U),B&&TZ(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=ri()),Nr(B,this.relativeTarget)),A&&(this.animationValues=p,gZ(p,f,this.latestValues,U,E,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(oa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Dt.update(()=>{rm.hasAnimatedSinceResize=!0,this.currentAnimation=cZ(0,yO,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:h,layout:f,latestValues:p}=l;if(!(!c||!h||!f)){if(this!==l&&this.layout&&f&&zH(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||ri();const g=Ji(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+g;const y=Ji(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+y}Nr(c,h),Fl(c,p),ph(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new SZ),this.sharedNodes.get(l).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(c=!0),!c)return;const f={};h.z&&ex("z",l,f,this.animationValues);for(let p=0;p<J0.length;p++)ex(`rotate${J0[p]}`,l,f,this.animationValues),ex(`skew${J0[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}getProjectionStyles(l){var c,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return EZ;const f={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=tm(l==null?void 0:l.pointerEvents)||"",f.transform=p?p(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=tm(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Qa(this.latestValues)&&(A.transform=p?p({},""):"none",this.hasProjected=!1),A}const y=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=AZ(this.projectionDeltaWithTransform,this.treeScale,y),p&&(f.transform=p(y,f.transform));const{x:v,y:x}=this.projectionDelta;f.transformOrigin=`${v.origin*100}% ${x.origin*100}% 0`,g.animationValues?f.opacity=g===this?(h=(c=y.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:f.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const A in Ih){if(y[A]===void 0)continue;const{correct:S,applyTo:w,isCSSVariable:E}=Ih[A],B=f.transform==="none"?y[A]:S(y[A],g);if(w){const G=w.length;for(let U=0;U<G;U++)f[w[U]]=B}else E?this.options.visualElement.renderState.vars[A]=B:f[A]=B}return this.options.layoutId&&(f.pointerEvents=g===this?tm(l==null?void 0:l.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(_O),this.root.sharedNodes.clear()}}}function CZ(t){t.updateLayout()}function RZ(t){var e;const i=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:a}=t.options,l=i.source!==t.layout.source;a==="size"?Hr(g=>{const y=l?i.measuredBox[g]:i.layoutBox[g],v=Ji(y);y.min=r[g].min,y.max=y.min+v}):zH(a,i.layoutBox,r)&&Hr(g=>{const y=l?i.measuredBox[g]:i.layoutBox[g],v=Ji(r[g]);y.max=y.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+v)});const c=Dl();ph(c,r,i.layoutBox);const h=Dl();l?ph(h,t.applyTransform(s,!0),i.measuredBox):ph(h,r,i.layoutBox);const f=!UH(c);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:v}=g;if(y&&v){const x=ri();mh(x,i.layoutBox,y.layoutBox);const A=ri();mh(A,r,v.layoutBox),NH(x,A)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=x,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:i,delta:h,layoutDelta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function MZ(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function BZ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function PZ(t){t.clearSnapshot()}function _O(t){t.clearMeasurements()}function DZ(t){t.isLayoutDirty=!1}function OZ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function vO(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function FZ(t){t.resolveTargetDelta()}function GZ(t){t.calcProjection()}function LZ(t){t.resetSkewAndRotation()}function kZ(t){t.removeLeadSnapshot()}function bO(t,e,i){t.translate=zt(e.translate,0,i),t.scale=zt(e.scale,1,i),t.origin=e.origin,t.originPoint=e.originPoint}function xO(t,e,i,r){t.min=zt(e.min,i.min,r),t.max=zt(e.max,i.max,r)}function IZ(t,e,i,r){xO(t.x,e.x,i.x,r),xO(t.y,e.y,i.y,r)}function UZ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const NZ={duration:.45,ease:[.4,0,.1,1]},TO=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),SO=TO("applewebkit/")&&!TO("chrome/")?Math.round:_r;function AO(t){t.min=SO(t.min),t.max=SO(t.max)}function HZ(t){AO(t.x),AO(t.y)}function zH(t,e,i){return t==="position"||t==="preserve-aspect"&&!z$(mO(e),mO(i),.2)}function VZ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const zZ=VH({attachResizeListener:(t,e)=>zh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tx={current:void 0},XH=VH({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!tx.current){const t=new zZ({});t.mount(window),t.setOptions({layoutScroll:!0}),tx.current=t}return tx.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),XZ={pan:{Feature:aZ},drag:{Feature:nZ,ProjectionNode:XH,MeasureLayout:LH}};function YZ(t,e,i){var r;if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const a=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function YH(t,e){const i=YZ(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[i,s,()=>r.abort()]}function EO(t){return!(t.pointerType==="touch"||wH())}function jZ(t,e,i={}){const[r,s,a]=YH(t,i),l=c=>{if(!EO(c))return;const{target:h}=c,f=e(h,c);if(typeof f!="function"||!h)return;const p=g=>{EO(g)&&(f(g),h.removeEventListener("pointerleave",p))};h.addEventListener("pointerleave",p,s)};return r.forEach(c=>{c.addEventListener("pointerenter",l,s)}),a}function wO(t,e,i){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",i==="Start");const s="onHover"+i,a=r[s];a&&Dt.postRender(()=>a(e,wd(e)))}class qZ extends _a{mount(){const{current:e}=this.node;e&&(this.unmount=jZ(e,(i,r)=>(wO(this.node,r,"Start"),s=>wO(this.node,s,"End"))))}unmount(){}}class WZ extends _a{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ed(zh(this.node.current,"focus",()=>this.onFocus()),zh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function CO(t,e){const i=`${e}PointerCapture`;if(t.target instanceof Element&&i in t.target&&t.pointerId!==void 0)try{t.target[i](t.pointerId)}catch{}}const jH=(t,e)=>e?t===e?!0:jH(t,e.parentElement):!1,KZ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $Z(t){return KZ.has(t.tagName)||t.tabIndex!==-1}const eh=new WeakSet;function RO(t){return e=>{e.key==="Enter"&&t(e)}}function ix(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ZZ=(t,e)=>{const i=t.currentTarget;if(!i)return;const r=RO(()=>{if(eh.has(i))return;ix(i,"down");const s=RO(()=>{ix(i,"up")}),a=()=>ix(i,"cancel");i.addEventListener("keyup",s,e),i.addEventListener("blur",a,e)});i.addEventListener("keydown",r,e),i.addEventListener("blur",()=>i.removeEventListener("keydown",r),e)};function MO(t){return Qw(t)&&!wH()}function QZ(t,e,i={}){const[r,s,a]=YH(t,i),l=c=>{const h=c.currentTarget;if(!h||!MO(c)||eh.has(h))return;eh.add(h),CO(c,"set");const f=e(h,c),p=(v,x)=>{h.removeEventListener("pointerup",g),h.removeEventListener("pointercancel",y),CO(v,"release"),!(!MO(v)||!eh.has(h))&&(eh.delete(h),typeof f=="function"&&f(v,{success:x}))},g=v=>{(v.isTrusted?JZ(v,h instanceof Element?h.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?p(v,!1):p(v,!(h instanceof Element)||jH(h,v.target))},y=v=>{p(v,!1)};h.addEventListener("pointerup",g,s),h.addEventListener("pointercancel",y,s),h.addEventListener("lostpointercapture",y,s)};return r.forEach(c=>{c=i.useGlobalTarget?window:c;let h=!1;c instanceof HTMLElement&&(h=!0,!$Z(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0)),c.addEventListener("pointerdown",l,s),h&&c.addEventListener("focus",f=>ZZ(f,s),s)}),a}function JZ(t,e){return t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom}function BO(t,e,i){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",i==="Start");const s="onTap"+(i==="End"?"":i),a=r[s];a&&Dt.postRender(()=>a(e,wd(e)))}class eQ extends _a{mount(){const{current:e}=this.node;e&&(this.unmount=QZ(e,(i,r)=>(BO(this.node,r,"Start"),(s,{success:a})=>BO(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const w1=new WeakMap,rx=new WeakMap,tQ=t=>{const e=w1.get(t.target);e&&e(t)},iQ=t=>{t.forEach(tQ)};function rQ({root:t,...e}){const i=t||document;rx.has(i)||rx.set(i,{});const r=rx.get(i),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(iQ,{root:t,...e})),r[s]}function sQ(t,e,i){const r=rQ(e);return w1.set(t,i),r.observe(t),()=>{w1.delete(t),r.unobserve(t)}}const nQ={some:0,all:1};class aQ extends _a{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:i,margin:r,amount:s="some",once:a}=e,l={root:i?i.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:nQ[s]},c=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),y=f?p:g;y&&y(h)};return sQ(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:i}=this.node;["amount","margin","root"].some(oQ(e,i))&&this.startObserver()}unmount(){}}function oQ({viewport:t={}},{viewport:e={}}={}){return i=>t[i]!==e[i]}const lQ={inView:{Feature:aQ},tap:{Feature:eQ},focus:{Feature:WZ},hover:{Feature:qZ}},uQ={layout:{ProjectionNode:XH,MeasureLayout:LH}},C1={current:null},qH={current:!1};function cQ(){if(qH.current=!0,!!xw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>C1.current=t.matches;t.addListener(e),e()}else C1.current=!1}const hQ=[...fH,Hi,la],dQ=t=>hQ.find(dH(t)),fQ=new WeakMap;function pQ(t,e,i){for(const r in e){const s=e[r],a=i[r];if(zi(s))t.addValue(r,s);else if(zi(a))t.addValue(r,Hh(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(r);t.addValue(r,Hh(l!==void 0?l:s,{owner:t}))}}for(const r in i)e[r]===void 0&&t.removeValue(r);return e}const PO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class mQ{scrapeMotionValuesFromProps(e,i,r){return{}}constructor({parent:e,props:i,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ww,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Ms.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Dt.render(this.render,!1,!0))};const{latestValues:h,renderState:f,onUpdate:p}=l;this.onUpdate=p,this.latestValues=h,this.baseTarget={...h},this.initialValues=i.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=i,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=__(i),this.isVariantNode=E6(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(i,{},this);for(const v in y){const x=y[v];h[v]!==void 0&&zi(x)&&x.set(h[v],!1)}}mount(e){this.current=e,fQ.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,r)=>this.bindToMotionValue(r,i)),qH.current||cQ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:C1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),oa(this.notifyUpdate),oa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const i=this.features[e];i&&(i.unmount(),i.isMounted=!1)}this.current=null}bindToMotionValue(e,i){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Po.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=i.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Dt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=i.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,i)),this.valueSubscriptions.set(e,()=>{s(),a(),l&&l(),i.owner&&i.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in iu){const i=iu[e];if(!i)continue;const{isEnabled:r,Feature:s}=i;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ri()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,i){this.latestValues[e]=i}update(e,i){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let r=0;r<PO.length;r++){const s=PO[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=e[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=pQ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(e),()=>i.variantChildren.delete(e)}addValue(e,i){const r=this.values.get(e);i!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,i),this.values.set(e,i),this.latestValues[e]=i.get())}removeValue(e){this.values.delete(e);const i=this.valueSubscriptions.get(e);i&&(i(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,i){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&i!==void 0&&(r=Hh(i===null?void 0:i,{owner:this}),this.addValue(e,r)),r}readValue(e,i){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(cH(s)||eH(s))?s=parseFloat(s):!dQ(s)&&la.test(i)&&(s=oH(e,i)),this.setBaseTarget(e,zi(s)?s.get():s)),zi(s)?s.get():s}setBaseTarget(e,i){this.baseTarget[e]=i}getBaseTarget(e){var i;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const l=Gw(this.props,r,(i=this.presenceContext)===null||i===void 0?void 0:i.custom);l&&(s=l[e])}if(r&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!zi(a)?a:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,i){return this.events[e]||(this.events[e]=new Nw),this.events[e].add(i)}notify(e,...i){this.events[e]&&this.events[e].notify(...i)}}class WH extends mQ{constructor(){super(...arguments),this.KeyframeResolver=pH}sortInstanceNodePosition(e,i){return e.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(e,i){return e.style?e.style[i]:void 0}removeValueFromRenderState(e,{vars:i,style:r}){delete i[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;zi(e)&&(this.childSubscription=e.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function gQ(t){return window.getComputedStyle(t)}class yQ extends WH{constructor(){super(...arguments),this.type="html",this.renderInstance=L6}readValueFromInstance(e,i){if(Po.has(i))return bK(e,i);{const r=gQ(e),s=(Cw(i)?r.getPropertyValue(i):r[i])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:i}){return DH(e,i)}build(e,i,r){Bw(e,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,i,r){return Lw(e,i,r)}}class _Q extends WH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ri,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&G6(this.current,this.renderState)}}getBaseTargetFromProps(e,i){return e[i]}readValueFromInstance(e,i){if(Po.has(i)){const r=aH(i);return r&&r.default||0}return i=k6.has(i)?i:ww(i),e.getAttribute(i)}scrapeMotionValuesFromProps(e,i,r){return U6(e,i,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&Dt.postRender(this.updateDimensions)}build(e,i,r){Ow(e,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,i,r,s){I6(e,i,r,s)}mount(e){this.isSVGTag=Fw(e.tagName),super.mount(e)}}const vQ=(t,e)=>Dw(t)?new _Q(e):new yQ(e,{allowProjection:t!==Ve.Fragment}),bQ=UW({...F$,...lQ,...XZ,...uQ},vQ),xQ=tW(bQ);function TQ(){return Vr.jsx(wM,{sx:{height:"100vh",width:"100vw"},children:Vr.jsx(wM,{sx:{position:"absolute",right:0,bottom:0,margin:2},component:xQ.div,variants:{open:{opacity:1,scale:1,pointerEvents:"auto"},closed:{opacity:0,scale:0,pointerEvents:"none"}},initial:"closed",animate:"open",exit:"closed",children:Vr.jsx(lz,{})})})}async function SQ(){ge.add({alias:"background_main_menu",src:"/shrimp-story/Main_Screen.png"}),ge.add({alias:"bg01-basement",src:"/shrimp-story/Basement.png"}),ge.add({alias:"bg02-bedroom",src:"/shrimp-story/Bedroom.png"}),ge.add({alias:"bg03-campus",src:"/shrimp-story/Campus.png"}),ge.add({alias:"bg04-busstop",src:"/shrimp-story/Busstop.png"}),ge.add({alias:"bg05-karaoke",src:"/shrimp-story/Karaoke.png"}),ge.add({alias:"brian1",src:"/shrimp-story/brian1.png"}),ge.add({alias:"brian2",src:"/shrimp-story/brian2.png"}),ge.add({alias:"brianCool1",src:"/shrimp-story/coolBrian1.png"}),ge.add({alias:"brianCool2",src:"/shrimp-story/coolBrian2.png"}),ge.add({alias:"brianCool3",src:"/shrimp-story/coolBrian3.png"}),ge.add({alias:"brianBase1",src:"/shrimp-story/baseballBrian1.png"}),ge.add({alias:"brianBase2",src:"/shrimp-story/baseballBrian2.png"}),ge.add({alias:"brianBase3",src:"/shrimp-story/baseballBrian3.png"}),ge.add({alias:"brianGirl1",src:"/shrimp-story/girlBrian1.png"}),ge.add({alias:"brianGirl2",src:"/shrimp-story/girlBrian2.png"}),ge.add({alias:"brianRain1",src:"/shrimp-story/rainBrian1.png"}),ge.add({alias:"brianRain2",src:"/shrimp-story/rainBrian2.png"}),ge.add({alias:"brianRain3",src:"/shrimp-story/rainBrian3.png"}),ge.add({alias:"brianTeacher1",src:"/shrimp-story/teacherBrian1.png"}),ge.add({alias:"brianTeacher2",src:"/shrimp-story/teacherBrian2.png"}),ge.add({alias:"fm01-eyes-grin",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-eyes-grin.webp?alt=media"}),ge.add({alias:"fm01-eyes-smile",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-eyes-smile.webp?alt=media"}),ge.add({alias:"fm01-eyes-soft",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-eyes-soft.webp?alt=media"}),ge.add({alias:"fm01-eyes-upset",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-eyes-upset.webp?alt=media"}),ge.add({alias:"fm01-eyes-wow",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-eyes-wow.webp?alt=media"}),ge.add({alias:"fm01-mouth-grin00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-grin00.webp?alt=media"}),ge.add({alias:"fm01-mouth-serious00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-serious00.webp?alt=media"}),ge.add({alias:"fm01-mouth-serious01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-serious01.webp?alt=media"}),ge.add({alias:"fm01-mouth-smile00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-smile00.webp?alt=media"}),ge.add({alias:"fm01-mouth-smile01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-smile01.webp?alt=media"}),ge.add({alias:"fm01-mouth-soft00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-soft00.webp?alt=media"}),ge.add({alias:"fm01-mouth-soft01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-soft01.webp?alt=media"}),ge.add({alias:"fm01-mouth-upset00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-upset00.webp?alt=media"}),ge.add({alias:"fm01-mouth-upset01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-upset01.webp?alt=media"}),ge.add({alias:"fm01-mouth-wow01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm01%2Ffm01-mouth-wow01.webp?alt=media"}),ge.add({alias:"fm02-body",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-body.webp?alt=media"}),ge.add({alias:"fm02-eyes-bawl",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-eyes-bawl.webp?alt=media"}),ge.add({alias:"fm02-eyes-joy",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-eyes-joy.webp?alt=media"}),ge.add({alias:"fm02-eyes-nervous",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-eyes-nervous.webp?alt=media"}),ge.add({alias:"fm02-eyes-smile",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-eyes-smile.webp?alt=media"}),ge.add({alias:"fm02-eyes-upset",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-eyes-upset.webp?alt=media"}),ge.add({alias:"fm02-eyes-wow",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-eyes-wow.webp?alt=media"}),ge.add({alias:"fm02-mouth-cry01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-cry01.webp?alt=media"}),ge.add({alias:"fm02-mouth-nervous00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-nervous00.webp?alt=media"}),ge.add({alias:"fm02-mouth-nervous01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-nervous01.webp?alt=media"}),ge.add({alias:"fm02-mouth-smile00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-smile00.webp?alt=media"}),ge.add({alias:"fm02-mouth-smile01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-smile01.webp?alt=media"}),ge.add({alias:"fm02-mouth-upset00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-upset00.webp?alt=media"}),ge.add({alias:"fm02-mouth-upset01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-upset01.webp?alt=media"}),ge.add({alias:"fm02-mouth-wow01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Ffm02%2Ffm02-mouth-wow01.webp?alt=media"}),ge.add({alias:"m01-body",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-body.webp?alt=media"}),ge.add({alias:"m01-eyes-annoy",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-eyes-annoy.webp?alt=media"}),ge.add({alias:"m01-eyes-concern",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-eyes-concern.webp?alt=media"}),ge.add({alias:"m01-eyes-cry",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-eyes-cry.webp?alt=media"}),ge.add({alias:"m01-eyes-grin",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-eyes-grin.webp?alt=media"}),ge.add({alias:"m01-eyes-smile",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-eyes-smile.webp?alt=media"}),ge.add({alias:"m01-eyes-wow",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-eyes-wow.webp?alt=media"}),ge.add({alias:"m01-mouth-annoy00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-annoy00.webp?alt=media"}),ge.add({alias:"m01-mouth-annoy01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-annoy01.webp?alt=media"}),ge.add({alias:"m01-mouth-concern00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-concern00.webp?alt=media"}),ge.add({alias:"m01-mouth-concern01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-concern01.webp?alt=media"}),ge.add({alias:"m01-mouth-cry00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-cry00.webp?alt=media"}),ge.add({alias:"m01-mouth-cry01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-cry01.webp?alt=media"}),ge.add({alias:"m01-mouth-grin00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-grin00.webp?alt=media"}),ge.add({alias:"m01-mouth-neutral00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-neutral00.webp?alt=media"}),ge.add({alias:"m01-mouth-neutral01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-neutral01.webp?alt=media"}),ge.add({alias:"m01-mouth-smile00",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-smile00.webp?alt=media"}),ge.add({alias:"m01-mouth-smile01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-smile01.webp?alt=media"}),ge.add({alias:"m01-mouth-wow01",src:"https://firebasestorage.googleapis.com/v0/b/pixi-vn.appspot.com/o/public%2Fbreakdown%2Fm01%2Fm01-mouth-wow01.webp?alt=media"}),await ge.load("background_main_menu")}const AQ=2,Cu="game_db",DO="saves";function EQ(){return new Promise((t,e)=>{let i=indexedDB.open(Cu,AQ);i.onupgradeneeded=function(r){let s=i.result;if(!s.objectStoreNames.contains(DO)){let a=s.createObjectStore(DO,{keyPath:"id",autoIncrement:!0});a.createIndex("id","id",{unique:!0}),a.createIndex("date","date",{unique:!1}),a.createIndex("name","name",{unique:!1}),a.createIndex("gameVersion","gameVersion",{unique:!1})}},i.onsuccess=function(r){t()},i.onerror=function(r){console.error("Error opening indexDB",r),e()}})}async function zQ(t,e){return new Promise((i,r)=>{let s=indexedDB.open(Cu);s.onsuccess=function(a){let l=s.result;l.objectStoreNames.contains(t)||(console.error("Object store rescues does not exist"),r());let f=l.transaction([t],"readwrite").objectStore(t).put(e);f.onsuccess=function(p){i(e)},f.onerror=function(p){console.error("Error adding save data to indexDB",p),r()}},s.onerror=function(a){console.error("Error adding save data to indexDB",a)}})}async function XQ(t,e){return new Promise((i,r)=>{let s=indexedDB.open(Cu);s.onsuccess=function(a){let l=s.result;if(!l.objectStoreNames.contains(t)){i(null);return}let f=l.transaction([t],"readwrite").objectStore(t).get(e);f.onsuccess=function(p){i(f.result)},f.onerror=function(p){console.error("Error getting save data from indexDB",p),r()}},s.onerror=function(a){console.error("Error opening indexDB",a),r()}})}async function YQ(t){return new Promise((e,i)=>{let r=indexedDB.open(Cu);r.onsuccess=function(s){let a=r.result;if(!a.objectStoreNames.contains(t)){e(null);return}let h=a.transaction([t],"readwrite").objectStore(t).openCursor(null,"prev");h.onsuccess=function(f){let p=h.result;e(p?p.value:null)},h.onerror=function(f){console.error("Error getting save data from indexDB",f),i()}},r.onerror=function(s){console.error("Error opening indexDB",s),i()}})}async function jQ(t,e){return new Promise((i,r)=>{let s=indexedDB.open(Cu);s.onsuccess=function(a){let f=s.result.transaction([t],"readwrite").objectStore(t).delete(e);f.onsuccess=function(p){i()},f.onerror=function(p){console.error("Error deleting save data from indexDB",p),r()}},s.onerror=function(a){console.error("Error deleting save data from indexDB",a)}})}async function qQ(t,e={}){return new Promise((i,r)=>{let s=indexedDB.open(Cu);s.onsuccess=function(a){var A,S;let l=s.result;if(!l.objectStoreNames.contains(t)){i([]);return}let h=l.transaction([t],"readwrite").objectStore(t),f=e.order?h.index(e.order.field).openCursor(null,e.order.direction):h.openCursor(),p=[],g=0,y=((A=e.pagination)==null?void 0:A.limit)??1/0,v=((S=e.pagination)==null?void 0:S.offset)??0,x=!1;f.onsuccess=w=>{let E=f.result;E?(g>=v&&(p.push(E.value),p.length>=y&&(i(p),x=!0)),g++,E.continue()):x||i(p)},f.onerror=function(w){console.error("Error getting save data from indexDB",w),r()}},s.onerror=function(a){console.error("Error opening indexDB",a),r()}})}function wQ(){const t=Ve.lazy(async()=>(await Promise.all([EQ(),SQ(),Xq()]),await f6(()=>import("./Home-K0KTNdjV.js"),__vite__mapDeps([0,1,2,3]))));return Vr.jsx(aq,{fallback:Vr.jsx("div",{children:"Something went wrong"}),children:Vr.jsx(Ve.Suspense,{fallback:Vr.jsx(TQ,{}),children:Vr.jsx(t,{})})})}const WQ="/shrimp-story",KQ="/shrimp-story/loading",$Q="/shrimp-story/narration",CQ="ui";class ks extends bw{constructor(i,r){super(typeof i=="string"?i:i.id,typeof i=="string"?"":i.emotion);me(this,"defaultName");me(this,"defaultSurname");me(this,"defaultAge");me(this,"icon");me(this,"color");this.defaultName=r.name,this.defaultSurname=r.surname,this.defaultAge=r.age,this.icon=r.icon,this.color=r.color}get name(){return this.getStorageProperty("name")||this.defaultName||this.id}set name(i){this.setStorageProperty("name",i)}get surname(){return this.getStorageProperty("surname")||this.defaultSurname}set surname(i){this.setStorageProperty("surname",i)}get age(){return this.getStorageProperty("age")||this.defaultAge}set age(i){this.setStorageProperty("age",i)}}const RQ=new ks("mc",{name:"Me",color:"#b0daec"}),MQ=new ks("james",{name:"James",color:"#0084ac"}),BQ=new ks("steph",{name:"Steph",color:"#ac5900"}),PQ=new ks("sly",{name:"Sly",color:"#6d00ac"}),DQ=new ks("Brian",{name:"Brian",color:"#23242e"}),OQ=new ks("coolBrian",{name:"Cool Brian",color:"#c70053"}),FQ=new ks("teacherBrian",{name:"Professor Le",color:"#00c200"}),GQ=new ks("baseballBrian",{name:"Downstair Roomate",color:"#fcbe03"}),LQ=new ks("rainBrian",{name:"Ryan",color:"#6800a8"}),kQ=new ks("girlBrian",{name:"Briana",color:"#ffb0ed"});pw([RQ,MQ,BQ,PQ,DQ,GQ,OQ,FQ,LQ,kQ]);const KH=document.body;if(!KH)throw new Error("body element not found");ae.initialize(KH,{height:1080,width:1920,backgroundColor:"#303030"}).then(()=>{ae.addLayer(CQ,new Ph);const t=document.getElementById("root");if(!t)throw new Error("root element not found");if(ae.initializeHTMLLayout(t),!ae.htmlLayout)throw new Error("htmlLayout not found");iq.createRoot(ae.htmlLayout).render(Vr.jsx(wQ,{}))});Ds.onGameEnd=async({navigate:t})=>{n6(),t("/")};Ds.onStepError=async(t,{notify:e,t:i})=>{e(i("allert_error_occurred"),{variant:"error"})};export{XQ as A,Nj as B,ks as C,CQ as D,ae as E,WQ as F,TQ as G,n6 as H,zj as I,v6 as L,b6 as M,$Q as N,_w as O,Tw as P,yi as T,ge as V,NQ as a,qq as b,jq as c,hj as d,RQ as e,pj as f,HQ as g,Ds as h,DQ as i,Au as j,GQ as k,OQ as l,xQ as m,kQ as n,YQ as o,zQ as p,a6 as q,LQ as r,KQ as s,FQ as t,Yq as u,o6 as v,jQ as w,DO as x,qQ as y,e6 as z};
